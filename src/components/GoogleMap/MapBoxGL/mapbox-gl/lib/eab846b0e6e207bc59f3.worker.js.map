{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/assert/assert.js","webpack:///./src/style/properties.js","webpack:///./src/util/util.js","webpack:///./src/util/web_worker_transfer.js","webpack:///./src/style-spec/expression/types.js","webpack:///./src/style-spec/error/validation_error.js","webpack:///./node_modules/@mapbox/point-geometry/index.js","webpack:///./src/style-spec/util/get_type.js","webpack:///./src/style-spec/reference/latest.js","webpack:///./src/style/style_layer.js","webpack:///./src/data/array_types.js","webpack:///./src/style-spec/expression/values.js","webpack:///./src/style-spec/util/unbundle_jsonlint.js","webpack:///./src/style-spec/util/color.js","webpack:///./src/style-spec/expression/index.js","webpack:///./src/style-spec/expression/runtime_error.js","webpack:///./src/style-spec/validate/validate.js","webpack:///./src/util/struct_array.js","webpack:///./src/data/extent.js","webpack:///./src/style-spec/util/interpolate.js","webpack:///./src/data/load_geometry.js","webpack:///./node_modules/@mapbox/vector-tile/index.js","webpack:///./src/style-spec/util/extend.js","webpack:///./src/style-spec/expression/compound_expression.js","webpack:///./src/style-spec/validate/validate_object.js","webpack:///./src/data/segment.js","webpack:///./src/data/program_configuration.js","webpack:///./src/data/index_array_type.js","webpack:///./src/util/intersection_tests.js","webpack:///./src/util/image.js","webpack:///./src/style/query_utils.js","webpack:///./src/util/script_detection.js","webpack:///./node_modules/pbf/index.js","webpack:///./src/style-spec/expression/evaluation_context.js","webpack:///./src/style-spec/expression/definitions/interpolate.js","webpack:///./src/style-spec/function/index.js","webpack:///./src/util/browser/window.js","webpack:///./src/style-spec/validate/validate_enum.js","webpack:///./src/style-spec/validate/validate_filter.js","webpack:///./src/style-spec/feature_filter/index.js","webpack:///./src/util/classify_rings.js","webpack:///./src/style/evaluation_parameters.js","webpack:///./src/data/bucket/symbol_bucket.js","webpack:///./src/source/rtl_text_plugin.js","webpack:///./src/util/ajax.js","webpack:///./src/symbol/anchor.js","webpack:///./node_modules/@mapbox/unitbezier/index.js","webpack:///./src/geo/coordinate.js","webpack:///./node_modules/grid-index/grid-index.js","webpack:///./node_modules/csscolorparser/csscolorparser.js","webpack:///./src/style-spec/expression/parsing_error.js","webpack:///./src/style-spec/expression/parsing_context.js","webpack:///./src/style-spec/expression/scope.js","webpack:///./src/style-spec/expression/definitions/literal.js","webpack:///./src/style-spec/expression/definitions/assertion.js","webpack:///./src/style-spec/expression/definitions/array.js","webpack:///./src/style-spec/expression/definitions/coercion.js","webpack:///./src/style-spec/expression/is_constant.js","webpack:///./src/style-spec/expression/definitions/var.js","webpack:///./src/style-spec/expression/definitions/step.js","webpack:///./src/style-spec/expression/stops.js","webpack:///./src/style-spec/expression/definitions/coalesce.js","webpack:///./src/style-spec/expression/definitions/let.js","webpack:///./src/style-spec/expression/definitions/index.js","webpack:///./src/style-spec/validate/validate_constants.js","webpack:///./src/style-spec/validate/validate_function.js","webpack:///./src/style-spec/validate/validate_array.js","webpack:///./src/style-spec/validate/validate_number.js","webpack:///./src/style-spec/validate/validate_expression.js","webpack:///./src/style-spec/validate/validate_layer.js","webpack:///./src/style-spec/validate/validate_paint_property.js","webpack:///./src/style-spec/validate/validate_property.js","webpack:///./src/style-spec/validate/validate_layout_property.js","webpack:///./src/style-spec/validate/validate_source.js","webpack:///./src/style-spec/validate/validate_light.js","webpack:///./src/style-spec/validate/validate_string.js","webpack:///./src/util/evented.js","webpack:///./src/data/bucket/circle_bucket.js","webpack:///./node_modules/earcut/src/earcut.js","webpack:///./node_modules/@mapbox/vector-tile/lib/vectortilelayer.js","webpack:///./node_modules/@mapbox/vector-tile/lib/vectortilefeature.js","webpack:///./src/util/verticalize_punctuation.js","webpack:///./src/source/vector_tile_worker_source.js","webpack:///./src/util/dictionary_coder.js","webpack:///./src/source/tile_id.js","webpack:///./node_modules/@mapbox/shelf-pack/index.umd.js","webpack:///./src/source/worker.js","webpack:///./src/util/actor.js","webpack:///./src/style-spec/util/deep_equal.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/object-assign/index.js","webpack:///./node_modules/util/util.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/util/support/isBufferBrowser.js","webpack:///./node_modules/util/node_modules/inherits/inherits_browser.js","webpack:///./src/style-spec/expression/definitions/at.js","webpack:///./src/style-spec/expression/definitions/match.js","webpack:///./src/style-spec/expression/definitions/case.js","webpack:///./src/style-spec/expression/definitions/equals.js","webpack:///./src/style-spec/util/result.js","webpack:///./src/style-spec/util/color_spaces.js","webpack:///./src/style/style_layer_index.js","webpack:///./src/style/validate_style.js","webpack:///./src/style-spec/validate_style.min.js","webpack:///./src/style-spec/validate/validate_boolean.js","webpack:///./src/style-spec/validate/validate_color.js","webpack:///./src/style-spec/validate/validate_glyphs_url.js","webpack:///./src/style/style_layer/circle_style_layer.js","webpack:///./src/data/bucket/circle_attributes.js","webpack:///./src/shaders/encode_attribute.js","webpack:///./src/style/style_layer/circle_style_layer_properties.js","webpack:///./src/style/style_layer/heatmap_style_layer.js","webpack:///./src/data/bucket/heatmap_bucket.js","webpack:///./src/style/style_layer/heatmap_style_layer_properties.js","webpack:///./src/style/style_layer/hillshade_style_layer.js","webpack:///./src/style/style_layer/hillshade_style_layer_properties.js","webpack:///./src/style/style_layer/fill_style_layer.js","webpack:///./src/data/bucket/fill_bucket.js","webpack:///./src/data/bucket/fill_attributes.js","webpack:///./node_modules/quickselect/quickselect.js","webpack:///./src/style/style_layer/fill_style_layer_properties.js","webpack:///./src/style/style_layer/fill_extrusion_style_layer.js","webpack:///./src/data/bucket/fill_extrusion_bucket.js","webpack:///./src/data/bucket/fill_extrusion_attributes.js","webpack:///./src/style/style_layer/fill_extrusion_style_layer_properties.js","webpack:///./src/style/style_layer/line_style_layer.js","webpack:///./src/data/bucket/line_bucket.js","webpack:///./src/data/bucket/line_attributes.js","webpack:///./node_modules/@mapbox/vector-tile/lib/vectortile.js","webpack:///./src/style/style_layer/line_style_layer_properties.js","webpack:///./src/style/zoom_history.js","webpack:///./src/style/style_layer/symbol_style_layer.js","webpack:///./src/data/bucket/symbol_attributes.js","webpack:///./src/symbol/transform_text.js","webpack:///./src/symbol/mergelines.js","webpack:///./src/util/is_char_in_unicode_block.js","webpack:///./src/symbol/symbol_size.js","webpack:///./src/util/token.js","webpack:///./src/style/style_layer/symbol_style_layer_properties.js","webpack:///./src/style/style_layer/background_style_layer.js","webpack:///./src/style/style_layer/background_style_layer_properties.js","webpack:///./src/style/style_layer/raster_style_layer.js","webpack:///./src/style/style_layer/raster_style_layer_properties.js","webpack:///./src/style-spec/group_by_layout.js","webpack:///./src/style-spec/util/ref_properties.js","webpack:///./node_modules/ieee754/index.js","webpack:///./src/source/worker_tile.js","webpack:///./src/data/feature_index.js","webpack:///./src/util/vectortile_to_geojson.js","webpack:///./node_modules/@mapbox/whoots-js/index.mjs","webpack:///./src/symbol/symbol_layout.js","webpack:///./src/symbol/get_anchors.js","webpack:///./src/symbol/check_max_angle.js","webpack:///./src/symbol/clip_line.js","webpack:///./src/symbol/opacity_state.js","webpack:///./src/symbol/shaping.js","webpack:///./src/symbol/quads.js","webpack:///./src/style/parse_glyph_pbf.js","webpack:///./src/symbol/collision_feature.js","webpack:///./src/util/find_pole_of_inaccessibility.js","webpack:///./node_modules/tinyqueue/index.js","webpack:///./src/render/image_atlas.js","webpack:///./src/render/glyph_atlas.js","webpack:///./src/source/raster_dem_tile_worker_source.js","webpack:///./src/data/dem_data.js","webpack:///./src/source/geojson_worker_source.js","webpack:///./node_modules/geojson-rewind/index.js","webpack:///./node_modules/@mapbox/geojson-area/index.js","webpack:///./node_modules/wgs84/index.js","webpack:///./src/source/geojson_wrapper.js","webpack:///./node_modules/vt-pbf/index.js","webpack:///./node_modules/vt-pbf/lib/geojson_wrapper.js","webpack:///./node_modules/supercluster/index.js","webpack:///./node_modules/kdbush/src/kdbush.js","webpack:///./node_modules/kdbush/src/sort.js","webpack:///./node_modules/kdbush/src/range.js","webpack:///./node_modules/kdbush/src/within.js","webpack:///./node_modules/geojson-vt/src/simplify.js","webpack:///./node_modules/geojson-vt/src/feature.js","webpack:///./node_modules/geojson-vt/src/convert.js","webpack:///./node_modules/geojson-vt/src/clip.js","webpack:///./node_modules/geojson-vt/src/wrap.js","webpack:///./node_modules/geojson-vt/src/transform.js","webpack:///./node_modules/geojson-vt/src/tile.js","webpack:///./node_modules/geojson-vt/src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","global","objectAssign","compare","a","b","x","length","y","len","Math","min","isBuffer","Buffer","_isBuffer","util","hasOwn","pSlice","Array","slice","functionsHaveNames","pToString","obj","toString","isView","arrbuf","ArrayBuffer","DataView","buffer","assert","ok","regex","getName","func","isFunction","match","truncate","inspect","something","rawname","fail","actual","expected","message","operator","stackStartFunction","AssertionError","_deepEqual","strict","memos","isDate","getTime","isRegExp","source","multiline","lastIndex","ignoreCase","Float32Array","Float64Array","Uint8Array","actualIndex","indexOf","push","actualVisitedObjects","isPrimitive","getPrototypeOf","aIsArgs","isArguments","bIsArgs","ka","objectKeys","kb","sort","objEquiv","expectedException","test","e","Error","isPrototypeOf","_throws","shouldThrow","block","TypeError","error","_tryBlock","userProvidedMessage","isUnexpectedException","isError","options","this","generatedMessage","self","getMessage","captureStackTrace","err","stack","out","fn_name","idx","next_line","substring","inherits","equal","notEqual","deepEqual","deepStrictEqual","notDeepEqual","notDeepStrictEqual","strictEqual","notStrictEqual","throws","doesNotThrow","ifError","keys","require","clone","extend","easeCubicInOut","interpolate","normalizePropertyExpression","register","PropertyValue","_classCallCheck","expression","undefined","specification","default","kind","parameters","possiblyEvaluate","TransitionablePropertyValue","prior","TransitioningPropertyValue","transition","now","Transitionable","properties","_properties","_values","defaultTransitionablePropertyValues","result","_i","_Object$keys","getValue","getTransition","concat","Transitioning","_i2","_Object$keys2","transitioned","_i3","_Object$keys3","untransitioned","begin","delay","end","duration","finalValue","isDataDriven","defaultTransitioningPropertyValues","PossiblyEvaluated","_i4","_Object$keys4","_i5","_Object$keys5","Layout","defaultPropertyValues","_i6","_Object$keys6","_i7","_Object$keys7","PossiblyEvaluatedPropertyValue","globals","feature","evaluate","defaultPossiblyEvaluatedValues","DataConstantProperty","interp","type","DataDrivenProperty","CrossFadedProperty","constant","_calculate","zoom","mid","max","z","fraction","floor","crossFadingFactor","zoomHistory","lastIntegerZoom","from","to","fromScale","toScale","HeatmapColorProperty","Properties","prop","defaultPropertyValue","defaultTransitionablePropertyValue","UnitBezier","Coordinate","t2","t3","bezier","p1x","p1y","p2x","p2y","solve","ease","clamp","wrap","w","asyncAll","array","fn","callback","remaining","results","forEach","item","values","k","keysDifference","other","difference","dest","_len","arguments","sources","_key","_sources","src","pick","id","uniqueId","bindAll","fns","context","getCoordinatesCenter","coords","minX","Infinity","minY","maxX","maxY","column","row","dx","dy","dMax","log","LN2","zoomTo","endsWith","string","suffix","mapObject","input","iterator","output","filterObject","isArray","map","_typeof","arraysIntersect","warnOnceHistory","warnOnce","console","warn","isCounterClockwise","calculateSignedArea","ring","p1","p2","sum","j","isClosedPolygon","points","abs","sphericalToCartesian","_ref","_ref2","_slicedToArray","azimuthal","polar","PI","cos","sin","parseCacheControl","cacheControl","header","replace","$0","$1","$2","$3","toLowerCase","maxAge","parseInt","isNaN","Grid","Color","StylePropertyFunction","StyleExpression","StyleExpressionWithErrorHandling","ZoomDependentExpression","ZoomConstantExpression","CompoundExpression","expressions","ImageData","registry","klass","writeable","omit","shallow","serialize","grid","transferables","ab","toArrayBuffer","deserialize","serialized","_classRegistryKey","Boolean","Number","String","Date","RegExp","view","data","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","return","constructor","_serialized","NullType","NumberType","StringType","BooleanType","ColorType","ObjectType","ValueType","itemType","N","valueMemberTypes","ErrorType","checkSubtype","_valueMemberTypes","__line__","line","Point","add","_add","sub","_sub","multByPoint","_multByPoint","divByPoint","_divByPoint","mult","_mult","div","_div","rotate","_rotate","rotateAround","_rotateAround","matMult","_matMult","unit","_unit","perp","_perp","round","_round","mag","sqrt","equals","dist","distSqr","angle","atan2","angleTo","angleWith","angleWithSep","convert","val","styleSpec","validateStyle","Evented","StyleLayer","layer","_this","_possibleConstructorReturn","_getPrototypeOf","metadata","minzoom","maxzoom","visibility","sourceLayer","filter","_featureFilter","layout","_unevaluatedLayout","_transitionablePaint","paint","setPaintProperty","validate","setLayoutProperty","_transitioningPaint","_validate","layoutProperty","setValue","paintProperty","setTransition","hasTransition","source-layer","emitErrors","layerType","objectKey","style","glyphs","sprite","subclasses","circle","heatmap","hillshade","fill","fill-extrusion","symbol","background","raster","StructArray","Struct","StructArrayLayout2i4","uint8","arrayBuffer","int16","Int16Array","v0","v1","resize","o2","bytesPerElement","StructArrayLayout4i8","v2","v3","StructArrayLayout2i4i12","v4","v5","StructArrayLayout4i4ub12","v6","v7","o1","StructArrayLayout4i4ui16","uint16","Uint16Array","StructArrayLayout3f12","float32","o4","StructArrayLayout1ul4","uint32","Uint32Array","StructArrayLayout6i1ul2ui2i24","v8","v9","v10","StructArrayLayout2i2i2i12","StructArrayLayout2ub4","StructArrayLayout2i2ui3ul3ui2f2ub40","v11","v12","v13","StructArrayLayout1f4","StructArrayLayout3i6","StructArrayLayout1ul2ui8","StructArrayLayout3ui6","StructArrayLayout2ui4","StructArrayLayout2f8","StructArrayLayout4f16","CollisionBoxStruct","_structArray","_pos2","_pos4","anchorPointX","anchorPointY","size","CollisionBoxArray","index","isTransferred","PlacedSymbolStruct","_pos1","PlacedSymbolArray","GlyphOffsetStruct","GlyphOffsetArray","SymbolLineVertexStruct","SymbolLineVertexArray","FeatureIndexStruct","FeatureIndexArray","PosArray","RasterBoundsArray","CircleLayoutArray","FillLayoutArray","FillExtrusionLayoutArray","HeatmapLayoutArray","LineLayoutArray","SymbolLayoutArray","SymbolDynamicLayoutArray","SymbolOpacityArray","CollisionBoxLayoutArray","CollisionCircleLayoutArray","CollisionVertexArray","TriangleIndexArray","LineIndexArray","validateRGBA","g","join","isValue","mixed","typeOf","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","unbundle","valueOf","deep","deepUnbundle","parseCSSColor","rgba","rgb","black","white","transparent","ParsingError","ParsingContext","EvaluationContext","Step","Interpolate","Coalesce","Let","definitions","isConstant","RuntimeError","success","_evaluator","propertySpec","spec","_warningHistory","_defaultValue","parse","_enumValues","v","JSON","stringify","isExpression","createExpression","parser","types","color","number","enum","boolean","getExpectedType","parsed","handleErrors","errors","_styleExpression","zoomCurve","zoomStops","labels","_interpolationType","interpolation","lower","upper","interpolationFactor","createPropertyExpression","isFeatureConstant","isZoomConstant","isGlobalPropertyConstant","findZoomCurve","args","arg","eachChild","child","childResult","createFunction","_parameters","_specification","validateFunction","validateExpression","validateObject","VALIDATORS","*","constants","function","light","valueSpec","viewTypes","Int8","Int8Array","Uint8","Int16","Uint16","Int32","Int32Array","Uint32","Float32","capacity","_trim","structArray","byteLength","_refreshViews","reserve","oldUint8Array","set","align","offset","ceil","_pos8","createLayout","members","alignment","maxSize","member","typeSize","BYTES_PER_ELEMENT","memberOffset","components","EXTENT","bits","bounds","pow","scale","extent","geometry","loadGeometry","point","VectorTile","VectorTileFeature","VectorTileLayer","inputs","_inputs","_evaluate","op","definition","availableOverloads","overloads","signature","parsedArgs","params","signatureContext","_step$value","path","scope","apply","signatures","_ref3","actualTypes","ctx","varargs","ValidationError","getType","validateSpec","elementSpecs","elementValidators","objectElementValidators","elementSpecKey","split","elementSpec","validateElement","required","MAX_VERTEX_ARRAY_LENGTH","SegmentVector","segments","numVertices","layoutVertexArray","indexArray","segment","vertexLength","vertexOffset","primitiveOffset","primitiveLength","vaos","destroy","packUint8ToFloat","packColor","ConstantBinder","statistics","program","currentValue","constantOr","gl","uniform4f","uniforms","uniform1f","SourceExpressionBinder","PaintVertexArray","paintVertexAttributes","paintVertexArray","paintArray","start","emplaceBack","paintVertexBuffer","createVertexBuffer","CompositeExpressionBinder","useIntegerZoom","minColor","maxColor","currentZoom","ProgramConfiguration","binders","cacheKey","_buffers","populatePaintArray","defines","setUniforms","upload","buffers","binder","filterProperties","paintAttributeName","ProgramConfigurationSet","layoutAttributes","layers","programConfigurations","createDynamic","populatePaintArrays","layerId","text-opacity","icon-opacity","text-color","icon-color","text-halo-color","icon-halo-color","text-halo-blur","icon-halo-blur","text-halo-width","icon-halo-width","line-gap-width","lineIntersectsBufferedLine","lineA","lineB","radius","lineIntersectsLine","pointIntersectsBufferedLine","a0","a1","lineSegmentIntersectsLineSegment","b0","b1","radiusSquared","distToSegmentSquared","l2","multiPolygonContainsPoint","rings","polygonContainsPoint","multiPolygonIntersectsBufferedMultiPoint","multiPolygon","polygon","multiPolygonIntersectsMultiPolygon","multiPolygonA","multiPolygonB","multiPolygonIntersectsBufferedMultiLine","multiLine","polygonIntersectsPolygon","polygonA","polygonB","createImage","image","channels","width","height","RangeError","resizeImage","newImage","copyImage","srcImg","dstImg","srcPt","dstPt","srcData","dstData","srcOffset","dstOffset","AlphaImage","RGBAImage","getMaximumPaintValue","bucket","translateDistance","translate","queryGeometry","translateAnchor","bearing","pixelsToTileUnits","pt","translated","translatedRing","isChar","allowsIdeographicBreaking","chars","char","charAllowsIdeographicBreaking","charCodeAt","allowsVerticalWritingMode","charHasUprightVerticalOrientation","allowsLetterSpacing","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","charAllowsLetterSpacing","charHasNeutralVerticalOrientation","charHasRotatedVerticalOrientation","Pbf","ieee754","buf","pos","Varint","Fixed64","Bytes","Fixed32","readPackedEnd","pbf","readVarint","toNum","low","high","isSigned","makeRoomForExtraLength","startPos","extraLen","realloc","writePackedVarint","arr","writeVarint","writePackedSVarint","writeSVarint","writePackedFloat","writeFloat","writePackedDouble","writeDouble","writePackedBoolean","writeBoolean","writePackedFixed32","writeFixed32","writePackedSFixed32","writeSFixed32","writePackedFixed64","writeFixed64","writePackedSFixed64","writeSFixed64","readUInt32","writeInt32","readInt32","readFields","readField","tag","skip","readMessage","readFixed32","readSFixed32","readFixed64","readSFixed64","readFloat","read","readDouble","h","readVarintRemainder","readVarint64","readSVarint","num","readBoolean","readString","str","b2","b3","bytesPerSequence","fromCharCode","readUtf8","readBytes","subarray","readPackedVarint","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","finish","writeBigVarintLow","lsb","writeBigVarintHigh","writeBigVarint","writeString","lead","writeUtf8","write","writeBytes","writeRawMessage","writeMessage","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","Scope","geometryTypes","_parseColorCache","bindings","parent","cached","findStopLessThanOrEqualTo","stops","outputs","label","exponentialInterpolation","base","controlPoints","_args","rest","some","outputType","expectedType","labelKey","valueKey","stopCount","outputLower","outputUpper","_toConsumableArray","possibleOutputs","lowerValue","upperValue","progress","colorSpaces","identityFunction","coalesce","evaluateCategoricalFunction","hashedStops","keyType","evaluateIntervalFunction","evaluateExponentialFunction","colorSpace","colorspace","reverse","forward","evaluatedLower","evaluatedUpper","evaluateIdentityFunction","lowerIndex","upperIndex","currentIndex","innerFun","categoricalKeyType","isColor","zoomAndFeatureDependent","featureDependent","zoomDependent","stop","featureFunctions","featureFunctionStops","_zoomStops","_","validateEnum","isExpressionFilter","expressionContext","validateNonExpressionFilter","filter_operator","geometry_type","f","convertFilter","compiled","filterSpec","globalProperties","property-function","zoom-function","filters","convertComparisonOp","convertNegation","convertInOp","convertHasOp","quickselect","compareAreas","area","maxRings","ccw","polygons","ZoomHistory","EvaluationParameters","fadeDuration","lastIntegerZoomTime","symbolLayoutAttributes","collisionVertexAttributes","collisionBoxLayout","collisionCircleLayout","dynamicLayoutAttributes","transformText","mergeLines","scriptDetection","vectorTileFeatureTypes","verticalizePunctuation","getSizeData","shaderOpacityAttributes","addVertex","anchorX","anchorY","ox","oy","tx","ty","sizeVertex","addDynamicAttributes","dynamicLayoutVertexArray","SymbolBuffers","opacityVertexArray","placedSymbolArray","dynamicIndexBuffer","layoutVertexBuffer","indexBuffer","createIndexBuffer","dynamicLayoutVertexBuffer","opacityVertexBuffer","itemSize","CollisionBuffers","LayoutArray","IndexArray","collisionVertexArray","collisionVertexBuffer","SymbolBucket","collisionBoxArray","overscaling","layerIds","pixelRatio","unevaluatedLayoutValues","textSizeData","iconSizeData","sortFeaturesByY","text","icon","collisionBox","collisionCircle","glyphOffsetArray","lineVertexArray","features","textFont","textField","iconImage","hasText","hasIcon","icons","iconDependencies","stacks","glyphDependencies","sourceLayerIndex","getValueAndResolveTokens","symbolFeature","fontStack","textAlongLine","verticalChar","lookup","charAt","symbolInstances","anchor","lineStartIndex","sumForwardLength","sumBackwardLength","vertices","tileUnitDistanceFromAnchor","vertex","lineLength","arrays","quads","lineOffset","alongLine","writingMode","labelAnchor","prepareSegment","glyphOffsetArrayStart","vertexStartIndex","tl","tr","bl","br","tex","glyphOffset","extrude","x1","y1","x2","y2","boxAnchorPoint","symbolInstance","isCircle","_addCollisionDebugVertex","textCollisionFeature","boxStartIndex","textBoxStartIndex","boxEndIndex","textBoxEndIndex","iconCollisionFeature","iconBoxStartIndex","iconBoxEndIndex","box","addCollisionDebugVertices","anchorPoint","textStartIndex","textEndIndex","iconStartIndex","iconEndIndex","collisionArrays","textBox","textCircles","signedDistanceFromAnchor","iconBox","sortedAngle","symbolInstanceIndexes","aIndex","bIndex","featureIndex","clear","_symbolInstanceIndexe","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","placedTextSymbolIndices","placedTextSymbolIndex","placedSymbol","endIndex","numGlyphs","vertexIndex","placedIcon","updateData","MAX_GLYPHS","ajax","window","pluginRequested","pluginBlobURL","evented","registerForPluginAvailability","errorCallback","once","createBlobURL","response","URL","createObjectURL","Blob","clearRTLTextPlugin","setRTLTextPlugin","pluginURL","getArrayBuffer","url","fire","applyArabicShaping","processBidirectionalText","ResourceType","Unknown","Style","Source","Tile","Glyphs","SpriteImage","SpriteJSON","Image","freeze","AJAXError","status","makeRequest","requestParameters","xhr","XMLHttpRequest","open","headers","setRequestHeader","withCredentials","credentials","getJSON","onerror","statusText","onload","send","responseType","getResponseHeader","expires","getImage","imgData","img","webkitURL","revokeObjectURL","blob","getVideo","urls","video","document","createElement","onloadstart","href","protocol","location","host","crossOrigin","appendChild","Anchor","cx","bx","ax","cy","by","ay","sampleCurveX","sampleCurveY","sampleCurveDerivativeX","solveCurveX","epsilon","t0","t1","d2","_zoomTo","GridIndex","NUM_PARAMS","padding","cells","keysOffset","bboxesOffset","bboxes","insert","_insertReadonly","uid","_forEachCell","_insertCell","cellIndex","query","intersectionTest","_queryCell","seenUids","cell","u","arg1","arg2","cx1","_convertToCellCoord","cy1","cx2","cy2","_convertFromCellCoord","metadataLength","totalCellLength","kCSSColorTable","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellow","yellowgreen","clamp_css_byte","clamp_css_float","parse_css_int","parseFloat","parse_css_float","css_hue_to_rgb","m1","m2","css_str","iv","substr","ep","fname","alpha","pop","Literal","Assertion","ArrayAssertion","Coercion","part","expr","Expr","omitTypeAnnotations","_require3","Var","literalArgs","ec","has","to-number","to-color","parseColor","startsWith","unshift","pushScope","popScope","At","Match","Case","==","Equals","!=","NotEquals","at","case","let","literal","step","var","lt","_ref5","_ref6","gt","_ref7","_ref8","lteq","_ref9","_ref10","gteq","_ref11","_ref12","_ref13","typeof","_ref15","to-string","_ref17","to-boolean","_ref19","to-rgba","_ref21","_v$evaluate","_ref23","_ref25","_ref26","_ref27","_ref29","_ref30","geometry-type","geometryType","heatmap-density","heatmapDensity","+","-","_ref31","_ref32","_ref33","/","_ref35","_ref36","%","_ref37","_ref38","ln2","pi","E","^","_ref39","_ref40","_ref41","log10","_ref43","ln","_ref45","log2","_ref47","_ref49","_ref51","_ref53","asin","_ref55","acos","_ref57","atan","_ref59","filter-==","_ref61","_ref62","filter-id-==","_ref63","filter-type-==","_ref65","filter-<","_ref67","_ref68","filter-id-<","_ref69","filter->","_ref71","_ref72","filter-id->","_ref73","filter-<=","_ref75","_ref76","filter-id-<=","_ref77","filter->=","_ref79","_ref80","filter-id->=","_ref81","filter-has","_ref83","filter-has-id","filter-type-in","_ref85","filter-id-in","_ref87","filter-in-small","_ref89","_ref90","filter-in-large","_ref91","_ref92","binarySearch",">","<",">=","<=","all","_ref93","_ref94","any","_ref95","_ref96","!","_ref97","upcase","_ref99","toUpperCase","downcase","_ref101","validateArray","validateNumber","stopKeyType","previousStopDomainValue","previousStopDomainZoom","functionValueSpec","functionType","stopDomainValues","isZoomFunction","isPropertyFunction","isZoomAndPropertyFunction","arrayElementValidator","validateFunctionStop","$version","validateStopDomainValue","reportValue","isFinite","arraySpec","validateArrayElement","arrayElementSpec","arrayIndex","minimum","maximum","propertyKey","validateFilter","validatePaintProperty","validateLayoutProperty","ref","otherLayer","sourceType","validateProperty","propertyType","layerSpec","transitionMatch","tokenMatch","tokens","exec","source_geojson","source_video","source_image","source_canvas","lightSpec","rootType","_addEventListener","listener","listenerList","_removeEventListener","splice","_listeners","_oneTimeListeners","listens","target","listeners","oneTimeListeners","_eventedParent","_eventedParentData","addCircleVertex","extrudeX","extrudeY","CircleBucket","addFeature","earcut","holeIndices","dim","invSize","hasHoles","outerLen","outerNode","linkedList","triangles","prev","list","queue","steiner","getLeftmost","compareX","eliminateHole","filterPoints","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","removeNode","again","ear","pass","zOrder","prevZ","nextZ","q","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","minZ","maxZ","intersects","locallyInside","isValidDiagonal","splitPolygon","hole","hx","hy","qx","mx","my","tanMin","findHoleBridge","leftmost","px","py","intersectsPolygon","inside","middleInside","q1","q2","a2","Node","an","bp","deviation","polygonArea","trianglesArea","flatten","holes","dimensions","holeIndex","version","_pbf","_keys","_features","readLayer","readValueMessage","_geometry","readFeature","readTag","cmd","lines","cmdLen","bbox","toGeoJSON","x0","y0","project","exp","classifyRings","coordinates","nextCharCode","prevCharCode","#","$","&","(",")",",",".",":",";","=","?","@","[","\\","]","`","{","|","}","~","¢","£","¥","¦","¬","¯","–","—","‘","’","“","”","…","‧","₩","、","。","〈","〉","《","》","「","」","『","』","【","】","〔","〕","〖","〗","！","（","）","，","－","．","：","；","＜","＞","？","［","］","＿","｛","｜","｝","｟","｠","｡","｢","｣","vt","Protobuf","WorkerTile","loadVectorTile","request","vectorTile","rawData","abort","VectorTileWorkerSource","actor","layerIndex","loadVectorData","loading","loaded","workerTile","rawTileData","vtSource","showCollisionBoxes","reloadCallback","DictionaryCoder","strings","_stringToNumber","_numberToString","WhooTS","CanonicalTileID","calculateKey","scheme","getTileBBox","quadkey","mask","getQuadkey","UnwrappedTileID","canonical","posMatrix","OverscaledTileID","overscaledZ","targetZ","zDifference","sourceMaxZoom","rhs","ShelfPack$1","autoResize","shelves","freebins","stats","bins","maxId","Shelf","free","Bin","maxw","maxh","refcount","pack","allocation","packOne","inPlace","shrink","bin","shelf","waste","h1","h2","w1","w2","best","freebin","getBin","allocFreebin","allocShelf","alloc","unref","factory","Actor","StyleLayerIndex","RasterDEMTileWorkerSource","GeoJSONWorkerSource","globalRTLTextPlugin","Worker","layerIndexes","workerSourceTypes","vector","geojson","workerSources","demWorkerSources","registerWorkerSource","WorkerSource","registerRTLTextPlugin","rtlTextPlugin","mapId","getLayerIndex","update","removedIds","getWorkerSource","loadTile","getDEMWorkerSource","reloadTile","abortTile","removeTile","worker","removeSource","importScripts","_this2","callbacks","callbackID","addEventListener","receive","targetMapId","postMessage","sourceMapId","removeEventListener","Function","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","assign","test1","getOwnPropertyNames","test2","test3","letter","shouldUseNative","symbols","toObject","process","getOwnPropertyDescriptors","descriptors","getOwnPropertyDescriptor","formatRegExp","format","isString","objects","isNull","isObject","deprecate","msg","noDeprecation","warned","throwDeprecation","traceDeprecation","trace","debugEnviron","debugs","opts","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","styles","recurseTimes","ret","primitive","simple","isNumber","formatPrimitive","visibleKeys","hash","arrayToHash","formatError","braces","toUTCString","formatProperty","formatArray","reduce","cur","numLinesEst","reduceToSingleString","desc","ar","re","objectToString","pad","debuglog","env","NODE_DEBUG","pid","bold","italic","underline","inverse","special","null","date","regexp","isNullOrUndefined","isSymbol","months","time","getHours","getMinutes","getSeconds","getDate","getMonth","origin","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","cb","newReason","promisify","original","writable","configurable","promiseResolve","promiseReject","promise","Promise","resolve","reject","setPrototypeOf","defineProperties","custom","callbackify","callbackified","maybeCb","then","nextTick","rej","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","title","browser","argv","versions","on","addListener","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","copy","readUInt8","ctor","superCtor","super_","TempCtor","inputType","cases","otherwise","labelContext","MAX_SAFE_INTEGER","branches","_step2$value","isComparableType","makeComparison","Comparison","lhs","interpolateNumber","Xn","Yn","Zn","deg2rad","rad2deg","xyz2lab","lab2xyz","xyz2rgb","rgb2xyz","rgbToLab","rgbColor","labToRgb","labColor","interpolateHue","lab","hcl","_rgbToLab","hclColor","featureFilter","groupByLayout","layerConfigs","_layerConfigs","_layers","layerConfig","familiesBySource","groups","sourceId","sourceGroup","sourceLayerId","sourceLayerFamilies","emitter","validateConstants","latestStyleSpec","validateGlyphsURL","validateStyleMin","$root","sortErrors","wrapCleanErrors","inner","validateString","CircleStyleLayer","circleBucket","translatedPolygon","stroke","circle-radius","circle-color","circle-blur","circle-opacity","circle-translate","circle-translate-anchor","circle-pitch-scale","circle-pitch-alignment","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","HeatmapBucket","HeatmapStyleLayer","_updateColorRamp","_get","colorRampData","pxColor","colorRamp","colorRampTexture","heatmapFbo","heatmap-radius","heatmap-weight","heatmap-intensity","heatmap-color","heatmap-opacity","HillshadeStyleLayer","hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-shadow-color","hillshade-highlight-color","hillshade-accent-color","FillBucket","FillStyleLayer","indexArray2","segments2","indexBuffer2","triangleSegment","triangleIndex","flattened","lineSegment","lineIndex","indices","swap","tmp","defaultCompare","left","right","quickselectStep","sd","newLeft","newRight","fill-antialias","fill-opacity","fill-color","fill-outline-color","fill-translate","fill-translate-anchor","fill-pattern","FillExtrusionBucket","FillExtrusionStyleLayer","viewportFrame","FACTOR","vertexArray","nx","ny","nz","isEntirelyOutside","edgeDistance","isBoundaryEdge","bottomRight","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","every","fill-extrusion-opacity","fill-extrusion-color","fill-extrusion-translate","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-height","fill-extrusion-base","LineBucket","lineFloorwidthProperty","LineFloorwidthProperty","LineStyleLayer","lineBucket","getLineWidth","halfWidth","newRings","zero","newRing","aToB","bToC","cosHalfAngle","offsetLine","lineWidth","lineGapWidth","EXTRUDE_SCALE","COS_HALF_SHARP_CORNER","LINE_DISTANCE_SCALE","MAX_LINE_DISTANCE","LINE_DISTANCE_BUFFER_BITS","addLineVertex","up","linesofar","cap","miterLimit","roundLimit","addLine","isPolygon","first","sharpCornerOffset","firstVertex","distance","currentVertex","offsetA","offsetB","beginCap","endCap","startOfLine","prevVertex","nextVertex","prevNormal","nextNormal","e1","e2","e3","joinNormal","miterLength","isSharpCorner","prevSegmentLength","newPrevVertex","addCurrentVertex","middleVertex","currentJoin","direction","bevelLength","lineTurnsLeft","approxFractionalJoinNormal","addPieSliceVertex","nextSegmentLength","newCurrentVertex","normal","endLeft","endRight","readTile","line-cap","line-join","line-miter-limit","line-round-limit","line-opacity","line-color","line-translate","line-translate-anchor","line-width","line-offset","line-blur","line-dasharray","line-pattern","floorZ","lastZoom","lastFloorZoom","resolveTokens","SymbolStyleLayer","unevaluated","symbolAttributes","placementOpacityAttributes","placement","lineVertex","transform","toLocaleUpperCase","toLocaleLowerCase","leftIndex","rightIndex","mergedFeatures","mergedIndex","mergeFromRight","leftKey","rightKey","geom","mergeFromLeft","shift","getKey","onRight","Latin-1 Supplement","Arabic","Arabic Supplement","Arabic Extended-A","Hangul Jamo","Unified Canadian Aboriginal Syllabics","Unified Canadian Aboriginal Syllabics Extended","General Punctuation","Letterlike Symbols","Number Forms","Miscellaneous Technical","Control Pictures","Optical Character Recognition","Enclosed Alphanumerics","Geometric Shapes","Miscellaneous Symbols","Miscellaneous Symbols and Arrows","CJK Radicals Supplement","Kangxi Radicals","Ideographic Description Characters","CJK Symbols and Punctuation","Hiragana","Katakana","Bopomofo","Hangul Compatibility Jamo","Kanbun","Bopomofo Extended","CJK Strokes","Katakana Phonetic Extensions","Enclosed CJK Letters and Months","CJK Compatibility","CJK Unified Ideographs Extension A","Yijing Hexagram Symbols","CJK Unified Ideographs","Yi Syllables","Yi Radicals","Hangul Jamo Extended-A","Hangul Syllables","Hangul Jamo Extended-B","Private Use Area","CJK Compatibility Ideographs","Arabic Presentation Forms-A","Vertical Forms","CJK Compatibility Forms","Small Form Variants","Arabic Presentation Forms-B","Halfwidth and Fullwidth Forms","tileZoom","layoutSize","levels","zoomRange","propertyValue","sizeRange","evaluateSizeForFeature","sizeData","partiallyEvaluatedSize","lowerSize","upperSize","uSizeT","uSize","evaluateSizeForZoom","toFixed","formatNumber","symbol-placement","symbol-spacing","symbol-avoid-edges","icon-allow-overlap","icon-ignore-placement","icon-optional","icon-rotation-alignment","icon-size","icon-text-fit","icon-text-fit-padding","icon-image","icon-rotate","icon-padding","icon-keep-upright","icon-offset","icon-anchor","icon-pitch-alignment","text-pitch-alignment","text-rotation-alignment","text-field","text-font","text-size","text-max-width","text-line-height","text-letter-spacing","text-justify","text-anchor","text-max-angle","text-rotate","text-padding","text-keep-upright","text-transform","text-offset","text-allow-overlap","text-ignore-placement","text-optional","icon-translate","icon-translate-anchor","text-translate","text-translate-anchor","BackgroundStyleLayer","background-color","background-pattern","background-opacity","RasterStyleLayer","raster-opacity","raster-hue-rotate","raster-brightness-min","raster-brightness-max","raster-saturation","raster-contrast","raster-fade-duration","refProperties","group","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","FeatureIndex","performSymbolLayout","makeImageAtlas","makeGlyphAtlas","tileID","tileSize","sourceLayerCoder","bucketLayerIDs","glyphMap","imageMap","buckets","layerFamilies","encode","family","recalculateLayers","createBucket","populate","maybePrepare","glyphAtlas","imageAtlas","positions","isEmpty","glyphAtlasImage","iconAtlasImage","recalculate","GeoJSONFeature","featureIndexArray","bucketIndex","styleLayers","vtLayers","additionalRadius","matching","topDownFeatureComparator","filterMatching","matchingSymbols","collisionIndex","queryRenderedSymbols","sourceID","bucketInstanceIds","filterLayerIDs","previousIndex","layerIDs","sourceLayerName","decode","layerID","styleLayer","queryIntersectsFeature","geojsonFeature","layerResult","Feature","vectorTileFeature","_vectorTileFeature","_z","_x","_y","json","getURL","baseUrl","service","srs","getMercCoords","resolution","__webpack_exports__","getAnchors","clipLine","OpacityState","shapeText","shapeIcon","WritingMode","getGlyphQuads","getIconQuads","CollisionFeature","findPoleOfInaccessibility","shapedTextOrientations","shapedIcon","glyphPositionMap","sizes","layoutTextSize","layoutIconSize","textMaxSize","textOffset","iconOffset","fontScale","textBoxScale","tilePixelRatio","textMaxBoxScale","iconBoxScale","symbolMinDistance","textPadding","iconPadding","textMaxAngle","iconAlongLine","textRepeatDistance","addSymbolAtAnchor","lineArray","addToLineVertexArray","numIconVertices","numGlyphVertices","numVerticalGlyphVertices","horizontal","addTextVertices","vertical","horizontalOnly","iconQuads","compositeIconSizes","addSymbols","textOpacityState","iconOpacityState","isDuplicate","crossTileID","addSymbol","anchors","shapedText","anchorIsTooClose","poi","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","glyphQuads","compositeTextSizes","repeatDistance","compareText","otherAnchors","glyphPositions","imagePositions","createArrays","iconsNeedLinear","_bucket$textSizeData$","_bucket$iconSizeData$","lineHeight","keepUpright","fontstack","spacing","spacingIfAllowed","textAnchor","textJustify","maxWidth","sdfIcons","sdf","generateCollisionDebugBuffers","checkMaxAngle","maxAngle","glyphSize","boxScale","tileExtent","angleWindowSize","labelLength","isLineContinued","fixedExtraOffset","resample","placeAtMiddle","halfLabelLength","markedDistance","segmentDist","windowSize","anchorDistance","recentCorners","recentAngleDelta","current","angleDelta","clippedLines","clippedLine","p0","opacity","targetOpacity","verticalHeight","logicalInput","trim","positionedGlyphs","shaping","top","bottom","determineLineBreaks","lineBreakPoints","lineBreak","breakLines","maxLineLength","justify","codePoint","glyph","metrics","advance","justifyLine","_getAnchorAlignment","getAnchorAlignment","horizontalAlign","verticalAlign","lineCount","shiftX","shiftY","shapeLines","iconAnchor","_getAnchorAlignment2","displaySize","whitespace","_defineProperty","_whitespace","breakable","_breakable","calculateBadness","targetWidth","penalty","isLastBreak","raggedness","calculatePenalty","nextCodePoint","evaluateBreak","breakIndex","breakX","potentialBreaks","bestPriorBreak","bestBreakBadness","potentialBreak","breakBadness","badness","priorBreak","potentialLineBreaks","totalWidth","determineAverageLineWidth","currentX","leastBadBreaks","lastLineBreak","lastAdvance","lineIndent","GLYPH_PBF_BORDER","iconWidth","iconHeight","textLeft","textRight","textTop","textBottom","textWidth","textHeight","padT","padR","padB","padL","offsetY","offsetX","matrix","textureRect","border","textRotate","positionedGlyph","rect","rectBuffer","halfAdvance","builtInOffset","center","verticalRotation","xOffsetCorrection","readFontstacks","readFontstack","_pbf$readMessage","readGlyph","bitmap","shaped","alignLine","_addLineCollisionCircles","boxSize","nBoxes","overscalingPaddingFactor","nPitchPaddingBoxes","firstBoxOffset","labelStartDistance","paddingStartDistance","segmentLength","boxOffset","boxDistanceToAnchor","segmentBoxDistance","paddedAnchorDistance","Queue","compareMax","Cell","minDistSq","pointToPolygonDist","SQRT2","polygonRings","precision","debug","outerRing","cellSize","cellQueue","bestCell","getCentroidCell","numProbes","TinyQueue","_down","_up","peek","halfLength","ShelfPack","imagePosition","images","stackPositions","DEMData","dem","loadFromImage","rawImageData","Level","stride","_idx","level","pixels","borderTile","_xMin","_xMax","_yMin","_yMax","xMin","xMax","yMin","yMax","rewind","GeoJSONWrapper","vtpbf","supercluster","geojsonvt","loadGeoJSONTile","_geoJSONIndexes","geoJSONTile","getTile","geojsonWrapper","byteOffset","loadGeoJSON","cluster","superclusterOptions","load","geojsonVtOptions","geojsonArea","curryOuter","correctRings","outer","wind","cw","gj","correct","wgs84","ringArea","middleIndex","coordsLength","rad","RADIUS","geometries","FLATTENING","POLAR_RADIUS","FeatureWrapper","_feature","tags","_geojsonTileLayer","fromVectorTileJs","tile","writeLayer","writeTile","keycache","valuecache","writeFeature","writeValue","writeProperties","writeGeometry","keyIndex","valueIndex","command","zigzag","count","fromGeojsonVt","rawGeometry","coord","kdbush","SuperCluster","trees","maxZoom","createCluster","numPoints","parentId","createPointCluster","lngX","latY","getClusterJSON","getClusterProperties","abbrev","cluster_id","point_count","point_count_abbreviated","lng","lat","getX","getY","minZoom","nodeSize","initial","props","timerId","clusters","timeEnd","_cluster","getClusters","tree","_limitZoom","ids","range","getChildren","clusterId","clusterZoom","within","children","getLeaves","limit","leaves","_appendLeaves","z2","_addTileFeatures","getClusterExpansionZoom","skipped","neighborIds","wx","wy","clusterProperties","_accumulate","numPoints2","KDBush","ArrayType","defaultGetX","defaultGetY","swapItem","sortKD","select","inc","axis","nextAxis","sqDist","qy","r2","getSqSegDist","createFeature","calcLineBBox","calcBBox","convertFeature","tolerance","promoteId","generateId","convertPoint","convertLine","lineMetrics","convertLines","projectX","projectY","simplify","sqTolerance","maxSqDist","minPosToMid","posToMid","clip","k1","k2","minAll","maxAll","clipped","newGeometry","clipPoints","clipLines","newGeom","trackMetrics","segLen","newSlice","intersect","intersectX","intersectY","az","exited","addPoint","shiftFeatureCoords","newFeatures","shiftCoords","newPolygon","newPoints","transformTile","transformed","transformPoint","createTile","numSimplified","numFeatures","simplified","tileFeature","isOuter","GeoJSONVT","tiles","tileCoords","indexMaxZoom","indexMaxPoints","total","merged","splitTile","toID","cz","k3","k4","z0"],"mappings":"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","file":"eab846b0e6e207bc59f3.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 86);\n","'use strict';\n\nvar objectAssign = require('object-assign');\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n// NB: The URL to the CommonJS spec is kept just for tradition.\n//     node-assert has evolved a lot since then, both in API and behavior.\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\n// Expose a strict only variant of assert\nfunction strict(value, message) {\n  if (!value) fail(value, true, message, '==', strict);\n}\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n","// @flow\n\nconst assert = require('assert');\nconst {clone, extend, easeCubicInOut} = require('../util/util');\nconst interpolate = require('../style-spec/util/interpolate');\nconst {normalizePropertyExpression} = require('../style-spec/expression');\nconst Color = require('../style-spec/util/color');\nconst {register} = require('../util/web_worker_transfer');\n\nimport type {StylePropertySpecification} from '../style-spec/style-spec';\nimport type {CrossFaded} from './cross_faded';\nimport type EvaluationParameters from './evaluation_parameters';\n\nimport type {\n    Feature,\n    GlobalProperties,\n    StylePropertyExpression,\n    SourceExpression,\n    CompositeExpression\n} from '../style-spec/expression';\n\ntype TimePoint = number;\n\n/**\n * Implements a number of classes that define state and behavior for paint and layout properties, most\n * importantly their respective evaluation chains:\n *\n *       Transitionable paint property value\n *     → Transitioning paint property value\n *     → Possibly evaluated paint property value\n *     → Fully evaluated paint property value\n *\n *       Layout property value\n *     → Possibly evaluated layout property value\n *     → Fully evaluated layout property value\n *\n * @module\n * @private\n */\n\n/**\n *  Implementations of the `Property` interface:\n *\n *  * Hold metadata about a property that's independent of any specific value: stuff like the type of the value,\n *    the default value, etc. This comes from the style specification JSON.\n *  * Define behavior that needs to be polymorphic across different properties: \"possibly evaluating\"\n *    an input value (see below), and interpolating between two possibly-evaluted values.\n *\n *  The type `T` is the fully-evaluated value type (e.g. `number`, `string`, `Color`).\n *  The type `R` is the intermediate \"possibly evaluated\" value type. See below.\n *\n *  There are two main implementations of the interface -- one for properties that allow data-driven values,\n *  and one for properties that don't. There are a few \"special case\" implementations as well: one for properties\n *  which cross-fade between two values rather than interpolating, one for `heatmap-color`, and one for\n *  `light-position`.\n *\n * @private\n */\nexport interface Property<T, R> {\n    specification: StylePropertySpecification;\n    possiblyEvaluate(value: PropertyValue<T, R>, parameters: EvaluationParameters): R;\n    interpolate(a: R, b: R, t: number): R;\n}\n\n/**\n *  `PropertyValue` represents the value part of a property key-value unit. It's used to represent both\n *  paint and layout property values, and regardless of whether or not their property supports data-driven\n *  expressions.\n *\n *  `PropertyValue` stores the raw input value as seen in a style or a runtime styling API call, i.e. one of the\n *  following:\n *\n *    * A constant value of the type appropriate for the property\n *    * A function which produces a value of that type (but functions are quasi-deprecated in favor of expressions)\n *    * An expression which produces a value of that type\n *    * \"undefined\"/\"not present\", in which case the property is assumed to take on its default value.\n *\n *  In addition to storing the original input value, `PropertyValue` also stores a normalized representation,\n *  effectively treating functions as if they are expressions, and constant or default values as if they are\n *  (constant) expressions.\n *\n *  @private\n */\nclass PropertyValue<T, R> {\n    property: Property<T, R>;\n    value: PropertyValueSpecification<T> | void;\n    expression: StylePropertyExpression;\n\n    constructor(property: Property<T, R>, value: PropertyValueSpecification<T> | void) {\n        this.property = property;\n        this.value = value;\n        this.expression = normalizePropertyExpression(value === undefined ? property.specification.default : value, property.specification);\n    }\n\n    isDataDriven(): boolean {\n        return this.expression.kind === 'source' || this.expression.kind === 'composite';\n    }\n\n    possiblyEvaluate(parameters: EvaluationParameters): R {\n        return this.property.possiblyEvaluate(this, parameters);\n    }\n}\n\n// ------- Transitionable -------\n\nexport type TransitionParameters = {\n    now: TimePoint,\n    transition: TransitionSpecification\n};\n\n/**\n * Paint properties are _transitionable_: they can change in a fluid manner, interpolating or cross-fading between\n * old and new value. The duration of the transition, and the delay before it begins, is configurable.\n *\n * `TransitionablePropertyValue` is a compositional class that stores both the property value and that transition\n * configuration.\n *\n * A `TransitionablePropertyValue` can calculate the next step in the evaluation chain for paint property values:\n * `TransitioningPropertyValue`.\n *\n * @private\n */\nclass TransitionablePropertyValue<T, R> {\n    property: Property<T, R>;\n    value: PropertyValue<T, R>;\n    transition: TransitionSpecification | void;\n\n    constructor(property: Property<T, R>) {\n        this.property = property;\n        this.value = new PropertyValue(property, undefined);\n    }\n\n    transitioned(parameters: TransitionParameters,\n                 prior: TransitioningPropertyValue<T, R>): TransitioningPropertyValue<T, R> {\n        return new TransitioningPropertyValue(this.property, this.value, prior, // eslint-disable-line no-use-before-define\n            extend({}, parameters.transition, this.transition), parameters.now);\n    }\n\n    untransitioned(): TransitioningPropertyValue<T, R> {\n        return new TransitioningPropertyValue(this.property, this.value, null, {}, 0); // eslint-disable-line no-use-before-define\n    }\n}\n\n/**\n * A helper type: given an object type `Properties` whose values are each of type `Property<T, R>`, it calculates\n * an object type with the same keys and values of type `TransitionablePropertyValue<T, R>`.\n *\n * @private\n */\ntype TransitionablePropertyValues<Props: Object>\n    = $Exact<$ObjMap<Props, <T, R>(p: Property<T, R>) => TransitionablePropertyValue<T, R>>>\n\n/**\n * `Transitionable` stores a map of all (property name, `TransitionablePropertyValue`) pairs for paint properties of a\n * given layer type. It can calculate the `TransitioningPropertyValue`s for all of them at once, producing a\n * `Transitioning` instance for the same set of properties.\n *\n * @private\n */\nclass Transitionable<Props: Object> {\n    _properties: Properties<Props>;\n    _values: TransitionablePropertyValues<Props>;\n\n    constructor(properties: Properties<Props>) {\n        this._properties = properties;\n        this._values = (Object.create(properties.defaultTransitionablePropertyValues): any);\n    }\n\n    getValue<S: string, T>(name: S): PropertyValueSpecification<T> | void {\n        return clone(this._values[name].value.value);\n    }\n\n    setValue<S: string, T>(name: S, value: PropertyValueSpecification<T> | void) {\n        if (!this._values.hasOwnProperty(name)) {\n            this._values[name] = new TransitionablePropertyValue(this._values[name].property);\n        }\n        // Note that we do not _remove_ an own property in the case where a value is being reset\n        // to the default: the transition might still be non-default.\n        this._values[name].value = new PropertyValue(this._values[name].property, value === null ? undefined : clone(value));\n    }\n\n    getTransition<S: string>(name: S): TransitionSpecification | void {\n        return clone(this._values[name].transition);\n    }\n\n    setTransition<S: string>(name: S, value: TransitionSpecification | void) {\n        if (!this._values.hasOwnProperty(name)) {\n            this._values[name] = new TransitionablePropertyValue(this._values[name].property);\n        }\n        this._values[name].transition = clone(value) || undefined;\n    }\n\n    serialize() {\n        const result: any = {};\n        for (const property of Object.keys(this._values)) {\n            const value = this.getValue(property);\n            if (value !== undefined) {\n                result[property] = value;\n            }\n\n            const transition = this.getTransition(property);\n            if (transition !== undefined) {\n                result[`${property}-transition`] = transition;\n            }\n        }\n        return result;\n    }\n\n    transitioned(parameters: TransitionParameters, prior: Transitioning<Props>): Transitioning<Props> {\n        const result = new Transitioning(this._properties); // eslint-disable-line no-use-before-define\n        for (const property of Object.keys(this._values)) {\n            result._values[property] = this._values[property].transitioned(parameters, prior._values[property]);\n        }\n        return result;\n    }\n\n    untransitioned(): Transitioning<Props> {\n        const result = new Transitioning(this._properties); // eslint-disable-line no-use-before-define\n        for (const property of Object.keys(this._values)) {\n            result._values[property] = this._values[property].untransitioned();\n        }\n        return result;\n    }\n}\n\n// ------- Transitioning -------\n\n/**\n * `TransitioningPropertyValue` implements the first of two intermediate steps in the evaluation chain of a paint\n * property value. In this step, transitions between old and new values are handled: as long as the transition is in\n * progress, `TransitioningPropertyValue` maintains a reference to the prior value, and interpolates between it and\n * the new value based on the current time and the configured transition duration and delay. The product is the next\n * step in the evaluation chain: the \"possibly evaluated\" result type `R`. See below for more on this concept.\n *\n * @private\n */\nclass TransitioningPropertyValue<T, R> {\n    property: Property<T, R>;\n    value: PropertyValue<T, R>;\n    prior: ?TransitioningPropertyValue<T, R>;\n    begin: TimePoint;\n    end: TimePoint;\n\n    constructor(property: Property<T, R>,\n                value: PropertyValue<T, R>,\n                prior: ?TransitioningPropertyValue<T, R>,\n                transition: TransitionSpecification,\n                now: TimePoint) {\n        this.property = property;\n        this.value = value;\n        this.begin = now + transition.delay || 0;\n        this.end = this.begin + transition.duration || 0;\n        if (property.specification.transition && (transition.delay || transition.duration)) {\n            this.prior = prior;\n        }\n    }\n\n    possiblyEvaluate(parameters: EvaluationParameters): R {\n        const now = parameters.now || 0;\n        const finalValue = this.value.possiblyEvaluate(parameters);\n        const prior = this.prior;\n        if (!prior) {\n            // No prior value.\n            return finalValue;\n        } else if (now > this.end) {\n            // Transition from prior value is now complete.\n            this.prior = null;\n            return finalValue;\n        } else if (this.value.isDataDriven()) {\n            // Transitions to data-driven properties are not supported.\n            // We snap immediately to the data-driven value so that, when we perform layout,\n            // we see the data-driven function and can use it to populate vertex buffers.\n            this.prior = null;\n            return finalValue;\n        } else if (now < this.begin) {\n            // Transition hasn't started yet.\n            return prior.possiblyEvaluate(parameters);\n        } else {\n            // Interpolate between recursively-calculated prior value and final.\n            const t = (now - this.begin) / (this.end - this.begin);\n            return this.property.interpolate(prior.possiblyEvaluate(parameters), finalValue, easeCubicInOut(t));\n        }\n    }\n}\n\n/**\n * A helper type: given an object type `Properties` whose values are each of type `Property<T, R>`, it calculates\n * an object type with the same keys and values of type `TransitioningPropertyValue<T, R>`.\n *\n * @private\n */\ntype TransitioningPropertyValues<Props: Object>\n    = $Exact<$ObjMap<Props, <T, R>(p: Property<T, R>) => TransitioningPropertyValue<T, R>>>\n\n/**\n * `Transitioning` stores a map of all (property name, `TransitioningPropertyValue`) pairs for paint properties of a\n * given layer type. It can calculate the possibly-evaluated values for all of them at once, producing a\n * `PossiblyEvaluated` instance for the same set of properties.\n *\n * @private\n */\nclass Transitioning<Props: Object> {\n    _properties: Properties<Props>;\n    _values: TransitioningPropertyValues<Props>;\n\n    constructor(properties: Properties<Props>) {\n        this._properties = properties;\n        this._values = (Object.create(properties.defaultTransitioningPropertyValues): any);\n    }\n\n    possiblyEvaluate(parameters: EvaluationParameters): PossiblyEvaluated<Props> {\n        const result = new PossiblyEvaluated(this._properties); // eslint-disable-line no-use-before-define\n        for (const property of Object.keys(this._values)) {\n            result._values[property] = this._values[property].possiblyEvaluate(parameters);\n        }\n        return result;\n    }\n\n    hasTransition() {\n        for (const property of Object.keys(this._values)) {\n            if (this._values[property].prior) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n\n// ------- Layout -------\n\n/**\n * A helper type: given an object type `Properties` whose values are each of type `Property<T, R>`, it calculates\n * an object type with the same keys and values of type `PropertyValue<T, R>`.\n *\n * @private\n */\ntype PropertyValues<Props: Object>\n    = $Exact<$ObjMap<Props, <T, R>(p: Property<T, R>) => PropertyValue<T, R>>>\n\n/**\n * Because layout properties are not transitionable, they have a simpler representation and evaluation chain than\n * paint properties: `PropertyValue`s are possibly evaluated, producing possibly evaluated values, which are then\n * fully evaluated.\n *\n * `Layout` stores a map of all (property name, `PropertyValue`) pairs for layout properties of a\n * given layer type. It can calculate the possibly-evaluated values for all of them at once, producing a\n * `PossiblyEvaluated` instance for the same set of properties.\n *\n * @private\n */\nclass Layout<Props: Object> {\n    _properties: Properties<Props>;\n    _values: PropertyValues<Props>;\n\n    constructor(properties: Properties<Props>) {\n        this._properties = properties;\n        this._values = (Object.create(properties.defaultPropertyValues): any);\n    }\n\n    getValue<S: string>(name: S) {\n        return clone(this._values[name].value);\n    }\n\n    setValue<S: string>(name: S, value: *) {\n        this._values[name] = new PropertyValue(this._values[name].property, value === null ? undefined : clone(value));\n    }\n\n    serialize() {\n        const result: any = {};\n        for (const property of Object.keys(this._values)) {\n            const value = this.getValue(property);\n            if (value !== undefined) {\n                result[property] = value;\n            }\n        }\n        return result;\n    }\n\n    possiblyEvaluate(parameters: EvaluationParameters): PossiblyEvaluated<Props> {\n        const result = new PossiblyEvaluated(this._properties); // eslint-disable-line no-use-before-define\n        for (const property of Object.keys(this._values)) {\n            result._values[property] = this._values[property].possiblyEvaluate(parameters);\n        }\n        return result;\n    }\n}\n\n// ------- PossiblyEvaluated -------\n\n/**\n * \"Possibly evaluated value\" is an intermediate stage in the evaluation chain for both paint and layout property\n * values. The purpose of this stage is to optimize away unnecessary recalculations for data-driven properties. Code\n * which uses data-driven property values must assume that the value is dependent on feature data, and request that it\n * be evaluated for each feature. But when that property value is in fact a constant or camera function, the calculation\n * will not actually depend on the feature, and we can benefit from returning the prior result of having done the\n * evaluation once, ahead of time, in an intermediate step whose inputs are just the value and \"global\" parameters\n * such as current zoom level.\n *\n * `PossiblyEvaluatedValue` represents the three possible outcomes of this step: if the input value was a constant or\n * camera expression, then the \"possibly evaluated\" result is a constant value. Otherwise, the input value was either\n * a source or composite expression, and we must defer final evaluation until supplied a feature. We separate\n * the source and composite cases because they are handled differently when generating GL attributes, buffers, and\n * uniforms.\n *\n * Note that `PossiblyEvaluatedValue` (and `PossiblyEvaluatedPropertyValue`, below) are _not_ used for properties that\n * do not allow data-driven values. For such properties, we know that the \"possibly evaluated\" result is always a constant\n * scalar value. See below.\n *\n * @private\n */\ntype PossiblyEvaluatedValue<T> =\n    | {kind: 'constant', value: T}\n    | SourceExpression\n    | CompositeExpression;\n\n/**\n * `PossiblyEvaluatedPropertyValue` is used for data-driven paint and layout property values. It holds a\n * `PossiblyEvaluatedValue` and the `GlobalProperties` that were used to generate it. You're not allowed to supply\n * a different set of `GlobalProperties` when performing the final evaluation because they would be ignored in the\n * case where the input value was a constant or camera function.\n *\n * @private\n */\nclass PossiblyEvaluatedPropertyValue<T> {\n    property: DataDrivenProperty<T>;\n    value: PossiblyEvaluatedValue<T>;\n    globals: GlobalProperties;\n\n    constructor(property: DataDrivenProperty<T>, value: PossiblyEvaluatedValue<T>, globals: GlobalProperties) {\n        this.property = property;\n        this.value = value;\n        this.globals = globals;\n    }\n\n    isConstant(): boolean {\n        return this.value.kind === 'constant';\n    }\n\n    constantOr(value: T): T {\n        if (this.value.kind === 'constant') {\n            return this.value.value;\n        } else {\n            return value;\n        }\n    }\n\n    evaluate(feature: Feature): T {\n        return this.property.evaluate(this.value, this.globals, feature);\n    }\n}\n\n/**\n * A helper type: given an object type `Properties` whose values are each of type `Property<T, R>`, it calculates\n * an object type with the same keys, and values of type `R`.\n *\n * For properties that don't allow data-driven values, `R` is a scalar type such as `number`, `string`, or `Color`.\n * For data-driven properties, it is `PossiblyEvaluatedPropertyValue`. Critically, the type definitions are set up\n * in a way that allows flow to know which of these two cases applies for any given property name, and if you attempt\n * to use a `PossiblyEvaluatedPropertyValue` as if it was a scalar, or vice versa, you will get a type error. (However,\n * there's at least one case in which flow fails to produce a type error that you should be aware of: in a context such\n * as `layer.paint.get('foo-opacity') === 0`, if `foo-opacity` is data-driven, than the left-hand side is of type\n * `PossiblyEvaluatedPropertyValue<number>`, but flow will not complain about comparing this to a number using `===`.\n * See https://github.com/facebook/flow/issues/2359.)\n *\n * There's also a third, special case possiblity for `R`: for cross-faded properties, it's `?CrossFaded<T>`.\n *\n * @private\n */\ntype PossiblyEvaluatedPropertyValues<Props: Object>\n    = $Exact<$ObjMap<Props, <T, R>(p: Property<T, R>) => R>>\n\n/**\n * `PossiblyEvaluated` stores a map of all (property name, `R`) pairs for paint or layout properties of a\n * given layer type.\n */\nclass PossiblyEvaluated<Props: Object> {\n    _properties: Properties<Props>;\n    _values: PossiblyEvaluatedPropertyValues<Props>;\n\n    constructor(properties: Properties<Props>) {\n        this._properties = properties;\n        this._values = (Object.create(properties.defaultPossiblyEvaluatedValues): any);\n    }\n\n    get<S: string>(name: S): $ElementType<PossiblyEvaluatedPropertyValues<Props>, S> {\n        return this._values[name];\n    }\n}\n\n/**\n * An implementation of `Property` for properties that do not permit data-driven (source or composite) expressions.\n * This restriction allows us to declare statically that the result of possibly evaluating this kind of property\n * is in fact always the scalar type `T`, and can be used without further evaluating the value on a per-feature basis.\n *\n * @private\n */\nclass DataConstantProperty<T> implements Property<T, T> {\n    specification: StylePropertySpecification;\n\n    constructor(specification: StylePropertySpecification) {\n        this.specification = specification;\n    }\n\n    possiblyEvaluate(value: PropertyValue<T, T>, parameters: EvaluationParameters): T {\n        assert(!value.isDataDriven());\n        return value.expression.evaluate(parameters);\n    }\n\n    interpolate(a: T, b: T, t: number): T {\n        const interp: ?(a: T, b: T, t: number) => T = (interpolate: any)[this.specification.type];\n        if (interp) {\n            return interp(a, b, t);\n        } else {\n            return a;\n        }\n    }\n}\n\n/**\n * An implementation of `Property` for properties that permit data-driven (source or composite) expressions.\n * The result of possibly evaluating this kind of property is `PossiblyEvaluatedPropertyValue<T>`; obtaining\n * a scalar value `T` requires further evaluation on a per-feature basis.\n *\n * @private\n */\nclass DataDrivenProperty<T> implements Property<T, PossiblyEvaluatedPropertyValue<T>> {\n    specification: StylePropertySpecification;\n\n    constructor(specification: StylePropertySpecification) {\n        this.specification = specification;\n    }\n\n    possiblyEvaluate(value: PropertyValue<T, PossiblyEvaluatedPropertyValue<T>>, parameters: EvaluationParameters): PossiblyEvaluatedPropertyValue<T> {\n        if (value.expression.kind === 'constant' || value.expression.kind === 'camera') {\n            return new PossiblyEvaluatedPropertyValue(this, {kind: 'constant', value: value.expression.evaluate(parameters)}, parameters);\n        } else {\n            return new PossiblyEvaluatedPropertyValue(this, value.expression, parameters);\n        }\n    }\n\n    interpolate(a: PossiblyEvaluatedPropertyValue<T>,\n                b: PossiblyEvaluatedPropertyValue<T>,\n                t: number): PossiblyEvaluatedPropertyValue<T> {\n        // If either possibly-evaluated value is non-constant, give up: we aren't able to interpolate data-driven values.\n        if (a.value.kind !== 'constant' || b.value.kind !== 'constant') {\n            return a;\n        }\n\n        // Special case hack solely for fill-outline-color.\n        if (a.value.value === undefined || b.value.value === undefined)\n            return (undefined: any);\n\n        const interp: ?(a: T, b: T, t: number) => T = (interpolate: any)[this.specification.type];\n        if (interp) {\n            return new PossiblyEvaluatedPropertyValue(this, {kind: 'constant', value: interp(a.value.value, b.value.value, t)}, a.globals);\n        } else {\n            return a;\n        }\n    }\n\n    evaluate(value: PossiblyEvaluatedValue<T>, globals: GlobalProperties, feature: Feature): T {\n        if (value.kind === 'constant') {\n            return value.value;\n        } else {\n            return value.evaluate(globals, feature);\n        }\n    }\n}\n\n/**\n * An implementation of `Property` for `*-pattern` and `line-dasharray`, which are transitioned by cross-fading\n * rather than interpolation.\n *\n * @private\n */\nclass CrossFadedProperty<T> implements Property<T, ?CrossFaded<T>> {\n    specification: StylePropertySpecification;\n\n    constructor(specification: StylePropertySpecification) {\n        this.specification = specification;\n    }\n\n    possiblyEvaluate(value: PropertyValue<T, ?CrossFaded<T>>, parameters: EvaluationParameters): ?CrossFaded<T> {\n        if (value.value === undefined) {\n            return undefined;\n        } else if (value.expression.kind === 'constant') {\n            const constant = value.expression.evaluate(parameters);\n            return this._calculate(constant, constant, constant, parameters);\n        } else {\n            assert(!value.isDataDriven());\n            return this._calculate(\n                value.expression.evaluate({zoom: parameters.zoom - 1.0}),\n                value.expression.evaluate({zoom: parameters.zoom}),\n                value.expression.evaluate({zoom: parameters.zoom + 1.0}),\n                parameters);\n        }\n    }\n\n    _calculate(min: T, mid: T, max: T, parameters: EvaluationParameters): ?CrossFaded<T> {\n        const z = parameters.zoom;\n        const fraction = z - Math.floor(z);\n        const t = parameters.crossFadingFactor();\n        return z > parameters.zoomHistory.lastIntegerZoom ?\n            { from: min, to: mid, fromScale: 2, toScale: 1, t: fraction + (1 - fraction) * t } :\n            { from: max, to: mid, fromScale: 0.5, toScale: 1, t: 1 - (1 - t) * fraction };\n    }\n\n    interpolate(a: ?CrossFaded<T>): ?CrossFaded<T> {\n        return a;\n    }\n}\n\n/**\n * An implementation of `Property` for `heatmap-color`. Evaluation and interpolation are no-ops: the real\n * evaluation happens in HeatmapStyleLayer.\n *\n * @private\n */\nclass HeatmapColorProperty implements Property<Color, void> {\n    specification: StylePropertySpecification;\n\n    constructor(specification: StylePropertySpecification) {\n        this.specification = specification;\n    }\n\n    possiblyEvaluate() {}\n    interpolate() {}\n}\n\n/**\n * `Properties` holds objects containing default values for the layout or paint property set of a given\n * layer type. These objects are immutable, and they are used as the prototypes for the `_values` members of\n * `Transitionable`, `Transitioning`, `Layout`, and `PossiblyEvaluated`. This allows these classes to avoid\n * doing work in the common case where a property has no explicit value set and should be considered to take\n * on the default value: using `for (const property of Object.keys(this._values))`, they can iterate over\n * only the _own_ properties of `_values`, skipping repeated calculation of transitions and possible/final\n * evaluations for defaults, the result of which will always be the same.\n *\n * @private\n */\nclass Properties<Props: Object> {\n    properties: Props;\n    defaultPropertyValues: PropertyValues<Props>;\n    defaultTransitionablePropertyValues: TransitionablePropertyValues<Props>;\n    defaultTransitioningPropertyValues: TransitioningPropertyValues<Props>;\n    defaultPossiblyEvaluatedValues: PossiblyEvaluatedPropertyValues<Props>;\n\n    constructor(properties: Props) {\n        this.properties = properties;\n        this.defaultPropertyValues = ({}: any);\n        this.defaultTransitionablePropertyValues = ({}: any);\n        this.defaultTransitioningPropertyValues = ({}: any);\n        this.defaultPossiblyEvaluatedValues = ({}: any);\n\n        for (const property in properties) {\n            const prop = properties[property];\n            const defaultPropertyValue = this.defaultPropertyValues[property] =\n                new PropertyValue(prop, undefined);\n            const defaultTransitionablePropertyValue = this.defaultTransitionablePropertyValues[property] =\n                new TransitionablePropertyValue(prop);\n            this.defaultTransitioningPropertyValues[property] =\n                defaultTransitionablePropertyValue.untransitioned();\n            this.defaultPossiblyEvaluatedValues[property] =\n                defaultPropertyValue.possiblyEvaluate(({}: any));\n        }\n    }\n}\n\nregister('DataDrivenProperty', DataDrivenProperty);\nregister('DataConstantProperty', DataConstantProperty);\nregister('CrossFadedProperty', CrossFadedProperty);\nregister('HeatmapColorProperty', HeatmapColorProperty);\n\nmodule.exports = {\n    PropertyValue,\n    Transitionable,\n    Transitioning,\n    Layout,\n    PossiblyEvaluatedPropertyValue,\n    PossiblyEvaluated,\n    DataConstantProperty,\n    DataDrivenProperty,\n    CrossFadedProperty,\n    HeatmapColorProperty,\n    Properties\n};\n","// @flow\n\nconst UnitBezier = require('@mapbox/unitbezier');\nconst Coordinate = require('../geo/coordinate');\nconst Point = require('@mapbox/point-geometry');\n\nimport type {Callback} from '../types/callback';\n\n/**\n * @module util\n * @private\n */\n\n/**\n * Given a value `t` that varies between 0 and 1, return\n * an interpolation function that eases between 0 and 1 in a pleasing\n * cubic in-out fashion.\n *\n * @private\n */\nexports.easeCubicInOut = function(t: number): number {\n    if (t <= 0) return 0;\n    if (t >= 1) return 1;\n    const t2 = t * t,\n        t3 = t2 * t;\n    return 4 * (t < 0.5 ? t3 : 3 * (t - t2) + t3 - 0.75);\n};\n\n/**\n * Given given (x, y), (x1, y1) control points for a bezier curve,\n * return a function that interpolates along that curve.\n *\n * @param p1x control point 1 x coordinate\n * @param p1y control point 1 y coordinate\n * @param p2x control point 2 x coordinate\n * @param p2y control point 2 y coordinate\n * @private\n */\nexports.bezier = function(p1x: number, p1y: number, p2x: number, p2y: number): (t: number) => number {\n    const bezier = new UnitBezier(p1x, p1y, p2x, p2y);\n    return function(t: number) {\n        return bezier.solve(t);\n    };\n};\n\n/**\n * A default bezier-curve powered easing function with\n * control points (0.25, 0.1) and (0.25, 1)\n *\n * @private\n */\nexports.ease = exports.bezier(0.25, 0.1, 0.25, 1);\n\n/**\n * constrain n to the given range via min + max\n *\n * @param n value\n * @param min the minimum value to be returned\n * @param max the maximum value to be returned\n * @returns the clamped value\n * @private\n */\nexports.clamp = function (n: number, min: number, max: number): number {\n    return Math.min(max, Math.max(min, n));\n};\n\n/**\n * constrain n to the given range, excluding the minimum, via modular arithmetic\n *\n * @param n value\n * @param min the minimum value to be returned, exclusive\n * @param max the maximum value to be returned, inclusive\n * @returns constrained number\n * @private\n */\nexports.wrap = function (n: number, min: number, max: number): number {\n    const d = max - min;\n    const w = ((n - min) % d + d) % d + min;\n    return (w === min) ? max : w;\n};\n\n/*\n * Call an asynchronous function on an array of arguments,\n * calling `callback` with the completed results of all calls.\n *\n * @param array input to each call of the async function.\n * @param fn an async function with signature (data, callback)\n * @param callback a callback run after all async work is done.\n * called with an array, containing the results of each async call.\n * @private\n */\nexports.asyncAll = function<Item, Result> (\n    array: Array<Item>,\n    fn: (item: Item, fnCallback: Callback<Result>) => void,\n    callback: Callback<Array<Result>>\n) {\n    if (!array.length) { return callback(null, []); }\n    let remaining = array.length;\n    const results = new Array(array.length);\n    let error = null;\n    array.forEach((item, i) => {\n        fn(item, (err, result) => {\n            if (err) error = err;\n            results[i] = ((result: any): Result); // https://github.com/facebook/flow/issues/2123\n            if (--remaining === 0) callback(error, results);\n        });\n    });\n};\n\n/*\n * Polyfill for Object.values. Not fully spec compliant, but we don't\n * need it to be.\n *\n * @private\n */\nexports.values = function<T>(obj: {[key: string]: T}): Array<T> {\n    const result = [];\n    for (const k in obj) {\n        result.push(obj[k]);\n    }\n    return result;\n};\n\n/*\n * Compute the difference between the keys in one object and the keys\n * in another object.\n *\n * @returns keys difference\n * @private\n */\nexports.keysDifference = function<S, T>(obj: {[key: string]: S}, other: {[key: string]: T}): Array<string> {\n    const difference = [];\n    for (const i in obj) {\n        if (!(i in other)) {\n            difference.push(i);\n        }\n    }\n    return difference;\n};\n\n/**\n * Given a destination object and optionally many source objects,\n * copy all properties from the source objects into the destination.\n * The last source object given overrides properties from previous\n * source objects.\n *\n * @param dest destination object\n * @param sources sources from which properties are pulled\n * @private\n */\nexports.extend = function (dest: Object, ...sources: Array<?Object>): Object {\n    for (const src of sources) {\n        for (const k in src) {\n            dest[k] = src[k];\n        }\n    }\n    return dest;\n};\n\n/**\n * Given an object and a number of properties as strings, return version\n * of that object with only those properties.\n *\n * @param src the object\n * @param properties an array of property names chosen\n * to appear on the resulting object.\n * @returns object with limited properties.\n * @example\n * var foo = { name: 'Charlie', age: 10 };\n * var justName = pick(foo, ['name']);\n * // justName = { name: 'Charlie' }\n * @private\n */\nexports.pick = function (src: Object, properties: Array<string>): Object {\n    const result = {};\n    for (let i = 0; i < properties.length; i++) {\n        const k = properties[i];\n        if (k in src) {\n            result[k] = src[k];\n        }\n    }\n    return result;\n};\n\nlet id = 1;\n\n/**\n * Return a unique numeric id, starting at 1 and incrementing with\n * each call.\n *\n * @returns unique numeric id.\n * @private\n */\nexports.uniqueId = function (): number {\n    return id++;\n};\n\n/**\n * Given an array of member function names as strings, replace all of them\n * with bound versions that will always refer to `context` as `this`. This\n * is useful for classes where otherwise event bindings would reassign\n * `this` to the evented object or some other value: this lets you ensure\n * the `this` value always.\n *\n * @param fns list of member function names\n * @param context the context value\n * @example\n * function MyClass() {\n *   bindAll(['ontimer'], this);\n *   this.name = 'Tom';\n * }\n * MyClass.prototype.ontimer = function() {\n *   alert(this.name);\n * };\n * var myClass = new MyClass();\n * setTimeout(myClass.ontimer, 100);\n * @private\n */\nexports.bindAll = function(fns: Array<string>, context: Object): void {\n    fns.forEach((fn) => {\n        if (!context[fn]) { return; }\n        context[fn] = context[fn].bind(context);\n    });\n};\n\n/**\n * Given a list of coordinates, get their center as a coordinate.\n *\n * @returns centerpoint\n * @private\n */\nexports.getCoordinatesCenter = function(coords: Array<Coordinate>): Coordinate {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n\n    for (let i = 0; i < coords.length; i++) {\n        minX = Math.min(minX, coords[i].column);\n        minY = Math.min(minY, coords[i].row);\n        maxX = Math.max(maxX, coords[i].column);\n        maxY = Math.max(maxY, coords[i].row);\n    }\n\n    const dx = maxX - minX;\n    const dy = maxY - minY;\n    const dMax = Math.max(dx, dy);\n    const zoom = Math.max(0, Math.floor(-Math.log(dMax) / Math.LN2));\n    return new Coordinate((minX + maxX) / 2, (minY + maxY) / 2, 0)\n        .zoomTo(zoom);\n};\n\n/**\n * Determine if a string ends with a particular substring\n *\n * @private\n */\nexports.endsWith = function(string: string, suffix: string): boolean {\n    return string.indexOf(suffix, string.length - suffix.length) !== -1;\n};\n\n/**\n * Create an object by mapping all the values of an existing object while\n * preserving their keys.\n *\n * @private\n */\nexports.mapObject = function(input: Object, iterator: Function, context?: Object): Object {\n    const output = {};\n    for (const key in input) {\n        output[key] = iterator.call(context || this, input[key], key, input);\n    }\n    return output;\n};\n\n/**\n * Create an object by filtering out values of an existing object.\n *\n * @private\n */\nexports.filterObject = function(input: Object, iterator: Function, context?: Object): Object {\n    const output = {};\n    for (const key in input) {\n        if (iterator.call(context || this, input[key], key, input)) {\n            output[key] = input[key];\n        }\n    }\n    return output;\n};\n\nexports.deepEqual = require('../style-spec/util/deep_equal');\n\n/**\n * Deeply clones two objects.\n *\n * @private\n */\nexports.clone = function<T>(input: T): T {\n    if (Array.isArray(input)) {\n        return input.map(exports.clone);\n    } else if (typeof input === 'object' && input) {\n        return ((exports.mapObject(input, exports.clone): any): T);\n    } else {\n        return input;\n    }\n};\n\n/**\n * Check if two arrays have at least one common element.\n *\n * @private\n */\nexports.arraysIntersect = function<T>(a: Array<T>, b: Array<T>): boolean {\n    for (let l = 0; l < a.length; l++) {\n        if (b.indexOf(a[l]) >= 0) return true;\n    }\n    return false;\n};\n\n/**\n * Print a warning message to the console and ensure duplicate warning messages\n * are not printed.\n *\n * @private\n */\nconst warnOnceHistory: {[key: string]: boolean} = {};\nexports.warnOnce = function(message: string): void {\n    if (!warnOnceHistory[message]) {\n        // console isn't defined in some WebWorkers, see #2558\n        if (typeof console !== \"undefined\") console.warn(message);\n        warnOnceHistory[message] = true;\n    }\n};\n\n/**\n * Indicates if the provided Points are in a counter clockwise (true) or clockwise (false) order\n *\n * @returns true for a counter clockwise set of points\n */\n// http://bryceboe.com/2006/10/23/line-segment-intersection-algorithm/\nexports.isCounterClockwise = function(a: Point, b: Point, c: Point): boolean {\n    return (c.y - a.y) * (b.x - a.x) > (b.y - a.y) * (c.x - a.x);\n};\n\n/**\n * Returns the signed area for the polygon ring.  Postive areas are exterior rings and\n * have a clockwise winding.  Negative areas are interior rings and have a counter clockwise\n * ordering.\n *\n * @param ring Exterior or interior ring\n */\nexports.calculateSignedArea = function(ring: Array<Point>): number {\n    let sum = 0;\n    for (let i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n};\n\n/**\n * Detects closed polygons, first + last point are equal\n *\n * @param points array of points\n * @return true if the points are a closed polygon\n */\nexports.isClosedPolygon = function(points: Array<Point>): boolean {\n    // If it is 2 points that are the same then it is a point\n    // If it is 3 points with start and end the same then it is a line\n    if (points.length < 4)\n        return false;\n\n    const p1 = points[0];\n    const p2 = points[points.length - 1];\n\n    if (Math.abs(p1.x - p2.x) > 0 ||\n        Math.abs(p1.y - p2.y) > 0) {\n        return false;\n    }\n\n    // polygon simplification can produce polygons with zero area and more than 3 points\n    return (Math.abs(exports.calculateSignedArea(points)) > 0.01);\n};\n\n/**\n * Converts spherical coordinates to cartesian coordinates.\n *\n * @param spherical Spherical coordinates, in [radial, azimuthal, polar]\n * @return cartesian coordinates in [x, y, z]\n */\n\nexports.sphericalToCartesian = function([r, azimuthal, polar]: [number, number, number]): {x: number, y: number, z: number} {\n    // We abstract \"north\"/\"up\" (compass-wise) to be 0° when really this is 90° (π/2):\n    // correct for that here\n    azimuthal += 90;\n\n    // Convert azimuthal and polar angles to radians\n    azimuthal *= Math.PI / 180;\n    polar *= Math.PI / 180;\n\n    return {\n        x: r * Math.cos(azimuthal) * Math.sin(polar),\n        y: r * Math.sin(azimuthal) * Math.sin(polar),\n        z: r * Math.cos(polar)\n    };\n};\n\n/**\n * Parses data from 'Cache-Control' headers.\n *\n * @param cacheControl Value of 'Cache-Control' header\n * @return object containing parsed header info.\n */\n\nexports.parseCacheControl = function(cacheControl: string): Object {\n    // Taken from [Wreck](https://github.com/hapijs/wreck)\n    const re = /(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g;\n\n    const header = {};\n    cacheControl.replace(re, ($0, $1, $2, $3) => {\n        const value = $2 || $3;\n        header[$1] = value ? value.toLowerCase() : true;\n        return '';\n    });\n\n    if (header['max-age']) {\n        const maxAge = parseInt(header['max-age'], 10);\n        if (isNaN(maxAge)) delete header['max-age'];\n        else header['max-age'] = maxAge;\n    }\n\n    return header;\n};\n","// @flow\n\nconst assert = require('assert');\n\nconst Grid = require('grid-index');\nconst Color = require('../style-spec/util/color');\nconst {\n    StylePropertyFunction,\n    StyleExpression,\n    StyleExpressionWithErrorHandling,\n    ZoomDependentExpression,\n    ZoomConstantExpression\n} = require('../style-spec/expression');\nconst {CompoundExpression} = require('../style-spec/expression/compound_expression');\nconst expressions = require('../style-spec/expression/definitions');\nconst {ImageData} = require('./window');\n\nimport type {Transferable} from '../types/transferable';\n\nexport type Serialized =\n    | null\n    | void\n    | boolean\n    | number\n    | string\n    | Boolean\n    | Number\n    | String\n    | Date\n    | RegExp\n    | ArrayBuffer\n    | $ArrayBufferView\n    | ImageData\n    | Array<Serialized>\n    | {| name: string, properties: {+[string]: Serialized} |};\n\ntype Registry = {\n    [string]: {\n        klass: Class<any>,\n        omit: $ReadOnlyArray<string>,\n        shallow: $ReadOnlyArray<string>\n    }\n};\n\ntype RegisterOptions<T> = {\n    omit?: $ReadOnlyArray<$Keys<T>>,\n    shallow?: $ReadOnlyArray<$Keys<T>>\n}\n\nconst registry: Registry = {};\n\n/**\n * Register the given class as serializable.\n *\n * @param options\n * @param options.omit List of properties to omit from serialization (e.g., cached/computed properties)\n * @param options.shallow List of properties that should be serialized by a simple shallow copy, rather than by a recursive call to serialize().\n *\n * @private\n */\nfunction register<T: any>(name: string, klass: Class<T>, options: RegisterOptions<T> = {}) {\n    assert(!registry[name], `${name} is already registered.`);\n    (Object.defineProperty: any)(klass, '_classRegistryKey', {\n        value: name,\n        writeable: false\n    });\n    registry[name] = {\n        klass,\n        omit: options.omit || [],\n        shallow: options.shallow || []\n    };\n}\n\nregister('Object', Object);\n\nGrid.serialize = function serializeGrid(grid: Grid, transferables?: Array<Transferable>): Serialized {\n    const ab = grid.toArrayBuffer();\n    if (transferables) {\n        transferables.push(ab);\n    }\n    return ab;\n};\n\nGrid.deserialize = function deserializeGrid(serialized: ArrayBuffer): Grid {\n    return new Grid(serialized);\n};\nregister('Grid', Grid);\n\nregister('Color', Color);\n\nregister('StylePropertyFunction', StylePropertyFunction);\nregister('StyleExpression', StyleExpression, {omit: ['_evaluator']});\nregister(\n    'StyleExpressionWithErrorHandling',\n    StyleExpressionWithErrorHandling,\n    {omit: ['_evaluator']}\n);\nregister('ZoomDependentExpression', ZoomDependentExpression);\nregister('ZoomConstantExpression', ZoomConstantExpression);\nregister('CompoundExpression', CompoundExpression, {omit: ['_evaluate']});\nfor (const name in expressions) {\n    if ((expressions[name]: any)._classRegistryKey) continue;\n    register(`Expression_${name}`, expressions[name]);\n}\n\n/**\n * Serialize the given object for transfer to or from a web worker.\n *\n * For non-builtin types, recursively serialize each property (possibly\n * omitting certain properties - see register()), and package the result along\n * with the constructor's `name` so that the appropriate constructor can be\n * looked up in `deserialize()`.\n *\n * If a `transferables` array is provided, add any transferable objects (i.e.,\n * any ArrayBuffers or ArrayBuffer views) to the list. (If a copy is needed,\n * this should happen in the client code, before using serialize().)\n */\nfunction serialize(input: mixed, transferables?: Array<Transferable>): Serialized {\n    if (input === null ||\n        input === undefined ||\n        typeof input === 'boolean' ||\n        typeof input === 'number' ||\n        typeof input === 'string' ||\n        input instanceof Boolean ||\n        input instanceof Number ||\n        input instanceof String ||\n        input instanceof Date ||\n        input instanceof RegExp) {\n        return input;\n    }\n\n    if (input instanceof ArrayBuffer) {\n        if (transferables) {\n            transferables.push(input);\n        }\n        return input;\n    }\n\n    if (ArrayBuffer.isView(input)) {\n        const view: $ArrayBufferView = (input: any);\n        if (transferables) {\n            transferables.push(view.buffer);\n        }\n        return view;\n    }\n\n    if (input instanceof ImageData) {\n        if (transferables) {\n            transferables.push(input.data.buffer);\n        }\n        return input;\n    }\n\n    if (Array.isArray(input)) {\n        const serialized = [];\n        for (const item of input) {\n            serialized.push(serialize(item, transferables));\n        }\n        return serialized;\n    }\n\n    if (typeof input === 'object') {\n        const klass = (input.constructor: any);\n        const name = klass._classRegistryKey;\n        if (!name) {\n            throw new Error(`can't serialize object of unregistered class`);\n        }\n        assert(registry[name]);\n\n        const properties: {[string]: Serialized} = {};\n\n        if (klass.serialize) {\n            // (Temporary workaround) allow a class to provide static\n            // `serialize()` and `deserialize()` methods to bypass the generic\n            // approach.\n            // This temporary workaround lets us use the generic serialization\n            // approach for objects whose members include instances of dynamic\n            // StructArray types. Once we refactor StructArray to be static,\n            // we can remove this complexity.\n            properties._serialized = (klass.serialize: typeof serialize)(input, transferables);\n        } else {\n            for (const key in input) {\n                // any cast due to https://github.com/facebook/flow/issues/5393\n                if (!(input: any).hasOwnProperty(key)) continue;\n                if (registry[name].omit.indexOf(key) >= 0) continue;\n                const property = (input: any)[key];\n                properties[key] = registry[name].shallow.indexOf(key) >= 0 ?\n                    property :\n                    serialize(property, transferables);\n            }\n        }\n\n        return {name, properties};\n    }\n\n    throw new Error(`can't serialize object of type ${typeof input}`);\n}\n\nfunction deserialize(input: Serialized): mixed {\n    if (input === null ||\n        input === undefined ||\n        typeof input === 'boolean' ||\n        typeof input === 'number' ||\n        typeof input === 'string' ||\n        input instanceof Boolean ||\n        input instanceof Number ||\n        input instanceof String ||\n        input instanceof Date ||\n        input instanceof RegExp ||\n        input instanceof ArrayBuffer ||\n        ArrayBuffer.isView(input) ||\n        input instanceof ImageData) {\n        return input;\n    }\n\n    if (Array.isArray(input)) {\n        return input.map((i) => deserialize(i));\n    }\n\n    if (typeof input === 'object') {\n        const {name, properties} = (input: any);\n        if (!name) {\n            throw new Error(`can't deserialize object of anonymous class`);\n        }\n\n        const {klass} = registry[name];\n        if (!klass) {\n            throw new Error(`can't deserialize unregistered class ${name}`);\n        }\n\n        if (klass.deserialize) {\n            return (klass.deserialize: typeof deserialize)(properties._serialized);\n        }\n\n        const result = Object.create(klass.prototype);\n\n        for (const key of Object.keys(properties)) {\n            result[key] = registry[name].shallow.indexOf(key) >= 0 ?\n                properties[key] : deserialize(properties[key]);\n        }\n\n        return result;\n    }\n\n    throw new Error(`can't deserialize object of type ${typeof input}`);\n}\n\nmodule.exports = {\n    register,\n    serialize,\n    deserialize\n};\n","// @flow\n\nexport type NullTypeT = { kind: 'null' };\nexport type NumberTypeT = { kind: 'number' };\nexport type StringTypeT = { kind: 'string' };\nexport type BooleanTypeT = { kind: 'boolean' };\nexport type ColorTypeT = { kind: 'color' };\nexport type ObjectTypeT = { kind: 'object' };\nexport type ValueTypeT = { kind: 'value' };\nexport type ErrorTypeT = { kind: 'error' };\n\nexport type Type =\n    NullTypeT |\n    NumberTypeT |\n    StringTypeT |\n    BooleanTypeT |\n    ColorTypeT |\n    ObjectTypeT |\n    ValueTypeT |\n    ArrayType | // eslint-disable-line no-use-before-define\n    ErrorTypeT\n\nexport type ArrayType = {\n    kind: 'array',\n    itemType: Type,\n    N: ?number\n}\n\nconst NullType = { kind: 'null' };\nconst NumberType = { kind: 'number' };\nconst StringType = { kind: 'string' };\nconst BooleanType = { kind: 'boolean' };\nconst ColorType = { kind: 'color' };\nconst ObjectType = { kind: 'object' };\nconst ValueType = { kind: 'value' };\nconst ErrorType = { kind: 'error' };\n\nfunction array(itemType: Type, N: ?number): ArrayType {\n    return {\n        kind: 'array',\n        itemType,\n        N\n    };\n}\n\nfunction toString(type: Type): string {\n    if (type.kind === 'array') {\n        const itemType = toString(type.itemType);\n        return typeof type.N === 'number' ?\n            `array<${itemType}, ${type.N}>` :\n            type.itemType.kind === 'value' ? 'array' : `array<${itemType}>`;\n    } else {\n        return type.kind;\n    }\n}\n\nconst valueMemberTypes = [\n    NullType,\n    NumberType,\n    StringType,\n    BooleanType,\n    ColorType,\n    ObjectType,\n    array(ValueType)\n];\n\n/**\n * Returns null if `t` is a subtype of `expected`; otherwise returns an\n * error message.\n * @private\n */\nfunction checkSubtype(expected: Type, t: Type): ?string {\n    if (t.kind === 'error') {\n        // Error is a subtype of every type\n        return null;\n    } else if (expected.kind === 'array') {\n        if (t.kind === 'array' &&\n            !checkSubtype(expected.itemType, t.itemType) &&\n            (typeof expected.N !== 'number' || expected.N === t.N)) {\n            return null;\n        }\n    } else if (expected.kind === t.kind) {\n        return null;\n    } else if (expected.kind === 'value') {\n        for (const memberType of valueMemberTypes) {\n            if (!checkSubtype(memberType, t)) {\n                return null;\n            }\n        }\n    }\n\n    return `Expected ${toString(expected)} but found ${toString(t)} instead.`;\n}\n\nmodule.exports = {\n    NullType,\n    NumberType,\n    StringType,\n    BooleanType,\n    ColorType,\n    ObjectType,\n    ValueType,\n    array,\n    ErrorType,\n    toString,\n    checkSubtype\n};\n","\nfunction ValidationError(key, value, message) {\n    this.message = (key ? `${key}: ` : '') + message;\n\n    if (value !== null && value !== undefined && value.__line__) {\n        this.line = value.__line__;\n    }\n}\n\nmodule.exports = ValidationError;\n","'use strict';\n\nmodule.exports = Point;\n\n/**\n * A standalone point geometry with useful accessor, comparison, and\n * modification methods.\n *\n * @class Point\n * @param {Number} x the x-coordinate. this could be longitude or screen\n * pixels, or any other sort of unit.\n * @param {Number} y the y-coordinate. this could be latitude or screen\n * pixels, or any other sort of unit.\n * @example\n * var point = new Point(-77, 38);\n */\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n\n    /**\n     * Clone this point, returning a new point that can be modified\n     * without affecting the old one.\n     * @return {Point} the clone\n     */\n    clone: function() { return new Point(this.x, this.y); },\n\n    /**\n     * Add this point's x & y coordinates to another point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    add:     function(p) { return this.clone()._add(p); },\n\n    /**\n     * Subtract this point's x & y coordinates to from point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    sub:     function(p) { return this.clone()._sub(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    multByPoint:    function(p) { return this.clone()._multByPoint(p); },\n\n    /**\n     * Divide this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    divByPoint:     function(p) { return this.clone()._divByPoint(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    mult:    function(k) { return this.clone()._mult(k); },\n\n    /**\n     * Divide this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    div:     function(k) { return this.clone()._div(k); },\n\n    /**\n     * Rotate this point around the 0, 0 origin by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @return {Point} output point\n     */\n    rotate:  function(a) { return this.clone()._rotate(a); },\n\n    /**\n     * Rotate this point around p point by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @param {Point} p Point to rotate around\n     * @return {Point} output point\n     */\n    rotateAround:  function(a,p) { return this.clone()._rotateAround(a,p); },\n\n    /**\n     * Multiply this point by a 4x1 transformation matrix\n     * @param {Array<Number>} m transformation matrix\n     * @return {Point} output point\n     */\n    matMult: function(m) { return this.clone()._matMult(m); },\n\n    /**\n     * Calculate this point but as a unit vector from 0, 0, meaning\n     * that the distance from the resulting point to the 0, 0\n     * coordinate will be equal to 1 and the angle from the resulting\n     * point to the 0, 0 coordinate will be the same as before.\n     * @return {Point} unit vector point\n     */\n    unit:    function() { return this.clone()._unit(); },\n\n    /**\n     * Compute a perpendicular point, where the new y coordinate\n     * is the old x coordinate and the new x coordinate is the old y\n     * coordinate multiplied by -1\n     * @return {Point} perpendicular point\n     */\n    perp:    function() { return this.clone()._perp(); },\n\n    /**\n     * Return a version of this point with the x & y coordinates\n     * rounded to integers.\n     * @return {Point} rounded point\n     */\n    round:   function() { return this.clone()._round(); },\n\n    /**\n     * Return the magitude of this point: this is the Euclidean\n     * distance from the 0, 0 coordinate to this point's x and y\n     * coordinates.\n     * @return {Number} magnitude\n     */\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    /**\n     * Judge whether this point is equal to another point, returning\n     * true or false.\n     * @param {Point} other the other point\n     * @return {boolean} whether the points are equal\n     */\n    equals: function(other) {\n        return this.x === other.x &&\n               this.y === other.y;\n    },\n\n    /**\n     * Calculate the distance from this point to another point\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    /**\n     * Calculate the distance from this point to another point,\n     * without the square root step. Useful if you're comparing\n     * relative distances.\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    /**\n     * Get the angle from the 0, 0 coordinate to this point, in radians\n     * coordinates.\n     * @return {Number} angle\n     */\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    /**\n     * Get the angle from this point to another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    /**\n     * Get the angle between this point and another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    /*\n     * Find the angle of the two vectors, solving the formula for\n     * the cross product a x b = |a||b|sin(θ) for θ.\n     * @param {Number} x the x-coordinate\n     * @param {Number} y the y-coordinate\n     * @return {Number} the angle in radians\n     */\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _multByPoint: function(p) {\n        this.x *= p.x;\n        this.y *= p.y;\n        return this;\n    },\n\n    _divByPoint: function(p) {\n        this.x /= p.x;\n        this.y /= p.y;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _rotateAround: function(angle, p) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n            y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n/**\n * Construct a point from an array if necessary, otherwise if the input\n * is already a Point, or an unknown type, return it unchanged\n * @param {Array<Number>|Point|*} a any kind of input value\n * @return {Point} constructed point, or passed-through value.\n * @example\n * // this\n * var point = Point.convert([0, 1]);\n * // is equivalent to\n * var point = new Point(0, 1);\n */\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n","\nmodule.exports = function getType(val) {\n    if (val instanceof Number) {\n        return 'number';\n    } else if (val instanceof String) {\n        return 'string';\n    } else if (val instanceof Boolean) {\n        return 'boolean';\n    } else if (Array.isArray(val)) {\n        return 'array';\n    } else if (val === null) {\n        return 'null';\n    } else {\n        return typeof val;\n    }\n};\n","\nmodule.exports = require('./v8.json');\n","// @flow\n\n\nconst util = require('../util/util');\nconst styleSpec = require('../style-spec/reference/latest');\nconst validateStyle = require('./validate_style');\nconst Evented = require('../util/evented');\n\nconst {\n    Layout,\n    Transitionable,\n    Transitioning,\n    Properties\n} = require('./properties');\n\nimport type {Bucket} from '../data/bucket';\nimport type Point from '@mapbox/point-geometry';\nimport type {FeatureFilter} from '../style-spec/feature_filter';\nimport type {TransitionParameters} from './properties';\nimport type EvaluationParameters from './evaluation_parameters';\n\nconst TRANSITION_SUFFIX = '-transition';\n\nclass StyleLayer extends Evented {\n    static create: (layer: LayerSpecification) => StyleLayer;\n\n    id: string;\n    metadata: mixed;\n    type: string;\n    source: string;\n    sourceLayer: ?string;\n    minzoom: ?number;\n    maxzoom: ?number;\n    filter: FilterSpecification | void;\n    visibility: 'visible' | 'none';\n\n    _unevaluatedLayout: Layout<any>;\n    +layout: mixed;\n\n    _transitionablePaint: Transitionable<any>;\n    _transitioningPaint: Transitioning<any>;\n    +paint: mixed;\n\n    _featureFilter: FeatureFilter;\n\n    +queryRadius: (bucket: Bucket) => number;\n    +queryIntersectsFeature: (queryGeometry: Array<Array<Point>>,\n                              feature: VectorTileFeature,\n                              geometry: Array<Array<Point>>,\n                              zoom: number,\n                              bearing: number,\n                              pixelsToTileUnits: number) => boolean;\n\n    constructor(layer: LayerSpecification, properties: {layout?: Properties<*>, paint: Properties<*>}) {\n        super();\n\n        this.id = layer.id;\n        this.metadata = layer.metadata;\n        this.type = layer.type;\n        this.minzoom = layer.minzoom;\n        this.maxzoom = layer.maxzoom;\n        this.visibility = 'visible';\n\n        if (layer.type !== 'background') {\n            this.source = layer.source;\n            this.sourceLayer = layer['source-layer'];\n            this.filter = layer.filter;\n        }\n\n        this._featureFilter = () => true;\n\n        if (properties.layout) {\n            this._unevaluatedLayout = new Layout(properties.layout);\n        }\n\n        this._transitionablePaint = new Transitionable(properties.paint);\n\n        for (const property in layer.paint) {\n            this.setPaintProperty(property, layer.paint[property], {validate: false});\n        }\n        for (const property in layer.layout) {\n            this.setLayoutProperty(property, layer.layout[property], {validate: false});\n        }\n\n        this._transitioningPaint = this._transitionablePaint.untransitioned();\n    }\n\n    getLayoutProperty(name: string) {\n        if (name === 'visibility') {\n            return this.visibility;\n        }\n\n        return this._unevaluatedLayout.getValue(name);\n    }\n\n    setLayoutProperty(name: string, value: mixed, options: {validate: boolean}) {\n        if (value !== null && value !== undefined) {\n            const key = `layers.${this.id}.layout.${name}`;\n            if (this._validate(validateStyle.layoutProperty, key, name, value, options)) {\n                return;\n            }\n        }\n\n        if (name === 'visibility') {\n            this.visibility = value === 'none' ? value : 'visible';\n            return;\n        }\n\n        this._unevaluatedLayout.setValue(name, value);\n    }\n\n    getPaintProperty(name: string) {\n        if (util.endsWith(name, TRANSITION_SUFFIX)) {\n            return this._transitionablePaint.getTransition(name.slice(0, -TRANSITION_SUFFIX.length));\n        } else {\n            return this._transitionablePaint.getValue(name);\n        }\n    }\n\n    setPaintProperty(name: string, value: mixed, options: {validate: boolean}) {\n        if (value !== null && value !== undefined) {\n            const key = `layers.${this.id}.paint.${name}`;\n            if (this._validate(validateStyle.paintProperty, key, name, value, options)) {\n                return;\n            }\n        }\n\n        if (util.endsWith(name, TRANSITION_SUFFIX)) {\n            this._transitionablePaint.setTransition(name.slice(0, -TRANSITION_SUFFIX.length), (value: any) || undefined);\n        } else {\n            this._transitionablePaint.setValue(name, value);\n        }\n    }\n\n    isHidden(zoom: number) {\n        if (this.minzoom && zoom < this.minzoom) return true;\n        if (this.maxzoom && zoom >= this.maxzoom) return true;\n        return this.visibility === 'none';\n    }\n\n    updateTransitions(parameters: TransitionParameters) {\n        this._transitioningPaint = this._transitionablePaint.transitioned(parameters, this._transitioningPaint);\n    }\n\n    hasTransition() {\n        return this._transitioningPaint.hasTransition();\n    }\n\n    recalculate(parameters: EvaluationParameters) {\n        if (this._unevaluatedLayout) {\n            (this: any).layout = this._unevaluatedLayout.possiblyEvaluate(parameters);\n        }\n\n        (this: any).paint = this._transitioningPaint.possiblyEvaluate(parameters);\n    }\n\n    serialize() {\n        const output : any = {\n            'id': this.id,\n            'type': this.type,\n            'source': this.source,\n            'source-layer': this.sourceLayer,\n            'metadata': this.metadata,\n            'minzoom': this.minzoom,\n            'maxzoom': this.maxzoom,\n            'filter': this.filter,\n            'layout': this._unevaluatedLayout && this._unevaluatedLayout.serialize(),\n            'paint': this._transitionablePaint && this._transitionablePaint.serialize()\n        };\n\n        if (this.visibility === 'none') {\n            output.layout = output.layout || {};\n            output.layout.visibility = 'none';\n        }\n\n        return util.filterObject(output, (value, key) => {\n            return value !== undefined &&\n                !(key === 'layout' && !Object.keys(value).length) &&\n                !(key === 'paint' && !Object.keys(value).length);\n        });\n    }\n\n    _validate(validate: Function, key: string, name: string, value: mixed, options: {validate: boolean}) {\n        if (options && options.validate === false) {\n            return false;\n        }\n        return validateStyle.emitErrors(this, validate.call(validateStyle, {\n            key: key,\n            layerType: this.type,\n            objectKey: name,\n            value: value,\n            styleSpec: styleSpec,\n            // Workaround for https://github.com/mapbox/mapbox-gl-js/issues/2407\n            style: {glyphs: true, sprite: true}\n        }));\n    }\n\n    hasOffscreenPass() {\n        return false;\n    }\n\n    resize() {\n        // noop\n    }\n}\n\nmodule.exports = StyleLayer;\n\nconst subclasses = {\n    'circle': require('./style_layer/circle_style_layer'),\n    'heatmap': require('./style_layer/heatmap_style_layer'),\n    'hillshade': require('./style_layer/hillshade_style_layer'),\n    'fill': require('./style_layer/fill_style_layer'),\n    'fill-extrusion': require('./style_layer/fill_extrusion_style_layer'),\n    'line': require('./style_layer/line_style_layer'),\n    'symbol': require('./style_layer/symbol_style_layer'),\n    'background': require('./style_layer/background_style_layer'),\n    'raster': require('./style_layer/raster_style_layer')\n};\n\nStyleLayer.create = function(layer: LayerSpecification) {\n    return new subclasses[layer.type](layer);\n};\n","// This file is generated. Edit build/generate-struct-arrays.js, then run `yarn run codegen`.\n// @flow\n\nconst assert = require('assert');\nconst {StructArray} = require('../util/struct_array');\nconst {Struct} = require('../util/struct_array');\nconst {register} = require('../util/web_worker_transfer');\nconst Point = require('@mapbox/point-geometry');\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Int16[2]\n *\n * @private\n */\nclass StructArrayLayout2i4 extends StructArray {\n    uint8: Uint8Array;\n    int16: Int16Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.int16 = new Int16Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o2 = i * 2;\n        this.int16[o2 + 0] = v0;\n        this.int16[o2 + 1] = v1;\n        return i;\n    }\n\n}\n\nStructArrayLayout2i4.prototype.bytesPerElement = 4;\nregister('StructArrayLayout2i4', StructArrayLayout2i4);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Int16[4]\n *\n * @private\n */\nclass StructArrayLayout4i8 extends StructArray {\n    uint8: Uint8Array;\n    int16: Int16Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.int16 = new Int16Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number, v3: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o2 = i * 4;\n        this.int16[o2 + 0] = v0;\n        this.int16[o2 + 1] = v1;\n        this.int16[o2 + 2] = v2;\n        this.int16[o2 + 3] = v3;\n        return i;\n    }\n\n}\n\nStructArrayLayout4i8.prototype.bytesPerElement = 8;\nregister('StructArrayLayout4i8', StructArrayLayout4i8);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Int16[2]\n * [4]: Int16[4]\n *\n * @private\n */\nclass StructArrayLayout2i4i12 extends StructArray {\n    uint8: Uint8Array;\n    int16: Int16Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.int16 = new Int16Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number, v3: number, v4: number, v5: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o2 = i * 6;\n        this.int16[o2 + 0] = v0;\n        this.int16[o2 + 1] = v1;\n        this.int16[o2 + 2] = v2;\n        this.int16[o2 + 3] = v3;\n        this.int16[o2 + 4] = v4;\n        this.int16[o2 + 5] = v5;\n        return i;\n    }\n\n}\n\nStructArrayLayout2i4i12.prototype.bytesPerElement = 12;\nregister('StructArrayLayout2i4i12', StructArrayLayout2i4i12);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Int16[4]\n * [8]: Uint8[4]\n *\n * @private\n */\nclass StructArrayLayout4i4ub12 extends StructArray {\n    uint8: Uint8Array;\n    int16: Int16Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.int16 = new Int16Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number, v3: number, v4: number, v5: number, v6: number, v7: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o2 = i * 6;\n        const o1 = i * 12;\n        this.int16[o2 + 0] = v0;\n        this.int16[o2 + 1] = v1;\n        this.int16[o2 + 2] = v2;\n        this.int16[o2 + 3] = v3;\n        this.uint8[o1 + 8] = v4;\n        this.uint8[o1 + 9] = v5;\n        this.uint8[o1 + 10] = v6;\n        this.uint8[o1 + 11] = v7;\n        return i;\n    }\n\n}\n\nStructArrayLayout4i4ub12.prototype.bytesPerElement = 12;\nregister('StructArrayLayout4i4ub12', StructArrayLayout4i4ub12);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Int16[4]\n * [8]: Uint16[4]\n *\n * @private\n */\nclass StructArrayLayout4i4ui16 extends StructArray {\n    uint8: Uint8Array;\n    int16: Int16Array;\n    uint16: Uint16Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.int16 = new Int16Array(this.arrayBuffer);\n        this.uint16 = new Uint16Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number, v3: number, v4: number, v5: number, v6: number, v7: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o2 = i * 8;\n        this.int16[o2 + 0] = v0;\n        this.int16[o2 + 1] = v1;\n        this.int16[o2 + 2] = v2;\n        this.int16[o2 + 3] = v3;\n        this.uint16[o2 + 4] = v4;\n        this.uint16[o2 + 5] = v5;\n        this.uint16[o2 + 6] = v6;\n        this.uint16[o2 + 7] = v7;\n        return i;\n    }\n\n}\n\nStructArrayLayout4i4ui16.prototype.bytesPerElement = 16;\nregister('StructArrayLayout4i4ui16', StructArrayLayout4i4ui16);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Float32[3]\n *\n * @private\n */\nclass StructArrayLayout3f12 extends StructArray {\n    uint8: Uint8Array;\n    float32: Float32Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.float32 = new Float32Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o4 = i * 3;\n        this.float32[o4 + 0] = v0;\n        this.float32[o4 + 1] = v1;\n        this.float32[o4 + 2] = v2;\n        return i;\n    }\n\n}\n\nStructArrayLayout3f12.prototype.bytesPerElement = 12;\nregister('StructArrayLayout3f12', StructArrayLayout3f12);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Uint32[1]\n *\n * @private\n */\nclass StructArrayLayout1ul4 extends StructArray {\n    uint8: Uint8Array;\n    uint32: Uint32Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.uint32 = new Uint32Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o4 = i * 1;\n        this.uint32[o4 + 0] = v0;\n        return i;\n    }\n\n}\n\nStructArrayLayout1ul4.prototype.bytesPerElement = 4;\nregister('StructArrayLayout1ul4', StructArrayLayout1ul4);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Int16[6]\n * [12]: Uint32[1]\n * [16]: Uint16[2]\n * [20]: Int16[2]\n *\n * @private\n */\nclass StructArrayLayout6i1ul2ui2i24 extends StructArray {\n    uint8: Uint8Array;\n    int16: Int16Array;\n    uint32: Uint32Array;\n    uint16: Uint16Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.int16 = new Int16Array(this.arrayBuffer);\n        this.uint32 = new Uint32Array(this.arrayBuffer);\n        this.uint16 = new Uint16Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number, v3: number, v4: number, v5: number, v6: number, v7: number, v8: number, v9: number, v10: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o2 = i * 12;\n        const o4 = i * 6;\n        this.int16[o2 + 0] = v0;\n        this.int16[o2 + 1] = v1;\n        this.int16[o2 + 2] = v2;\n        this.int16[o2 + 3] = v3;\n        this.int16[o2 + 4] = v4;\n        this.int16[o2 + 5] = v5;\n        this.uint32[o4 + 3] = v6;\n        this.uint16[o2 + 8] = v7;\n        this.uint16[o2 + 9] = v8;\n        this.int16[o2 + 10] = v9;\n        this.int16[o2 + 11] = v10;\n        return i;\n    }\n\n}\n\nStructArrayLayout6i1ul2ui2i24.prototype.bytesPerElement = 24;\nregister('StructArrayLayout6i1ul2ui2i24', StructArrayLayout6i1ul2ui2i24);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Int16[2]\n * [4]: Int16[2]\n * [8]: Int16[2]\n *\n * @private\n */\nclass StructArrayLayout2i2i2i12 extends StructArray {\n    uint8: Uint8Array;\n    int16: Int16Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.int16 = new Int16Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number, v3: number, v4: number, v5: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o2 = i * 6;\n        this.int16[o2 + 0] = v0;\n        this.int16[o2 + 1] = v1;\n        this.int16[o2 + 2] = v2;\n        this.int16[o2 + 3] = v3;\n        this.int16[o2 + 4] = v4;\n        this.int16[o2 + 5] = v5;\n        return i;\n    }\n\n}\n\nStructArrayLayout2i2i2i12.prototype.bytesPerElement = 12;\nregister('StructArrayLayout2i2i2i12', StructArrayLayout2i2i2i12);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Uint8[2]\n *\n * @private\n */\nclass StructArrayLayout2ub4 extends StructArray {\n    uint8: Uint8Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o1 = i * 4;\n        this.uint8[o1 + 0] = v0;\n        this.uint8[o1 + 1] = v1;\n        return i;\n    }\n\n}\n\nStructArrayLayout2ub4.prototype.bytesPerElement = 4;\nregister('StructArrayLayout2ub4', StructArrayLayout2ub4);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Int16[2]\n * [4]: Uint16[2]\n * [8]: Uint32[3]\n * [20]: Uint16[3]\n * [28]: Float32[2]\n * [36]: Uint8[2]\n *\n * @private\n */\nclass StructArrayLayout2i2ui3ul3ui2f2ub40 extends StructArray {\n    uint8: Uint8Array;\n    int16: Int16Array;\n    uint16: Uint16Array;\n    uint32: Uint32Array;\n    float32: Float32Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.int16 = new Int16Array(this.arrayBuffer);\n        this.uint16 = new Uint16Array(this.arrayBuffer);\n        this.uint32 = new Uint32Array(this.arrayBuffer);\n        this.float32 = new Float32Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number, v3: number, v4: number, v5: number, v6: number, v7: number, v8: number, v9: number, v10: number, v11: number, v12: number, v13: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o2 = i * 20;\n        const o4 = i * 10;\n        const o1 = i * 40;\n        this.int16[o2 + 0] = v0;\n        this.int16[o2 + 1] = v1;\n        this.uint16[o2 + 2] = v2;\n        this.uint16[o2 + 3] = v3;\n        this.uint32[o4 + 2] = v4;\n        this.uint32[o4 + 3] = v5;\n        this.uint32[o4 + 4] = v6;\n        this.uint16[o2 + 10] = v7;\n        this.uint16[o2 + 11] = v8;\n        this.uint16[o2 + 12] = v9;\n        this.float32[o4 + 7] = v10;\n        this.float32[o4 + 8] = v11;\n        this.uint8[o1 + 36] = v12;\n        this.uint8[o1 + 37] = v13;\n        return i;\n    }\n\n}\n\nStructArrayLayout2i2ui3ul3ui2f2ub40.prototype.bytesPerElement = 40;\nregister('StructArrayLayout2i2ui3ul3ui2f2ub40', StructArrayLayout2i2ui3ul3ui2f2ub40);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Float32[1]\n *\n * @private\n */\nclass StructArrayLayout1f4 extends StructArray {\n    uint8: Uint8Array;\n    float32: Float32Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.float32 = new Float32Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o4 = i * 1;\n        this.float32[o4 + 0] = v0;\n        return i;\n    }\n\n}\n\nStructArrayLayout1f4.prototype.bytesPerElement = 4;\nregister('StructArrayLayout1f4', StructArrayLayout1f4);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Int16[3]\n *\n * @private\n */\nclass StructArrayLayout3i6 extends StructArray {\n    uint8: Uint8Array;\n    int16: Int16Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.int16 = new Int16Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o2 = i * 3;\n        this.int16[o2 + 0] = v0;\n        this.int16[o2 + 1] = v1;\n        this.int16[o2 + 2] = v2;\n        return i;\n    }\n\n}\n\nStructArrayLayout3i6.prototype.bytesPerElement = 6;\nregister('StructArrayLayout3i6', StructArrayLayout3i6);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Uint32[1]\n * [4]: Uint16[2]\n *\n * @private\n */\nclass StructArrayLayout1ul2ui8 extends StructArray {\n    uint8: Uint8Array;\n    uint32: Uint32Array;\n    uint16: Uint16Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.uint32 = new Uint32Array(this.arrayBuffer);\n        this.uint16 = new Uint16Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o4 = i * 2;\n        const o2 = i * 4;\n        this.uint32[o4 + 0] = v0;\n        this.uint16[o2 + 2] = v1;\n        this.uint16[o2 + 3] = v2;\n        return i;\n    }\n\n}\n\nStructArrayLayout1ul2ui8.prototype.bytesPerElement = 8;\nregister('StructArrayLayout1ul2ui8', StructArrayLayout1ul2ui8);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Uint16[3]\n *\n * @private\n */\nclass StructArrayLayout3ui6 extends StructArray {\n    uint8: Uint8Array;\n    uint16: Uint16Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.uint16 = new Uint16Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o2 = i * 3;\n        this.uint16[o2 + 0] = v0;\n        this.uint16[o2 + 1] = v1;\n        this.uint16[o2 + 2] = v2;\n        return i;\n    }\n\n}\n\nStructArrayLayout3ui6.prototype.bytesPerElement = 6;\nregister('StructArrayLayout3ui6', StructArrayLayout3ui6);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Uint16[2]\n *\n * @private\n */\nclass StructArrayLayout2ui4 extends StructArray {\n    uint8: Uint8Array;\n    uint16: Uint16Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.uint16 = new Uint16Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o2 = i * 2;\n        this.uint16[o2 + 0] = v0;\n        this.uint16[o2 + 1] = v1;\n        return i;\n    }\n\n}\n\nStructArrayLayout2ui4.prototype.bytesPerElement = 4;\nregister('StructArrayLayout2ui4', StructArrayLayout2ui4);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Float32[2]\n *\n * @private\n */\nclass StructArrayLayout2f8 extends StructArray {\n    uint8: Uint8Array;\n    float32: Float32Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.float32 = new Float32Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o4 = i * 2;\n        this.float32[o4 + 0] = v0;\n        this.float32[o4 + 1] = v1;\n        return i;\n    }\n\n}\n\nStructArrayLayout2f8.prototype.bytesPerElement = 8;\nregister('StructArrayLayout2f8', StructArrayLayout2f8);\n\n\n/**\n * Implementation of the StructArray layout:\n * [0]: Float32[4]\n *\n * @private\n */\nclass StructArrayLayout4f16 extends StructArray {\n    uint8: Uint8Array;\n    float32: Float32Array;\n\n    _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer);\n        this.float32 = new Float32Array(this.arrayBuffer);\n    }\n\n    emplaceBack(v0: number, v1: number, v2: number, v3: number) {\n        const i = this.length;\n        this.resize(i + 1);\n        const o4 = i * 4;\n        this.float32[o4 + 0] = v0;\n        this.float32[o4 + 1] = v1;\n        this.float32[o4 + 2] = v2;\n        this.float32[o4 + 3] = v3;\n        return i;\n    }\n\n}\n\nStructArrayLayout4f16.prototype.bytesPerElement = 16;\nregister('StructArrayLayout4f16', StructArrayLayout4f16);\n\n\nclass CollisionBoxStruct extends Struct {\n    _structArray: CollisionBoxArray;\n    anchorPointX: number;\n    anchorPointY: number;\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n    featureIndex: number;\n    sourceLayerIndex: number;\n    bucketIndex: number;\n    radius: number;\n    signedDistanceFromAnchor: number;\n    anchorPoint: Point;\n    get anchorPointX() { return this._structArray.int16[this._pos2 + 0]; }\n    set anchorPointX(x) { this._structArray.int16[this._pos2 + 0] = x; }\n    get anchorPointY() { return this._structArray.int16[this._pos2 + 1]; }\n    set anchorPointY(x) { this._structArray.int16[this._pos2 + 1] = x; }\n    get x1() { return this._structArray.int16[this._pos2 + 2]; }\n    set x1(x) { this._structArray.int16[this._pos2 + 2] = x; }\n    get y1() { return this._structArray.int16[this._pos2 + 3]; }\n    set y1(x) { this._structArray.int16[this._pos2 + 3] = x; }\n    get x2() { return this._structArray.int16[this._pos2 + 4]; }\n    set x2(x) { this._structArray.int16[this._pos2 + 4] = x; }\n    get y2() { return this._structArray.int16[this._pos2 + 5]; }\n    set y2(x) { this._structArray.int16[this._pos2 + 5] = x; }\n    get featureIndex() { return this._structArray.uint32[this._pos4 + 3]; }\n    set featureIndex(x) { this._structArray.uint32[this._pos4 + 3] = x; }\n    get sourceLayerIndex() { return this._structArray.uint16[this._pos2 + 8]; }\n    set sourceLayerIndex(x) { this._structArray.uint16[this._pos2 + 8] = x; }\n    get bucketIndex() { return this._structArray.uint16[this._pos2 + 9]; }\n    set bucketIndex(x) { this._structArray.uint16[this._pos2 + 9] = x; }\n    get radius() { return this._structArray.int16[this._pos2 + 10]; }\n    set radius(x) { this._structArray.int16[this._pos2 + 10] = x; }\n    get signedDistanceFromAnchor() { return this._structArray.int16[this._pos2 + 11]; }\n    set signedDistanceFromAnchor(x) { this._structArray.int16[this._pos2 + 11] = x; }\n    get anchorPoint() { return new Point(this.anchorPointX, this.anchorPointY); }\n}\n\nCollisionBoxStruct.prototype.size = 24;\n\nexport type CollisionBox = CollisionBoxStruct;\n\n\n/**\n * @private\n */\nclass CollisionBoxArray extends StructArrayLayout6i1ul2ui2i24 {\n    /**\n     * Return the CollisionBoxStruct at the given location in the array.\n     * @param {number} index The index of the element.\n     */\n    get(index: number): CollisionBoxStruct {\n        assert(!this.isTransferred);\n        return new CollisionBoxStruct(this, index);\n    }\n}\n\nregister('CollisionBoxArray', CollisionBoxArray);\n\nclass PlacedSymbolStruct extends Struct {\n    _structArray: PlacedSymbolArray;\n    anchorX: number;\n    anchorY: number;\n    glyphStartIndex: number;\n    numGlyphs: number;\n    vertexStartIndex: number;\n    lineStartIndex: number;\n    lineLength: number;\n    segment: number;\n    lowerSize: number;\n    upperSize: number;\n    lineOffsetX: number;\n    lineOffsetY: number;\n    writingMode: number;\n    hidden: number;\n    get anchorX() { return this._structArray.int16[this._pos2 + 0]; }\n    set anchorX(x) { this._structArray.int16[this._pos2 + 0] = x; }\n    get anchorY() { return this._structArray.int16[this._pos2 + 1]; }\n    set anchorY(x) { this._structArray.int16[this._pos2 + 1] = x; }\n    get glyphStartIndex() { return this._structArray.uint16[this._pos2 + 2]; }\n    set glyphStartIndex(x) { this._structArray.uint16[this._pos2 + 2] = x; }\n    get numGlyphs() { return this._structArray.uint16[this._pos2 + 3]; }\n    set numGlyphs(x) { this._structArray.uint16[this._pos2 + 3] = x; }\n    get vertexStartIndex() { return this._structArray.uint32[this._pos4 + 2]; }\n    set vertexStartIndex(x) { this._structArray.uint32[this._pos4 + 2] = x; }\n    get lineStartIndex() { return this._structArray.uint32[this._pos4 + 3]; }\n    set lineStartIndex(x) { this._structArray.uint32[this._pos4 + 3] = x; }\n    get lineLength() { return this._structArray.uint32[this._pos4 + 4]; }\n    set lineLength(x) { this._structArray.uint32[this._pos4 + 4] = x; }\n    get segment() { return this._structArray.uint16[this._pos2 + 10]; }\n    set segment(x) { this._structArray.uint16[this._pos2 + 10] = x; }\n    get lowerSize() { return this._structArray.uint16[this._pos2 + 11]; }\n    set lowerSize(x) { this._structArray.uint16[this._pos2 + 11] = x; }\n    get upperSize() { return this._structArray.uint16[this._pos2 + 12]; }\n    set upperSize(x) { this._structArray.uint16[this._pos2 + 12] = x; }\n    get lineOffsetX() { return this._structArray.float32[this._pos4 + 7]; }\n    set lineOffsetX(x) { this._structArray.float32[this._pos4 + 7] = x; }\n    get lineOffsetY() { return this._structArray.float32[this._pos4 + 8]; }\n    set lineOffsetY(x) { this._structArray.float32[this._pos4 + 8] = x; }\n    get writingMode() { return this._structArray.uint8[this._pos1 + 36]; }\n    set writingMode(x) { this._structArray.uint8[this._pos1 + 36] = x; }\n    get hidden() { return this._structArray.uint8[this._pos1 + 37]; }\n    set hidden(x) { this._structArray.uint8[this._pos1 + 37] = x; }\n}\n\nPlacedSymbolStruct.prototype.size = 40;\n\nexport type PlacedSymbol = PlacedSymbolStruct;\n\n\n/**\n * @private\n */\nclass PlacedSymbolArray extends StructArrayLayout2i2ui3ul3ui2f2ub40 {\n    /**\n     * Return the PlacedSymbolStruct at the given location in the array.\n     * @param {number} index The index of the element.\n     */\n    get(index: number): PlacedSymbolStruct {\n        assert(!this.isTransferred);\n        return new PlacedSymbolStruct(this, index);\n    }\n}\n\nregister('PlacedSymbolArray', PlacedSymbolArray);\n\nclass GlyphOffsetStruct extends Struct {\n    _structArray: GlyphOffsetArray;\n    offsetX: number;\n    get offsetX() { return this._structArray.float32[this._pos4 + 0]; }\n    set offsetX(x) { this._structArray.float32[this._pos4 + 0] = x; }\n}\n\nGlyphOffsetStruct.prototype.size = 4;\n\nexport type GlyphOffset = GlyphOffsetStruct;\n\n\n/**\n * @private\n */\nclass GlyphOffsetArray extends StructArrayLayout1f4 {\n    getoffsetX(index: number) { return this.float32[index * 1 + 0]; }\n    /**\n     * Return the GlyphOffsetStruct at the given location in the array.\n     * @param {number} index The index of the element.\n     */\n    get(index: number): GlyphOffsetStruct {\n        assert(!this.isTransferred);\n        return new GlyphOffsetStruct(this, index);\n    }\n}\n\nregister('GlyphOffsetArray', GlyphOffsetArray);\n\nclass SymbolLineVertexStruct extends Struct {\n    _structArray: SymbolLineVertexArray;\n    x: number;\n    y: number;\n    tileUnitDistanceFromAnchor: number;\n    get x() { return this._structArray.int16[this._pos2 + 0]; }\n    set x(x) { this._structArray.int16[this._pos2 + 0] = x; }\n    get y() { return this._structArray.int16[this._pos2 + 1]; }\n    set y(x) { this._structArray.int16[this._pos2 + 1] = x; }\n    get tileUnitDistanceFromAnchor() { return this._structArray.int16[this._pos2 + 2]; }\n    set tileUnitDistanceFromAnchor(x) { this._structArray.int16[this._pos2 + 2] = x; }\n}\n\nSymbolLineVertexStruct.prototype.size = 6;\n\nexport type SymbolLineVertex = SymbolLineVertexStruct;\n\n\n/**\n * @private\n */\nclass SymbolLineVertexArray extends StructArrayLayout3i6 {\n    getx(index: number) { return this.int16[index * 3 + 0]; }\n    gety(index: number) { return this.int16[index * 3 + 1]; }\n    gettileUnitDistanceFromAnchor(index: number) { return this.int16[index * 3 + 2]; }\n    /**\n     * Return the SymbolLineVertexStruct at the given location in the array.\n     * @param {number} index The index of the element.\n     */\n    get(index: number): SymbolLineVertexStruct {\n        assert(!this.isTransferred);\n        return new SymbolLineVertexStruct(this, index);\n    }\n}\n\nregister('SymbolLineVertexArray', SymbolLineVertexArray);\n\nclass FeatureIndexStruct extends Struct {\n    _structArray: FeatureIndexArray;\n    featureIndex: number;\n    sourceLayerIndex: number;\n    bucketIndex: number;\n    get featureIndex() { return this._structArray.uint32[this._pos4 + 0]; }\n    set featureIndex(x) { this._structArray.uint32[this._pos4 + 0] = x; }\n    get sourceLayerIndex() { return this._structArray.uint16[this._pos2 + 2]; }\n    set sourceLayerIndex(x) { this._structArray.uint16[this._pos2 + 2] = x; }\n    get bucketIndex() { return this._structArray.uint16[this._pos2 + 3]; }\n    set bucketIndex(x) { this._structArray.uint16[this._pos2 + 3] = x; }\n}\n\nFeatureIndexStruct.prototype.size = 8;\n\nexport type FeatureIndex = FeatureIndexStruct;\n\n\n/**\n * @private\n */\nclass FeatureIndexArray extends StructArrayLayout1ul2ui8 {\n    /**\n     * Return the FeatureIndexStruct at the given location in the array.\n     * @param {number} index The index of the element.\n     */\n    get(index: number): FeatureIndexStruct {\n        assert(!this.isTransferred);\n        return new FeatureIndexStruct(this, index);\n    }\n}\n\nregister('FeatureIndexArray', FeatureIndexArray);\n\n\nmodule.exports = {\n    StructArrayLayout2i4,\n    StructArrayLayout4i8,\n    StructArrayLayout2i4i12,\n    StructArrayLayout4i4ub12,\n    StructArrayLayout4i4ui16,\n    StructArrayLayout3f12,\n    StructArrayLayout1ul4,\n    StructArrayLayout6i1ul2ui2i24,\n    StructArrayLayout2i2i2i12,\n    StructArrayLayout2ub4,\n    StructArrayLayout2i2ui3ul3ui2f2ub40,\n    StructArrayLayout1f4,\n    StructArrayLayout3i6,\n    StructArrayLayout1ul2ui8,\n    StructArrayLayout3ui6,\n    StructArrayLayout2ui4,\n    StructArrayLayout2f8,\n    StructArrayLayout4f16,\n    PosArray: StructArrayLayout2i4,\n    RasterBoundsArray: StructArrayLayout4i8,\n    CircleLayoutArray: StructArrayLayout2i4,\n    FillLayoutArray: StructArrayLayout2i4,\n    FillExtrusionLayoutArray: StructArrayLayout2i4i12,\n    HeatmapLayoutArray: StructArrayLayout2i4,\n    LineLayoutArray: StructArrayLayout4i4ub12,\n    SymbolLayoutArray: StructArrayLayout4i4ui16,\n    SymbolDynamicLayoutArray: StructArrayLayout3f12,\n    SymbolOpacityArray: StructArrayLayout1ul4,\n    CollisionBoxLayoutArray: StructArrayLayout2i2i2i12,\n    CollisionCircleLayoutArray: StructArrayLayout2i2i2i12,\n    CollisionVertexArray: StructArrayLayout2ub4,\n    TriangleIndexArray: StructArrayLayout3ui6,\n    LineIndexArray: StructArrayLayout2ui4,\n    CollisionBoxArray,\n    PlacedSymbolArray,\n    GlyphOffsetArray,\n    SymbolLineVertexArray,\n    FeatureIndexArray\n};\n","// @flow\n\nconst assert = require('assert');\nconst Color = require('../util/color');\n\nconst {\n    NullType,\n    NumberType,\n    StringType,\n    BooleanType,\n    ColorType,\n    ObjectType,\n    ValueType,\n    array\n} = require('./types');\n\nimport type { Type } from './types';\n\nfunction validateRGBA(r: mixed, g: mixed, b: mixed, a?: mixed): ?string {\n    if (!(\n        typeof r === 'number' && r >= 0 && r <= 255 &&\n        typeof g === 'number' && g >= 0 && g <= 255 &&\n        typeof b === 'number' && b >= 0 && b <= 255\n    )) {\n        const value = typeof a === 'number' ? [r, g, b, a] : [r, g, b];\n        return `Invalid rgba value [${value.join(', ')}]: 'r', 'g', and 'b' must be between 0 and 255.`;\n    }\n\n    if (!(\n        typeof a === 'undefined' || (typeof a === 'number' && a >= 0 && a <= 1)\n    )) {\n        return `Invalid rgba value [${[r, g, b, a].join(', ')}]: 'a' must be between 0 and 1.`;\n    }\n\n    return null;\n}\n\nexport type Value = null | string | boolean | number | Color | $ReadOnlyArray<Value> | { +[string]: Value }\n\nfunction isValue(mixed: mixed): boolean {\n    if (mixed === null) {\n        return true;\n    } else if (typeof mixed === 'string') {\n        return true;\n    } else if (typeof mixed === 'boolean') {\n        return true;\n    } else if (typeof mixed === 'number') {\n        return true;\n    } else if (mixed instanceof Color) {\n        return true;\n    } else if (Array.isArray(mixed)) {\n        for (const item of mixed) {\n            if (!isValue(item)) {\n                return false;\n            }\n        }\n        return true;\n    } else if (typeof mixed === 'object') {\n        for (const key in mixed) {\n            if (!isValue(mixed[key])) {\n                return false;\n            }\n        }\n        return true;\n    } else {\n        return false;\n    }\n}\n\nfunction typeOf(value: Value): Type {\n    if (value === null) {\n        return NullType;\n    } else if (typeof value === 'string') {\n        return StringType;\n    } else if (typeof value === 'boolean') {\n        return BooleanType;\n    } else if (typeof value === 'number') {\n        return NumberType;\n    } else if (value instanceof Color) {\n        return ColorType;\n    } else if (Array.isArray(value)) {\n        const length = value.length;\n        let itemType: ?Type;\n\n        for (const item of value) {\n            const t = typeOf(item);\n            if (!itemType) {\n                itemType = t;\n            } else if (itemType === t) {\n                continue;\n            } else {\n                itemType = ValueType;\n                break;\n            }\n        }\n\n        return array(itemType || ValueType, length);\n    } else {\n        assert(typeof value === 'object');\n        return ObjectType;\n    }\n}\n\nmodule.exports = {\n    Color,\n    validateRGBA,\n    isValue,\n    typeOf\n};\n","\n// Turn jsonlint-lines-primitives objects into primitive objects\nfunction unbundle(value) {\n    if (value instanceof Number || value instanceof String || value instanceof Boolean) {\n        return value.valueOf();\n    } else {\n        return value;\n    }\n}\n\nfunction deepUnbundle(value) {\n    if (Array.isArray(value)) {\n        return value.map(deepUnbundle);\n    }\n    return unbundle(value);\n}\n\nmodule.exports = unbundle;\nmodule.exports.deep = deepUnbundle;\n","// @flow\n\nconst {parseCSSColor} = require('csscolorparser');\n\n/**\n * An RGBA color value. Create instances from color strings using the static\n * method `Color.parse`. The constructor accepts RGB channel values in the range\n * `[0, 1]`, premultiplied by A.\n *\n * @param {number} r The red channel.\n * @param {number} g The green channel.\n * @param {number} b The blue channel.\n * @param {number} a The alpha channel.\n */\nclass Color {\n    r: number;\n    g: number;\n    b: number;\n    a: number;\n\n    constructor(r: number, g: number, b: number, a: number = 1) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n\n    static black: Color;\n    static white: Color;\n    static transparent: Color;\n\n    /**\n     * Parses valid CSS color strings and returns a `Color` instance.\n     * @returns A `Color` instance, or `undefined` if the input is not a valid color string.\n     */\n    static parse(input: ?string): Color | void {\n        if (!input) {\n            return undefined;\n        }\n\n        if (input instanceof Color) {\n            return input;\n        }\n\n        if (typeof input !== 'string') {\n            return undefined;\n        }\n\n        const rgba = parseCSSColor(input);\n        if (!rgba) {\n            return undefined;\n        }\n\n        return new Color(\n            rgba[0] / 255 * rgba[3],\n            rgba[1] / 255 * rgba[3],\n            rgba[2] / 255 * rgba[3],\n            rgba[3]\n        );\n    }\n\n    /**\n     * Returns an RGBA string representing the color value.\n     *\n     * @returns An RGBA string.\n     * @example\n     * var purple = new Color.parse('purple');\n     * purple.toString; // = \"rgba(128,0,128,1)\"\n     * var translucentGreen = new Color.parse('rgba(26, 207, 26, .73)');\n     * translucentGreen.toString(); // = \"rgba(26,207,26,0.73)\"\n     */\n    toString(): string {\n        const transformRgb = (value: number) => Math.round(value * 255 / this.a);\n        const rgb = [this.r, this.g, this.b].map(transformRgb);\n        return `rgba(${rgb.concat(this.a).join(',')})`;\n    }\n}\n\nColor.black = new Color(0, 0, 0, 1);\nColor.white = new Color(1, 1, 1, 1);\nColor.transparent = new Color(0, 0, 0, 0);\n\nmodule.exports = Color;\n","// @flow\n\nconst assert = require('assert');\nconst extend = require('../util/extend');\nconst ParsingError = require('./parsing_error');\nconst ParsingContext = require('./parsing_context');\nconst EvaluationContext = require('./evaluation_context');\nconst {CompoundExpression} = require('./compound_expression');\nconst Step = require('./definitions/step');\nconst Interpolate = require('./definitions/interpolate');\nconst Coalesce = require('./definitions/coalesce');\nconst Let = require('./definitions/let');\nconst definitions = require('./definitions');\nconst isConstant = require('./is_constant');\nconst RuntimeError = require('./runtime_error');\nconst {success, error} = require('../util/result');\n\nimport type {Type} from './types';\nimport type {Value} from './values';\nimport type {Expression} from './expression';\nimport type {StylePropertySpecification} from '../style-spec';\nimport type {Result} from '../util/result';\nimport type {InterpolationType} from './definitions/interpolate';\n\nexport type Feature = {\n    +type: 1 | 2 | 3 | 'Unknown' | 'Point' | 'MultiPoint' | 'LineString' | 'MultiLineString' | 'Polygon' | 'MultiPolygon',\n    +id?: any,\n    +properties: {[string]: any}\n};\n\nexport type GlobalProperties = {\n    zoom: number,\n    heatmapDensity?: number\n};\n\nclass StyleExpression {\n    expression: Expression;\n\n    _evaluator: EvaluationContext;\n\n    constructor(expression: Expression) {\n        this.expression = expression;\n    }\n\n    evaluate(globals: GlobalProperties, feature?: Feature): any {\n        if (!this._evaluator) {\n            this._evaluator = new EvaluationContext();\n        }\n\n        this._evaluator.globals = globals;\n        this._evaluator.feature = feature;\n        return this.expression.evaluate(this._evaluator);\n    }\n}\n\nclass StyleExpressionWithErrorHandling extends StyleExpression {\n    _defaultValue: Value;\n    _warningHistory: {[key: string]: boolean};\n    _enumValues: {[string]: any};\n\n    _evaluator: EvaluationContext;\n\n    constructor(expression: Expression, propertySpec: StylePropertySpecification) {\n        super(expression);\n        this._warningHistory = {};\n        this._defaultValue = getDefaultValue(propertySpec);\n        if (propertySpec.type === 'enum') {\n            this._enumValues = propertySpec.values;\n        }\n    }\n\n    evaluate(globals: GlobalProperties, feature?: Feature) {\n        if (!this._evaluator) {\n            this._evaluator = new EvaluationContext();\n        }\n\n        this._evaluator.globals = globals;\n        this._evaluator.feature = feature;\n\n        try {\n            const val = this.expression.evaluate(this._evaluator);\n            if (val === null || val === undefined) {\n                return this._defaultValue;\n            }\n            if (this._enumValues && !(val in this._enumValues)) {\n                throw new RuntimeError(`Expected value to be one of ${Object.keys(this._enumValues).map(v => JSON.stringify(v)).join(', ')}, but found ${JSON.stringify(val)} instead.`);\n            }\n            return val;\n        } catch (e) {\n            if (!this._warningHistory[e.message]) {\n                this._warningHistory[e.message] = true;\n                if (typeof console !== 'undefined') {\n                    console.warn(e.message);\n                }\n            }\n            return this._defaultValue;\n        }\n    }\n}\n\nfunction isExpression(expression: mixed) {\n    return Array.isArray(expression) && expression.length > 0 &&\n        typeof expression[0] === 'string' && expression[0] in definitions;\n}\n\n/**\n * Parse and typecheck the given style spec JSON expression.  If\n * options.defaultValue is provided, then the resulting StyleExpression's\n * `evaluate()` method will handle errors by logging a warning (once per\n * message) and returning the default value.  Otherwise, it will throw\n * evaluation errors.\n *\n * @private\n */\nfunction createExpression(expression: mixed,\n                          propertySpec: StylePropertySpecification,\n                          options: {handleErrors?: boolean} = {}): Result<StyleExpression, Array<ParsingError>> {\n    const parser = new ParsingContext(definitions, [], getExpectedType(propertySpec));\n    const parsed = parser.parse(expression);\n    if (!parsed) {\n        assert(parser.errors.length > 0);\n        return error(parser.errors);\n    }\n\n    if (options.handleErrors === false) {\n        return success(new StyleExpression(parsed));\n    } else {\n        return success(new StyleExpressionWithErrorHandling(parsed, propertySpec));\n    }\n}\n\nclass ZoomConstantExpression<Kind> {\n    kind: Kind;\n    _styleExpression: StyleExpression;\n    constructor(kind: Kind, expression: StyleExpression) {\n        this.kind = kind;\n        this._styleExpression = expression;\n    }\n    evaluate(globals: GlobalProperties, feature?: Feature): any {\n        return this._styleExpression.evaluate(globals, feature);\n    }\n}\n\nclass ZoomDependentExpression<Kind> {\n    kind: Kind;\n    zoomStops: Array<number>;\n\n    _styleExpression: StyleExpression;\n    _interpolationType: ?InterpolationType;\n\n    constructor(kind: Kind, expression: StyleExpression, zoomCurve: Step | Interpolate) {\n        this.kind = kind;\n        this.zoomStops = zoomCurve.labels;\n        this._styleExpression = expression;\n        if (zoomCurve instanceof Interpolate) {\n            this._interpolationType = zoomCurve.interpolation;\n        }\n    }\n\n    evaluate(globals: GlobalProperties, feature?: Feature): any {\n        return this._styleExpression.evaluate(globals, feature);\n    }\n\n    interpolationFactor(input: number, lower: number, upper: number): number {\n        if (this._interpolationType) {\n            return Interpolate.interpolationFactor(this._interpolationType, input, lower, upper);\n        } else {\n            return 0;\n        }\n    }\n}\n\nexport type ConstantExpression = {\n    kind: 'constant',\n    +evaluate: (globals: GlobalProperties, feature?: Feature) => any,\n}\n\nexport type SourceExpression = {\n    kind: 'source',\n    +evaluate: (globals: GlobalProperties, feature?: Feature) => any,\n};\n\nexport type CameraExpression = {\n    kind: 'camera',\n    +evaluate: (globals: GlobalProperties, feature?: Feature) => any,\n    +interpolationFactor: (input: number, lower: number, upper: number) => number,\n    zoomStops: Array<number>\n};\n\nexport type CompositeExpression = {\n    kind: 'composite',\n    +evaluate: (globals: GlobalProperties, feature?: Feature) => any,\n    +interpolationFactor: (input: number, lower: number, upper: number) => number,\n    zoomStops: Array<number>\n};\n\nexport type StylePropertyExpression =\n    | ConstantExpression\n    | SourceExpression\n    | CameraExpression\n    | CompositeExpression;\n\nfunction createPropertyExpression(expression: mixed,\n                                  propertySpec: StylePropertySpecification,\n                                  options: {handleErrors?: boolean} = {}): Result<StylePropertyExpression, Array<ParsingError>> {\n    expression = createExpression(expression, propertySpec, options);\n    if (expression.result === 'error') {\n        return expression;\n    }\n\n    const parsed = expression.value.expression;\n\n    const isFeatureConstant = isConstant.isFeatureConstant(parsed);\n    if (!isFeatureConstant && !propertySpec['property-function']) {\n        return error([new ParsingError('', 'property expressions not supported')]);\n    }\n\n    const isZoomConstant = isConstant.isGlobalPropertyConstant(parsed, ['zoom']);\n    if (!isZoomConstant && propertySpec['zoom-function'] === false) {\n        return error([new ParsingError('', 'zoom expressions not supported')]);\n    }\n\n    const zoomCurve = findZoomCurve(parsed);\n    if (!zoomCurve && !isZoomConstant) {\n        return error([new ParsingError('', '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.')]);\n    } else if (zoomCurve instanceof ParsingError) {\n        return error([zoomCurve]);\n    } else if (zoomCurve instanceof Interpolate && propertySpec['function'] === 'piecewise-constant') {\n        return error([new ParsingError('', '\"interpolate\" expressions cannot be used with this property')]);\n    }\n\n    if (!zoomCurve) {\n        return success(isFeatureConstant ?\n            (new ZoomConstantExpression('constant', expression.value): ConstantExpression) :\n            (new ZoomConstantExpression('source', expression.value): SourceExpression));\n    }\n\n    return success(isFeatureConstant ?\n        (new ZoomDependentExpression('camera', expression.value, zoomCurve): CameraExpression) :\n        (new ZoomDependentExpression('composite', expression.value, zoomCurve): CompositeExpression));\n}\n\nconst {isFunction, createFunction} = require('../function');\nconst {Color} = require('./values');\n\n// serialization wrapper for old-style stop functions normalized to the\n// expression interface\nclass StylePropertyFunction<T> {\n    _parameters: PropertyValueSpecification<T>;\n    _specification: StylePropertySpecification;\n\n    kind: 'constant' | 'source' | 'camera' | 'composite';\n    evaluate: (globals: GlobalProperties, feature?: Feature) => any;\n    interpolationFactor: ?(input: number, lower: number, upper: number) => number;\n    zoomStops: ?Array<number>;\n\n    constructor(parameters: PropertyValueSpecification<T>, specification: StylePropertySpecification) {\n        this._parameters = parameters;\n        this._specification = specification;\n        extend(this, createFunction(this._parameters, this._specification));\n    }\n\n    static deserialize(serialized: {_parameters: PropertyValueSpecification<T>, _specification: StylePropertySpecification}) {\n        return ((new StylePropertyFunction(serialized._parameters, serialized._specification)): StylePropertyFunction<T>);\n    }\n\n    static serialize(input: StylePropertyFunction<T>) {\n        return {\n            _parameters: input._parameters,\n            _specification: input._specification\n        };\n    }\n}\n\nfunction normalizePropertyExpression<T>(value: PropertyValueSpecification<T>, specification: StylePropertySpecification): StylePropertyExpression {\n    if (isFunction(value)) {\n        return (new StylePropertyFunction(value, specification): any);\n\n    } else if (isExpression(value)) {\n        const expression = createPropertyExpression(value, specification);\n        if (expression.result === 'error') {\n            // this should have been caught in validation\n            throw new Error(expression.value.map(err => `${err.key}: ${err.message}`).join(', '));\n        }\n        return expression.value;\n\n    } else {\n        let constant: any = value;\n        if (typeof value === 'string' && specification.type === 'color') {\n            constant = Color.parse(value);\n        }\n        return {\n            kind: 'constant',\n            evaluate: () => constant\n        };\n    }\n}\n\nmodule.exports = {\n    StyleExpression,\n    StyleExpressionWithErrorHandling,\n    isExpression,\n    createExpression,\n    createPropertyExpression,\n    normalizePropertyExpression,\n    ZoomConstantExpression,\n    ZoomDependentExpression,\n    StylePropertyFunction\n};\n\n// Zoom-dependent expressions may only use [\"zoom\"] as the input to a top-level \"step\" or \"interpolate\"\n// expression (collectively referred to as a \"curve\"). The curve may be wrapped in one or more \"let\" or\n// \"coalesce\" expressions.\nfunction findZoomCurve(expression: Expression): Step | Interpolate | ParsingError | null {\n    let result = null;\n    if (expression instanceof Let) {\n        result = findZoomCurve(expression.result);\n\n    } else if (expression instanceof Coalesce) {\n        for (const arg of expression.args) {\n            result = findZoomCurve(arg);\n            if (result) {\n                break;\n            }\n        }\n\n    } else if ((expression instanceof Step || expression instanceof Interpolate) &&\n        expression.input instanceof CompoundExpression &&\n        expression.input.name === 'zoom') {\n\n        result = expression;\n    }\n\n    if (result instanceof ParsingError) {\n        return result;\n    }\n\n    expression.eachChild((child) => {\n        const childResult = findZoomCurve(child);\n        if (childResult instanceof ParsingError) {\n            result = childResult;\n        } else if (!result && childResult) {\n            result = new ParsingError('', '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.');\n        } else if (result && childResult && result !== childResult) {\n            result = new ParsingError('', 'Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression.');\n        }\n    });\n\n    return result;\n}\n\nconst {\n    ColorType,\n    StringType,\n    NumberType,\n    BooleanType,\n    ValueType,\n    array\n} = require('./types');\n\nfunction getExpectedType(spec: StylePropertySpecification): Type | null {\n    const types = {\n        color: ColorType,\n        string: StringType,\n        number: NumberType,\n        enum: StringType,\n        boolean: BooleanType\n    };\n\n    if (spec.type === 'array') {\n        return array(types[spec.value] || ValueType, spec.length);\n    }\n\n    return types[spec.type] || null;\n}\n\nfunction getDefaultValue(spec: StylePropertySpecification): Value {\n    if (spec.type === 'color' && isFunction(spec.default)) {\n        // Special case for heatmap-color: it uses the 'default:' to define a\n        // default color ramp, but createExpression expects a simple value to fall\n        // back to in case of runtime errors\n        return new Color(0, 0, 0, 0);\n    } else if (spec.type === 'color') {\n        return Color.parse(spec.default) || null;\n    } else if (spec.default === undefined) {\n        return null;\n    } else {\n        return spec.default;\n    }\n}\n","// @flow\n\nclass RuntimeError {\n    name: string;\n    message: string;\n\n    constructor(message: string) {\n        this.name = 'ExpressionEvaluationError';\n        this.message = message;\n    }\n\n    toJSON() {\n        return this.message;\n    }\n}\n\nmodule.exports = RuntimeError;\n","\nconst extend = require('../util/extend');\nconst unbundle = require('../util/unbundle_jsonlint');\nconst {isExpression} = require('../expression');\nconst {isFunction} = require('../function');\n\n// Main recursive validation function. Tracks:\n//\n// - key: string representing location of validation in style tree. Used only\n//   for more informative error reporting.\n// - value: current value from style being evaluated. May be anything from a\n//   high level object that needs to be descended into deeper or a simple\n//   scalar value.\n// - valueSpec: current spec being evaluated. Tracks value.\n// - styleSpec: current full spec being evaluated.\n\nmodule.exports = function validate(options) {\n\n    const validateFunction = require('./validate_function');\n    const validateExpression = require('./validate_expression');\n    const validateObject = require('./validate_object');\n    const VALIDATORS = {\n        '*': function() {\n            return [];\n        },\n        'array': require('./validate_array'),\n        'boolean': require('./validate_boolean'),\n        'number': require('./validate_number'),\n        'color': require('./validate_color'),\n        'constants': require('./validate_constants'),\n        'enum': require('./validate_enum'),\n        'filter': require('./validate_filter'),\n        'function': require('./validate_function'),\n        'layer': require('./validate_layer'),\n        'object': require('./validate_object'),\n        'source': require('./validate_source'),\n        'light': require('./validate_light'),\n        'string': require('./validate_string')\n    };\n\n    const value = options.value;\n    const valueSpec = options.valueSpec;\n    const styleSpec = options.styleSpec;\n\n    if (valueSpec.function && isFunction(unbundle(value))) {\n        return validateFunction(options);\n\n    } else if (valueSpec.function && isExpression(unbundle.deep(value))) {\n        return validateExpression(options);\n\n    } else if (valueSpec.type && VALIDATORS[valueSpec.type]) {\n        return VALIDATORS[valueSpec.type](options);\n\n    } else {\n        return validateObject(extend({}, options, {\n            valueSpec: valueSpec.type ? styleSpec[valueSpec.type] : valueSpec\n        }));\n    }\n};\n","// @flow\n\n// Note: all \"sizes\" are measured in bytes\n\nconst assert = require('assert');\n\nimport type {Transferable} from '../types/transferable';\n\nconst viewTypes = {\n    'Int8': Int8Array,\n    'Uint8': Uint8Array,\n    'Int16': Int16Array,\n    'Uint16': Uint16Array,\n    'Int32': Int32Array,\n    'Uint32': Uint32Array,\n    'Float32': Float32Array\n};\n\nexport type ViewType = $Keys<typeof viewTypes>;\n\n/**\n * @private\n */\nclass Struct {\n    _pos1: number;\n    _pos2: number;\n    _pos4: number;\n    _pos8: number;\n    +_structArray: StructArray;\n\n    // The following properties are defined on the prototype of sub classes.\n    size: number;\n\n    /**\n     * @param {StructArray} structArray The StructArray the struct is stored in\n     * @param {number} index The index of the struct in the StructArray.\n     * @private\n     */\n    constructor(structArray: StructArray, index: number) {\n        (this: any)._structArray = structArray;\n        this._pos1 = index * this.size;\n        this._pos2 = this._pos1 / 2;\n        this._pos4 = this._pos1 / 4;\n        this._pos8 = this._pos1 / 8;\n    }\n}\n\nconst DEFAULT_CAPACITY = 128;\nconst RESIZE_MULTIPLIER = 5;\n\nexport type StructArrayMember = {\n    name: string,\n    type: ViewType,\n    components: number,\n    offset: number\n};\n\nexport type StructArrayLayout = {\n    members: Array<StructArrayMember>,\n    size: number,\n    alignment: ?number\n}\n\nexport type SerializedStructArray = {\n    length: number,\n    arrayBuffer: ArrayBuffer\n};\n\n/**\n * `StructArray` provides an abstraction over `ArrayBuffer` and `TypedArray`\n * making it behave like an array of typed structs.\n *\n * Conceptually, a StructArray is comprised of elements, i.e., instances of its\n * associated struct type. Each particular struct type, together with an\n * alignment size, determines the memory layout of a StructArray whose elements\n * are of that type.  Thus, for each such layout that we need, we have\n * a corrseponding StructArrayLayout class, inheriting from StructArray and\n * implementing `emplaceBack()` and `_refreshViews()`.\n *\n * In some cases, where we need to access particular elements of a StructArray,\n * we implement a more specific subclass that inherits from one of the\n * StructArrayLayouts and adds a `get(i): T` accessor that returns a structured\n * object whose properties are proxies into the underlying memory space for the\n * i-th element.  This affords the convience of working with (seemingly) plain\n * Javascript objects without the overhead of serializing/deserializing them\n * into ArrayBuffers for efficient web worker transfer.\n *\n * @private\n */\nclass StructArray {\n    capacity: number;\n    length: number;\n    isTransferred: boolean;\n    arrayBuffer: ArrayBuffer;\n    uint8: Uint8Array;\n\n    // The following properties are defined on the prototype.\n    members: Array<StructArrayMember>;\n    bytesPerElement: number;\n    +emplaceBack: Function;\n\n    constructor() {\n        this.isTransferred = false;\n        this.capacity = -1;\n        this.resize(0);\n    }\n\n    /**\n     * Serialize a StructArray instance.  Serializes both the raw data and the\n     * metadata needed to reconstruct the StructArray base class during\n     * deserialization.\n     */\n    static serialize(array: StructArray, transferables?: Array<Transferable>): SerializedStructArray {\n        assert(!array.isTransferred);\n\n        array._trim();\n\n        if (transferables) {\n            array.isTransferred = true;\n            transferables.push(array.arrayBuffer);\n        }\n\n        return {\n            length: array.length,\n            arrayBuffer: array.arrayBuffer,\n        };\n    }\n\n    static deserialize(input: SerializedStructArray) {\n        const structArray = Object.create(this.prototype);\n        structArray.arrayBuffer = input.arrayBuffer;\n        structArray.length = input.length;\n        structArray.capacity = input.arrayBuffer.byteLength / structArray.bytesPerElement;\n        structArray._refreshViews();\n        return structArray;\n    }\n\n    /**\n     * Resize the array to discard unused capacity.\n     */\n    _trim() {\n        if (this.length !== this.capacity) {\n            this.capacity = this.length;\n            this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement);\n            this._refreshViews();\n        }\n    }\n\n    /**\n     * Resets the the length of the array to 0 without de-allocating capcacity.\n     */\n    clear() {\n        this.length = 0;\n    }\n\n    /**\n     * Resize the array.\n     * If `n` is greater than the current length then additional elements with undefined values are added.\n     * If `n` is less than the current length then the array will be reduced to the first `n` elements.\n     * @param {number} n The new size of the array.\n     */\n    resize(n: number) {\n        assert(!this.isTransferred);\n        this.reserve(n);\n        this.length = n;\n    }\n\n    /**\n     * Indicate a planned increase in size, so that any necessary allocation may\n     * be done once, ahead of time.\n     * @param {number} n The expected size of the array.\n     */\n    reserve(n: number) {\n        if (n > this.capacity) {\n            this.capacity = Math.max(n, Math.floor(this.capacity * RESIZE_MULTIPLIER), DEFAULT_CAPACITY);\n            this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);\n\n            const oldUint8Array = this.uint8;\n            this._refreshViews();\n            if (oldUint8Array) this.uint8.set(oldUint8Array);\n        }\n    }\n\n    /**\n     * Create TypedArray views for the current ArrayBuffer.\n     */\n    _refreshViews() {\n        throw new Error('_refreshViews() must be implemented by each concrete StructArray layout');\n    }\n}\n\n/**\n * Given a list of member fields, create a full StructArrayLayout, in\n * particular calculating the correct byte offset for each field.  This data\n * is used at build time to generate StructArrayLayout_*#emplaceBack() and\n * other accessors, and at runtime for binding vertex buffer attributes.\n *\n * @private\n */\nfunction createLayout(\n    members: Array<{ name: string, type: ViewType, +components?: number, }>,\n    alignment: number = 1\n): StructArrayLayout {\n\n    let offset = 0;\n    let maxSize = 0;\n    const layoutMembers = members.map((member) => {\n        assert(member.name.length);\n        const typeSize = sizeOf(member.type);\n        const memberOffset = offset = align(offset, Math.max(alignment, typeSize));\n        const components = member.components || 1;\n\n        maxSize = Math.max(maxSize, typeSize);\n        offset += typeSize * components;\n\n        return {\n            name: member.name,\n            type: member.type,\n            components: components,\n            offset: memberOffset,\n        };\n    });\n\n    const size = align(offset, Math.max(maxSize, alignment));\n\n    return {\n        members: layoutMembers,\n        size,\n        alignment\n    };\n}\n\nfunction sizeOf(type: ViewType): number {\n    return viewTypes[type].BYTES_PER_ELEMENT;\n}\n\nfunction align(offset: number, size: number): number {\n    return Math.ceil(offset / size) * size;\n}\n\nmodule.exports.StructArray = StructArray;\nmodule.exports.Struct = Struct;\nmodule.exports.viewTypes = viewTypes;\nmodule.exports.createLayout = createLayout;\n","// @flow\n\n/**\n * The maximum value of a coordinate in the internal tile coordinate system. Coordinates of\n * all source features normalized to this extent upon load.\n *\n * The value is a consequence of the following:\n *\n * * Vertex buffer store positions as signed 16 bit integers.\n * * One bit is lost for signedness to support tile buffers.\n * * One bit is lost because the line vertex buffer used to pack 1 bit of other data into the int.\n *   This is no longer the case but we're reserving this bit anyway.\n * * One bit is lost to support features extending past the extent on the right edge of the tile.\n * * This leaves us with 2^13 = 8192\n *\n * @private\n * @readonly\n */\nmodule.exports = 8192;\n","// @flow\n\nconst Color = require('./color');\n\nmodule.exports = {\n    number,\n    color,\n    array\n};\n\nfunction number(a: number, b: number, t: number) {\n    return (a * (1 - t)) + (b * t);\n}\n\nfunction color(from: Color, to: Color, t: number) {\n    return new Color(\n        number(from.r, to.r, t),\n        number(from.g, to.g, t),\n        number(from.b, to.b, t),\n        number(from.a, to.a, t)\n    );\n}\n\nfunction array(from: Array<number>, to: Array<number>, t: number) {\n    return from.map((d, i) => {\n        return number(d, to[i], t);\n    });\n}\n","// @flow\n\nconst util = require('../util/util');\nconst EXTENT = require('./extent');\n\nimport type Point from '@mapbox/point-geometry';\n\n// These bounds define the minimum and maximum supported coordinate values.\n// While visible coordinates are within [0, EXTENT], tiles may theoretically\n// contain cordinates within [-Infinity, Infinity]. Our range is limited by the\n// number of bits used to represent the coordinate.\nfunction createBounds(bits) {\n    return {\n        min: -1 * Math.pow(2, bits - 1),\n        max: Math.pow(2, bits - 1) - 1\n    };\n}\n\nconst bounds = createBounds(16);\n\n/**\n * Loads a geometry from a VectorTileFeature and scales it to the common extent\n * used internally.\n * @param {VectorTileFeature} feature\n * @private\n */\nmodule.exports = function loadGeometry(feature: VectorTileFeature): Array<Array<Point>> {\n    const scale = EXTENT / feature.extent;\n    const geometry = feature.loadGeometry();\n    for (let r = 0; r < geometry.length; r++) {\n        const ring = geometry[r];\n        for (let p = 0; p < ring.length; p++) {\n            const point = ring[p];\n            // round here because mapbox-gl-native uses integers to represent\n            // points and we need to do the same to avoid renering differences.\n            point.x = Math.round(point.x * scale);\n            point.y = Math.round(point.y * scale);\n\n            if (point.x < bounds.min || point.x > bounds.max || point.y < bounds.min || point.y > bounds.max) {\n                util.warnOnce('Geometry exceeds allowed extent, reduce your vector tile buffer size');\n            }\n        }\n    }\n    return geometry;\n};\n","module.exports.VectorTile = require('./lib/vectortile.js');\nmodule.exports.VectorTileFeature = require('./lib/vectortilefeature.js');\nmodule.exports.VectorTileLayer = require('./lib/vectortilelayer.js');\n","\nmodule.exports = function (output, ...inputs) {\n    for (const input of inputs) {\n        for (const k in input) {\n            output[k] = input[k];\n        }\n    }\n    return output;\n};\n","// @flow\n\nconst { toString } = require('./types');\nconst ParsingContext = require('./parsing_context');\nconst EvaluationContext = require('./evaluation_context');\nconst assert = require('assert');\n\nimport type { Expression, ExpressionRegistry } from './expression';\nimport type { Type } from './types';\nimport type { Value } from './values';\n\ntype Varargs = {| type: Type |};\ntype Signature = Array<Type> | Varargs;\ntype Evaluate = (EvaluationContext, Array<Expression>) => Value;\ntype Definition = [Type, Signature, Evaluate] |\n    {|type: Type, overloads: Array<[Signature, Evaluate]>|};\n\nclass CompoundExpression implements Expression {\n    name: string;\n    type: Type;\n    _evaluate: Evaluate;\n    args: Array<Expression>;\n\n    static definitions: { [string]: Definition };\n\n    constructor(name: string, type: Type, evaluate: Evaluate, args: Array<Expression>) {\n        this.name = name;\n        this.type = type;\n        this._evaluate = evaluate;\n        this.args = args;\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        return this._evaluate(ctx, this.args);\n    }\n\n    eachChild(fn: (Expression) => void) {\n        this.args.forEach(fn);\n    }\n\n    possibleOutputs() {\n        return [undefined];\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext): ?Expression {\n        const op: string = (args[0]: any);\n        const definition = CompoundExpression.definitions[op];\n        if (!definition) {\n            return context.error(`Unknown expression \"${op}\". If you wanted a literal array, use [\"literal\", [...]].`, 0);\n        }\n\n        // Now check argument types against each signature\n        const type = Array.isArray(definition) ?\n            definition[0] : definition.type;\n\n        const availableOverloads = Array.isArray(definition) ?\n            [[definition[1], definition[2]]] :\n            definition.overloads;\n\n        const overloads = availableOverloads.filter(([signature]) => (\n            !Array.isArray(signature) || // varags\n            signature.length === args.length - 1 // correct param count\n        ));\n\n        // First parse all the args\n        const parsedArgs: Array<Expression> = [];\n        for (let i = 1; i < args.length; i++) {\n            const arg = args[i];\n            let expected;\n            if (overloads.length === 1) {\n                const params = overloads[0][0];\n                expected = Array.isArray(params) ?\n                    params[i - 1] :\n                    params.type;\n            }\n            const parsed = context.parse(arg, 1 + parsedArgs.length, expected);\n            if (!parsed) return null;\n            parsedArgs.push(parsed);\n        }\n\n        let signatureContext: ParsingContext = (null: any);\n\n        for (const [params, evaluate] of overloads) {\n            // Use a fresh context for each attempted signature so that, if\n            // we eventually succeed, we haven't polluted `context.errors`.\n            signatureContext = new ParsingContext(context.registry, context.path, null, context.scope);\n\n            if (Array.isArray(params)) {\n                if (params.length !== parsedArgs.length) {\n                    signatureContext.error(`Expected ${params.length} arguments, but found ${parsedArgs.length} instead.`);\n                    continue;\n                }\n            }\n\n            for (let i = 0; i < parsedArgs.length; i++) {\n                const expected = Array.isArray(params) ? params[i] : params.type;\n                const arg = parsedArgs[i];\n                signatureContext.concat(i + 1).checkSubtype(expected, arg.type);\n            }\n\n            if (signatureContext.errors.length === 0) {\n                return new CompoundExpression(op, type, evaluate, parsedArgs);\n            }\n        }\n\n        assert(!signatureContext || signatureContext.errors.length > 0);\n\n        if (overloads.length === 1) {\n            context.errors.push.apply(context.errors, signatureContext.errors);\n        } else {\n            const expected = overloads.length ? overloads : availableOverloads;\n            const signatures = expected\n                .map(([params]) => stringifySignature(params))\n                .join(' | ');\n            const actualTypes = parsedArgs\n                .map(arg => toString(arg.type))\n                .join(', ');\n            context.error(`Expected arguments of type ${signatures}, but found (${actualTypes}) instead.`);\n        }\n\n        return null;\n    }\n\n    static register(\n        registry: ExpressionRegistry,\n        definitions: { [string]: Definition }\n    ) {\n        assert(!CompoundExpression.definitions);\n        CompoundExpression.definitions = definitions;\n        for (const name in definitions) {\n            registry[name] = CompoundExpression;\n        }\n    }\n}\n\nfunction varargs(type: Type): Varargs {\n    return { type };\n}\n\nfunction stringifySignature(signature: Signature): string {\n    if (Array.isArray(signature)) {\n        return `(${signature.map(toString).join(', ')})`;\n    } else {\n        return `(${toString(signature.type)}...)`;\n    }\n}\n\nmodule.exports = {\n    CompoundExpression,\n    varargs\n};\n\n","\nconst ValidationError = require('../error/validation_error');\nconst getType = require('../util/get_type');\nconst validateSpec = require('./validate');\n\nmodule.exports = function validateObject(options) {\n    const key = options.key;\n    const object = options.value;\n    const elementSpecs = options.valueSpec || {};\n    const elementValidators = options.objectElementValidators || {};\n    const style = options.style;\n    const styleSpec = options.styleSpec;\n    let errors = [];\n\n    const type = getType(object);\n    if (type !== 'object') {\n        return [new ValidationError(key, object, `object expected, ${type} found`)];\n    }\n\n    for (const objectKey in object) {\n        const elementSpecKey = objectKey.split('.')[0]; // treat 'paint.*' as 'paint'\n        const elementSpec = elementSpecs[elementSpecKey] || elementSpecs['*'];\n\n        let validateElement;\n        if (elementValidators[elementSpecKey]) {\n            validateElement = elementValidators[elementSpecKey];\n        } else if (elementSpecs[elementSpecKey]) {\n            validateElement = validateSpec;\n        } else if (elementValidators['*']) {\n            validateElement = elementValidators['*'];\n        } else if (elementSpecs['*']) {\n            validateElement = validateSpec;\n        } else {\n            errors.push(new ValidationError(key, object[objectKey], `unknown property \"${objectKey}\"`));\n            continue;\n        }\n\n        errors = errors.concat(validateElement({\n            key: (key ? `${key}.` : key) + objectKey,\n            value: object[objectKey],\n            valueSpec: elementSpec,\n            style: style,\n            styleSpec: styleSpec,\n            object: object,\n            objectKey: objectKey\n        }, object));\n    }\n\n    for (const elementSpecKey in elementSpecs) {\n        // Don't check `required` when there's a custom validator for that property.\n        if (elementValidators[elementSpecKey]) {\n            continue;\n        }\n\n        if (elementSpecs[elementSpecKey].required && elementSpecs[elementSpecKey]['default'] === undefined && object[elementSpecKey] === undefined) {\n            errors.push(new ValidationError(key, object, `missing required property \"${elementSpecKey}\"`));\n        }\n    }\n\n    return errors;\n};\n","// @flow\n\nconst {warnOnce} = require('../util/util');\nconst {register} = require('../util/web_worker_transfer');\n\nimport type VertexArrayObject from '../render/vertex_array_object';\nimport type {StructArray} from '../util/struct_array';\n\nconst MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1;\n\nexport type Segment = {\n    vertexOffset: number,\n    primitiveOffset: number,\n    vertexLength: number,\n    primitiveLength: number,\n    vaos: {[string]: VertexArrayObject}\n}\n\nclass SegmentVector {\n    segments: Array<Segment>;\n\n    constructor(segments?: Array<Segment> = []) {\n        this.segments = segments;\n    }\n\n    prepareSegment(numVertices: number, layoutVertexArray: StructArray, indexArray: StructArray): Segment {\n        let segment: Segment = this.segments[this.segments.length - 1];\n        if (numVertices > MAX_VERTEX_ARRAY_LENGTH) warnOnce(`Max vertices per segment is ${MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${numVertices}`);\n        if (!segment || segment.vertexLength + numVertices > module.exports.MAX_VERTEX_ARRAY_LENGTH) {\n            segment = ({\n                vertexOffset: layoutVertexArray.length,\n                primitiveOffset: indexArray.length,\n                vertexLength: 0,\n                primitiveLength: 0\n            }: any);\n            this.segments.push(segment);\n        }\n        return segment;\n    }\n\n    get() {\n        return this.segments;\n    }\n\n    destroy() {\n        for (const segment of this.segments) {\n            for (const k in segment.vaos) {\n                segment.vaos[k].destroy();\n            }\n        }\n    }\n}\n\nregister('SegmentVector', SegmentVector);\n\nmodule.exports = {\n    SegmentVector,\n\n    /**\n     * The maximum size of a vertex array. This limit is imposed by WebGL's 16 bit\n     * addressing of vertex buffers.\n     * @private\n     * @readonly\n     */\n    MAX_VERTEX_ARRAY_LENGTH: MAX_VERTEX_ARRAY_LENGTH\n};\n","// @flow\n\nimport type {GlobalProperties} from \"../style-spec/expression/index\";\n\nconst packUint8ToFloat = require('../shaders/encode_attribute').packUint8ToFloat;\nconst Color = require('../style-spec/util/color');\nconst {register} = require('../util/web_worker_transfer');\nconst {PossiblyEvaluatedPropertyValue} = require('../style/properties');\nconst {\n    StructArrayLayout1f4,\n    StructArrayLayout2f8,\n    StructArrayLayout4f16\n} = require('./array_types');\n\nimport type Context from '../gl/context';\nimport type {TypedStyleLayer} from '../style/style_layer/typed_style_layer';\nimport type {StructArray, StructArrayMember} from '../util/struct_array';\nimport type VertexBuffer from '../gl/vertex_buffer';\nimport type Program from '../render/program';\nimport type {Feature, SourceExpression, CompositeExpression} from '../style-spec/expression';\nimport type {PossiblyEvaluated} from '../style/properties';\n\nfunction packColor(color: Color): [number, number] {\n    return [\n        packUint8ToFloat(255 * color.r, 255 * color.g),\n        packUint8ToFloat(255 * color.b, 255 * color.a)\n    ];\n}\n\n/**\n *  `Binder` is the interface definition for the strategies for constructing,\n *  uploading, and binding paint property data as GLSL attributes.\n *\n *  It has three implementations, one for each of the three strategies we use:\n *\n *  * For _constant_ properties -- those whose value is a constant, or the constant\n *    result of evaluating a camera expression at a particular camera position -- we\n *    don't need a vertex buffer, and instead use a uniform.\n *  * For data expressions, we use a vertex buffer with a single attribute value,\n *    the evaluated result of the source function for the given feature.\n *  * For composite expressions, we use a vertex buffer with two attributes: min and\n *    max values covering the range of zooms at which we expect the tile to be\n *    displayed. These values are calculated by evaluating the composite expression for\n *    the given feature at strategically chosen zoom levels. In addition to this\n *    attribute data, we also use a uniform value which the shader uses to interpolate\n *    between the min and max value at the final displayed zoom level. The use of a\n *    uniform allows us to cheaply update the value on every frame.\n *\n *  Note that the shader source varies depending on whether we're using a uniform or\n *  attribute. We dynamically compile shaders at runtime to accomodate this.\n *\n * @private\n */\ninterface Binder<T> {\n    statistics: { max: number };\n\n    populatePaintArray(length: number, feature: Feature): void;\n    upload(Context): void;\n    destroy(): void;\n\n    defines(): Array<string>;\n\n    setUniforms(context: Context,\n                program: Program,\n                globals: GlobalProperties,\n                currentValue: PossiblyEvaluatedPropertyValue<T>): void;\n}\n\nclass ConstantBinder<T> implements Binder<T> {\n    value: T;\n    name: string;\n    type: string;\n    statistics: { max: number };\n\n    constructor(value: T, name: string, type: string) {\n        this.value = value;\n        this.name = name;\n        this.type = type;\n        this.statistics = { max: -Infinity };\n    }\n\n    defines() {\n        return [`#define HAS_UNIFORM_u_${this.name}`];\n    }\n\n    populatePaintArray() {}\n    upload() {}\n    destroy() {}\n\n    setUniforms(context: Context,\n                program: Program,\n                globals: GlobalProperties,\n                currentValue: PossiblyEvaluatedPropertyValue<T>) {\n        const value: any = currentValue.constantOr(this.value);\n        const gl = context.gl;\n        if (this.type === 'color') {\n            gl.uniform4f(program.uniforms[`u_${this.name}`], value.r, value.g, value.b, value.a);\n        } else {\n            gl.uniform1f(program.uniforms[`u_${this.name}`], value);\n        }\n    }\n}\n\nclass SourceExpressionBinder<T> implements Binder<T> {\n    expression: SourceExpression;\n    name: string;\n    type: string;\n    statistics: { max: number };\n\n    paintVertexArray: StructArray;\n    paintVertexAttributes: Array<StructArrayMember>;\n    paintVertexBuffer: ?VertexBuffer;\n\n    constructor(expression: SourceExpression, name: string, type: string) {\n        this.expression = expression;\n        this.name = name;\n        this.type = type;\n        this.statistics = { max: -Infinity };\n        const PaintVertexArray = type === 'color' ? StructArrayLayout2f8 : StructArrayLayout1f4;\n        this.paintVertexAttributes = [{\n            name: `a_${name}`,\n            type: 'Float32',\n            components: type === 'color' ? 2 : 1,\n            offset: 0\n        }];\n        this.paintVertexArray = new PaintVertexArray();\n    }\n\n    defines() {\n        return [];\n    }\n\n    populatePaintArray(length: number, feature: Feature) {\n        const paintArray = this.paintVertexArray;\n\n        const start = paintArray.length;\n        paintArray.reserve(length);\n\n        const value = this.expression.evaluate({zoom: 0}, feature);\n\n        if (this.type === 'color') {\n            const color = packColor(value);\n            for (let i = start; i < length; i++) {\n                paintArray.emplaceBack(color[0], color[1]);\n            }\n        } else {\n            for (let i = start; i < length; i++) {\n                paintArray.emplaceBack(value);\n            }\n\n            this.statistics.max = Math.max(this.statistics.max, value);\n        }\n    }\n\n    upload(context: Context) {\n        if (this.paintVertexArray) {\n            this.paintVertexBuffer = context.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes);\n        }\n    }\n\n    destroy() {\n        if (this.paintVertexBuffer) {\n            this.paintVertexBuffer.destroy();\n        }\n    }\n\n    setUniforms(context: Context, program: Program) {\n        context.gl.uniform1f(program.uniforms[`a_${this.name}_t`], 0);\n    }\n}\n\nclass CompositeExpressionBinder<T> implements Binder<T> {\n    expression: CompositeExpression;\n    name: string;\n    type: string;\n    useIntegerZoom: boolean;\n    zoom: number;\n    statistics: { max: number };\n\n    paintVertexArray: StructArray;\n    paintVertexAttributes: Array<StructArrayMember>;\n    paintVertexBuffer: ?VertexBuffer;\n\n    constructor(expression: CompositeExpression, name: string, type: string, useIntegerZoom: boolean, zoom: number) {\n        this.expression = expression;\n        this.name = name;\n        this.type = type;\n        this.useIntegerZoom = useIntegerZoom;\n        this.zoom = zoom;\n        this.statistics = { max: -Infinity };\n        const PaintVertexArray = type === 'color' ? StructArrayLayout4f16 : StructArrayLayout2f8;\n        this.paintVertexAttributes = [{\n            name: `a_${name}`,\n            type: 'Float32',\n            components: type === 'color' ? 4 : 2,\n            offset: 0\n        }];\n        this.paintVertexArray = new PaintVertexArray();\n    }\n\n    defines() {\n        return [];\n    }\n\n    populatePaintArray(length: number, feature: Feature) {\n        const paintArray = this.paintVertexArray;\n\n        const start = paintArray.length;\n        paintArray.reserve(length);\n\n        const min = this.expression.evaluate({zoom: this.zoom    }, feature);\n        const max = this.expression.evaluate({zoom: this.zoom + 1}, feature);\n\n        if (this.type === 'color') {\n            const minColor = packColor(min);\n            const maxColor = packColor(max);\n            for (let i = start; i < length; i++) {\n                paintArray.emplaceBack(minColor[0], minColor[1], maxColor[0], maxColor[1]);\n            }\n        } else {\n            for (let i = start; i < length; i++) {\n                paintArray.emplaceBack(min, max);\n            }\n\n            this.statistics.max = Math.max(this.statistics.max, min, max);\n        }\n    }\n\n    upload(context: Context) {\n        if (this.paintVertexArray) {\n            this.paintVertexBuffer = context.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes);\n        }\n    }\n\n    destroy() {\n        if (this.paintVertexBuffer) {\n            this.paintVertexBuffer.destroy();\n        }\n    }\n\n    interpolationFactor(currentZoom: number) {\n        if (this.useIntegerZoom) {\n            return this.expression.interpolationFactor(Math.floor(currentZoom), this.zoom, this.zoom + 1);\n        } else {\n            return this.expression.interpolationFactor(currentZoom, this.zoom, this.zoom + 1);\n        }\n    }\n\n    setUniforms(context: Context, program: Program, globals: GlobalProperties) {\n        context.gl.uniform1f(program.uniforms[`a_${this.name}_t`], this.interpolationFactor(globals.zoom));\n    }\n}\n\n/**\n * ProgramConfiguration contains the logic for binding style layer properties and tile\n * layer feature data into GL program uniforms and vertex attributes.\n *\n * Non-data-driven property values are bound to shader uniforms. Data-driven property\n * values are bound to vertex attributes. In order to support a uniform GLSL syntax over\n * both, [Mapbox GL Shaders](https://github.com/mapbox/mapbox-gl-shaders) defines a `#pragma`\n * abstraction, which ProgramConfiguration is responsible for implementing. At runtime,\n * it examines the attributes of a particular layer, combines this with fixed knowledge\n * about how layers of the particular type are implemented, and determines which uniforms\n * and vertex attributes will be required. It can then substitute the appropriate text\n * into the shader source code, create and link a program, and bind the uniforms and\n * vertex attributes in preparation for drawing.\n *\n * When a vector tile is parsed, this same configuration information is used to\n * populate the attribute buffers needed for data-driven styling using the zoom\n * level and feature property data.\n *\n * @private\n */\nclass ProgramConfiguration {\n    binders: { [string]: Binder<any> };\n    cacheKey: string;\n    layoutAttributes: Array<StructArrayMember>;\n\n    _buffers: Array<VertexBuffer>;\n\n    constructor() {\n        this.binders = {};\n        this.cacheKey = '';\n\n        this._buffers = [];\n    }\n\n    static createDynamic<Layer: TypedStyleLayer>(layer: Layer, zoom: number, filterProperties: (string) => boolean) {\n        const self = new ProgramConfiguration();\n        const keys = [];\n\n        for (const property in layer.paint._values) {\n            if (!filterProperties(property)) continue;\n            const value = layer.paint.get(property);\n            if (!(value instanceof PossiblyEvaluatedPropertyValue) || !value.property.specification['property-function']) {\n                continue;\n            }\n            const name = paintAttributeName(property, layer.type);\n            const type = value.property.specification.type;\n            const useIntegerZoom = value.property.useIntegerZoom;\n\n            if (value.value.kind === 'constant') {\n                self.binders[property] = new ConstantBinder(value.value, name, type);\n                keys.push(`/u_${name}`);\n            } else if (value.value.kind === 'source') {\n                self.binders[property] = new SourceExpressionBinder(value.value, name, type);\n                keys.push(`/a_${name}`);\n            } else {\n                self.binders[property] = new CompositeExpressionBinder(value.value, name, type, useIntegerZoom, zoom);\n                keys.push(`/z_${name}`);\n            }\n        }\n\n        self.cacheKey = keys.sort().join('');\n\n        return self;\n    }\n\n    populatePaintArrays(length: number, feature: Feature) {\n        for (const property in this.binders) {\n            this.binders[property].populatePaintArray(length, feature);\n        }\n    }\n\n    defines(): Array<string> {\n        const result = [];\n        for (const property in this.binders) {\n            result.push.apply(result, this.binders[property].defines());\n        }\n        return result;\n    }\n\n    setUniforms<Properties: Object>(context: Context, program: Program, properties: PossiblyEvaluated<Properties>, globals: GlobalProperties) {\n        for (const property in this.binders) {\n            const binder = this.binders[property];\n            binder.setUniforms(context, program, globals, properties.get(property));\n        }\n    }\n\n    getPaintVertexBuffers(): Array<VertexBuffer> {\n        return this._buffers;\n    }\n\n    upload(context: Context) {\n        for (const property in this.binders) {\n            this.binders[property].upload(context);\n        }\n\n        const buffers = [];\n        for (const property in this.binders) {\n            const binder = this.binders[property];\n            if ((binder instanceof SourceExpressionBinder ||\n                binder instanceof CompositeExpressionBinder) &&\n                binder.paintVertexBuffer\n            ) {\n                buffers.push(binder.paintVertexBuffer);\n            }\n        }\n        this._buffers = buffers;\n    }\n\n    destroy() {\n        for (const property in this.binders) {\n            this.binders[property].destroy();\n        }\n    }\n}\n\nclass ProgramConfigurationSet<Layer: TypedStyleLayer> {\n    programConfigurations: {[string]: ProgramConfiguration};\n\n    constructor(layoutAttributes: Array<StructArrayMember>, layers: $ReadOnlyArray<Layer>, zoom: number, filterProperties: (string) => boolean = () => true) {\n        this.programConfigurations = {};\n        for (const layer of layers) {\n            this.programConfigurations[layer.id] = ProgramConfiguration.createDynamic(layer, zoom, filterProperties);\n            this.programConfigurations[layer.id].layoutAttributes = layoutAttributes;\n        }\n    }\n\n    populatePaintArrays(length: number, feature: Feature) {\n        for (const key in this.programConfigurations) {\n            this.programConfigurations[key].populatePaintArrays(length, feature);\n        }\n    }\n\n    get(layerId: string) {\n        return this.programConfigurations[layerId];\n    }\n\n    upload(context: Context) {\n        for (const layerId in this.programConfigurations) {\n            this.programConfigurations[layerId].upload(context);\n        }\n    }\n\n    destroy() {\n        for (const layerId in this.programConfigurations) {\n            this.programConfigurations[layerId].destroy();\n        }\n    }\n}\n\n// paint property arrays\nfunction paintAttributeName(property, type) {\n    const attributeNameExceptions = {\n        'text-opacity': 'opacity',\n        'icon-opacity': 'opacity',\n        'text-color': 'fill_color',\n        'icon-color': 'fill_color',\n        'text-halo-color': 'halo_color',\n        'icon-halo-color': 'halo_color',\n        'text-halo-blur': 'halo_blur',\n        'icon-halo-blur': 'halo_blur',\n        'text-halo-width': 'halo_width',\n        'icon-halo-width': 'halo_width',\n        'line-gap-width': 'gapwidth'\n    };\n    return attributeNameExceptions[property] ||\n        property.replace(`${type}-`, '').replace(/-/g, '_');\n}\n\nregister('ConstantBinder', ConstantBinder);\nregister('SourceExpressionBinder', SourceExpressionBinder);\nregister('CompositeExpressionBinder', CompositeExpressionBinder);\nregister('ProgramConfiguration', ProgramConfiguration, {omit: ['_buffers']});\nregister('ProgramConfigurationSet', ProgramConfigurationSet);\n\nmodule.exports = {\n    ProgramConfiguration,\n    ProgramConfigurationSet\n};\n","// @flow\n\n/**\n * An index array stores Uint16 indicies of vertexes in a corresponding vertex array. We use\n * two kinds of index arrays: arrays storing groups of three indicies, forming triangles; and\n * arrays storing pairs of indicies, forming line segments.\n * @private\n */\nmodule.exports = {\n    LineIndexArray: require('./array_types').LineIndexArray,\n    TriangleIndexArray: require('./array_types').TriangleIndexArray\n};\n","// @flow\n\nconst {isCounterClockwise} = require('./util');\n\nimport type Point from '@mapbox/point-geometry';\n\nmodule.exports = {\n    multiPolygonIntersectsBufferedMultiPoint,\n    multiPolygonIntersectsMultiPolygon,\n    multiPolygonIntersectsBufferedMultiLine,\n    polygonIntersectsPolygon,\n    distToSegmentSquared\n};\n\ntype Line = Array<Point>;\ntype MultiLine = Array<Line>;\ntype Ring = Array<Point>;\ntype Polygon = Array<Point>;\ntype MultiPolygon = Array<Polygon>;\n\nfunction polygonIntersectsPolygon(polygonA: Polygon, polygonB: Polygon) {\n    for (let i = 0; i < polygonA.length; i++) {\n        if (polygonContainsPoint(polygonB, polygonA[i])) return true;\n    }\n\n    for (let i = 0; i < polygonB.length; i++) {\n        if (polygonContainsPoint(polygonA, polygonB[i])) return true;\n    }\n\n    if (lineIntersectsLine(polygonA, polygonB)) return true;\n\n    return false;\n}\n\nfunction multiPolygonIntersectsBufferedMultiPoint(multiPolygon: MultiPolygon, rings: Array<Ring>, radius: number) {\n    for (let j = 0; j < multiPolygon.length; j++) {\n        const polygon = multiPolygon[j];\n        for (let i = 0; i < rings.length; i++) {\n            const ring = rings[i];\n            for (let k = 0; k < ring.length; k++) {\n                const point = ring[k];\n                if (polygonContainsPoint(polygon, point)) return true;\n                if (pointIntersectsBufferedLine(point, polygon, radius)) return true;\n            }\n        }\n    }\n    return false;\n}\n\nfunction multiPolygonIntersectsMultiPolygon(multiPolygonA: MultiPolygon, multiPolygonB: MultiPolygon) {\n\n    if (multiPolygonA.length === 1 && multiPolygonA[0].length === 1) {\n        return multiPolygonContainsPoint(multiPolygonB, multiPolygonA[0][0]);\n    }\n\n    for (let m = 0; m < multiPolygonB.length; m++) {\n        const ring = multiPolygonB[m];\n        for (let n = 0; n < ring.length; n++) {\n            if (multiPolygonContainsPoint(multiPolygonA, ring[n])) return true;\n        }\n    }\n\n    for (let j = 0; j < multiPolygonA.length; j++) {\n        const polygon = multiPolygonA[j];\n        for (let i = 0; i < polygon.length; i++) {\n            if (multiPolygonContainsPoint(multiPolygonB, polygon[i])) return true;\n        }\n\n        for (let k = 0; k < multiPolygonB.length; k++) {\n            if (lineIntersectsLine(polygon, multiPolygonB[k])) return true;\n        }\n    }\n\n    return false;\n}\n\nfunction multiPolygonIntersectsBufferedMultiLine(multiPolygon: MultiPolygon, multiLine: MultiLine, radius: number) {\n    for (let i = 0; i < multiLine.length; i++) {\n        const line = multiLine[i];\n\n        for (let j = 0; j < multiPolygon.length; j++) {\n            const polygon = multiPolygon[j];\n\n            if (polygon.length >= 3) {\n                for (let k = 0; k < line.length; k++) {\n                    if (polygonContainsPoint(polygon, line[k])) return true;\n                }\n            }\n\n            if (lineIntersectsBufferedLine(polygon, line, radius)) return true;\n        }\n    }\n    return false;\n}\n\nfunction lineIntersectsBufferedLine(lineA: Line, lineB: Line, radius: number) {\n\n    if (lineA.length > 1) {\n        if (lineIntersectsLine(lineA, lineB)) return true;\n\n        // Check whether any point in either line is within radius of the other line\n        for (let j = 0; j < lineB.length; j++) {\n            if (pointIntersectsBufferedLine(lineB[j], lineA, radius)) return true;\n        }\n    }\n\n    for (let k = 0; k < lineA.length; k++) {\n        if (pointIntersectsBufferedLine(lineA[k], lineB, radius)) return true;\n    }\n\n    return false;\n}\n\nfunction lineIntersectsLine(lineA: Line, lineB: Line) {\n    if (lineA.length === 0 || lineB.length === 0) return false;\n    for (let i = 0; i < lineA.length - 1; i++) {\n        const a0 = lineA[i];\n        const a1 = lineA[i + 1];\n        for (let j = 0; j < lineB.length - 1; j++) {\n            const b0 = lineB[j];\n            const b1 = lineB[j + 1];\n            if (lineSegmentIntersectsLineSegment(a0, a1, b0, b1)) return true;\n        }\n    }\n    return false;\n}\n\nfunction lineSegmentIntersectsLineSegment(a0: Point, a1: Point, b0: Point, b1: Point) {\n    return isCounterClockwise(a0, b0, b1) !== isCounterClockwise(a1, b0, b1) &&\n        isCounterClockwise(a0, a1, b0) !== isCounterClockwise(a0, a1, b1);\n}\n\nfunction pointIntersectsBufferedLine(p: Point, line: Line, radius: number) {\n    const radiusSquared = radius * radius;\n\n    if (line.length === 1) return p.distSqr(line[0]) < radiusSquared;\n\n    for (let i = 1; i < line.length; i++) {\n        // Find line segments that have a distance <= radius^2 to p\n        // In that case, we treat the line as \"containing point p\".\n        const v = line[i - 1], w = line[i];\n        if (distToSegmentSquared(p, v, w) < radiusSquared) return true;\n    }\n    return false;\n}\n\n// Code from http://stackoverflow.com/a/1501725/331379.\nfunction distToSegmentSquared(p: Point, v: Point, w: Point) {\n    const l2 = v.distSqr(w);\n    if (l2 === 0) return p.distSqr(v);\n    const t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\n    if (t < 0) return p.distSqr(v);\n    if (t > 1) return p.distSqr(w);\n    return p.distSqr(w.sub(v)._mult(t)._add(v));\n}\n\n// point in polygon ray casting algorithm\nfunction multiPolygonContainsPoint(rings: Array<Ring>, p: Point) {\n    let c = false,\n        ring, p1, p2;\n\n    for (let k = 0; k < rings.length; k++) {\n        ring = rings[k];\n        for (let i = 0, j = ring.length - 1; i < ring.length; j = i++) {\n            p1 = ring[i];\n            p2 = ring[j];\n            if (((p1.y > p.y) !== (p2.y > p.y)) && (p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x)) {\n                c = !c;\n            }\n        }\n    }\n    return c;\n}\n\nfunction polygonContainsPoint(ring: Ring, p: Point) {\n    let c = false;\n    for (let i = 0, j = ring.length - 1; i < ring.length; j = i++) {\n        const p1 = ring[i];\n        const p2 = ring[j];\n        if (((p1.y > p.y) !== (p2.y > p.y)) && (p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x)) {\n            c = !c;\n        }\n    }\n    return c;\n}\n","// @flow\n\nconst assert = require('assert');\nconst {register} = require('./web_worker_transfer');\n\nexport type Size = {\n    width: number,\n    height: number\n};\n\ntype Point = {\n    x: number,\n    y: number\n};\n\nfunction createImage(image: *, {width, height}: Size, channels: number, data?: Uint8Array | Uint8ClampedArray) {\n    if (!data) {\n        data = new Uint8Array(width * height * channels);\n    } else if (data.length !== width * height * channels) {\n        throw new RangeError('mismatched image size');\n    }\n    image.width = width;\n    image.height = height;\n    image.data = data;\n    return image;\n}\n\nfunction resizeImage(image: *, {width, height}: Size, channels: number) {\n    if (width === image.width && height === image.height) {\n        return;\n    }\n\n    const newImage = createImage({}, {width, height}, channels);\n\n    copyImage(image, newImage, {x: 0, y: 0}, {x: 0, y: 0}, {\n        width: Math.min(image.width, width),\n        height: Math.min(image.height, height)\n    }, channels);\n\n    image.width = width;\n    image.height = height;\n    image.data = newImage.data;\n}\n\nfunction copyImage(srcImg: *, dstImg: *, srcPt: Point, dstPt: Point, size: Size, channels: number) {\n    if (size.width === 0 || size.height === 0) {\n        return dstImg;\n    }\n\n    if (size.width > srcImg.width ||\n        size.height > srcImg.height ||\n        srcPt.x > srcImg.width - size.width ||\n        srcPt.y > srcImg.height - size.height) {\n        throw new RangeError('out of range source coordinates for image copy');\n    }\n\n    if (size.width > dstImg.width ||\n        size.height > dstImg.height ||\n        dstPt.x > dstImg.width - size.width ||\n        dstPt.y > dstImg.height - size.height) {\n        throw new RangeError('out of range destination coordinates for image copy');\n    }\n\n    const srcData = srcImg.data;\n    const dstData = dstImg.data;\n\n    assert(srcData !== dstData);\n\n    for (let y = 0; y < size.height; y++) {\n        const srcOffset = ((srcPt.y + y) * srcImg.width + srcPt.x) * channels;\n        const dstOffset = ((dstPt.y + y) * dstImg.width + dstPt.x) * channels;\n        for (let i = 0; i < size.width * channels; i++) {\n            dstData[dstOffset + i] = srcData[srcOffset + i];\n        }\n    }\n\n    return dstImg;\n}\n\nclass AlphaImage {\n    width: number;\n    height: number;\n    data: Uint8Array | Uint8ClampedArray;\n\n    constructor(size: Size, data?: Uint8Array | Uint8ClampedArray) {\n        createImage(this, size, 1, data);\n    }\n\n    resize(size: Size) {\n        resizeImage(this, size, 1);\n    }\n\n    clone() {\n        return new AlphaImage({width: this.width, height: this.height}, new Uint8Array(this.data));\n    }\n\n    static copy(srcImg: AlphaImage, dstImg: AlphaImage, srcPt: Point, dstPt: Point, size: Size) {\n        copyImage(srcImg, dstImg, srcPt, dstPt, size, 1);\n    }\n}\n\n// Not premultiplied, because ImageData is not premultiplied.\n// UNPACK_PREMULTIPLY_ALPHA_WEBGL must be used when uploading to a texture.\nclass RGBAImage {\n    width: number;\n    height: number;\n    data: Uint8Array | Uint8ClampedArray;\n\n    constructor(size: Size, data?: Uint8Array | Uint8ClampedArray) {\n        createImage(this, size, 4, data);\n    }\n\n    resize(size: Size) {\n        resizeImage(this, size, 4);\n    }\n\n    clone() {\n        return new RGBAImage({width: this.width, height: this.height}, new Uint8Array(this.data));\n    }\n\n    static copy(srcImg: RGBAImage | ImageData, dstImg: RGBAImage, srcPt: Point, dstPt: Point, size: Size) {\n        copyImage(srcImg, dstImg, srcPt, dstPt, size, 4);\n    }\n}\n\nregister('AlphaImage', AlphaImage);\nregister('RGBAImage', RGBAImage);\n\nmodule.exports = {\n    AlphaImage,\n    RGBAImage\n};\n","// @flow\n\nconst Point = require('@mapbox/point-geometry');\n\nimport type {PossiblyEvaluatedPropertyValue} from \"./properties\";\nimport type StyleLayer from '../style/style_layer';\nimport type CircleBucket from '../data/bucket/circle_bucket';\nimport type LineBucket from '../data/bucket/line_bucket';\n\nfunction getMaximumPaintValue(property: string, layer: StyleLayer, bucket: CircleBucket<*> | LineBucket): number {\n    const value = ((layer.paint: any).get(property): PossiblyEvaluatedPropertyValue<any>).value;\n    if (value.kind === 'constant') {\n        return value.value;\n    } else {\n        const binders = bucket.programConfigurations.get(layer.id).binders;\n        return binders[property].statistics.max;\n    }\n}\n\nfunction translateDistance(translate: [number, number]) {\n    return Math.sqrt(translate[0] * translate[0] + translate[1] * translate[1]);\n}\n\nfunction translate(queryGeometry: Array<Array<Point>>,\n                   translate: [number, number],\n                   translateAnchor: 'viewport' | 'map',\n                   bearing: number,\n                   pixelsToTileUnits: number) {\n    if (!translate[0] && !translate[1]) {\n        return queryGeometry;\n    }\n\n    const pt = Point.convert(translate);\n\n    if (translateAnchor === \"viewport\") {\n        pt._rotate(-bearing);\n    }\n\n    const translated = [];\n    for (let i = 0; i < queryGeometry.length; i++) {\n        const ring = queryGeometry[i];\n        const translatedRing = [];\n        for (let k = 0; k < ring.length; k++) {\n            translatedRing.push(ring[k].sub(pt._mult(pixelsToTileUnits)));\n        }\n        translated.push(translatedRing);\n    }\n    return translated;\n}\n\nmodule.exports = {\n    getMaximumPaintValue,\n    translateDistance,\n    translate\n};\n","// @flow\n\n/* eslint-disable new-cap */\n\nconst isChar = require('./is_char_in_unicode_block');\n\nmodule.exports.allowsIdeographicBreaking = function(chars: string) {\n    for (const char of chars) {\n        if (!exports.charAllowsIdeographicBreaking(char.charCodeAt(0))) return false;\n    }\n    return true;\n};\n\nmodule.exports.allowsVerticalWritingMode = function(chars: string) {\n    for (const char of chars) {\n        if (exports.charHasUprightVerticalOrientation(char.charCodeAt(0))) return true;\n    }\n    return false;\n};\n\nmodule.exports.allowsLetterSpacing = function(chars: string) {\n    for (const char of chars) {\n        if (!exports.charAllowsLetterSpacing(char.charCodeAt(0))) return false;\n    }\n    return true;\n};\n\nmodule.exports.charAllowsLetterSpacing = function(char: number) {\n    if (isChar['Arabic'](char)) return false;\n    if (isChar['Arabic Supplement'](char)) return false;\n    if (isChar['Arabic Extended-A'](char)) return false;\n    if (isChar['Arabic Presentation Forms-A'](char)) return false;\n    if (isChar['Arabic Presentation Forms-B'](char)) return false;\n\n    return true;\n};\n\nmodule.exports.charAllowsIdeographicBreaking = function(char: number) {\n    // Return early for characters outside all ideographic ranges.\n    if (char < 0x2E80) return false;\n\n    if (isChar['Bopomofo Extended'](char)) return true;\n    if (isChar['Bopomofo'](char)) return true;\n    if (isChar['CJK Compatibility Forms'](char)) return true;\n    if (isChar['CJK Compatibility Ideographs'](char)) return true;\n    if (isChar['CJK Compatibility'](char)) return true;\n    if (isChar['CJK Radicals Supplement'](char)) return true;\n    if (isChar['CJK Strokes'](char)) return true;\n    if (isChar['CJK Symbols and Punctuation'](char)) return true;\n    if (isChar['CJK Unified Ideographs Extension A'](char)) return true;\n    if (isChar['CJK Unified Ideographs'](char)) return true;\n    if (isChar['Enclosed CJK Letters and Months'](char)) return true;\n    if (isChar['Halfwidth and Fullwidth Forms'](char)) return true;\n    if (isChar['Hiragana'](char)) return true;\n    if (isChar['Ideographic Description Characters'](char)) return true;\n    if (isChar['Kangxi Radicals'](char)) return true;\n    if (isChar['Katakana Phonetic Extensions'](char)) return true;\n    if (isChar['Katakana'](char)) return true;\n    if (isChar['Vertical Forms'](char)) return true;\n    if (isChar['Yi Radicals'](char)) return true;\n    if (isChar['Yi Syllables'](char)) return true;\n\n    return false;\n};\n\n// The following logic comes from\n// <http://www.unicode.org/Public/vertical/revision-17/VerticalOrientation-17.txt>.\n// The data file denotes with “U” or “Tu” any codepoint that may be drawn\n// upright in vertical text but does not distinguish between upright and\n// “neutral” characters.\n\n// Blocks in the Unicode supplementary planes are excluded from this module due\n// to <https://github.com/mapbox/mapbox-gl/issues/29>.\n\n/**\n * Returns true if the given Unicode codepoint identifies a character with\n * upright orientation.\n *\n * A character has upright orientation if it is drawn upright (unrotated)\n * whether the line is oriented horizontally or vertically, even if both\n * adjacent characters can be rotated. For example, a Chinese character is\n * always drawn upright. An uprightly oriented character causes an adjacent\n * “neutral” character to be drawn upright as well.\n */\nexports.charHasUprightVerticalOrientation = function(char: number) {\n    if (char === 0x02EA /* modifier letter yin departing tone mark */ ||\n        char === 0x02EB /* modifier letter yang departing tone mark */) {\n        return true;\n    }\n\n    // Return early for characters outside all ranges whose characters remain\n    // upright in vertical writing mode.\n    if (char < 0x1100) return false;\n\n    if (isChar['Bopomofo Extended'](char)) return true;\n    if (isChar['Bopomofo'](char)) return true;\n    if (isChar['CJK Compatibility Forms'](char)) {\n        if (!(char >= 0xFE49 /* dashed overline */ && char <= 0xFE4F /* wavy low line */)) {\n            return true;\n        }\n    }\n    if (isChar['CJK Compatibility Ideographs'](char)) return true;\n    if (isChar['CJK Compatibility'](char)) return true;\n    if (isChar['CJK Radicals Supplement'](char)) return true;\n    if (isChar['CJK Strokes'](char)) return true;\n    if (isChar['CJK Symbols and Punctuation'](char)) {\n        if (!(char >= 0x3008 /* left angle bracket */ && char <= 0x3011 /* right black lenticular bracket */) &&\n            !(char >= 0x3014 /* left tortoise shell bracket */ && char <= 0x301F /* low double prime quotation mark */) &&\n            char !== 0x3030 /* wavy dash */) {\n            return true;\n        }\n    }\n    if (isChar['CJK Unified Ideographs Extension A'](char)) return true;\n    if (isChar['CJK Unified Ideographs'](char)) return true;\n    if (isChar['Enclosed CJK Letters and Months'](char)) return true;\n    if (isChar['Hangul Compatibility Jamo'](char)) return true;\n    if (isChar['Hangul Jamo Extended-A'](char)) return true;\n    if (isChar['Hangul Jamo Extended-B'](char)) return true;\n    if (isChar['Hangul Jamo'](char)) return true;\n    if (isChar['Hangul Syllables'](char)) return true;\n    if (isChar['Hiragana'](char)) return true;\n    if (isChar['Ideographic Description Characters'](char)) return true;\n    if (isChar['Kanbun'](char)) return true;\n    if (isChar['Kangxi Radicals'](char)) return true;\n    if (isChar['Katakana Phonetic Extensions'](char)) return true;\n    if (isChar['Katakana'](char)) {\n        if (char !== 0x30FC /* katakana-hiragana prolonged sound mark */) {\n            return true;\n        }\n    }\n    if (isChar['Halfwidth and Fullwidth Forms'](char)) {\n        if (char !== 0xFF08 /* fullwidth left parenthesis */ &&\n            char !== 0xFF09 /* fullwidth right parenthesis */ &&\n            char !== 0xFF0D /* fullwidth hyphen-minus */ &&\n            !(char >= 0xFF1A /* fullwidth colon */ && char <= 0xFF1E /* fullwidth greater-than sign */) &&\n            char !== 0xFF3B /* fullwidth left square bracket */ &&\n            char !== 0xFF3D /* fullwidth right square bracket */ &&\n            char !== 0xFF3F /* fullwidth low line */ &&\n            !(char >= 0xFF5B /* fullwidth left curly bracket */ && char <= 0xFFDF) &&\n            char !== 0xFFE3 /* fullwidth macron */ &&\n            !(char >= 0xFFE8 /* halfwidth forms light vertical */ && char <= 0xFFEF)) {\n            return true;\n        }\n    }\n    if (isChar['Small Form Variants'](char)) {\n        if (!(char >= 0xFE58 /* small em dash */ && char <= 0xFE5E /* small right tortoise shell bracket */) &&\n            !(char >= 0xFE63 /* small hyphen-minus */ && char <= 0xFE66 /* small equals sign */)) {\n            return true;\n        }\n    }\n    if (isChar['Unified Canadian Aboriginal Syllabics'](char)) return true;\n    if (isChar['Unified Canadian Aboriginal Syllabics Extended'](char)) return true;\n    if (isChar['Vertical Forms'](char)) return true;\n    if (isChar['Yijing Hexagram Symbols'](char)) return true;\n    if (isChar['Yi Syllables'](char)) return true;\n    if (isChar['Yi Radicals'](char)) return true;\n\n    return false;\n};\n\n/**\n * Returns true if the given Unicode codepoint identifies a character with\n * neutral orientation.\n *\n * A character has neutral orientation if it may be drawn rotated or unrotated\n * when the line is oriented vertically, depending on the orientation of the\n * adjacent characters. For example, along a verticlly oriented line, the vulgar\n * fraction ½ is drawn upright among Chinese characters but rotated among Latin\n * letters. A neutrally oriented character does not influence whether an\n * adjacent character is drawn upright or rotated.\n */\nexports.charHasNeutralVerticalOrientation = function(char: number) {\n    if (isChar['Latin-1 Supplement'](char)) {\n        if (char === 0x00A7 /* section sign */ ||\n            char === 0x00A9 /* copyright sign */ ||\n            char === 0x00AE /* registered sign */ ||\n            char === 0x00B1 /* plus-minus sign */ ||\n            char === 0x00BC /* vulgar fraction one quarter */ ||\n            char === 0x00BD /* vulgar fraction one half */ ||\n            char === 0x00BE /* vulgar fraction three quarters */ ||\n            char === 0x00D7 /* multiplication sign */ ||\n            char === 0x00F7 /* division sign */) {\n            return true;\n        }\n    }\n    if (isChar['General Punctuation'](char)) {\n        if (char === 0x2016 /* double vertical line */ ||\n            char === 0x2020 /* dagger */ ||\n            char === 0x2021 /* double dagger */ ||\n            char === 0x2030 /* per mille sign */ ||\n            char === 0x2031 /* per ten thousand sign */ ||\n            char === 0x203B /* reference mark */ ||\n            char === 0x203C /* double exclamation mark */ ||\n            char === 0x2042 /* asterism */ ||\n            char === 0x2047 /* double question mark */ ||\n            char === 0x2048 /* question exclamation mark */ ||\n            char === 0x2049 /* exclamation question mark */ ||\n            char === 0x2051 /* two asterisks aligned vertically */) {\n            return true;\n        }\n    }\n    if (isChar['Letterlike Symbols'](char)) return true;\n    if (isChar['Number Forms'](char)) return true;\n    if (isChar['Miscellaneous Technical'](char)) {\n        if ((char >= 0x2300 /* diameter sign */ && char <= 0x2307 /* wavy line */) ||\n            (char >= 0x230C /* bottom right crop */ && char <= 0x231F /* bottom right corner */) ||\n            (char >= 0x2324 /* up arrowhead between two horizontal bars */ && char <= 0x2328 /* keyboard */) ||\n            char === 0x232B /* erase to the left */ ||\n            (char >= 0x237D /* shouldered open box */ && char <= 0x239A /* clear screen symbol */) ||\n            (char >= 0x23BE /* dentistry symbol light vertical and top right */ && char <= 0x23CD /* square foot */) ||\n            char === 0x23CF /* eject symbol */ ||\n            (char >= 0x23D1 /* metrical breve */ && char <= 0x23DB /* fuse */) ||\n            (char >= 0x23E2 /* white trapezium */ && char <= 0x23FF)) {\n            return true;\n        }\n    }\n    if (isChar['Control Pictures'](char) && char !== 0x2423 /* open box */) return true;\n    if (isChar['Optical Character Recognition'](char)) return true;\n    if (isChar['Enclosed Alphanumerics'](char)) return true;\n    if (isChar['Geometric Shapes'](char)) return true;\n    if (isChar['Miscellaneous Symbols'](char)) {\n        if (!(char >= 0x261A /* black left pointing index */ && char <= 0x261F /* white down pointing index */)) {\n            return true;\n        }\n    }\n    if (isChar['Miscellaneous Symbols and Arrows'](char)) {\n        if ((char >= 0x2B12 /* square with top half black */ && char <= 0x2B2F /* white vertical ellipse */) ||\n            (char >= 0x2B50 /* white medium star */ && char <= 0x2B59 /* heavy circled saltire */) ||\n            (char >= 0x2BB8 /* upwards white arrow from bar with horizontal bar */ && char <= 0x2BEB)) {\n            return true;\n        }\n    }\n    if (isChar['CJK Symbols and Punctuation'](char)) return true;\n    if (isChar['Katakana'](char)) return true;\n    if (isChar['Private Use Area'](char)) return true;\n    if (isChar['CJK Compatibility Forms'](char)) return true;\n    if (isChar['Small Form Variants'](char)) return true;\n    if (isChar['Halfwidth and Fullwidth Forms'](char)) return true;\n\n    if (char === 0x221E /* infinity */ ||\n        char === 0x2234 /* therefore */ ||\n        char === 0x2235 /* because */ ||\n        (char >= 0x2700 /* black safety scissors */ && char <= 0x2767 /* rotated floral heart bullet */) ||\n        (char >= 0x2776 /* dingbat negative circled digit one */ && char <= 0x2793 /* dingbat negative circled sans-serif number ten */) ||\n        char === 0xFFFC /* object replacement character */ ||\n        char === 0xFFFD /* replacement character */) {\n        return true;\n    }\n\n    return false;\n};\n\n/**\n * Returns true if the given Unicode codepoint identifies a character with\n * rotated orientation.\n *\n * A character has rotated orientation if it is drawn rotated when the line is\n * oriented vertically, even if both adjacent characters are upright. For\n * example, a Latin letter is drawn rotated along a vertical line. A rotated\n * character causes an adjacent “neutral” character to be drawn rotated as well.\n */\nexports.charHasRotatedVerticalOrientation = function(char: number) {\n    return !(exports.charHasUprightVerticalOrientation(char) ||\n             exports.charHasNeutralVerticalOrientation(char));\n};\n","'use strict';\n\nmodule.exports = Pbf;\n\nvar ieee754 = require('ieee754');\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos,\n            str = readUtf8(this.buf, this.pos, end);\n        this.pos = end;\n        return str;\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readVarint(isSigned));\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSVarint());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readBoolean());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFloat());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readDouble());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.floor(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = '';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n","// @flow\n\nconst assert = require('assert');\nconst Scope = require('./scope');\nconst {Color} = require('./values');\n\nimport type { Feature, GlobalProperties } from './index';\nimport type { Expression } from './expression';\n\nconst geometryTypes = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\nclass EvaluationContext {\n    globals: GlobalProperties;\n    feature: ?Feature;\n\n    scope: Scope;\n    _parseColorCache: {[string]: ?Color};\n\n    constructor() {\n        this.scope = new Scope();\n        this._parseColorCache = {};\n    }\n\n    id() {\n        return this.feature && 'id' in this.feature ? this.feature.id : null;\n    }\n\n    geometryType() {\n        return this.feature ? typeof this.feature.type === 'number' ? geometryTypes[this.feature.type] : this.feature.type : null;\n    }\n\n    properties() {\n        return this.feature && this.feature.properties || {};\n    }\n\n    pushScope(bindings: Array<[string, Expression]>) {\n        this.scope = this.scope.concat(bindings);\n    }\n\n    popScope() {\n        assert(this.scope.parent);\n        this.scope = (this.scope.parent: any);\n    }\n\n    parseColor(input: string): ?Color {\n        let cached = this._parseColorCache[input];\n        if (!cached) {\n            cached = this._parseColorCache[input] = Color.parse(input);\n        }\n        return cached;\n    }\n}\n\nmodule.exports = EvaluationContext;\n","// @flow\n\nconst UnitBezier = require('@mapbox/unitbezier');\nconst interpolate = require('../../util/interpolate');\nconst { toString, NumberType } = require('../types');\nconst { findStopLessThanOrEqualTo } = require(\"../stops\");\n\nimport type { Stops } from '../stops';\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\nexport type InterpolationType =\n    { name: 'linear' } |\n    { name: 'exponential', base: number } |\n    { name: 'cubic-bezier', controlPoints: [number, number, number, number] };\n\nclass Interpolate implements Expression {\n    type: Type;\n\n    interpolation: InterpolationType;\n    input: Expression;\n    labels: Array<number>;\n    outputs: Array<Expression>;\n\n    constructor(type: Type, interpolation: InterpolationType, input: Expression, stops: Stops) {\n        this.type = type;\n        this.interpolation = interpolation;\n        this.input = input;\n\n        this.labels = [];\n        this.outputs = [];\n        for (const [label, expression] of stops) {\n            this.labels.push(label);\n            this.outputs.push(expression);\n        }\n    }\n\n    static interpolationFactor(interpolation: InterpolationType, input: number, lower: number, upper: number) {\n        let t = 0;\n        if (interpolation.name === 'exponential') {\n            t = exponentialInterpolation(input, interpolation.base, lower, upper);\n        } else if (interpolation.name === 'linear') {\n            t = exponentialInterpolation(input, 1, lower, upper);\n        } else if (interpolation.name === 'cubic-bezier') {\n            const c = interpolation.controlPoints;\n            const ub = new UnitBezier(c[0], c[1], c[2], c[3]);\n            t = ub.solve(exponentialInterpolation(input, 1, lower, upper));\n        }\n        return t;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        let [ , interpolation, input, ...rest] = args;\n\n        if (!Array.isArray(interpolation) || interpolation.length === 0) {\n            return context.error(`Expected an interpolation type expression.`, 1);\n        }\n\n        if (interpolation[0] === 'linear') {\n            interpolation = { name: 'linear' };\n        } else if (interpolation[0] === 'exponential') {\n            const base = interpolation[1];\n            if (typeof base !== 'number')\n                return context.error(`Exponential interpolation requires a numeric base.`, 1, 1);\n            interpolation = {\n                name: 'exponential',\n                base\n            };\n        } else if (interpolation[0] === 'cubic-bezier') {\n            const controlPoints = interpolation.slice(1);\n            if (\n                controlPoints.length !== 4 ||\n                controlPoints.some(t => typeof t !== 'number' || t < 0 || t > 1)\n            ) {\n                return context.error('Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.', 1);\n            }\n\n            interpolation = {\n                name: 'cubic-bezier',\n                controlPoints: (controlPoints: any)\n            };\n        } else {\n            return context.error(`Unknown interpolation type ${String(interpolation[0])}`, 1, 0);\n        }\n\n        if (args.length - 1 < 4) {\n            return context.error(`Expected at least 4 arguments, but found only ${args.length - 1}.`);\n        }\n\n        if ((args.length - 1) % 2 !== 0) {\n            return context.error(`Expected an even number of arguments.`);\n        }\n\n        input = context.parse(input, 2, NumberType);\n        if (!input) return null;\n\n        const stops: Stops = [];\n\n        let outputType: Type = (null: any);\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n\n        for (let i = 0; i < rest.length; i += 2) {\n            const label = rest[i];\n            const value = rest[i + 1];\n\n            const labelKey = i + 3;\n            const valueKey = i + 4;\n\n            if (typeof label !== 'number') {\n                return context.error('Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', labelKey);\n            }\n\n            if (stops.length && stops[stops.length - 1][0] >= label) {\n                return context.error('Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.', labelKey);\n            }\n\n            const parsed = context.parse(value, valueKey, outputType);\n            if (!parsed) return null;\n            outputType = outputType || parsed.type;\n            stops.push([label, parsed]);\n        }\n\n        if (outputType.kind !== 'number' &&\n            outputType.kind !== 'color' &&\n            !(\n                outputType.kind === 'array' &&\n                outputType.itemType.kind === 'number' &&\n                typeof outputType.N === 'number'\n            )\n        ) {\n            return context.error(`Type ${toString(outputType)} is not interpolatable.`);\n        }\n\n        return new Interpolate(outputType, interpolation, input, stops);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const labels = this.labels;\n        const outputs = this.outputs;\n\n        if (labels.length === 1) {\n            return outputs[0].evaluate(ctx);\n        }\n\n        const value = ((this.input.evaluate(ctx): any): number);\n        if (value <= labels[0]) {\n            return outputs[0].evaluate(ctx);\n        }\n\n        const stopCount = labels.length;\n        if (value >= labels[stopCount - 1]) {\n            return outputs[stopCount - 1].evaluate(ctx);\n        }\n\n        const index = findStopLessThanOrEqualTo(labels, value);\n        const lower = labels[index];\n        const upper = labels[index + 1];\n        const t = Interpolate.interpolationFactor(this.interpolation, value, lower, upper);\n\n        const outputLower = outputs[index].evaluate(ctx);\n        const outputUpper = outputs[index + 1].evaluate(ctx);\n\n        return (interpolate[this.type.kind.toLowerCase()]: any)(outputLower, outputUpper, t);\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.input);\n        for (const expression of this.outputs) {\n            fn(expression);\n        }\n    }\n\n    possibleOutputs() {\n        return [].concat(...this.outputs.map((output) => output.possibleOutputs()));\n    }\n}\n\n/**\n * Returns a ratio that can be used to interpolate between exponential function\n * stops.\n * How it works: Two consecutive stop values define a (scaled and shifted) exponential function `f(x) = a * base^x + b`, where `base` is the user-specified base,\n * and `a` and `b` are constants affording sufficient degrees of freedom to fit\n * the function to the given stops.\n *\n * Here's a bit of algebra that lets us compute `f(x)` directly from the stop\n * values without explicitly solving for `a` and `b`:\n *\n * First stop value: `f(x0) = y0 = a * base^x0 + b`\n * Second stop value: `f(x1) = y1 = a * base^x1 + b`\n * => `y1 - y0 = a(base^x1 - base^x0)`\n * => `a = (y1 - y0)/(base^x1 - base^x0)`\n *\n * Desired value: `f(x) = y = a * base^x + b`\n * => `f(x) = y0 + a * (base^x - base^x0)`\n *\n * From the above, we can replace the `a` in `a * (base^x - base^x0)` and do a\n * little algebra:\n * ```\n * a * (base^x - base^x0) = (y1 - y0)/(base^x1 - base^x0) * (base^x - base^x0)\n *                     = (y1 - y0) * (base^x - base^x0) / (base^x1 - base^x0)\n * ```\n *\n * If we let `(base^x - base^x0) / (base^x1 base^x0)`, then we have\n * `f(x) = y0 + (y1 - y0) * ratio`.  In other words, `ratio` may be treated as\n * an interpolation factor between the two stops' output values.\n *\n * (Note: a slightly different form for `ratio`,\n * `(base^(x-x0) - 1) / (base^(x1-x0) - 1) `, is equivalent, but requires fewer\n * expensive `Math.pow()` operations.)\n *\n * @private\n*/\nfunction exponentialInterpolation(input, base, lowerValue, upperValue) {\n    const difference = upperValue - lowerValue;\n    const progress = input - lowerValue;\n\n    if (difference === 0) {\n        return 0;\n    } else if (base === 1) {\n        return progress / difference;\n    } else {\n        return (Math.pow(base, progress) - 1) / (Math.pow(base, difference) - 1);\n    }\n}\n\nmodule.exports = Interpolate;\n","\nconst colorSpaces = require('../util/color_spaces');\nconst Color = require('../util/color');\nconst extend = require('../util/extend');\nconst getType = require('../util/get_type');\nconst interpolate = require('../util/interpolate');\nconst Interpolate = require('../expression/definitions/interpolate');\n\nfunction isFunction(value) {\n    return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\n\nfunction identityFunction(x) {\n    return x;\n}\n\nfunction createFunction(parameters, propertySpec) {\n    const isColor = propertySpec.type === 'color';\n    const zoomAndFeatureDependent = parameters.stops && typeof parameters.stops[0][0] === 'object';\n    const featureDependent = zoomAndFeatureDependent || parameters.property !== undefined;\n    const zoomDependent = zoomAndFeatureDependent || !featureDependent;\n    const type = parameters.type || (propertySpec.function === 'interpolated' ? 'exponential' : 'interval');\n\n    if (isColor) {\n        parameters = extend({}, parameters);\n\n        if (parameters.stops) {\n            parameters.stops = parameters.stops.map((stop) => {\n                return [stop[0], Color.parse(stop[1])];\n            });\n        }\n\n        if (parameters.default) {\n            parameters.default = Color.parse(parameters.default);\n        } else {\n            parameters.default = Color.parse(propertySpec.default);\n        }\n    }\n\n    if (parameters.colorSpace && parameters.colorSpace !== 'rgb' && !colorSpaces[parameters.colorSpace]) {\n        throw new Error(`Unknown color space: ${parameters.colorSpace}`);\n    }\n\n    let innerFun;\n    let hashedStops;\n    let categoricalKeyType;\n    if (type === 'exponential') {\n        innerFun = evaluateExponentialFunction;\n    } else if (type === 'interval') {\n        innerFun = evaluateIntervalFunction;\n    } else if (type === 'categorical') {\n        innerFun = evaluateCategoricalFunction;\n\n        // For categorical functions, generate an Object as a hashmap of the stops for fast searching\n        hashedStops = Object.create(null);\n        for (const stop of parameters.stops) {\n            hashedStops[stop[0]] = stop[1];\n        }\n\n        // Infer key type based on first stop key-- used to encforce strict type checking later\n        categoricalKeyType = typeof parameters.stops[0][0];\n\n    } else if (type === 'identity') {\n        innerFun = evaluateIdentityFunction;\n    } else {\n        throw new Error(`Unknown function type \"${type}\"`);\n    }\n\n    if (zoomAndFeatureDependent) {\n        const featureFunctions = {};\n        const zoomStops = [];\n        for (let s = 0; s < parameters.stops.length; s++) {\n            const stop = parameters.stops[s];\n            const zoom = stop[0].zoom;\n            if (featureFunctions[zoom] === undefined) {\n                featureFunctions[zoom] = {\n                    zoom: zoom,\n                    type: parameters.type,\n                    property: parameters.property,\n                    default: parameters.default,\n                    stops: []\n                };\n                zoomStops.push(zoom);\n            }\n            featureFunctions[zoom].stops.push([stop[0].value, stop[1]]);\n        }\n\n        const featureFunctionStops = [];\n        for (const z of zoomStops) {\n            featureFunctionStops.push([featureFunctions[z].zoom, createFunction(featureFunctions[z], propertySpec)]);\n        }\n\n        return {\n            kind: 'composite',\n            interpolationFactor: Interpolate.interpolationFactor.bind(undefined, {name: 'linear'}),\n            zoomStops: featureFunctionStops.map(s => s[0]),\n            evaluate({zoom}, properties) {\n                return evaluateExponentialFunction({\n                    stops: featureFunctionStops,\n                    base: parameters.base\n                }, propertySpec, zoom).evaluate(zoom, properties);\n            }\n        };\n    } else if (zoomDependent) {\n        return {\n            kind: 'camera',\n            interpolationFactor: type === 'exponential' ?\n                Interpolate.interpolationFactor.bind(undefined, {name: 'exponential', base: parameters.base !== undefined ? parameters.base : 1}) :\n                () => 0,\n            zoomStops: parameters.stops.map(s => s[0]),\n            evaluate: ({zoom}) => innerFun(parameters, propertySpec, zoom, hashedStops, categoricalKeyType)\n        };\n    } else {\n        return {\n            kind: 'source',\n            evaluate(_, feature) {\n                const value = feature && feature.properties ? feature.properties[parameters.property] : undefined;\n                if (value === undefined) {\n                    return coalesce(parameters.default, propertySpec.default);\n                }\n                return innerFun(parameters, propertySpec, value, hashedStops, categoricalKeyType);\n            }\n        };\n    }\n}\n\nfunction coalesce(a, b, c) {\n    if (a !== undefined) return a;\n    if (b !== undefined) return b;\n    if (c !== undefined) return c;\n}\n\nfunction evaluateCategoricalFunction(parameters, propertySpec, input, hashedStops, keyType) {\n    const evaluated = typeof input === keyType ? hashedStops[input] : undefined; // Enforce strict typing on input\n    return coalesce(evaluated, parameters.default, propertySpec.default);\n}\n\nfunction evaluateIntervalFunction(parameters, propertySpec, input) {\n    // Edge cases\n    if (getType(input) !== 'number') return coalesce(parameters.default, propertySpec.default);\n    const n = parameters.stops.length;\n    if (n === 1) return parameters.stops[0][1];\n    if (input <= parameters.stops[0][0]) return parameters.stops[0][1];\n    if (input >= parameters.stops[n - 1][0]) return parameters.stops[n - 1][1];\n\n    const index = findStopLessThanOrEqualTo(parameters.stops, input);\n\n    return parameters.stops[index][1];\n}\n\nfunction evaluateExponentialFunction(parameters, propertySpec, input) {\n    const base = parameters.base !== undefined ? parameters.base : 1;\n\n    // Edge cases\n    if (getType(input) !== 'number') return coalesce(parameters.default, propertySpec.default);\n    const n = parameters.stops.length;\n    if (n === 1) return parameters.stops[0][1];\n    if (input <= parameters.stops[0][0]) return parameters.stops[0][1];\n    if (input >= parameters.stops[n - 1][0]) return parameters.stops[n - 1][1];\n\n    const index = findStopLessThanOrEqualTo(parameters.stops, input);\n    const t = interpolationFactor(\n        input, base,\n        parameters.stops[index][0],\n        parameters.stops[index + 1][0]);\n\n    const outputLower = parameters.stops[index][1];\n    const outputUpper = parameters.stops[index + 1][1];\n    let interp = interpolate[propertySpec.type] || identityFunction;\n\n    if (parameters.colorSpace && parameters.colorSpace !== 'rgb') {\n        const colorspace = colorSpaces[parameters.colorSpace];\n        interp = (a, b) => colorspace.reverse(colorspace.interpolate(colorspace.forward(a), colorspace.forward(b), t));\n    }\n\n    if (typeof outputLower.evaluate === 'function') {\n        return {\n            evaluate(...args) {\n                const evaluatedLower = outputLower.evaluate.apply(undefined, args);\n                const evaluatedUpper = outputUpper.evaluate.apply(undefined, args);\n                // Special case for fill-outline-color, which has no spec default.\n                if (evaluatedLower === undefined || evaluatedUpper === undefined) {\n                    return undefined;\n                }\n                return interp(evaluatedLower, evaluatedUpper, t);\n            }\n        };\n    }\n\n    return interp(outputLower, outputUpper, t);\n}\n\nfunction evaluateIdentityFunction(parameters, propertySpec, input) {\n    if (propertySpec.type === 'color') {\n        input = Color.parse(input);\n    } else if (getType(input) !== propertySpec.type && (propertySpec.type !== 'enum' || !propertySpec.values[input])) {\n        input = undefined;\n    }\n    return coalesce(input, parameters.default, propertySpec.default);\n}\n\n/**\n * Returns the index of the last stop <= input, or 0 if it doesn't exist.\n *\n * @private\n */\nfunction findStopLessThanOrEqualTo(stops, input) {\n    const n = stops.length;\n    let lowerIndex = 0;\n    let upperIndex = n - 1;\n    let currentIndex = 0;\n    let currentValue, upperValue;\n\n    while (lowerIndex <= upperIndex) {\n        currentIndex = Math.floor((lowerIndex + upperIndex) / 2);\n        currentValue = stops[currentIndex][0];\n        upperValue = stops[currentIndex + 1][0];\n        if (input === currentValue || input > currentValue && input < upperValue) { // Search complete\n            return currentIndex;\n        } else if (currentValue < input) {\n            lowerIndex = currentIndex + 1;\n        } else if (currentValue > input) {\n            upperIndex = currentIndex - 1;\n        }\n    }\n\n    return Math.max(currentIndex - 1, 0);\n}\n\n/**\n * Returns a ratio that can be used to interpolate between exponential function\n * stops.\n *\n * How it works:\n * Two consecutive stop values define a (scaled and shifted) exponential\n * function `f(x) = a * base^x + b`, where `base` is the user-specified base,\n * and `a` and `b` are constants affording sufficient degrees of freedom to fit\n * the function to the given stops.\n *\n * Here's a bit of algebra that lets us compute `f(x)` directly from the stop\n * values without explicitly solving for `a` and `b`:\n *\n * First stop value: `f(x0) = y0 = a * base^x0 + b`\n * Second stop value: `f(x1) = y1 = a * base^x1 + b`\n * => `y1 - y0 = a(base^x1 - base^x0)`\n * => `a = (y1 - y0)/(base^x1 - base^x0)`\n *\n * Desired value: `f(x) = y = a * base^x + b`\n * => `f(x) = y0 + a * (base^x - base^x0)`\n *\n * From the above, we can replace the `a` in `a * (base^x - base^x0)` and do a\n * little algebra:\n * ```\n * a * (base^x - base^x0) = (y1 - y0)/(base^x1 - base^x0) * (base^x - base^x0)\n *                     = (y1 - y0) * (base^x - base^x0) / (base^x1 - base^x0)\n * ```\n *\n * If we let `(base^x - base^x0) / (base^x1 base^x0)`, then we have\n * `f(x) = y0 + (y1 - y0) * ratio`.  In other words, `ratio` may be treated as\n * an interpolation factor between the two stops' output values.\n *\n * (Note: a slightly different form for `ratio`,\n * `(base^(x-x0) - 1) / (base^(x1-x0) - 1) `, is equivalent, but requires fewer\n * expensive `Math.pow()` operations.)\n *\n * @private\n */\nfunction interpolationFactor(input, base, lowerValue, upperValue) {\n    const difference = upperValue - lowerValue;\n    const progress = input - lowerValue;\n\n    if (difference === 0) {\n        return 0;\n    } else if (base === 1) {\n        return progress / difference;\n    } else {\n        return (Math.pow(base, progress) - 1) / (Math.pow(base, difference) - 1);\n    }\n}\n\nmodule.exports = {\n    createFunction,\n    isFunction\n};\n","// @flow\n\n/* eslint-env browser */\nmodule.exports = (self: Window);\n","\nconst ValidationError = require('../error/validation_error');\nconst unbundle = require('../util/unbundle_jsonlint');\n\nmodule.exports = function validateEnum(options) {\n    const key = options.key;\n    const value = options.value;\n    const valueSpec = options.valueSpec;\n    const errors = [];\n\n    if (Array.isArray(valueSpec.values)) { // <=v7\n        if (valueSpec.values.indexOf(unbundle(value)) === -1) {\n            errors.push(new ValidationError(key, value, `expected one of [${valueSpec.values.join(', ')}], ${JSON.stringify(value)} found`));\n        }\n    } else { // >=v8\n        if (Object.keys(valueSpec.values).indexOf(unbundle(value)) === -1) {\n            errors.push(new ValidationError(key, value, `expected one of [${Object.keys(valueSpec.values).join(', ')}], ${JSON.stringify(value)} found`));\n        }\n    }\n    return errors;\n};\n","\nconst ValidationError = require('../error/validation_error');\nconst validateExpression = require('./validate_expression');\nconst validateEnum = require('./validate_enum');\nconst getType = require('../util/get_type');\nconst unbundle = require('../util/unbundle_jsonlint');\nconst extend = require('../util/extend');\nconst {isExpressionFilter} = require('../feature_filter');\n\nmodule.exports = function validateFilter(options) {\n    if (isExpressionFilter(unbundle.deep(options.value))) {\n        return validateExpression(extend({}, options, {\n            expressionContext: 'filter',\n            valueSpec: { value: 'boolean' }\n        }));\n    } else {\n        return validateNonExpressionFilter(options);\n    }\n};\n\nfunction validateNonExpressionFilter(options) {\n    const value = options.value;\n    const key = options.key;\n\n    if (getType(value) !== 'array') {\n        return [new ValidationError(key, value, `array expected, ${getType(value)} found`)];\n    }\n\n    const styleSpec = options.styleSpec;\n    let type;\n\n    let errors = [];\n\n    if (value.length < 1) {\n        return [new ValidationError(key, value, 'filter array must have at least 1 element')];\n    }\n\n    errors = errors.concat(validateEnum({\n        key: `${key}[0]`,\n        value: value[0],\n        valueSpec: styleSpec.filter_operator,\n        style: options.style,\n        styleSpec: options.styleSpec\n    }));\n\n    switch (unbundle(value[0])) {\n    case '<':\n    case '<=':\n    case '>':\n    case '>=':\n        if (value.length >= 2 && unbundle(value[1]) === '$type') {\n            errors.push(new ValidationError(key, value, `\"$type\" cannot be use with operator \"${value[0]}\"`));\n        }\n        /* falls through */\n    case '==':\n    case '!=':\n        if (value.length !== 3) {\n            errors.push(new ValidationError(key, value, `filter array for operator \"${value[0]}\" must have 3 elements`));\n        }\n        /* falls through */\n    case 'in':\n    case '!in':\n        if (value.length >= 2) {\n            type = getType(value[1]);\n            if (type !== 'string') {\n                errors.push(new ValidationError(`${key}[1]`, value[1], `string expected, ${type} found`));\n            }\n        }\n        for (let i = 2; i < value.length; i++) {\n            type = getType(value[i]);\n            if (unbundle(value[1]) === '$type') {\n                errors = errors.concat(validateEnum({\n                    key: `${key}[${i}]`,\n                    value: value[i],\n                    valueSpec: styleSpec.geometry_type,\n                    style: options.style,\n                    styleSpec: options.styleSpec\n                }));\n            } else if (type !== 'string' && type !== 'number' && type !== 'boolean') {\n                errors.push(new ValidationError(`${key}[${i}]`, value[i], `string, number, or boolean expected, ${type} found`));\n            }\n        }\n        break;\n\n    case 'any':\n    case 'all':\n    case 'none':\n        for (let i = 1; i < value.length; i++) {\n            errors = errors.concat(validateNonExpressionFilter({\n                key: `${key}[${i}]`,\n                value: value[i],\n                style: options.style,\n                styleSpec: options.styleSpec\n            }));\n        }\n        break;\n\n    case 'has':\n    case '!has':\n        type = getType(value[1]);\n        if (value.length !== 2) {\n            errors.push(new ValidationError(key, value, `filter array for \"${value[0]}\" operator must have 2 elements`));\n        } else if (type !== 'string') {\n            errors.push(new ValidationError(`${key}[1]`, value[1], `string expected, ${type} found`));\n        }\n        break;\n\n    }\n\n    return errors;\n}\n","// @flow\n\nconst {createExpression} = require('../expression');\n\nimport type {GlobalProperties} from '../expression';\nexport type FeatureFilter = (globalProperties: GlobalProperties, feature: VectorTileFeature) => boolean;\n\nmodule.exports = createFilter;\nmodule.exports.isExpressionFilter = isExpressionFilter;\n\nfunction isExpressionFilter(filter) {\n    if (!Array.isArray(filter) || filter.length === 0) {\n        return false;\n    }\n    switch (filter[0]) {\n    case 'has':\n        return filter.length >= 2 && filter[1] !== '$id' && filter[1] !== '$type';\n\n    case 'in':\n    case '!in':\n    case '!has':\n    case 'none':\n        return false;\n\n    case '==':\n    case '!=':\n    case '>':\n    case '>=':\n    case '<':\n    case '<=':\n        return filter.length === 3 && (Array.isArray(filter[1]) || Array.isArray(filter[2]));\n\n    case 'any':\n    case 'all':\n        for (const f of filter.slice(1)) {\n            if (!isExpressionFilter(f) && typeof f !== 'boolean') {\n                return false;\n            }\n        }\n        return true;\n\n    default:\n        return true;\n    }\n}\n\nconst filterSpec = {\n    'type': 'boolean',\n    'default': false,\n    'function': true,\n    'property-function': true,\n    'zoom-function': true\n};\n\n/**\n * Given a filter expressed as nested arrays, return a new function\n * that evaluates whether a given feature (with a .properties or .tags property)\n * passes its test.\n *\n * @private\n * @param {Array} filter mapbox gl filter\n * @returns {Function} filter-evaluating function\n */\nfunction createFilter(filter: any): FeatureFilter {\n    if (!filter) {\n        return () => true;\n    }\n\n    if (!isExpressionFilter(filter)) {\n        filter = convertFilter(filter);\n    }\n\n    const compiled = createExpression(filter, filterSpec);\n    if (compiled.result === 'error') {\n        throw new Error(compiled.value.map(err => `${err.key}: ${err.message}`).join(', '));\n    } else {\n        return (globalProperties: GlobalProperties, feature: VectorTileFeature) => compiled.value.evaluate(globalProperties, feature);\n    }\n}\n\n// Comparison function to sort numbers and strings\nfunction compare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nfunction convertFilter(filter: ?Array<any>): mixed {\n    if (!filter) return true;\n    const op = filter[0];\n    if (filter.length <= 1) return (op !== 'any');\n    const converted =\n        op === '==' ? convertComparisonOp(filter[1], filter[2], '==') :\n        op === '!=' ? convertNegation(convertComparisonOp(filter[1], filter[2], '==')) :\n        op === '<' ||\n        op === '>' ||\n        op === '<=' ||\n        op === '>=' ? convertComparisonOp(filter[1], filter[2], op) :\n        op === 'any' ? convertDisjunctionOp(filter.slice(1)) :\n        op === 'all' ? ['all'].concat(filter.slice(1).map(convertFilter)) :\n        op === 'none' ? ['all'].concat(filter.slice(1).map(convertFilter).map(convertNegation)) :\n        op === 'in' ? convertInOp(filter[1], filter.slice(2)) :\n        op === '!in' ? convertNegation(convertInOp(filter[1], filter.slice(2))) :\n        op === 'has' ? convertHasOp(filter[1]) :\n        op === '!has' ? convertNegation(convertHasOp(filter[1])) :\n        true;\n    return converted;\n}\n\nfunction convertComparisonOp(property: string, value: any, op: string) {\n    switch (property) {\n    case '$type':\n        return [`filter-type-${op}`, value];\n    case '$id':\n        return [`filter-id-${op}`, value];\n    default:\n        return [`filter-${op}`, property, value];\n    }\n}\n\nfunction convertDisjunctionOp(filters: Array<Array<any>>) {\n    return ['any'].concat(filters.map(convertFilter));\n}\n\nfunction convertInOp(property: string, values: Array<any>) {\n    if (values.length === 0) { return false; }\n    switch (property) {\n    case '$type':\n        return [`filter-type-in`, ['literal', values]];\n    case '$id':\n        return [`filter-id-in`, ['literal', values]];\n    default:\n        if (values.length > 200 && !values.some(v => typeof v !== typeof values[0])) {\n            return ['filter-in-large', property, ['literal', values.sort(compare)]];\n        } else {\n            return ['filter-in-small', property, ['literal', values]];\n        }\n    }\n}\n\nfunction convertHasOp(property: string) {\n    switch (property) {\n    case '$type':\n        return true;\n    case '$id':\n        return [`filter-has-id`];\n    default:\n        return [`filter-has`, property];\n    }\n}\n\nfunction convertNegation(filter: mixed) {\n    return ['!', filter];\n}\n\n","// @flow\n\nconst quickselect = require('quickselect');\nconst calculateSignedArea = require('./util').calculateSignedArea;\n\nimport type Point from '@mapbox/point-geometry';\n\n// classifies an array of rings into polygons with outer rings and holes\nmodule.exports = function classifyRings(rings: Array<Array<Point>>, maxRings: number) {\n    const len = rings.length;\n\n    if (len <= 1) return [rings];\n\n    const polygons = [];\n    let polygon,\n        ccw;\n\n    for (let i = 0; i < len; i++) {\n        const area = calculateSignedArea(rings[i]);\n        if (area === 0) continue;\n\n        (rings[i]: any).area = Math.abs(area);\n\n        if (ccw === undefined) ccw = area < 0;\n\n        if (ccw === area < 0) {\n            if (polygon) polygons.push(polygon);\n            polygon = [rings[i]];\n\n        } else {\n            (polygon: any).push(rings[i]);\n        }\n    }\n    if (polygon) polygons.push(polygon);\n\n    // Earcut performance degrages with the # of rings in a polygon. For this\n    // reason, we limit strip out all but the `maxRings` largest rings.\n    if (maxRings > 1) {\n        for (let j = 0; j < polygons.length; j++) {\n            if (polygons[j].length <= maxRings) continue;\n            quickselect(polygons[j], maxRings, 1, polygons[j].length - 1, compareAreas);\n            polygons[j] = polygons[j].slice(0, maxRings);\n        }\n    }\n\n    return polygons;\n};\n\nfunction compareAreas(a, b) {\n    return b.area - a.area;\n}\n","// @flow\n\nconst ZoomHistory = require('./zoom_history');\n\nclass EvaluationParameters {\n    zoom: number;\n    now: number;\n    fadeDuration: number;\n    zoomHistory: ZoomHistory;\n    transition: TransitionSpecification;\n\n    constructor(zoom: number, options?: *) {\n        this.zoom = zoom;\n\n        if (options) {\n            this.now = options.now;\n            this.fadeDuration = options.fadeDuration;\n            this.zoomHistory = options.zoomHistory;\n            this.transition = options.transition;\n        } else {\n            this.now = 0;\n            this.fadeDuration = 0;\n            this.zoomHistory = new ZoomHistory();\n            this.transition = {};\n        }\n    }\n\n    crossFadingFactor() {\n        if (this.fadeDuration === 0) {\n            return 1;\n        } else {\n            return Math.min((this.now - this.zoomHistory.lastIntegerZoomTime) / this.fadeDuration, 1);\n        }\n    }\n}\n\nmodule.exports = EvaluationParameters;\n","// @flow\n\nconst {\n    symbolLayoutAttributes,\n    collisionVertexAttributes,\n    collisionBoxLayout,\n    collisionCircleLayout,\n    dynamicLayoutAttributes\n} = require('./symbol_attributes');\n\nconst {\n    SymbolLayoutArray,\n    SymbolDynamicLayoutArray,\n    SymbolOpacityArray,\n    CollisionBoxLayoutArray,\n    CollisionCircleLayoutArray,\n    CollisionVertexArray,\n    PlacedSymbolArray,\n    GlyphOffsetArray,\n    SymbolLineVertexArray\n} = require('../array_types');\n\nconst Point = require('@mapbox/point-geometry');\nconst {SegmentVector} = require('../segment');\nconst {ProgramConfigurationSet} = require('../program_configuration');\nconst {TriangleIndexArray, LineIndexArray} = require('../index_array_type');\nconst transformText = require('../../symbol/transform_text');\nconst mergeLines = require('../../symbol/mergelines');\nconst scriptDetection = require('../../util/script_detection');\nconst loadGeometry = require('../load_geometry');\nconst vectorTileFeatureTypes = require('@mapbox/vector-tile').VectorTileFeature.types;\nconst verticalizePunctuation = require('../../util/verticalize_punctuation');\nconst Anchor = require('../../symbol/anchor');\nconst {getSizeData} = require('../../symbol/symbol_size');\nconst {register} = require('../../util/web_worker_transfer');\n\nimport type {Feature as ExpressionFeature} from '../../style-spec/expression';\nimport type {\n    Bucket,\n    BucketParameters,\n    IndexedFeature,\n    PopulateParameters\n} from '../bucket';\nimport type {CollisionBoxArray, CollisionBox} from '../array_types';\nimport type { StructArray, StructArrayMember } from '../../util/struct_array';\nimport type SymbolStyleLayer from '../../style/style_layer/symbol_style_layer';\nimport type Context from '../../gl/context';\nimport type IndexBuffer from '../../gl/index_buffer';\nimport type VertexBuffer from '../../gl/vertex_buffer';\nimport type {SymbolQuad} from '../../symbol/quads';\nimport type {SizeData} from '../../symbol/symbol_size';\n\nexport type SingleCollisionBox = {\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n    anchorPointX: number;\n    anchorPointY: number;\n};\n\nexport type CollisionArrays = {\n    textBox?: SingleCollisionBox;\n    iconBox?: SingleCollisionBox;\n    textCircles?: Array<number>;\n};\n\nexport type SymbolInstance = {\n    key: string,\n    textBoxStartIndex: number,\n    textBoxEndIndex: number,\n    iconBoxStartIndex: number,\n    iconBoxEndIndex: number,\n    textOffset: [number, number],\n    iconOffset: [number, number],\n    anchor: Anchor,\n    line: Array<Point>,\n    featureIndex: number,\n    feature: ExpressionFeature,\n    textCollisionFeature?: {boxStartIndex: number, boxEndIndex: number},\n    iconCollisionFeature?: {boxStartIndex: number, boxEndIndex: number},\n    placedTextSymbolIndices: Array<number>;\n    numGlyphVertices: number;\n    numVerticalGlyphVertices: number;\n    numIconVertices: number;\n    // Populated/modified on foreground during placement\n    isDuplicate: boolean;\n    crossTileID: number;\n    collisionArrays?: CollisionArrays;\n    placedText?: boolean;\n    placedIcon?: boolean;\n    hidden?: boolean;\n};\n\nexport type SymbolFeature = {|\n    text: string | void,\n    icon: string | void,\n    index: number,\n    sourceLayerIndex: number,\n    geometry: Array<Array<Point>>,\n    properties: Object,\n    type: 'Point' | 'LineString' | 'Polygon',\n    id?: any\n|};\n\n// Opacity arrays are frequently updated but don't contain a lot of information, so we pack them\n// tight. Each Uint32 is actually four duplicate Uint8s for the four corners of a glyph\n// 7 bits are for the current opacity, and the lowest bit is the target opacity\n\n// actually defined in symbol_attributes.js\n// const placementOpacityAttributes = [\n//     { name: 'a_fade_opacity', components: 1, type: 'Uint32' }\n// ];\nconst shaderOpacityAttributes = [\n    { name: 'a_fade_opacity', components: 1, type: 'Uint8', offset: 0 }\n];\n\nfunction addVertex(array, anchorX, anchorY, ox, oy, tx, ty, sizeVertex) {\n    array.emplaceBack(\n        // a_pos_offset\n        anchorX,\n        anchorY,\n        Math.round(ox * 64),\n        Math.round(oy * 64),\n\n        // a_data\n        tx, // x coordinate of symbol on glyph atlas texture\n        ty, // y coordinate of symbol on glyph atlas texture\n        sizeVertex ? sizeVertex[0] : 0,\n        sizeVertex ? sizeVertex[1] : 0\n    );\n}\n\nfunction addDynamicAttributes(dynamicLayoutVertexArray: StructArray, p: Point, angle: number) {\n    dynamicLayoutVertexArray.emplaceBack(p.x, p.y, angle);\n    dynamicLayoutVertexArray.emplaceBack(p.x, p.y, angle);\n    dynamicLayoutVertexArray.emplaceBack(p.x, p.y, angle);\n    dynamicLayoutVertexArray.emplaceBack(p.x, p.y, angle);\n}\n\nclass SymbolBuffers {\n    layoutVertexArray: SymbolLayoutArray;\n    layoutVertexBuffer: VertexBuffer;\n\n    indexArray: TriangleIndexArray;\n    indexBuffer: IndexBuffer;\n\n    programConfigurations: ProgramConfigurationSet<SymbolStyleLayer>;\n    segments: SegmentVector;\n\n    dynamicLayoutVertexArray: SymbolDynamicLayoutArray;\n    dynamicLayoutVertexBuffer: VertexBuffer;\n\n    opacityVertexArray: SymbolOpacityArray;\n    opacityVertexBuffer: VertexBuffer;\n\n    collisionVertexArray: CollisionVertexArray;\n    collisionVertexBuffer: VertexBuffer;\n\n    placedSymbolArray: PlacedSymbolArray;\n\n    constructor(programConfigurations: ProgramConfigurationSet<SymbolStyleLayer>) {\n        this.layoutVertexArray = new SymbolLayoutArray();\n        this.indexArray = new TriangleIndexArray();\n        this.programConfigurations = programConfigurations;\n        this.segments = new SegmentVector();\n        this.dynamicLayoutVertexArray = new SymbolDynamicLayoutArray();\n        this.opacityVertexArray = new SymbolOpacityArray();\n        this.placedSymbolArray = new PlacedSymbolArray();\n    }\n\n    upload(context: Context, dynamicIndexBuffer: boolean) {\n        this.layoutVertexBuffer = context.createVertexBuffer(this.layoutVertexArray, symbolLayoutAttributes.members);\n        this.indexBuffer = context.createIndexBuffer(this.indexArray, dynamicIndexBuffer);\n        this.programConfigurations.upload(context);\n        this.dynamicLayoutVertexBuffer = context.createVertexBuffer(this.dynamicLayoutVertexArray, dynamicLayoutAttributes.members, true);\n        this.opacityVertexBuffer = context.createVertexBuffer(this.opacityVertexArray, shaderOpacityAttributes, true);\n        // This is a performance hack so that we can write to opacityVertexArray with uint32s\n        // even though the shaders read uint8s\n        this.opacityVertexBuffer.itemSize = 1;\n    }\n\n    destroy() {\n        if (!this.layoutVertexBuffer) return;\n        this.layoutVertexBuffer.destroy();\n        this.indexBuffer.destroy();\n        this.programConfigurations.destroy();\n        this.segments.destroy();\n        this.dynamicLayoutVertexBuffer.destroy();\n        this.opacityVertexBuffer.destroy();\n    }\n}\n\nregister('SymbolBuffers', SymbolBuffers);\n\nclass CollisionBuffers {\n    layoutVertexArray: StructArray;\n    layoutAttributes: Array<StructArrayMember>;\n    layoutVertexBuffer: VertexBuffer;\n\n    indexArray: TriangleIndexArray | LineIndexArray;\n    indexBuffer: IndexBuffer;\n\n    segments: SegmentVector;\n\n    collisionVertexArray: CollisionVertexArray;\n    collisionVertexBuffer: VertexBuffer;\n\n    constructor(LayoutArray: Class<StructArray>,\n                layoutAttributes: Array<StructArrayMember>,\n                IndexArray: Class<TriangleIndexArray | LineIndexArray>) {\n        this.layoutVertexArray = new LayoutArray();\n        this.layoutAttributes = layoutAttributes;\n        this.indexArray = new IndexArray();\n        this.segments = new SegmentVector();\n        this.collisionVertexArray = new CollisionVertexArray();\n    }\n\n    upload(context: Context) {\n        this.layoutVertexBuffer = context.createVertexBuffer(this.layoutVertexArray, this.layoutAttributes);\n        this.indexBuffer = context.createIndexBuffer(this.indexArray);\n        this.collisionVertexBuffer = context.createVertexBuffer(this.collisionVertexArray, collisionVertexAttributes.members, true);\n    }\n\n    destroy() {\n        if (!this.layoutVertexBuffer) return;\n        this.layoutVertexBuffer.destroy();\n        this.indexBuffer.destroy();\n        this.segments.destroy();\n        this.collisionVertexBuffer.destroy();\n    }\n}\n\nregister('CollisionBuffers', CollisionBuffers);\n\n/**\n * Unlike other buckets, which simply implement #addFeature with type-specific\n * logic for (essentially) triangulating feature geometries, SymbolBucket\n * requires specialized behavior:\n *\n * 1. WorkerTile#parse(), the logical owner of the bucket creation process,\n *    calls SymbolBucket#populate(), which resolves text and icon tokens on\n *    each feature, adds each glyphs and symbols needed to the passed-in\n *    collections options.glyphDependencies and options.iconDependencies, and\n *    stores the feature data for use in subsequent step (this.features).\n *\n * 2. WorkerTile asynchronously requests from the main thread all of the glyphs\n *    and icons needed (by this bucket and any others). When glyphs and icons\n *    have been received, the WorkerTile creates a CollisionIndex and invokes:\n *\n * 3. performSymbolLayout(bucket, stacks, icons) perform texts shaping and\n *    layout on a Symbol Bucket. This step populates:\n *      `this.symbolInstances`: metadata on generated symbols\n *      `this.collisionBoxArray`: collision data for use by foreground\n *      `this.text`: SymbolBuffers for text symbols\n *      `this.icons`: SymbolBuffers for icons\n *      `this.collisionBox`: Debug SymbolBuffers for collision boxes\n *      `this.collisionCircle`: Debug SymbolBuffers for collision circles\n *    The results are sent to the foreground for rendering\n *\n * 4. performSymbolPlacement(bucket, collisionIndex) is run on the foreground,\n *    and uses the CollisionIndex along with current camera settings to determine\n *    which symbols can actually show on the map. Collided symbols are hidden\n *    using a dynamic \"OpacityVertexArray\".\n *\n * @private\n */\nclass SymbolBucket implements Bucket {\n    static MAX_GLYPHS: number;\n    static addDynamicAttributes: typeof addDynamicAttributes;\n\n    collisionBoxArray: CollisionBoxArray;\n    zoom: number;\n    overscaling: number;\n    layers: Array<SymbolStyleLayer>;\n    layerIds: Array<string>;\n    index: number;\n    sdfIcons: boolean;\n    iconsNeedLinear: boolean;\n    bucketInstanceId: number;\n    justReloaded: boolean;\n\n    textSizeData: SizeData;\n    iconSizeData: SizeData;\n\n    glyphOffsetArray: GlyphOffsetArray;\n    lineVertexArray: SymbolLineVertexArray;\n    features: Array<SymbolFeature>;\n    symbolInstances: Array<SymbolInstance>;\n    pixelRatio: number;\n    tilePixelRatio: number;\n    compareText: {[string]: Array<Point>};\n    fadeStartTime: number;\n    sortFeaturesByY: boolean;\n    sortedAngle: number;\n\n    text: SymbolBuffers;\n    icon: SymbolBuffers;\n    collisionBox: CollisionBuffers;\n    collisionCircle: CollisionBuffers;\n    uploaded: boolean;\n\n    constructor(options: BucketParameters<SymbolStyleLayer>) {\n        this.collisionBoxArray = options.collisionBoxArray;\n        this.zoom = options.zoom;\n        this.overscaling = options.overscaling;\n        this.layers = options.layers;\n        this.layerIds = this.layers.map(layer => layer.id);\n        this.index = options.index;\n        this.pixelRatio = options.pixelRatio;\n\n        const layer = this.layers[0];\n        const unevaluatedLayoutValues = layer._unevaluatedLayout._values;\n\n        this.textSizeData = getSizeData(this.zoom, unevaluatedLayoutValues['text-size']);\n        this.iconSizeData = getSizeData(this.zoom, unevaluatedLayoutValues['icon-size']);\n\n        const layout = this.layers[0].layout;\n        this.sortFeaturesByY = layout.get('text-allow-overlap') || layout.get('icon-allow-overlap') ||\n            layout.get('text-ignore-placement') || layout.get('icon-ignore-placement');\n    }\n\n    createArrays() {\n        this.text = new SymbolBuffers(new ProgramConfigurationSet(symbolLayoutAttributes.members, this.layers, this.zoom, property => /^text/.test(property)));\n        this.icon = new SymbolBuffers(new ProgramConfigurationSet(symbolLayoutAttributes.members, this.layers, this.zoom, property => /^icon/.test(property)));\n        this.collisionBox = new CollisionBuffers(CollisionBoxLayoutArray, collisionBoxLayout.members, LineIndexArray);\n        this.collisionCircle = new CollisionBuffers(CollisionCircleLayoutArray, collisionCircleLayout.members, TriangleIndexArray);\n\n        this.glyphOffsetArray = new GlyphOffsetArray();\n        this.lineVertexArray = new SymbolLineVertexArray();\n    }\n\n    populate(features: Array<IndexedFeature>, options: PopulateParameters) {\n        const layer = this.layers[0];\n        const layout = layer.layout;\n\n        const textFont = layout.get('text-font');\n        const textField = layout.get('text-field');\n        const iconImage = layout.get('icon-image');\n        const hasText =\n            (textField.value.kind !== 'constant' || textField.value.value.length > 0) &&\n            (textFont.value.kind !== 'constant' || textFont.value.value.length > 0);\n        const hasIcon = iconImage.value.kind !== 'constant' || iconImage.value.value && iconImage.value.value.length > 0;\n\n        this.features = [];\n\n        if (!hasText && !hasIcon) {\n            return;\n        }\n\n        const icons = options.iconDependencies;\n        const stacks = options.glyphDependencies;\n        const globalProperties =  {zoom: this.zoom};\n\n        for (const {feature, index, sourceLayerIndex} of features) {\n            if (!layer._featureFilter(globalProperties, feature)) {\n                continue;\n            }\n\n            let text;\n            if (hasText) {\n                text = layer.getValueAndResolveTokens('text-field', feature);\n                text = transformText(text, layer, feature);\n            }\n\n            let icon;\n            if (hasIcon) {\n                icon = layer.getValueAndResolveTokens('icon-image', feature);\n            }\n\n            if (!text && !icon) {\n                continue;\n            }\n\n            const symbolFeature: SymbolFeature = {\n                text,\n                icon,\n                index,\n                sourceLayerIndex,\n                geometry: loadGeometry(feature),\n                properties: feature.properties,\n                type: vectorTileFeatureTypes[feature.type]\n            };\n            if (typeof feature.id !== 'undefined') {\n                symbolFeature.id = feature.id;\n            }\n            this.features.push(symbolFeature);\n\n            if (icon) {\n                icons[icon] = true;\n            }\n\n            if (text) {\n                const fontStack = textFont.evaluate(feature).join(',');\n                const stack = stacks[fontStack] = stacks[fontStack] || {};\n                const textAlongLine = layout.get('text-rotation-alignment') === 'map' && layout.get('symbol-placement') === 'line';\n                const allowsVerticalWritingMode = scriptDetection.allowsVerticalWritingMode(text);\n                for (let i = 0; i < text.length; i++) {\n                    stack[text.charCodeAt(i)] = true;\n                    if (textAlongLine && allowsVerticalWritingMode) {\n                        const verticalChar = verticalizePunctuation.lookup[text.charAt(i)];\n                        if (verticalChar) {\n                            stack[verticalChar.charCodeAt(0)] = true;\n                        }\n                    }\n                }\n            }\n        }\n\n        if (layout.get('symbol-placement') === 'line') {\n            // Merge adjacent lines with the same text to improve labelling.\n            // It's better to place labels on one long line than on many short segments.\n            this.features = mergeLines(this.features);\n        }\n    }\n\n\n    isEmpty() {\n        return this.symbolInstances.length === 0;\n    }\n\n    upload(context: Context) {\n        this.text.upload(context, this.sortFeaturesByY);\n        this.icon.upload(context, this.sortFeaturesByY);\n        this.collisionBox.upload(context);\n        this.collisionCircle.upload(context);\n    }\n\n    destroy() {\n        this.text.destroy();\n        this.icon.destroy();\n        this.collisionBox.destroy();\n        this.collisionCircle.destroy();\n    }\n\n    addToLineVertexArray(anchor: Anchor, line: any) {\n        const lineStartIndex = this.lineVertexArray.length;\n        if (anchor.segment !== undefined) {\n            let sumForwardLength = anchor.dist(line[anchor.segment + 1]);\n            let sumBackwardLength = anchor.dist(line[anchor.segment]);\n            const vertices = {};\n            for (let i = anchor.segment + 1; i < line.length; i++) {\n                vertices[i] = { x: line[i].x, y: line[i].y, tileUnitDistanceFromAnchor: sumForwardLength };\n                if (i < line.length - 1) {\n                    sumForwardLength += line[i + 1].dist(line[i]);\n                }\n            }\n            for (let i = anchor.segment || 0; i >= 0; i--) {\n                vertices[i] = { x: line[i].x, y: line[i].y, tileUnitDistanceFromAnchor: sumBackwardLength };\n                if (i > 0) {\n                    sumBackwardLength += line[i - 1].dist(line[i]);\n                }\n            }\n            for (let i = 0; i < line.length; i++) {\n                const vertex = vertices[i];\n                this.lineVertexArray.emplaceBack(vertex.x, vertex.y, vertex.tileUnitDistanceFromAnchor);\n            }\n        }\n        return {\n            lineStartIndex: lineStartIndex,\n            lineLength: this.lineVertexArray.length - lineStartIndex\n        };\n    }\n\n    addSymbols(arrays: SymbolBuffers,\n               quads: Array<SymbolQuad>,\n               sizeVertex: any,\n               lineOffset: [number, number],\n               alongLine: boolean,\n               feature: ExpressionFeature,\n               writingMode: any,\n               labelAnchor: Anchor,\n               lineStartIndex: number,\n               lineLength: number) {\n        const indexArray = arrays.indexArray;\n        const layoutVertexArray = arrays.layoutVertexArray;\n        const dynamicLayoutVertexArray = arrays.dynamicLayoutVertexArray;\n\n        const segment = arrays.segments.prepareSegment(4 * quads.length, arrays.layoutVertexArray, arrays.indexArray);\n        const glyphOffsetArrayStart = this.glyphOffsetArray.length;\n        const vertexStartIndex = segment.vertexLength;\n\n        for (const symbol of quads) {\n\n            const tl = symbol.tl,\n                tr = symbol.tr,\n                bl = symbol.bl,\n                br = symbol.br,\n                tex = symbol.tex;\n\n            const index = segment.vertexLength;\n\n            const y = symbol.glyphOffset[1];\n            addVertex(layoutVertexArray, labelAnchor.x, labelAnchor.y, tl.x, y + tl.y, tex.x, tex.y, sizeVertex);\n            addVertex(layoutVertexArray, labelAnchor.x, labelAnchor.y, tr.x, y + tr.y, tex.x + tex.w, tex.y, sizeVertex);\n            addVertex(layoutVertexArray, labelAnchor.x, labelAnchor.y, bl.x, y + bl.y, tex.x, tex.y + tex.h, sizeVertex);\n            addVertex(layoutVertexArray, labelAnchor.x, labelAnchor.y, br.x, y + br.y, tex.x + tex.w, tex.y + tex.h, sizeVertex);\n\n            addDynamicAttributes(dynamicLayoutVertexArray, labelAnchor, 0);\n\n            indexArray.emplaceBack(index, index + 1, index + 2);\n            indexArray.emplaceBack(index + 1, index + 2, index + 3);\n\n            segment.vertexLength += 4;\n            segment.primitiveLength += 2;\n\n            this.glyphOffsetArray.emplaceBack(symbol.glyphOffset[0]);\n        }\n\n        arrays.placedSymbolArray.emplaceBack(labelAnchor.x, labelAnchor.y,\n            glyphOffsetArrayStart, this.glyphOffsetArray.length - glyphOffsetArrayStart, vertexStartIndex,\n            lineStartIndex, lineLength, (labelAnchor.segment: any),\n            sizeVertex ? sizeVertex[0] : 0, sizeVertex ? sizeVertex[1] : 0,\n            lineOffset[0], lineOffset[1],\n            writingMode, (false: any));\n\n        arrays.programConfigurations.populatePaintArrays(arrays.layoutVertexArray.length, feature);\n    }\n\n    _addCollisionDebugVertex(layoutVertexArray: StructArray, collisionVertexArray: StructArray, point: Point, anchor: Point, extrude: Point) {\n        collisionVertexArray.emplaceBack(0, 0);\n        return layoutVertexArray.emplaceBack(\n            // pos\n            point.x,\n            point.y,\n            // a_anchor_pos\n            anchor.x,\n            anchor.y,\n            // extrude\n            Math.round(extrude.x),\n            Math.round(extrude.y));\n    }\n\n\n    addCollisionDebugVertices(x1: number, y1: number, x2: number, y2: number, arrays: CollisionBuffers, boxAnchorPoint: Point, symbolInstance: SymbolInstance, isCircle: boolean) {\n        const segment = arrays.segments.prepareSegment(4, arrays.layoutVertexArray, arrays.indexArray);\n        const index = segment.vertexLength;\n\n        const layoutVertexArray = arrays.layoutVertexArray;\n        const collisionVertexArray = arrays.collisionVertexArray;\n\n        this._addCollisionDebugVertex(layoutVertexArray, collisionVertexArray, boxAnchorPoint, symbolInstance.anchor, new Point(x1, y1));\n        this._addCollisionDebugVertex(layoutVertexArray, collisionVertexArray, boxAnchorPoint, symbolInstance.anchor, new Point(x2, y1));\n        this._addCollisionDebugVertex(layoutVertexArray, collisionVertexArray, boxAnchorPoint, symbolInstance.anchor, new Point(x2, y2));\n        this._addCollisionDebugVertex(layoutVertexArray, collisionVertexArray, boxAnchorPoint, symbolInstance.anchor, new Point(x1, y2));\n\n        segment.vertexLength += 4;\n        if (isCircle) {\n            const indexArray: TriangleIndexArray = (arrays.indexArray: any);\n            indexArray.emplaceBack(index, index + 1, index + 2);\n            indexArray.emplaceBack(index, index + 2, index + 3);\n\n            segment.primitiveLength += 2;\n        } else {\n            const indexArray: LineIndexArray = (arrays.indexArray: any);\n            indexArray.emplaceBack(index, index + 1);\n            indexArray.emplaceBack(index + 1, index + 2);\n            indexArray.emplaceBack(index + 2, index + 3);\n            indexArray.emplaceBack(index + 3, index);\n\n            segment.primitiveLength += 4;\n        }\n    }\n\n    generateCollisionDebugBuffers() {\n        for (const symbolInstance of this.symbolInstances) {\n            symbolInstance.textCollisionFeature = {boxStartIndex: symbolInstance.textBoxStartIndex, boxEndIndex: symbolInstance.textBoxEndIndex};\n            symbolInstance.iconCollisionFeature = {boxStartIndex: symbolInstance.iconBoxStartIndex, boxEndIndex: symbolInstance.iconBoxEndIndex};\n\n            for (let i = 0; i < 2; i++) {\n                const feature = symbolInstance[i === 0 ? 'textCollisionFeature' : 'iconCollisionFeature'];\n                if (!feature) continue;\n\n                for (let b = feature.boxStartIndex; b < feature.boxEndIndex; b++) {\n                    const box: CollisionBox = (this.collisionBoxArray.get(b): any);\n                    const x1 = box.x1;\n                    const y1 = box.y1;\n                    const x2 = box.x2;\n                    const y2 = box.y2;\n\n                    // If the radius > 0, this collision box is actually a circle\n                    // The data we add to the buffers is exactly the same, but we'll render with a different shader.\n                    const isCircle = box.radius > 0;\n                    this.addCollisionDebugVertices(x1, y1, x2, y2, isCircle ? this.collisionCircle : this.collisionBox, box.anchorPoint, symbolInstance, isCircle);\n                }\n            }\n        }\n    }\n\n    // These flat arrays are meant to be quicker to iterate over than the source\n    // CollisionBoxArray\n    deserializeCollisionBoxes(collisionBoxArray: CollisionBoxArray, textStartIndex: number, textEndIndex: number, iconStartIndex: number, iconEndIndex: number): CollisionArrays {\n        const collisionArrays = {};\n        for (let k = textStartIndex; k < textEndIndex; k++) {\n            const box: CollisionBox = (collisionBoxArray.get(k): any);\n            if (box.radius === 0) {\n                collisionArrays.textBox = { x1: box.x1, y1: box.y1, x2: box.x2, y2: box.y2, anchorPointX: box.anchorPointX, anchorPointY: box.anchorPointY };\n\n                break; // Only one box allowed per instance\n            } else {\n                if (!collisionArrays.textCircles) {\n                    collisionArrays.textCircles = [];\n                }\n                const used = 1; // May be updated at collision detection time\n                collisionArrays.textCircles.push(box.anchorPointX, box.anchorPointY, box.radius, box.signedDistanceFromAnchor, used);\n            }\n        }\n        for (let k = iconStartIndex; k < iconEndIndex; k++) {\n            // An icon can only have one box now, so this indexing is a bit vestigial...\n            const box: CollisionBox = (collisionBoxArray.get(k): any);\n            if (box.radius === 0) {\n                collisionArrays.iconBox = { x1: box.x1, y1: box.y1, x2: box.x2, y2: box.y2, anchorPointX: box.anchorPointX, anchorPointY: box.anchorPointY };\n                break; // Only one box allowed per instance\n            }\n        }\n        return collisionArrays;\n    }\n\n    hasTextData() {\n        return this.text.segments.get().length > 0;\n    }\n\n    hasIconData() {\n        return this.icon.segments.get().length > 0;\n    }\n\n    hasCollisionBoxData() {\n        return this.collisionBox.segments.get().length > 0;\n    }\n\n    hasCollisionCircleData() {\n        return this.collisionCircle.segments.get().length > 0;\n    }\n\n    sortFeatures(angle: number) {\n        if (!this.sortFeaturesByY) return;\n\n        if (this.sortedAngle === angle) return;\n        this.sortedAngle = angle;\n\n        // The current approach to sorting doesn't sort across segments so don't try.\n        // Sorting within segments separately seemed not to be worth the complexity.\n        if (this.text.segments.get().length > 1 || this.icon.segments.get().length > 1) return;\n\n        // If the symbols are allowed to overlap sort them by their vertical screen position.\n        // The index array buffer is rewritten to reference the (unchanged) vertices in the\n        // sorted order.\n\n        // To avoid sorting the actual symbolInstance array we sort an array of indexes.\n        const symbolInstanceIndexes = [];\n        for (let i = 0; i < this.symbolInstances.length; i++) {\n            symbolInstanceIndexes.push(i);\n        }\n\n        const sin = Math.sin(angle),\n            cos = Math.cos(angle);\n\n        symbolInstanceIndexes.sort((aIndex, bIndex) => {\n            const a = this.symbolInstances[aIndex];\n            const b = this.symbolInstances[bIndex];\n            const aRotated = (sin * a.anchor.x + cos * a.anchor.y) | 0;\n            const bRotated = (sin * b.anchor.x + cos * b.anchor.y) | 0;\n            return (aRotated - bRotated) || (b.featureIndex - a.featureIndex);\n        });\n\n        this.text.indexArray.clear();\n        this.icon.indexArray.clear();\n\n        for (const i of symbolInstanceIndexes) {\n            const symbolInstance = this.symbolInstances[i];\n\n            for (const placedTextSymbolIndex of symbolInstance.placedTextSymbolIndices) {\n                const placedSymbol = this.text.placedSymbolArray.get(placedTextSymbolIndex);\n\n                const endIndex = placedSymbol.vertexStartIndex + placedSymbol.numGlyphs * 4;\n                for (let vertexIndex = placedSymbol.vertexStartIndex; vertexIndex < endIndex; vertexIndex += 4) {\n                    this.text.indexArray.emplaceBack(vertexIndex, vertexIndex + 1, vertexIndex + 2);\n                    this.text.indexArray.emplaceBack(vertexIndex + 1, vertexIndex + 2, vertexIndex + 3);\n                }\n            }\n\n            const placedIcon = this.icon.placedSymbolArray.get(i);\n            if (placedIcon.numGlyphs) {\n                const vertexIndex = placedIcon.vertexStartIndex;\n                this.icon.indexArray.emplaceBack(vertexIndex, vertexIndex + 1, vertexIndex + 2);\n                this.icon.indexArray.emplaceBack(vertexIndex + 1, vertexIndex + 2, vertexIndex + 3);\n            }\n        }\n\n        if (this.text.indexBuffer) this.text.indexBuffer.updateData(this.text.indexArray);\n        if (this.icon.indexBuffer) this.icon.indexBuffer.updateData(this.icon.indexArray);\n    }\n}\n\nregister('SymbolBucket', SymbolBucket, {\n    omit: ['layers', 'collisionBoxArray', 'features', 'compareText'],\n    shallow: ['symbolInstances']\n});\n\n// this constant is based on the size of StructArray indexes used in a symbol\n// bucket--namely, glyphOffsetArrayStart\n// eg the max valid UInt16 is 65,535\n// See https://github.com/mapbox/mapbox-gl-js/issues/2907 for motivation\n// lineStartIndex and textBoxStartIndex could potentially be concerns\n// but we expect there to be many fewer boxes/lines than glyphs\nSymbolBucket.MAX_GLYPHS = 65535;\n\nSymbolBucket.addDynamicAttributes = addDynamicAttributes;\n\nmodule.exports = SymbolBucket;\n","// @flow\n\nconst ajax = require('../util/ajax');\nconst Evented = require('../util/evented');\nconst window = require('../util/window');\n\nlet pluginRequested = false;\nlet pluginBlobURL = null;\n\nmodule.exports.evented = new Evented();\n\ntype ErrorCallback = (error: Error) => void;\n\nmodule.exports.registerForPluginAvailability = function(\n    callback: (args: {pluginBlobURL: string, errorCallback: ErrorCallback}) => void\n) {\n    if (pluginBlobURL) {\n        callback({ pluginBlobURL: pluginBlobURL, errorCallback: module.exports.errorCallback});\n    } else {\n        module.exports.evented.once('pluginAvailable', callback);\n    }\n    return callback;\n};\n\n// Exposed so it can be stubbed out by tests\nmodule.exports.createBlobURL = function(response: Object) {\n    return window.URL.createObjectURL(new window.Blob([response.data], {type: \"text/javascript\"}));\n};\n// Only exposed for tests\nmodule.exports.clearRTLTextPlugin = function() {\n    pluginRequested = false;\n    pluginBlobURL = null;\n};\n\nmodule.exports.setRTLTextPlugin = function(pluginURL: string, callback: ErrorCallback) {\n    if (pluginRequested) {\n        throw new Error('setRTLTextPlugin cannot be called multiple times.');\n    }\n    pluginRequested = true;\n    module.exports.errorCallback = callback;\n    ajax.getArrayBuffer({ url: pluginURL }, (err, response) => {\n        if (err) {\n            callback(err);\n        } else if (response) {\n            pluginBlobURL = module.exports.createBlobURL(response);\n            module.exports.evented.fire('pluginAvailable', { pluginBlobURL: pluginBlobURL, errorCallback: callback });\n        }\n    });\n};\n\nmodule.exports.applyArabicShaping = (null: ?Function);\nmodule.exports.processBidirectionalText = (null: ?(string, Array<number>) => Array<string>);\n","// @flow\n\nconst window = require('./window');\n\nimport type { Callback } from '../types/callback';\n\n/**\n * The type of a resource.\n * @private\n * @readonly\n * @enum {string}\n */\nconst ResourceType = {\n    Unknown: 'Unknown',\n    Style: 'Style',\n    Source: 'Source',\n    Tile: 'Tile',\n    Glyphs: 'Glyphs',\n    SpriteImage: 'SpriteImage',\n    SpriteJSON: 'SpriteJSON',\n    Image: 'Image'\n};\nexports.ResourceType = ResourceType;\n\nif (typeof Object.freeze == 'function') {\n    Object.freeze(ResourceType);\n}\n\n/**\n * A `RequestParameters` object to be returned from Map.options.transformRequest callbacks.\n * @typedef {Object} RequestParameters\n * @property {string} url The URL to be requested.\n * @property {Object} headers The headers to be sent with the request.\n * @property {string} credentials `'same-origin'|'include'` Use 'include' to send cookies with cross-origin requests.\n */\nexport type RequestParameters = {\n    url: string,\n    headers?: Object,\n    credentials?: 'same-origin' | 'include'\n};\n\nclass AJAXError extends Error {\n    status: number;\n    constructor(message: string, status: number) {\n        super(message);\n        this.status = status;\n    }\n}\n\nfunction makeRequest(requestParameters: RequestParameters): XMLHttpRequest {\n    const xhr: XMLHttpRequest = new window.XMLHttpRequest();\n\n    xhr.open('GET', requestParameters.url, true);\n    for (const k in requestParameters.headers) {\n        xhr.setRequestHeader(k, requestParameters.headers[k]);\n    }\n    xhr.withCredentials = requestParameters.credentials === 'include';\n    return xhr;\n}\n\nexports.getJSON = function(requestParameters: RequestParameters, callback: Callback<mixed>) {\n    const xhr = makeRequest(requestParameters);\n    xhr.setRequestHeader('Accept', 'application/json');\n    xhr.onerror = function() {\n        callback(new Error(xhr.statusText));\n    };\n    xhr.onload = function() {\n        if (xhr.status >= 200 && xhr.status < 300 && xhr.response) {\n            let data;\n            try {\n                data = JSON.parse(xhr.response);\n            } catch (err) {\n                return callback(err);\n            }\n            callback(null, data);\n        } else {\n            callback(new AJAXError(xhr.statusText, xhr.status));\n        }\n    };\n    xhr.send();\n    return xhr;\n};\n\nexports.getArrayBuffer = function(requestParameters: RequestParameters, callback: Callback<{data: ArrayBuffer, cacheControl: ?string, expires: ?string}>) {\n    const xhr = makeRequest(requestParameters);\n    xhr.responseType = 'arraybuffer';\n    xhr.onerror = function() {\n        callback(new Error(xhr.statusText));\n    };\n    xhr.onload = function() {\n        const response: ArrayBuffer = xhr.response;\n        if (response.byteLength === 0 && xhr.status === 200) {\n            return callback(new Error('http status 200 returned without content.'));\n        }\n        if (xhr.status >= 200 && xhr.status < 300 && xhr.response) {\n            callback(null, {\n                data: response,\n                cacheControl: xhr.getResponseHeader('Cache-Control'),\n                expires: xhr.getResponseHeader('Expires')\n            });\n        } else {\n            callback(new AJAXError(xhr.statusText, xhr.status));\n        }\n    };\n    xhr.send();\n    return xhr;\n};\n\nfunction sameOrigin(url) {\n    const a: HTMLAnchorElement = window.document.createElement('a');\n    a.href = url;\n    return a.protocol === window.document.location.protocol && a.host === window.document.location.host;\n}\n\nconst transparentPngUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=';\n\nexports.getImage = function(requestParameters: RequestParameters, callback: Callback<HTMLImageElement>) {\n    // request the image with XHR to work around caching issues\n    // see https://github.com/mapbox/mapbox-gl-js/issues/1470\n    return exports.getArrayBuffer(requestParameters, (err, imgData) => {\n        if (err) {\n            callback(err);\n        } else if (imgData) {\n            const img: HTMLImageElement = new window.Image();\n            const URL = window.URL || window.webkitURL;\n            img.onload = () => {\n                callback(null, img);\n                URL.revokeObjectURL(img.src);\n            };\n            const blob: Blob = new window.Blob([new Uint8Array(imgData.data)], { type: 'image/png' });\n            (img: any).cacheControl = imgData.cacheControl;\n            (img: any).expires = imgData.expires;\n            img.src = imgData.data.byteLength ? URL.createObjectURL(blob) : transparentPngUrl;\n        }\n    });\n};\n\nexports.getVideo = function(urls: Array<string>, callback: Callback<HTMLVideoElement>) {\n    const video: HTMLVideoElement = window.document.createElement('video');\n    video.onloadstart = function() {\n        callback(null, video);\n    };\n    for (let i = 0; i < urls.length; i++) {\n        const s: HTMLSourceElement = window.document.createElement('source');\n        if (!sameOrigin(urls[i])) {\n            video.crossOrigin = 'Anonymous';\n        }\n        s.src = urls[i];\n        video.appendChild(s);\n    }\n    return video;\n};\n","// @flow\n\nconst Point = require('@mapbox/point-geometry');\nconst {register} = require('../util/web_worker_transfer');\n\nclass Anchor extends Point {\n    angle: any;\n    segment: number | void;\n\n    constructor(x: number, y: number, angle: number, segment?: number) {\n        super(x, y);\n        this.angle = angle;\n        if (segment !== undefined) {\n            this.segment = segment;\n        }\n    }\n\n    clone() {\n        return new Anchor(this.x, this.y, this.angle, this.segment);\n    }\n}\n\nregister('Anchor', Anchor);\n\nmodule.exports = Anchor;\n","/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * Ported from Webkit\n * http://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/UnitBezier.h\n */\n\nmodule.exports = UnitBezier;\n\nfunction UnitBezier(p1x, p1y, p2x, p2y) {\n    // Calculate the polynomial coefficients, implicit first and last control points are (0,0) and (1,1).\n    this.cx = 3.0 * p1x;\n    this.bx = 3.0 * (p2x - p1x) - this.cx;\n    this.ax = 1.0 - this.cx - this.bx;\n\n    this.cy = 3.0 * p1y;\n    this.by = 3.0 * (p2y - p1y) - this.cy;\n    this.ay = 1.0 - this.cy - this.by;\n\n    this.p1x = p1x;\n    this.p1y = p2y;\n    this.p2x = p2x;\n    this.p2y = p2y;\n}\n\nUnitBezier.prototype.sampleCurveX = function(t) {\n    // `ax t^3 + bx t^2 + cx t' expanded using Horner's rule.\n    return ((this.ax * t + this.bx) * t + this.cx) * t;\n};\n\nUnitBezier.prototype.sampleCurveY = function(t) {\n    return ((this.ay * t + this.by) * t + this.cy) * t;\n};\n\nUnitBezier.prototype.sampleCurveDerivativeX = function(t) {\n    return (3.0 * this.ax * t + 2.0 * this.bx) * t + this.cx;\n};\n\nUnitBezier.prototype.solveCurveX = function(x, epsilon) {\n    if (typeof epsilon === 'undefined') epsilon = 1e-6;\n\n    var t0, t1, t2, x2, i;\n\n    // First try a few iterations of Newton's method -- normally very fast.\n    for (t2 = x, i = 0; i < 8; i++) {\n\n        x2 = this.sampleCurveX(t2) - x;\n        if (Math.abs(x2) < epsilon) return t2;\n\n        var d2 = this.sampleCurveDerivativeX(t2);\n        if (Math.abs(d2) < 1e-6) break;\n\n        t2 = t2 - x2 / d2;\n    }\n\n    // Fall back to the bisection method for reliability.\n    t0 = 0.0;\n    t1 = 1.0;\n    t2 = x;\n\n    if (t2 < t0) return t0;\n    if (t2 > t1) return t1;\n\n    while (t0 < t1) {\n\n        x2 = this.sampleCurveX(t2);\n        if (Math.abs(x2 - x) < epsilon) return t2;\n\n        if (x > x2) {\n            t0 = t2;\n        } else {\n            t1 = t2;\n        }\n\n        t2 = (t1 - t0) * 0.5 + t0;\n    }\n\n    // Failure.\n    return t2;\n};\n\nUnitBezier.prototype.solve = function(x, epsilon) {\n    return this.sampleCurveY(this.solveCurveX(x, epsilon));\n};\n","// @flow\n\n/**\n * A coordinate is a column, row, zoom combination, often used\n * as the data component of a tile.\n *\n * @param {number} column\n * @param {number} row\n * @param {number} zoom\n * @private\n */\nclass Coordinate {\n    column: number;\n    row: number;\n    zoom: number;\n    constructor(column: number, row: number, zoom: number) {\n        this.column = column;\n        this.row = row;\n        this.zoom = zoom;\n    }\n\n    /**\n     * Create a clone of this coordinate that can be mutated without\n     * changing the original coordinate\n     *\n     * @returns {Coordinate} clone\n     * @private\n     * var coord = new Coordinate(0, 0, 0);\n     * var c2 = coord.clone();\n     * // since coord is cloned, modifying a property of c2 does\n     * // not modify it.\n     * c2.zoom = 2;\n     */\n    clone() {\n        return new Coordinate(this.column, this.row, this.zoom);\n    }\n\n    /**\n     * Zoom this coordinate to a given zoom level. This returns a new\n     * coordinate object, not mutating the old one.\n     *\n     * @param {number} zoom\n     * @returns {Coordinate} zoomed coordinate\n     * @private\n     * @example\n     * var coord = new Coordinate(0, 0, 0);\n     * var c2 = coord.zoomTo(1);\n     * c2 // equals new Coordinate(0, 0, 1);\n     */\n    zoomTo(zoom: number) { return this.clone()._zoomTo(zoom); }\n\n    /**\n     * Subtract the column and row values of this coordinate from those\n     * of another coordinate. The other coordinat will be zoomed to the\n     * same level as `this` before the subtraction occurs\n     *\n     * @param {Coordinate} c other coordinate\n     * @returns {Coordinate} result\n     * @private\n     */\n    sub(c: Coordinate) { return this.clone()._sub(c); }\n\n    _zoomTo(zoom: number) {\n        const scale = Math.pow(2, zoom - this.zoom);\n        this.column *= scale;\n        this.row *= scale;\n        this.zoom = zoom;\n        return this;\n    }\n\n    _sub(c: Coordinate) {\n        c = c.zoomTo(this.zoom);\n        this.column -= c.column;\n        this.row -= c.row;\n        return this;\n    }\n}\n\nmodule.exports = Coordinate;\n","'use strict';\n\nmodule.exports = GridIndex;\n\nvar NUM_PARAMS = 3;\n\nfunction GridIndex(extent, n, padding) {\n    var cells = this.cells = [];\n\n    if (extent instanceof ArrayBuffer) {\n        this.arrayBuffer = extent;\n        var array = new Int32Array(this.arrayBuffer);\n        extent = array[0];\n        n = array[1];\n        padding = array[2];\n\n        this.d = n + 2 * padding;\n        for (var k = 0; k < this.d * this.d; k++) {\n            var start = array[NUM_PARAMS + k];\n            var end = array[NUM_PARAMS + k + 1];\n            cells.push(start === end ?\n                    null :\n                    array.subarray(start, end));\n        }\n        var keysOffset = array[NUM_PARAMS + cells.length];\n        var bboxesOffset = array[NUM_PARAMS + cells.length + 1];\n        this.keys = array.subarray(keysOffset, bboxesOffset);\n        this.bboxes = array.subarray(bboxesOffset);\n\n        this.insert = this._insertReadonly;\n\n    } else {\n        this.d = n + 2 * padding;\n        for (var i = 0; i < this.d * this.d; i++) {\n            cells.push([]);\n        }\n        this.keys = [];\n        this.bboxes = [];\n    }\n\n    this.n = n;\n    this.extent = extent;\n    this.padding = padding;\n    this.scale = n / extent;\n    this.uid = 0;\n\n    var p = (padding / n) * extent;\n    this.min = -p;\n    this.max = extent + p;\n}\n\n\nGridIndex.prototype.insert = function(key, x1, y1, x2, y2) {\n    this._forEachCell(x1, y1, x2, y2, this._insertCell, this.uid++);\n    this.keys.push(key);\n    this.bboxes.push(x1);\n    this.bboxes.push(y1);\n    this.bboxes.push(x2);\n    this.bboxes.push(y2);\n};\n\nGridIndex.prototype._insertReadonly = function() {\n    throw 'Cannot insert into a GridIndex created from an ArrayBuffer.';\n};\n\nGridIndex.prototype._insertCell = function(x1, y1, x2, y2, cellIndex, uid) {\n    this.cells[cellIndex].push(uid);\n};\n\nGridIndex.prototype.query = function(x1, y1, x2, y2, intersectionTest) {\n    var min = this.min;\n    var max = this.max;\n    if (x1 <= min && y1 <= min && max <= x2 && max <= y2 && !intersectionTest) {\n        // We use `Array#slice` because `this.keys` may be a `Int32Array` and\n        // some browsers (Safari and IE) do not support `TypedArray#slice`\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/slice#Browser_compatibility\n        return Array.prototype.slice.call(this.keys);\n\n    } else {\n        var result = [];\n        var seenUids = {};\n        this._forEachCell(x1, y1, x2, y2, this._queryCell, result, seenUids, intersectionTest);\n        return result;\n    }\n};\n\nGridIndex.prototype._queryCell = function(x1, y1, x2, y2, cellIndex, result, seenUids, intersectionTest) {\n    var cell = this.cells[cellIndex];\n    if (cell !== null) {\n        var keys = this.keys;\n        var bboxes = this.bboxes;\n        for (var u = 0; u < cell.length; u++) {\n            var uid = cell[u];\n            if (seenUids[uid] === undefined) {\n                var offset = uid * 4;\n                if (intersectionTest ?\n                    intersectionTest(bboxes[offset + 0], bboxes[offset + 1], bboxes[offset + 2], bboxes[offset + 3]) :\n                    ((x1 <= bboxes[offset + 2]) &&\n                    (y1 <= bboxes[offset + 3]) &&\n                    (x2 >= bboxes[offset + 0]) &&\n                    (y2 >= bboxes[offset + 1]))) {\n                    seenUids[uid] = true;\n                    result.push(keys[uid]);\n                } else {\n                    seenUids[uid] = false;\n                }\n            }\n        }\n    }\n};\n\nGridIndex.prototype._forEachCell = function(x1, y1, x2, y2, fn, arg1, arg2, intersectionTest) {\n    var cx1 = this._convertToCellCoord(x1);\n    var cy1 = this._convertToCellCoord(y1);\n    var cx2 = this._convertToCellCoord(x2);\n    var cy2 = this._convertToCellCoord(y2);\n    for (var x = cx1; x <= cx2; x++) {\n        for (var y = cy1; y <= cy2; y++) {\n            var cellIndex = this.d * y + x;\n            if (intersectionTest && !intersectionTest(\n                        this._convertFromCellCoord(x),\n                        this._convertFromCellCoord(y),\n                        this._convertFromCellCoord(x + 1),\n                        this._convertFromCellCoord(y + 1))) continue;\n            if (fn.call(this, x1, y1, x2, y2, cellIndex, arg1, arg2, intersectionTest)) return;\n        }\n    }\n};\n\nGridIndex.prototype._convertFromCellCoord = function(x) {\n    return (x - this.padding) / this.scale;\n};\n\nGridIndex.prototype._convertToCellCoord = function(x) {\n    return Math.max(0, Math.min(this.d - 1, Math.floor(x * this.scale) + this.padding));\n};\n\nGridIndex.prototype.toArrayBuffer = function() {\n    if (this.arrayBuffer) return this.arrayBuffer;\n\n    var cells = this.cells;\n\n    var metadataLength = NUM_PARAMS + this.cells.length + 1 + 1;\n    var totalCellLength = 0;\n    for (var i = 0; i < this.cells.length; i++) {\n        totalCellLength += this.cells[i].length;\n    }\n\n    var array = new Int32Array(metadataLength + totalCellLength + this.keys.length + this.bboxes.length);\n    array[0] = this.extent;\n    array[1] = this.n;\n    array[2] = this.padding;\n\n    var offset = metadataLength;\n    for (var k = 0; k < cells.length; k++) {\n        var cell = cells[k];\n        array[NUM_PARAMS + k] = offset;\n        array.set(cell, offset);\n        offset += cell.length;\n    }\n\n    array[NUM_PARAMS + cells.length] = offset;\n    array.set(this.keys, offset);\n    offset += this.keys.length;\n\n    array[NUM_PARAMS + cells.length + 1] = offset;\n    array.set(this.bboxes, offset);\n    offset += this.bboxes.length;\n\n    return array.buffer;\n};\n","// (c) Dean McNamee <dean@gmail.com>, 2012.\n//\n// https://github.com/deanm/css-color-parser-js\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n\n// http://www.w3.org/TR/css3-color/\nvar kCSSColorTable = {\n  \"transparent\": [0,0,0,0], \"aliceblue\": [240,248,255,1],\n  \"antiquewhite\": [250,235,215,1], \"aqua\": [0,255,255,1],\n  \"aquamarine\": [127,255,212,1], \"azure\": [240,255,255,1],\n  \"beige\": [245,245,220,1], \"bisque\": [255,228,196,1],\n  \"black\": [0,0,0,1], \"blanchedalmond\": [255,235,205,1],\n  \"blue\": [0,0,255,1], \"blueviolet\": [138,43,226,1],\n  \"brown\": [165,42,42,1], \"burlywood\": [222,184,135,1],\n  \"cadetblue\": [95,158,160,1], \"chartreuse\": [127,255,0,1],\n  \"chocolate\": [210,105,30,1], \"coral\": [255,127,80,1],\n  \"cornflowerblue\": [100,149,237,1], \"cornsilk\": [255,248,220,1],\n  \"crimson\": [220,20,60,1], \"cyan\": [0,255,255,1],\n  \"darkblue\": [0,0,139,1], \"darkcyan\": [0,139,139,1],\n  \"darkgoldenrod\": [184,134,11,1], \"darkgray\": [169,169,169,1],\n  \"darkgreen\": [0,100,0,1], \"darkgrey\": [169,169,169,1],\n  \"darkkhaki\": [189,183,107,1], \"darkmagenta\": [139,0,139,1],\n  \"darkolivegreen\": [85,107,47,1], \"darkorange\": [255,140,0,1],\n  \"darkorchid\": [153,50,204,1], \"darkred\": [139,0,0,1],\n  \"darksalmon\": [233,150,122,1], \"darkseagreen\": [143,188,143,1],\n  \"darkslateblue\": [72,61,139,1], \"darkslategray\": [47,79,79,1],\n  \"darkslategrey\": [47,79,79,1], \"darkturquoise\": [0,206,209,1],\n  \"darkviolet\": [148,0,211,1], \"deeppink\": [255,20,147,1],\n  \"deepskyblue\": [0,191,255,1], \"dimgray\": [105,105,105,1],\n  \"dimgrey\": [105,105,105,1], \"dodgerblue\": [30,144,255,1],\n  \"firebrick\": [178,34,34,1], \"floralwhite\": [255,250,240,1],\n  \"forestgreen\": [34,139,34,1], \"fuchsia\": [255,0,255,1],\n  \"gainsboro\": [220,220,220,1], \"ghostwhite\": [248,248,255,1],\n  \"gold\": [255,215,0,1], \"goldenrod\": [218,165,32,1],\n  \"gray\": [128,128,128,1], \"green\": [0,128,0,1],\n  \"greenyellow\": [173,255,47,1], \"grey\": [128,128,128,1],\n  \"honeydew\": [240,255,240,1], \"hotpink\": [255,105,180,1],\n  \"indianred\": [205,92,92,1], \"indigo\": [75,0,130,1],\n  \"ivory\": [255,255,240,1], \"khaki\": [240,230,140,1],\n  \"lavender\": [230,230,250,1], \"lavenderblush\": [255,240,245,1],\n  \"lawngreen\": [124,252,0,1], \"lemonchiffon\": [255,250,205,1],\n  \"lightblue\": [173,216,230,1], \"lightcoral\": [240,128,128,1],\n  \"lightcyan\": [224,255,255,1], \"lightgoldenrodyellow\": [250,250,210,1],\n  \"lightgray\": [211,211,211,1], \"lightgreen\": [144,238,144,1],\n  \"lightgrey\": [211,211,211,1], \"lightpink\": [255,182,193,1],\n  \"lightsalmon\": [255,160,122,1], \"lightseagreen\": [32,178,170,1],\n  \"lightskyblue\": [135,206,250,1], \"lightslategray\": [119,136,153,1],\n  \"lightslategrey\": [119,136,153,1], \"lightsteelblue\": [176,196,222,1],\n  \"lightyellow\": [255,255,224,1], \"lime\": [0,255,0,1],\n  \"limegreen\": [50,205,50,1], \"linen\": [250,240,230,1],\n  \"magenta\": [255,0,255,1], \"maroon\": [128,0,0,1],\n  \"mediumaquamarine\": [102,205,170,1], \"mediumblue\": [0,0,205,1],\n  \"mediumorchid\": [186,85,211,1], \"mediumpurple\": [147,112,219,1],\n  \"mediumseagreen\": [60,179,113,1], \"mediumslateblue\": [123,104,238,1],\n  \"mediumspringgreen\": [0,250,154,1], \"mediumturquoise\": [72,209,204,1],\n  \"mediumvioletred\": [199,21,133,1], \"midnightblue\": [25,25,112,1],\n  \"mintcream\": [245,255,250,1], \"mistyrose\": [255,228,225,1],\n  \"moccasin\": [255,228,181,1], \"navajowhite\": [255,222,173,1],\n  \"navy\": [0,0,128,1], \"oldlace\": [253,245,230,1],\n  \"olive\": [128,128,0,1], \"olivedrab\": [107,142,35,1],\n  \"orange\": [255,165,0,1], \"orangered\": [255,69,0,1],\n  \"orchid\": [218,112,214,1], \"palegoldenrod\": [238,232,170,1],\n  \"palegreen\": [152,251,152,1], \"paleturquoise\": [175,238,238,1],\n  \"palevioletred\": [219,112,147,1], \"papayawhip\": [255,239,213,1],\n  \"peachpuff\": [255,218,185,1], \"peru\": [205,133,63,1],\n  \"pink\": [255,192,203,1], \"plum\": [221,160,221,1],\n  \"powderblue\": [176,224,230,1], \"purple\": [128,0,128,1],\n  \"rebeccapurple\": [102,51,153,1],\n  \"red\": [255,0,0,1], \"rosybrown\": [188,143,143,1],\n  \"royalblue\": [65,105,225,1], \"saddlebrown\": [139,69,19,1],\n  \"salmon\": [250,128,114,1], \"sandybrown\": [244,164,96,1],\n  \"seagreen\": [46,139,87,1], \"seashell\": [255,245,238,1],\n  \"sienna\": [160,82,45,1], \"silver\": [192,192,192,1],\n  \"skyblue\": [135,206,235,1], \"slateblue\": [106,90,205,1],\n  \"slategray\": [112,128,144,1], \"slategrey\": [112,128,144,1],\n  \"snow\": [255,250,250,1], \"springgreen\": [0,255,127,1],\n  \"steelblue\": [70,130,180,1], \"tan\": [210,180,140,1],\n  \"teal\": [0,128,128,1], \"thistle\": [216,191,216,1],\n  \"tomato\": [255,99,71,1], \"turquoise\": [64,224,208,1],\n  \"violet\": [238,130,238,1], \"wheat\": [245,222,179,1],\n  \"white\": [255,255,255,1], \"whitesmoke\": [245,245,245,1],\n  \"yellow\": [255,255,0,1], \"yellowgreen\": [154,205,50,1]}\n\nfunction clamp_css_byte(i) {  // Clamp to integer 0 .. 255.\n  i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clamp_css_float(f) {  // Clamp to float 0.0 .. 1.0.\n  return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parse_css_int(str) {  // int or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_byte(parseFloat(str) / 100 * 255);\n  return clamp_css_byte(parseInt(str));\n}\n\nfunction parse_css_float(str) {  // float or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_float(parseFloat(str) / 100);\n  return clamp_css_float(parseFloat(str));\n}\n\nfunction css_hue_to_rgb(m1, m2, h) {\n  if (h < 0) h += 1;\n  else if (h > 1) h -= 1;\n\n  if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n  if (h * 2 < 1) return m2;\n  if (h * 3 < 2) return m1 + (m2 - m1) * (2/3 - h) * 6;\n  return m1;\n}\n\nfunction parseCSSColor(css_str) {\n  // Remove all whitespace, not compliant, but should just be more accepting.\n  var str = css_str.replace(/ /g, '').toLowerCase();\n\n  // Color keywords (and transparent) lookup.\n  if (str in kCSSColorTable) return kCSSColorTable[str].slice();  // dup.\n\n  // #abc and #abc123 syntax.\n  if (str[0] === '#') {\n    if (str.length === 4) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv >= 0 && iv <= 0xfff)) return null;  // Covers NaN.\n      return [((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),\n              (iv & 0xf0) | ((iv & 0xf0) >> 4),\n              (iv & 0xf) | ((iv & 0xf) << 4),\n              1];\n    } else if (str.length === 7) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv >= 0 && iv <= 0xffffff)) return null;  // Covers NaN.\n      return [(iv & 0xff0000) >> 16,\n              (iv & 0xff00) >> 8,\n              iv & 0xff,\n              1];\n    }\n\n    return null;\n  }\n\n  var op = str.indexOf('('), ep = str.indexOf(')');\n  if (op !== -1 && ep + 1 === str.length) {\n    var fname = str.substr(0, op);\n    var params = str.substr(op+1, ep-(op+1)).split(',');\n    var alpha = 1;  // To allow case fallthrough.\n    switch (fname) {\n      case 'rgba':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'rgb':\n        if (params.length !== 3) return null;\n        return [parse_css_int(params[0]),\n                parse_css_int(params[1]),\n                parse_css_int(params[2]),\n                alpha];\n      case 'hsla':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'hsl':\n        if (params.length !== 3) return null;\n        var h = (((parseFloat(params[0]) % 360) + 360) % 360) / 360;  // 0 .. 1\n        // NOTE(deanm): According to the CSS spec s/l should only be\n        // percentages, but we don't bother and let float or percentage.\n        var s = parse_css_float(params[1]);\n        var l = parse_css_float(params[2]);\n        var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n        var m1 = l * 2 - m2;\n        return [clamp_css_byte(css_hue_to_rgb(m1, m2, h+1/3) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h-1/3) * 255),\n                alpha];\n      default:\n        return null;\n    }\n  }\n\n  return null;\n}\n\ntry { exports.parseCSSColor = parseCSSColor } catch(e) { }\n","// @flow\n\nclass ParsingError extends Error {\n    key: string;\n    message: string;\n    constructor(key: string, message: string) {\n        super(message);\n        this.message = message;\n        this.key = key;\n    }\n}\n\nmodule.exports = ParsingError;\n","// @flow\n\nconst Scope = require('./scope');\nconst {checkSubtype} = require('./types');\nconst ParsingError = require('./parsing_error');\nconst Literal = require('./definitions/literal');\nconst Assertion = require('./definitions/assertion');\nconst ArrayAssertion = require('./definitions/array');\nconst Coercion = require('./definitions/coercion');\n\nimport type {Expression, ExpressionRegistry} from './expression';\nimport type {Type} from './types';\n\n/**\n * State associated parsing at a given point in an expression tree.\n * @private\n */\nclass ParsingContext {\n    registry: ExpressionRegistry;\n    path: Array<number>;\n    key: string;\n    scope: Scope;\n    errors: Array<ParsingError>;\n\n    // The expected type of this expression. Provided only to allow Expression\n    // implementations to infer argument types: Expression#parse() need not\n    // check that the output type of the parsed expression matches\n    // `expectedType`.\n    expectedType: ?Type;\n\n    constructor(\n        registry: ExpressionRegistry,\n        path: Array<number> = [],\n        expectedType: ?Type,\n        scope: Scope = new Scope(),\n        errors: Array<ParsingError> = []\n    ) {\n        this.registry = registry;\n        this.path = path;\n        this.key = path.map(part => `[${part}]`).join('');\n        this.scope = scope;\n        this.errors = errors;\n        this.expectedType = expectedType;\n    }\n\n    /**\n     * @param expr the JSON expression to parse\n     * @param index the optional argument index if this expression is an argument of a parent expression that's being parsed\n     * @param options\n     * @param options.omitTypeAnnotations set true to omit inferred type annotations.  Caller beware: with this option set, the parsed expression's type will NOT satisfy `expectedType` if it would normally be wrapped in an inferred annotation.\n     * @private\n     */\n    parse(\n        expr: mixed,\n        index?: number,\n        expectedType?: ?Type,\n        bindings?: Array<[string, Expression]>,\n        options: {omitTypeAnnotations?: boolean} = {}\n    ): ?Expression {\n        let context = this;\n        if (index) {\n            context = context.concat(index, expectedType, bindings);\n        }\n\n        if (expr === null || typeof expr === 'string' || typeof expr === 'boolean' || typeof expr === 'number') {\n            expr = ['literal', expr];\n        }\n\n        if (Array.isArray(expr)) {\n            if (expr.length === 0) {\n                return context.error(`Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].`);\n            }\n\n            const op = expr[0];\n            if (typeof op !== 'string') {\n                context.error(`Expression name must be a string, but found ${typeof op} instead. If you wanted a literal array, use [\"literal\", [...]].`, 0);\n                return null;\n            }\n\n            const Expr = context.registry[op];\n            if (Expr) {\n                let parsed = Expr.parse(expr, context);\n                if (!parsed) return null;\n\n                if (context.expectedType) {\n                    const expected = context.expectedType;\n                    const actual = parsed.type;\n\n                    // When we expect a number, string, boolean, or array but\n                    // have a Value, we can wrap it in a refining assertion.\n                    // When we expect a Color but have a String or Value, we\n                    // can wrap it in \"to-color\" coercion.\n                    // Otherwise, we do static type-checking.\n                    if ((expected.kind === 'string' || expected.kind === 'number' || expected.kind === 'boolean') && actual.kind === 'value') {\n                        if (!options.omitTypeAnnotations) {\n                            parsed = new Assertion(expected, [parsed]);\n                        }\n                    } else if (expected.kind === 'array' && actual.kind === 'value') {\n                        if (!options.omitTypeAnnotations) {\n                            parsed = new ArrayAssertion(expected, parsed);\n                        }\n                    } else if (expected.kind === 'color' && (actual.kind === 'value' || actual.kind === 'string')) {\n                        if (!options.omitTypeAnnotations) {\n                            parsed = new Coercion(expected, [parsed]);\n                        }\n                    } else if (context.checkSubtype(context.expectedType, parsed.type)) {\n                        return null;\n                    }\n                }\n\n                // If an expression's arguments are all literals, we can evaluate\n                // it immediately and replace it with a literal value in the\n                // parsed/compiled result.\n                if (!(parsed instanceof Literal) && isConstant(parsed)) {\n                    const ec = new (require('./evaluation_context'))();\n                    try {\n                        parsed = new Literal(parsed.type, parsed.evaluate(ec));\n                    } catch (e) {\n                        context.error(e.message);\n                        return null;\n                    }\n                }\n\n                return parsed;\n            }\n\n            return context.error(`Unknown expression \"${op}\". If you wanted a literal array, use [\"literal\", [...]].`, 0);\n        } else if (typeof expr === 'undefined') {\n            return context.error(`'undefined' value invalid. Use null instead.`);\n        } else if (typeof expr === 'object') {\n            return context.error(`Bare objects invalid. Use [\"literal\", {...}] instead.`);\n        } else {\n            return context.error(`Expected an array, but found ${typeof expr} instead.`);\n        }\n    }\n\n    /**\n     * Returns a copy of this context suitable for parsing the subexpression at\n     * index `index`, optionally appending to 'let' binding map.\n     *\n     * Note that `errors` property, intended for collecting errors while\n     * parsing, is copied by reference rather than cloned.\n     * @private\n     */\n    concat(index: number, expectedType?: ?Type, bindings?: Array<[string, Expression]>) {\n        const path = typeof index === 'number' ? this.path.concat(index) : this.path;\n        const scope = bindings ? this.scope.concat(bindings) : this.scope;\n        return new ParsingContext(\n            this.registry,\n            path,\n            expectedType || null,\n            scope,\n            this.errors\n        );\n    }\n\n    /**\n     * Push a parsing (or type checking) error into the `this.errors`\n     * @param error The message\n     * @param keys Optionally specify the source of the error at a child\n     * of the current expression at `this.key`.\n     * @private\n     */\n    error(error: string, ...keys: Array<number>) {\n        const key = `${this.key}${keys.map(k => `[${k}]`).join('')}`;\n        this.errors.push(new ParsingError(key, error));\n    }\n\n    /**\n     * Returns null if `t` is a subtype of `expected`; otherwise returns an\n     * error message and also pushes it to `this.errors`.\n     */\n    checkSubtype(expected: Type, t: Type): ?string {\n        const error = checkSubtype(expected, t);\n        if (error) this.error(error);\n        return error;\n    }\n}\n\nmodule.exports = ParsingContext;\n\nfunction isConstant(expression: Expression) {\n    // requires within function body to workaround circular dependency\n    const {CompoundExpression} = require('./compound_expression');\n    const {isGlobalPropertyConstant, isFeatureConstant} = require('./is_constant');\n    const Var = require('./definitions/var');\n\n    if (expression instanceof Var) {\n        return false;\n    } else if (expression instanceof CompoundExpression && expression.name === 'error') {\n        return false;\n    }\n\n    let literalArgs = true;\n    expression.eachChild(arg => {\n        if (!(arg instanceof Literal)) { literalArgs = false; }\n    });\n    if (!literalArgs) {\n        return false;\n    }\n\n    return isFeatureConstant(expression) &&\n        isGlobalPropertyConstant(expression, ['zoom', 'heatmap-density']);\n}\n","// @flow\n\nimport type {Expression} from './expression';\n\n/**\n * Tracks `let` bindings during expression parsing.\n * @private\n */\nclass Scope {\n    parent: ?Scope;\n    bindings: {[string]: Expression};\n    constructor(parent?: Scope, bindings: Array<[string, Expression]> = []) {\n        this.parent = parent;\n        this.bindings = {};\n        for (const [name, expression] of bindings) {\n            this.bindings[name] = expression;\n        }\n    }\n\n    concat(bindings: Array<[string, Expression]>) {\n        return new Scope(this, bindings);\n    }\n\n    get(name: string): Expression {\n        if (this.bindings[name]) { return this.bindings[name]; }\n        if (this.parent) { return this.parent.get(name); }\n        throw new Error(`${name} not found in scope.`);\n    }\n\n    has(name: string): boolean {\n        if (this.bindings[name]) return true;\n        return this.parent ? this.parent.has(name) : false;\n    }\n}\n\nmodule.exports = Scope;\n","// @flow\n\nconst { isValue, typeOf } = require('../values');\n\nimport type { Type } from '../types';\nimport type { Value }  from '../values';\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\n\nclass Literal implements Expression {\n    type: Type;\n    value: Value;\n\n    constructor(type: Type, value: Value) {\n        this.type = type;\n        this.value = value;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length !== 2)\n            return context.error(`'literal' expression requires exactly one argument, but found ${args.length - 1} instead.`);\n\n        if (!isValue(args[1]))\n            return context.error(`invalid value`);\n\n        const value = (args[1]: any);\n        let type = typeOf(value);\n\n        // special case: infer the item type if possible for zero-length arrays\n        const expected = context.expectedType;\n        if (\n            type.kind === 'array' &&\n            type.N === 0 &&\n            expected &&\n            expected.kind === 'array' &&\n            (typeof expected.N !== 'number' || expected.N === 0)\n        ) {\n            type = expected;\n        }\n\n        return new Literal(type, value);\n    }\n\n    evaluate() {\n        return this.value;\n    }\n\n    eachChild() {}\n\n    possibleOutputs() {\n        return [this.value];\n    }\n}\n\nmodule.exports = Literal;\n","// @flow\n\nconst assert = require('assert');\nconst {\n    ObjectType,\n    ValueType,\n    StringType,\n    NumberType,\n    BooleanType\n} = require('../types');\n\nconst RuntimeError = require('../runtime_error');\nconst {checkSubtype, toString} = require('../types');\nconst {typeOf} = require('../values');\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\nconst types = {\n    string: StringType,\n    number: NumberType,\n    boolean: BooleanType,\n    object: ObjectType\n};\n\nclass Assertion implements Expression {\n    type: Type;\n    args: Array<Expression>;\n\n    constructor(type: Type, args: Array<Expression>) {\n        this.type = type;\n        this.args = args;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext): ?Expression {\n        if (args.length < 2)\n            return context.error(`Expected at least one argument.`);\n\n        const name: string = (args[0]: any);\n        assert(types[name], name);\n\n        const type = types[name];\n\n        const parsed = [];\n        for (let i = 1; i < args.length; i++) {\n            const input = context.parse(args[i], i, ValueType);\n            if (!input) return null;\n            parsed.push(input);\n        }\n\n        return new Assertion(type, parsed);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        for (let i = 0; i < this.args.length; i++) {\n            const value = this.args[i].evaluate(ctx);\n            const error = checkSubtype(this.type, typeOf(value));\n            if (!error) {\n                return value;\n            } else if (i === this.args.length - 1) {\n                throw new RuntimeError(`Expected value to be of type ${toString(this.type)}, but found ${toString(typeOf(value))} instead.`);\n            }\n        }\n\n        assert(false);\n        return null;\n    }\n\n    eachChild(fn: (Expression) => void) {\n        this.args.forEach(fn);\n    }\n\n    possibleOutputs() {\n        return [].concat(...this.args.map((arg) => arg.possibleOutputs()));\n    }\n}\n\nmodule.exports = Assertion;\n","// @flow\n\nconst {\n    toString,\n    array,\n    ValueType,\n    StringType,\n    NumberType,\n    BooleanType,\n    checkSubtype\n} = require('../types');\n\nconst {typeOf} = require('../values');\nconst RuntimeError = require('../runtime_error');\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { ArrayType } from '../types';\n\nconst types = {\n    string: StringType,\n    number: NumberType,\n    boolean: BooleanType\n};\n\nclass ArrayAssertion implements Expression {\n    type: ArrayType;\n    input: Expression;\n\n    constructor(type: ArrayType, input: Expression) {\n        this.type = type;\n        this.input = input;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext): ?Expression {\n        if (args.length < 2 || args.length > 4)\n            return context.error(`Expected 1, 2, or 3 arguments, but found ${args.length - 1} instead.`);\n\n        let itemType;\n        let N;\n        if (args.length > 2) {\n            const type = args[1];\n            if (typeof type !== 'string' || !(type in types))\n                return context.error('The item type argument of \"array\" must be one of string, number, boolean', 1);\n            itemType = types[type];\n        } else {\n            itemType = ValueType;\n        }\n\n        if (args.length > 3) {\n            if (\n                typeof args[2] !== 'number' ||\n                args[2] < 0 ||\n                args[2] !== Math.floor(args[2])\n            ) {\n                return context.error('The length argument to \"array\" must be a positive integer literal', 2);\n            }\n            N = args[2];\n        }\n\n        const type = array(itemType, N);\n\n        const input = context.parse(args[args.length - 1], args.length - 1, ValueType);\n        if (!input) return null;\n\n        return new ArrayAssertion(type, input);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const value = this.input.evaluate(ctx);\n        const error = checkSubtype(this.type, typeOf(value));\n        if (error) {\n            throw new RuntimeError(`Expected value to be of type ${toString(this.type)}, but found ${toString(typeOf(value))} instead.`);\n        }\n        return value;\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.input);\n    }\n\n    possibleOutputs() {\n        return this.input.possibleOutputs();\n    }\n}\n\nmodule.exports = ArrayAssertion;\n","// @flow\n\nconst assert = require('assert');\nconst {\n    ColorType,\n    ValueType,\n    NumberType,\n} = require('../types');\n\nconst { Color, validateRGBA } = require('../values');\nconst RuntimeError = require('../runtime_error');\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\nconst types = {\n    'to-number': NumberType,\n    'to-color': ColorType\n};\n\n/**\n * Special form for error-coalescing coercion expressions \"to-number\",\n * \"to-color\".  Since these coercions can fail at runtime, they accept multiple\n * arguments, only evaluating one at a time until one succeeds.\n *\n * @private\n */\nclass Coercion implements Expression {\n    type: Type;\n    args: Array<Expression>;\n\n    constructor(type: Type, args: Array<Expression>) {\n        this.type = type;\n        this.args = args;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext): ?Expression {\n        if (args.length < 2)\n            return context.error(`Expected at least one argument.`);\n\n        const name: string = (args[0]: any);\n        assert(types[name], name);\n\n        const type = types[name];\n\n        const parsed = [];\n        for (let i = 1; i < args.length; i++) {\n            const input = context.parse(args[i], i, ValueType);\n            if (!input) return null;\n            parsed.push(input);\n        }\n\n        return new Coercion(type, parsed);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        if (this.type.kind === 'color') {\n            let input;\n            let error;\n            for (const arg of this.args) {\n                input = arg.evaluate(ctx);\n                error = null;\n                if (typeof input === 'string') {\n                    const c = ctx.parseColor(input);\n                    if (c) return c;\n                } else if (Array.isArray(input)) {\n                    if (input.length < 3 || input.length > 4) {\n                        error = `Invalid rbga value ${JSON.stringify(input)}: expected an array containing either three or four numeric values.`;\n                    } else {\n                        error = validateRGBA(input[0], input[1], input[2], input[3]);\n                    }\n                    if (!error) {\n                        return new Color((input[0]: any) / 255, (input[1]: any) / 255, (input[2]: any) / 255, (input[3]: any));\n                    }\n                }\n            }\n            throw new RuntimeError(error || `Could not parse color from value '${typeof input === 'string' ? input : JSON.stringify(input)}'`);\n        } else {\n            let value = null;\n            for (const arg of this.args) {\n                value = arg.evaluate(ctx);\n                if (value === null) continue;\n                const num = Number(value);\n                if (isNaN(num)) continue;\n                return num;\n            }\n            throw new RuntimeError(`Could not convert ${JSON.stringify(value)} to number.`);\n        }\n    }\n\n    eachChild(fn: (Expression) => void) {\n        this.args.forEach(fn);\n    }\n\n    possibleOutputs() {\n        return [].concat(...this.args.map((arg) => arg.possibleOutputs()));\n    }\n}\n\nmodule.exports = Coercion;\n","// @flow\n\nconst { CompoundExpression } = require('./compound_expression');\n\nimport type { Expression } from './expression.js';\n\nfunction isFeatureConstant(e: Expression) {\n    if (e instanceof CompoundExpression) {\n        if (e.name === 'get' && e.args.length === 1) {\n            return false;\n        } else if (e.name === 'has' && e.args.length === 1) {\n            return false;\n        } else if (\n            e.name === 'properties' ||\n            e.name === 'geometry-type' ||\n            e.name === 'id'\n        ) {\n            return false;\n        } else if (e.name.startsWith('filter-')) {\n            return false;\n        }\n    }\n\n    let result = true;\n    e.eachChild(arg => {\n        if (result && !isFeatureConstant(arg)) { result = false; }\n    });\n    return result;\n}\n\nfunction isGlobalPropertyConstant(e: Expression, properties: Array<string>) {\n    if (e instanceof CompoundExpression && properties.indexOf(e.name) >= 0) { return false; }\n    let result = true;\n    e.eachChild((arg) => {\n        if (result && !isGlobalPropertyConstant(arg, properties)) { result = false; }\n    });\n    return result;\n}\n\nmodule.exports = {\n    isFeatureConstant,\n    isGlobalPropertyConstant,\n};\n","// @flow\n\nimport type { Type } from '../types';\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext  from '../evaluation_context';\n\nclass Var implements Expression {\n    type: Type;\n    name: string;\n\n    constructor(name: string, type: Type) {\n        this.type = type;\n        this.name = name;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length !== 2 || typeof args[1] !== 'string')\n            return context.error(`'var' expression requires exactly one string literal argument.`);\n\n        const name = args[1];\n        if (!context.scope.has(name)) {\n            return context.error(`Unknown variable \"${name}\". Make sure \"${name}\" has been bound in an enclosing \"let\" expression before using it.`, 1);\n        }\n\n        return new Var(name, context.scope.get(name).type);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        return ctx.scope.get(this.name).evaluate(ctx);\n    }\n\n    eachChild() {}\n\n    possibleOutputs() {\n        return [undefined];\n    }\n}\n\nmodule.exports = Var;\n","// @flow\n\nconst { NumberType } = require('../types');\nconst { findStopLessThanOrEqualTo } = require(\"../stops\");\n\nimport type { Stops } from '../stops';\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\nclass Step implements Expression {\n    type: Type;\n\n    input: Expression;\n    labels: Array<number>;\n    outputs: Array<Expression>;\n\n    constructor(type: Type, input: Expression, stops: Stops) {\n        this.type = type;\n        this.input = input;\n\n        this.labels = [];\n        this.outputs = [];\n        for (const [label, expression] of stops) {\n            this.labels.push(label);\n            this.outputs.push(expression);\n        }\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        let [ , input, ...rest] = args;\n\n        if (args.length - 1 < 4) {\n            return context.error(`Expected at least 4 arguments, but found only ${args.length - 1}.`);\n        }\n\n        if ((args.length - 1) % 2 !== 0) {\n            return context.error(`Expected an even number of arguments.`);\n        }\n\n        input = context.parse(input, 1, NumberType);\n        if (!input) return null;\n\n        const stops: Stops = [];\n\n        let outputType: Type = (null: any);\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n\n        rest.unshift(-Infinity);\n\n        for (let i = 0; i < rest.length; i += 2) {\n            const label = rest[i];\n            const value = rest[i + 1];\n\n            const labelKey = i + 1;\n            const valueKey = i + 2;\n\n            if (typeof label !== 'number') {\n                return context.error('Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', labelKey);\n            }\n\n            if (stops.length && stops[stops.length - 1][0] >= label) {\n                return context.error('Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.', labelKey);\n            }\n\n            const parsed = context.parse(value, valueKey, outputType);\n            if (!parsed) return null;\n            outputType = outputType || parsed.type;\n            stops.push([label, parsed]);\n        }\n\n        return new Step(outputType, input, stops);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const labels = this.labels;\n        const outputs = this.outputs;\n\n        if (labels.length === 1) {\n            return outputs[0].evaluate(ctx);\n        }\n\n        const value = ((this.input.evaluate(ctx): any): number);\n        if (value <= labels[0]) {\n            return outputs[0].evaluate(ctx);\n        }\n\n        const stopCount = labels.length;\n        if (value >= labels[stopCount - 1]) {\n            return outputs[stopCount - 1].evaluate(ctx);\n        }\n\n        const index = findStopLessThanOrEqualTo(labels, value);\n        return outputs[index].evaluate(ctx);\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.input);\n        for (const expression of this.outputs) {\n            fn(expression);\n        }\n    }\n\n    possibleOutputs() {\n        return [].concat(...this.outputs.map((output) => output.possibleOutputs()));\n    }\n}\n\nmodule.exports = Step;\n","// @flow\n\nconst RuntimeError = require('./runtime_error');\n\nimport type { Expression } from './expression';\n\nexport type Stops = Array<[number, Expression]>;\n\n/**\n * Returns the index of the last stop <= input, or 0 if it doesn't exist.\n * @private\n */\nfunction findStopLessThanOrEqualTo(stops: Array<number>, input: number) {\n    const n = stops.length;\n    let lowerIndex = 0;\n    let upperIndex = n - 1;\n    let currentIndex = 0;\n    let currentValue, upperValue;\n\n    while (lowerIndex <= upperIndex) {\n        currentIndex = Math.floor((lowerIndex + upperIndex) / 2);\n        currentValue = stops[currentIndex];\n        upperValue = stops[currentIndex + 1];\n        if (input === currentValue || input > currentValue && input < upperValue) { // Search complete\n            return currentIndex;\n        } else if (currentValue < input) {\n            lowerIndex = currentIndex + 1;\n        } else if (currentValue > input) {\n            upperIndex = currentIndex - 1;\n        } else {\n            throw new RuntimeError('Input is not a number.');\n        }\n    }\n\n    return Math.max(currentIndex - 1, 0);\n}\n\nmodule.exports = {findStopLessThanOrEqualTo};\n","// @flow\n\nconst assert = require('assert');\nconst {checkSubtype, ValueType} = require('../types');\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\nclass Coalesce implements Expression {\n    type: Type;\n    args: Array<Expression>;\n\n    constructor(type: Type, args: Array<Expression>) {\n        this.type = type;\n        this.args = args;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length < 2) {\n            return context.error(\"Expectected at least one argument.\");\n        }\n        let outputType: Type = (null: any);\n        const expectedType = context.expectedType;\n        if (expectedType && expectedType.kind !== 'value') {\n            outputType = expectedType;\n        }\n        const parsedArgs = [];\n\n        for (const arg of args.slice(1)) {\n            const parsed = context.parse(arg, 1 + parsedArgs.length, outputType, undefined, {omitTypeAnnotations: true});\n            if (!parsed) return null;\n            outputType = outputType || parsed.type;\n            parsedArgs.push(parsed);\n        }\n        assert(outputType);\n\n        // Above, we parse arguments without inferred type annotation so that\n        // they don't produce a runtime error for `null` input, which would\n        // preempt the desired null-coalescing behavior.\n        // Thus, if any of our arguments would have needed an annotation, we\n        // need to wrap the enclosing coalesce expression with it instead.\n        const needsAnnotation = expectedType &&\n            parsedArgs.some(arg => checkSubtype(expectedType, arg.type));\n\n        return needsAnnotation ?\n            new Coalesce(ValueType, parsedArgs) :\n            new Coalesce((outputType: any), parsedArgs);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        let result = null;\n        for (const arg of this.args) {\n            result = arg.evaluate(ctx);\n            if (result !== null) break;\n        }\n        return result;\n    }\n\n    eachChild(fn: (Expression) => void) {\n        this.args.forEach(fn);\n    }\n\n    possibleOutputs() {\n        return [].concat(...this.args.map((arg) => arg.possibleOutputs()));\n    }\n}\n\nmodule.exports = Coalesce;\n","// @flow\n\nimport type { Type } from '../types';\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext  from '../evaluation_context';\n\nclass Let implements Expression {\n    type: Type;\n    bindings: Array<[string, Expression]>;\n    result: Expression;\n\n    constructor(bindings: Array<[string, Expression]>, result: Expression) {\n        this.type = result.type;\n        this.bindings = [].concat(bindings);\n        this.result = result;\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        ctx.pushScope(this.bindings);\n        const result = this.result.evaluate(ctx);\n        ctx.popScope();\n        return result;\n    }\n\n    eachChild(fn: (Expression) => void) {\n        for (const binding of this.bindings) {\n            fn(binding[1]);\n        }\n        fn(this.result);\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length < 4)\n            return context.error(`Expected at least 3 arguments, but found ${args.length - 1} instead.`);\n\n        const bindings: Array<[string, Expression]> = [];\n        for (let i = 1; i < args.length - 1; i += 2) {\n            const name = args[i];\n\n            if (typeof name !== 'string') {\n                return context.error(`Expected string, but found ${typeof name} instead.`, i);\n            }\n\n            if (/[^a-zA-Z0-9_]/.test(name)) {\n                return context.error(`Variable names must contain only alphanumeric characters or '_'.`, i);\n            }\n\n            const value = context.parse(args[i + 1], i + 1);\n            if (!value) return null;\n\n            bindings.push([name, value]);\n        }\n\n        const result = context.parse(args[args.length - 1], args.length - 1, undefined, bindings);\n        if (!result) return null;\n\n        return new Let(bindings, result);\n    }\n\n    possibleOutputs() {\n        return this.result.possibleOutputs();\n    }\n}\n\nmodule.exports = Let;\n","// @flow\n\nconst {\n    NumberType,\n    StringType,\n    BooleanType,\n    ColorType,\n    ObjectType,\n    ValueType,\n    ErrorType,\n    array,\n    toString\n} = require('../types');\n\nconst { typeOf, Color, validateRGBA } = require('../values');\nconst { CompoundExpression, varargs } = require('../compound_expression');\nconst RuntimeError = require('../runtime_error');\nconst Let = require('./let');\nconst Var = require('./var');\nconst Literal = require('./literal');\nconst Assertion = require('./assertion');\nconst ArrayAssertion = require('./array');\nconst Coercion = require('./coercion');\nconst At = require('./at');\nconst Match = require('./match');\nconst Case = require('./case');\nconst Step = require('./step');\nconst Interpolate = require('./interpolate');\nconst Coalesce = require('./coalesce');\nconst {Equals, NotEquals} = require('./equals');\n\nimport type { ExpressionRegistry } from '../expression';\n\nconst expressions: ExpressionRegistry = {\n    // special forms\n    '==': Equals,\n    '!=': NotEquals,\n    'array': ArrayAssertion,\n    'at': At,\n    'boolean': Assertion,\n    'case': Case,\n    'coalesce': Coalesce,\n    'interpolate': Interpolate,\n    'let': Let,\n    'literal': Literal,\n    'match': Match,\n    'number': Assertion,\n    'object': Assertion,\n    'step': Step,\n    'string': Assertion,\n    'to-color': Coercion,\n    'to-number': Coercion,\n    'var': Var\n};\n\nfunction rgba(ctx, [r, g, b, a]) {\n    r = r.evaluate(ctx);\n    g = g.evaluate(ctx);\n    b = b.evaluate(ctx);\n    const alpha = a ? a.evaluate(ctx) : 1;\n    const error = validateRGBA(r, g, b, alpha);\n    if (error) throw new RuntimeError(error);\n    return new Color(r / 255 * alpha, g / 255 * alpha, b / 255 * alpha, alpha);\n}\n\nfunction has(key, obj) {\n    return key in obj;\n}\n\nfunction get(key, obj) {\n    const v = obj[key];\n    return typeof v === 'undefined' ? null : v;\n}\n\nfunction length(ctx, [v]) {\n    return v.evaluate(ctx).length;\n}\n\nfunction lt(ctx, [a, b]) { return a.evaluate(ctx) < b.evaluate(ctx); }\nfunction gt(ctx, [a, b]) { return a.evaluate(ctx) > b.evaluate(ctx); }\nfunction lteq(ctx, [a, b]) { return a.evaluate(ctx) <= b.evaluate(ctx); }\nfunction gteq(ctx, [a, b]) { return a.evaluate(ctx) >= b.evaluate(ctx); }\n\nfunction binarySearch(v, a, i, j) {\n    while (i <= j) {\n        const m = (i + j) >> 1;\n        if (a[m] === v)\n            return true;\n        if (a[m] > v)\n            j = m - 1;\n        else\n            i = m + 1;\n    }\n    return false;\n}\n\n\nCompoundExpression.register(expressions, {\n    'error': [\n        ErrorType,\n        [StringType],\n        (ctx, [v]) => { throw new RuntimeError(v.evaluate(ctx)); }\n    ],\n    'typeof': [\n        StringType,\n        [ValueType],\n        (ctx, [v]) => toString(typeOf(v.evaluate(ctx)))\n    ],\n    'to-string': [\n        StringType,\n        [ValueType],\n        (ctx, [v]) => {\n            v = v.evaluate(ctx);\n            const type = typeof v;\n            if (v === null || type === 'string' || type === 'number' || type === 'boolean') {\n                return String(v);\n            } else if (v instanceof Color) {\n                return v.toString();\n            } else {\n                return JSON.stringify(v);\n            }\n        }\n    ],\n    'to-boolean': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => Boolean(v.evaluate(ctx))\n    ],\n    'to-rgba': [\n        array(NumberType, 4),\n        [ColorType],\n        (ctx, [v]) => {\n            const {r, g, b, a} = v.evaluate(ctx);\n            return [255 * r / a, 255 * g / a, 255 * b / a, a];\n        }\n    ],\n    'rgb': [\n        ColorType,\n        [NumberType, NumberType, NumberType],\n        rgba\n    ],\n    'rgba': [\n        ColorType,\n        [NumberType, NumberType, NumberType, NumberType],\n        rgba\n    ],\n    'length': {\n        type: NumberType,\n        overloads: [\n            [\n                [StringType],\n                length\n            ], [\n                [array(ValueType)],\n                length\n            ]\n        ]\n    },\n    'has': {\n        type: BooleanType,\n        overloads: [\n            [\n                [StringType],\n                (ctx, [key]) => has(key.evaluate(ctx), ctx.properties())\n            ], [\n                [StringType, ObjectType],\n                (ctx, [key, obj]) => has(key.evaluate(ctx), obj.evaluate(ctx))\n            ]\n        ]\n    },\n    'get': {\n        type: ValueType,\n        overloads: [\n            [\n                [StringType],\n                (ctx, [key]) => get(key.evaluate(ctx), ctx.properties())\n            ], [\n                [StringType, ObjectType],\n                (ctx, [key, obj]) => get(key.evaluate(ctx), obj.evaluate(ctx))\n            ]\n        ]\n    },\n    'properties': [\n        ObjectType,\n        [],\n        (ctx) => ctx.properties()\n    ],\n    'geometry-type': [\n        StringType,\n        [],\n        (ctx) => ctx.geometryType()\n    ],\n    'id': [\n        ValueType,\n        [],\n        (ctx) => ctx.id()\n    ],\n    'zoom': [\n        NumberType,\n        [],\n        (ctx) => ctx.globals.zoom\n    ],\n    'heatmap-density': [\n        NumberType,\n        [],\n        (ctx) => ctx.globals.heatmapDensity || 0\n    ],\n    '+': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => {\n            let result = 0;\n            for (const arg of args) {\n                result += arg.evaluate(ctx);\n            }\n            return result;\n        }\n    ],\n    '*': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => {\n            let result = 1;\n            for (const arg of args) {\n                result *= arg.evaluate(ctx);\n            }\n            return result;\n        }\n    ],\n    '-': {\n        type: NumberType,\n        overloads: [\n            [\n                [NumberType, NumberType],\n                (ctx, [a, b]) => a.evaluate(ctx) - b.evaluate(ctx)\n            ], [\n                [NumberType],\n                (ctx, [a]) => -a.evaluate(ctx)\n            ]\n        ]\n    },\n    '/': [\n        NumberType,\n        [NumberType, NumberType],\n        (ctx, [a, b]) => a.evaluate(ctx) / b.evaluate(ctx)\n    ],\n    '%': [\n        NumberType,\n        [NumberType, NumberType],\n        (ctx, [a, b]) => a.evaluate(ctx) % b.evaluate(ctx)\n    ],\n    'ln2': [\n        NumberType,\n        [],\n        () => Math.LN2\n    ],\n    'pi': [\n        NumberType,\n        [],\n        () => Math.PI\n    ],\n    'e': [\n        NumberType,\n        [],\n        () => Math.E\n    ],\n    '^': [\n        NumberType,\n        [NumberType, NumberType],\n        (ctx, [b, e]) => Math.pow(b.evaluate(ctx), e.evaluate(ctx))\n    ],\n    'sqrt': [\n        NumberType,\n        [NumberType],\n        (ctx, [x]) => Math.sqrt(x.evaluate(ctx))\n    ],\n    'log10': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.log10(n.evaluate(ctx))\n    ],\n    'ln': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.log(n.evaluate(ctx))\n    ],\n    'log2': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.log2(n.evaluate(ctx))\n    ],\n    'sin': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.sin(n.evaluate(ctx))\n    ],\n    'cos': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.cos(n.evaluate(ctx))\n    ],\n    'tan': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.tan(n.evaluate(ctx))\n    ],\n    'asin': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.asin(n.evaluate(ctx))\n    ],\n    'acos': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.acos(n.evaluate(ctx))\n    ],\n    'atan': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.atan(n.evaluate(ctx))\n    ],\n    'min': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => Math.min(...args.map(arg => arg.evaluate(ctx)))\n    ],\n    'max': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => Math.max(...args.map(arg => arg.evaluate(ctx)))\n    ],\n    'filter-==': [\n        BooleanType,\n        [StringType, ValueType],\n        (ctx, [k, v]) => ctx.properties()[(k: any).value] === (v: any).value\n    ],\n    'filter-id-==': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => ctx.id() === (v: any).value\n    ],\n    'filter-type-==': [\n        BooleanType,\n        [StringType],\n        (ctx, [v]) => ctx.geometryType() === (v: any).value\n    ],\n    'filter-<': [\n        BooleanType,\n        [StringType, ValueType],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[(k: any).value];\n            const b = (v: any).value;\n            return typeof a === typeof b && a < b;\n        }\n    ],\n    'filter-id-<': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = (v: any).value;\n            return typeof a === typeof b && a < b;\n        }\n    ],\n    'filter->': [\n        BooleanType,\n        [StringType, ValueType],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[(k: any).value];\n            const b = (v: any).value;\n            return typeof a === typeof b && a > b;\n        }\n    ],\n    'filter-id->': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = (v: any).value;\n            return typeof a === typeof b && a > b;\n        }\n    ],\n    'filter-<=': [\n        BooleanType,\n        [StringType, ValueType],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[(k: any).value];\n            const b = (v: any).value;\n            return typeof a === typeof b && a <= b;\n        }\n    ],\n    'filter-id-<=': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = (v: any).value;\n            return typeof a === typeof b && a <= b;\n        }\n    ],\n    'filter->=': [\n        BooleanType,\n        [StringType, ValueType],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[(k: any).value];\n            const b = (v: any).value;\n            return typeof a === typeof b && a >= b;\n        }\n    ],\n    'filter-id->=': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = (v: any).value;\n            return typeof a === typeof b && a >= b;\n        }\n    ],\n    'filter-has': [\n        BooleanType,\n        [ValueType],\n        (ctx, [k]) => (k: any).value in ctx.properties()\n    ],\n    'filter-has-id': [\n        BooleanType,\n        [],\n        (ctx) => ctx.id() !== null\n    ],\n    'filter-type-in': [\n        BooleanType,\n        [array(StringType)],\n        (ctx, [v]) => (v: any).value.indexOf(ctx.geometryType()) >= 0\n    ],\n    'filter-id-in': [\n        BooleanType,\n        [array(ValueType)],\n        (ctx, [v]) => (v: any).value.indexOf(ctx.id()) >= 0\n    ],\n    'filter-in-small': [\n        BooleanType,\n        [StringType, array(ValueType)],\n        // assumes v is an array literal\n        (ctx, [k, v]) => (v: any).value.indexOf(ctx.properties()[(k: any).value]) >= 0\n    ],\n    'filter-in-large': [\n        BooleanType,\n        [StringType, array(ValueType)],\n        // assumes v is a array literal with values sorted in ascending order and of a single type\n        (ctx, [k, v]) => binarySearch(ctx.properties()[(k: any).value], (v: any).value, 0, (v: any).value.length - 1)\n    ],\n    '>': {\n        type: BooleanType,\n        overloads: [\n            [[NumberType, NumberType], gt],\n            [[StringType, StringType], gt]\n        ]\n    },\n    '<': {\n        type: BooleanType,\n        overloads: [\n            [[NumberType, NumberType], lt],\n            [[StringType, StringType], lt]\n        ]\n    },\n    '>=': {\n        type: BooleanType,\n        overloads: [\n            [[NumberType, NumberType], gteq],\n            [[StringType, StringType], gteq]\n        ]\n    },\n    '<=': {\n        type: BooleanType,\n        overloads: [\n            [[NumberType, NumberType], lteq],\n            [[StringType, StringType], lteq]\n        ]\n    },\n    'all': {\n        type: BooleanType,\n        overloads: [\n            [\n                [BooleanType, BooleanType],\n                (ctx, [a, b]) => a.evaluate(ctx) && b.evaluate(ctx)\n            ],\n            [\n                varargs(BooleanType),\n                (ctx, args) => {\n                    for (const arg of args) {\n                        if (!arg.evaluate(ctx))\n                            return false;\n                    }\n                    return true;\n                }\n            ]\n        ]\n    },\n    'any': {\n        type: BooleanType,\n        overloads: [\n            [\n                [BooleanType, BooleanType],\n                (ctx, [a, b]) => a.evaluate(ctx) || b.evaluate(ctx)\n            ],\n            [\n                varargs(BooleanType),\n                (ctx, args) => {\n                    for (const arg of args) {\n                        if (arg.evaluate(ctx))\n                            return true;\n                    }\n                    return false;\n                }\n            ]\n        ]\n    },\n    '!': [\n        BooleanType,\n        [BooleanType],\n        (ctx, [b]) => !b.evaluate(ctx)\n    ],\n    'upcase': [\n        StringType,\n        [StringType],\n        (ctx, [s]) => s.evaluate(ctx).toUpperCase()\n    ],\n    'downcase': [\n        StringType,\n        [StringType],\n        (ctx, [s]) => s.evaluate(ctx).toLowerCase()\n    ],\n    'concat': [\n        StringType,\n        varargs(StringType),\n        (ctx, args) => args.map(arg => arg.evaluate(ctx)).join('')\n    ]\n});\n\nmodule.exports = expressions;\n","\nconst ValidationError = require('../error/validation_error');\n\nmodule.exports = function validateConstants(options) {\n    const key = options.key;\n    const constants = options.value;\n\n    if (constants) {\n        return [new ValidationError(key, constants, 'constants have been deprecated as of v8')];\n    } else {\n        return [];\n    }\n};\n","\nconst ValidationError = require('../error/validation_error');\nconst getType = require('../util/get_type');\nconst validate = require('./validate');\nconst validateObject = require('./validate_object');\nconst validateArray = require('./validate_array');\nconst validateNumber = require('./validate_number');\nconst unbundle = require('../util/unbundle_jsonlint');\n\nmodule.exports = function validateFunction(options) {\n    const functionValueSpec = options.valueSpec;\n    const functionType = unbundle(options.value.type);\n    let stopKeyType;\n    let stopDomainValues = {};\n    let previousStopDomainValue;\n    let previousStopDomainZoom;\n\n    const isZoomFunction = functionType !== 'categorical' && options.value.property === undefined;\n    const isPropertyFunction = !isZoomFunction;\n    const isZoomAndPropertyFunction =\n        getType(options.value.stops) === 'array' &&\n        getType(options.value.stops[0]) === 'array' &&\n        getType(options.value.stops[0][0]) === 'object';\n\n    const errors = validateObject({\n        key: options.key,\n        value: options.value,\n        valueSpec: options.styleSpec.function,\n        style: options.style,\n        styleSpec: options.styleSpec,\n        objectElementValidators: {\n            stops: validateFunctionStops,\n            default: validateFunctionDefault\n        }\n    });\n\n    if (functionType === 'identity' && isZoomFunction) {\n        errors.push(new ValidationError(options.key, options.value, 'missing required property \"property\"'));\n    }\n\n    if (functionType !== 'identity' && !options.value.stops) {\n        errors.push(new ValidationError(options.key, options.value, 'missing required property \"stops\"'));\n    }\n\n    if (functionType === 'exponential' && options.valueSpec['function'] === 'piecewise-constant') {\n        errors.push(new ValidationError(options.key, options.value, 'exponential functions not supported'));\n    }\n\n    if (options.styleSpec.$version >= 8) {\n        if (isPropertyFunction && !options.valueSpec['property-function']) {\n            errors.push(new ValidationError(options.key, options.value, 'property functions not supported'));\n        } else if (isZoomFunction && !options.valueSpec['zoom-function'] && options.objectKey !== 'heatmap-color') {\n            errors.push(new ValidationError(options.key, options.value, 'zoom functions not supported'));\n        }\n    }\n\n    if ((functionType === 'categorical' || isZoomAndPropertyFunction) && options.value.property === undefined) {\n        errors.push(new ValidationError(options.key, options.value, '\"property\" property is required'));\n    }\n\n    return errors;\n\n    function validateFunctionStops(options) {\n        if (functionType === 'identity') {\n            return [new ValidationError(options.key, options.value, 'identity function may not have a \"stops\" property')];\n        }\n\n        let errors = [];\n        const value = options.value;\n\n        errors = errors.concat(validateArray({\n            key: options.key,\n            value: value,\n            valueSpec: options.valueSpec,\n            style: options.style,\n            styleSpec: options.styleSpec,\n            arrayElementValidator: validateFunctionStop\n        }));\n\n        if (getType(value) === 'array' && value.length === 0) {\n            errors.push(new ValidationError(options.key, value, 'array must have at least one stop'));\n        }\n\n        return errors;\n    }\n\n    function validateFunctionStop(options) {\n        let errors = [];\n        const value = options.value;\n        const key = options.key;\n\n        if (getType(value) !== 'array') {\n            return [new ValidationError(key, value, `array expected, ${getType(value)} found`)];\n        }\n\n        if (value.length !== 2) {\n            return [new ValidationError(key, value, `array length 2 expected, length ${value.length} found`)];\n        }\n\n        if (isZoomAndPropertyFunction) {\n            if (getType(value[0]) !== 'object') {\n                return [new ValidationError(key, value, `object expected, ${getType(value[0])} found`)];\n            }\n            if (value[0].zoom === undefined) {\n                return [new ValidationError(key, value, 'object stop key must have zoom')];\n            }\n            if (value[0].value === undefined) {\n                return [new ValidationError(key, value, 'object stop key must have value')];\n            }\n            if (previousStopDomainZoom && previousStopDomainZoom > unbundle(value[0].zoom)) {\n                return [new ValidationError(key, value[0].zoom, 'stop zoom values must appear in ascending order')];\n            }\n            if (unbundle(value[0].zoom) !== previousStopDomainZoom) {\n                previousStopDomainZoom = unbundle(value[0].zoom);\n                previousStopDomainValue = undefined;\n                stopDomainValues = {};\n            }\n            errors = errors.concat(validateObject({\n                key: `${key}[0]`,\n                value: value[0],\n                valueSpec: { zoom: {} },\n                style: options.style,\n                styleSpec: options.styleSpec,\n                objectElementValidators: { zoom: validateNumber, value: validateStopDomainValue }\n            }));\n        } else {\n            errors = errors.concat(validateStopDomainValue({\n                key: `${key}[0]`,\n                value: value[0],\n                valueSpec: {},\n                style: options.style,\n                styleSpec: options.styleSpec\n            }, value));\n        }\n\n        return errors.concat(validate({\n            key: `${key}[1]`,\n            value: value[1],\n            valueSpec: functionValueSpec,\n            style: options.style,\n            styleSpec: options.styleSpec\n        }));\n    }\n\n    function validateStopDomainValue(options, stop) {\n        const type = getType(options.value);\n        const value = unbundle(options.value);\n\n        const reportValue = options.value !== null ? options.value : stop;\n\n        if (!stopKeyType) {\n            stopKeyType = type;\n        } else if (type !== stopKeyType) {\n            return [new ValidationError(options.key, reportValue, `${type} stop domain type must match previous stop domain type ${stopKeyType}`)];\n        }\n\n        if (type !== 'number' && type !== 'string' && type !== 'boolean') {\n            return [new ValidationError(options.key, reportValue, 'stop domain value must be a number, string, or boolean')];\n        }\n\n        if (type !== 'number' && functionType !== 'categorical') {\n            let message = `number expected, ${type} found`;\n            if (functionValueSpec['property-function'] && functionType === undefined) {\n                message += '\\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`.';\n            }\n            return [new ValidationError(options.key, reportValue, message)];\n        }\n\n        if (functionType === 'categorical' && type === 'number' && (!isFinite(value) || Math.floor(value) !== value)) {\n            return [new ValidationError(options.key, reportValue, `integer expected, found ${value}`)];\n        }\n\n        if (functionType !== 'categorical' && type === 'number' && previousStopDomainValue !== undefined && value < previousStopDomainValue) {\n            return [new ValidationError(options.key, reportValue, 'stop domain values must appear in ascending order')];\n        } else {\n            previousStopDomainValue = value;\n        }\n\n        if (functionType === 'categorical' && value in stopDomainValues) {\n            return [new ValidationError(options.key, reportValue, 'stop domain values must be unique')];\n        } else {\n            stopDomainValues[value] = true;\n        }\n\n        return [];\n    }\n\n    function validateFunctionDefault(options) {\n        return validate({\n            key: options.key,\n            value: options.value,\n            valueSpec: functionValueSpec,\n            style: options.style,\n            styleSpec: options.styleSpec\n        });\n    }\n};\n","\nconst getType = require('../util/get_type');\nconst validate = require('./validate');\nconst ValidationError = require('../error/validation_error');\n\nmodule.exports = function validateArray(options) {\n    const array = options.value;\n    const arraySpec = options.valueSpec;\n    const style = options.style;\n    const styleSpec = options.styleSpec;\n    const key = options.key;\n    const validateArrayElement = options.arrayElementValidator || validate;\n\n    if (getType(array) !== 'array') {\n        return [new ValidationError(key, array, `array expected, ${getType(array)} found`)];\n    }\n\n    if (arraySpec.length && array.length !== arraySpec.length) {\n        return [new ValidationError(key, array, `array length ${arraySpec.length} expected, length ${array.length} found`)];\n    }\n\n    if (arraySpec['min-length'] && array.length < arraySpec['min-length']) {\n        return [new ValidationError(key, array, `array length at least ${arraySpec['min-length']} expected, length ${array.length} found`)];\n    }\n\n    let arrayElementSpec = {\n        \"type\": arraySpec.value\n    };\n\n    if (styleSpec.$version < 7) {\n        arrayElementSpec.function = arraySpec.function;\n    }\n\n    if (getType(arraySpec.value) === 'object') {\n        arrayElementSpec = arraySpec.value;\n    }\n\n    let errors = [];\n    for (let i = 0; i < array.length; i++) {\n        errors = errors.concat(validateArrayElement({\n            array: array,\n            arrayIndex: i,\n            value: array[i],\n            valueSpec: arrayElementSpec,\n            style: style,\n            styleSpec: styleSpec,\n            key: `${key}[${i}]`\n        }));\n    }\n    return errors;\n};\n","\nconst getType = require('../util/get_type');\nconst ValidationError = require('../error/validation_error');\n\nmodule.exports = function validateNumber(options) {\n    const key = options.key;\n    const value = options.value;\n    const valueSpec = options.valueSpec;\n    const type = getType(value);\n\n    if (type !== 'number') {\n        return [new ValidationError(key, value, `number expected, ${type} found`)];\n    }\n\n    if ('minimum' in valueSpec && value < valueSpec.minimum) {\n        return [new ValidationError(key, value, `${value} is less than the minimum value ${valueSpec.minimum}`)];\n    }\n\n    if ('maximum' in valueSpec && value > valueSpec.maximum) {\n        return [new ValidationError(key, value, `${value} is greater than the maximum value ${valueSpec.maximum}`)];\n    }\n\n    return [];\n};\n","// @flow\n\nconst ValidationError = require('../error/validation_error');\nconst {createExpression, createPropertyExpression} = require('../expression');\nconst unbundle = require('../util/unbundle_jsonlint');\n\nmodule.exports = function validateExpression(options: any) {\n    const expression = (options.expressionContext === 'property' ? createPropertyExpression : createExpression)(unbundle.deep(options.value), options.valueSpec);\n    if (expression.result === 'error') {\n        return expression.value.map((error) => {\n            return new ValidationError(`${options.key}${error.key}`, options.value, error.message);\n        });\n    }\n\n    if (options.expressionContext === 'property' && options.propertyKey === 'text-font' &&\n        (expression.value: any)._styleExpression.expression.possibleOutputs().indexOf(undefined) !== -1) {\n        return [new ValidationError(options.key, options.value, 'Invalid data expression for \"text-font\". Output values must be contained as literals within the expression.')];\n    }\n\n    return [];\n};\n","\nconst ValidationError = require('../error/validation_error');\nconst unbundle = require('../util/unbundle_jsonlint');\nconst validateObject = require('./validate_object');\nconst validateFilter = require('./validate_filter');\nconst validatePaintProperty = require('./validate_paint_property');\nconst validateLayoutProperty = require('./validate_layout_property');\nconst validateSpec = require('./validate');\nconst extend = require('../util/extend');\n\nmodule.exports = function validateLayer(options) {\n    let errors = [];\n\n    const layer = options.value;\n    const key = options.key;\n    const style = options.style;\n    const styleSpec = options.styleSpec;\n\n    if (!layer.type && !layer.ref) {\n        errors.push(new ValidationError(key, layer, 'either \"type\" or \"ref\" is required'));\n    }\n    let type = unbundle(layer.type);\n    const ref = unbundle(layer.ref);\n\n    if (layer.id) {\n        const layerId = unbundle(layer.id);\n        for (let i = 0; i < options.arrayIndex; i++) {\n            const otherLayer = style.layers[i];\n            if (unbundle(otherLayer.id) === layerId) {\n                errors.push(new ValidationError(key, layer.id, `duplicate layer id \"${layer.id}\", previously used at line ${otherLayer.id.__line__}`));\n            }\n        }\n    }\n\n    if ('ref' in layer) {\n        ['type', 'source', 'source-layer', 'filter', 'layout'].forEach((p) => {\n            if (p in layer) {\n                errors.push(new ValidationError(key, layer[p], `\"${p}\" is prohibited for ref layers`));\n            }\n        });\n\n        let parent;\n\n        style.layers.forEach((layer) => {\n            if (unbundle(layer.id) === ref) parent = layer;\n        });\n\n        if (!parent) {\n            errors.push(new ValidationError(key, layer.ref, `ref layer \"${ref}\" not found`));\n        } else if (parent.ref) {\n            errors.push(new ValidationError(key, layer.ref, 'ref cannot reference another ref layer'));\n        } else {\n            type = unbundle(parent.type);\n        }\n    } else if (type !== 'background') {\n        if (!layer.source) {\n            errors.push(new ValidationError(key, layer, 'missing required property \"source\"'));\n        } else {\n            const source = style.sources && style.sources[layer.source];\n            const sourceType = source && unbundle(source.type);\n            if (!source) {\n                errors.push(new ValidationError(key, layer.source, `source \"${layer.source}\" not found`));\n            } else if (sourceType === 'vector' && type === 'raster') {\n                errors.push(new ValidationError(key, layer.source, `layer \"${layer.id}\" requires a raster source`));\n            } else if (sourceType === 'raster' && type !== 'raster') {\n                errors.push(new ValidationError(key, layer.source, `layer \"${layer.id}\" requires a vector source`));\n            } else if (sourceType === 'vector' && !layer['source-layer']) {\n                errors.push(new ValidationError(key, layer, `layer \"${layer.id}\" must specify a \"source-layer\"`));\n            } else if (sourceType === 'raster-dem' && type !== 'hillshade') {\n                errors.push(new ValidationError(key, layer.source, 'raster-dem source can only be used with layer type \\'hillshade\\'.'));\n            }\n        }\n    }\n\n    errors = errors.concat(validateObject({\n        key: key,\n        value: layer,\n        valueSpec: styleSpec.layer,\n        style: options.style,\n        styleSpec: options.styleSpec,\n        objectElementValidators: {\n            '*': function() {\n                return [];\n            },\n            // We don't want to enforce the spec's `\"requires\": true` for backward compatibility with refs;\n            // the actual requirement is validated above. See https://github.com/mapbox/mapbox-gl-js/issues/5772.\n            type: function() {\n                return validateSpec({\n                    key: `${key}.type`,\n                    value: layer.type,\n                    valueSpec: styleSpec.layer.type,\n                    style: options.style,\n                    styleSpec: options.styleSpec,\n                    object: layer,\n                    objectKey: 'type'\n                });\n            },\n            filter: validateFilter,\n            layout: function(options) {\n                return validateObject({\n                    layer: layer,\n                    key: options.key,\n                    value: options.value,\n                    style: options.style,\n                    styleSpec: options.styleSpec,\n                    objectElementValidators: {\n                        '*': function(options) {\n                            return validateLayoutProperty(extend({layerType: type}, options));\n                        }\n                    }\n                });\n            },\n            paint: function(options) {\n                return validateObject({\n                    layer: layer,\n                    key: options.key,\n                    value: options.value,\n                    style: options.style,\n                    styleSpec: options.styleSpec,\n                    objectElementValidators: {\n                        '*': function(options) {\n                            return validatePaintProperty(extend({layerType: type}, options));\n                        }\n                    }\n                });\n            }\n        }\n    }));\n\n    return errors;\n};\n","\nconst validateProperty = require('./validate_property');\n\nmodule.exports = function validatePaintProperty(options) {\n    return validateProperty(options, 'paint');\n};\n","\nconst validate = require('./validate');\nconst ValidationError = require('../error/validation_error');\nconst getType = require('../util/get_type');\nconst {isFunction} = require('../function');\nconst unbundle = require('../util/unbundle_jsonlint');\n\nmodule.exports = function validateProperty(options, propertyType) {\n    const key = options.key;\n    const style = options.style;\n    const styleSpec = options.styleSpec;\n    const value = options.value;\n    const propertyKey = options.objectKey;\n    const layerSpec = styleSpec[`${propertyType}_${options.layerType}`];\n\n    if (!layerSpec) return [];\n\n    const transitionMatch = propertyKey.match(/^(.*)-transition$/);\n    if (propertyType === 'paint' && transitionMatch && layerSpec[transitionMatch[1]] && layerSpec[transitionMatch[1]].transition) {\n        return validate({\n            key: key,\n            value: value,\n            valueSpec: styleSpec.transition,\n            style: style,\n            styleSpec: styleSpec\n        });\n    }\n\n    const valueSpec = options.valueSpec || layerSpec[propertyKey];\n    if (!valueSpec) {\n        return [new ValidationError(key, value, `unknown property \"${propertyKey}\"`)];\n    }\n\n    let tokenMatch;\n    if (getType(value) === 'string' && valueSpec['property-function'] && !valueSpec.tokens && (tokenMatch = /^{([^}]+)}$/.exec(value))) {\n        return [new ValidationError(\n            key, value,\n            `\"${propertyKey}\" does not support interpolation syntax\\n` +\n                `Use an identity property function instead: \\`{ \"type\": \"identity\", \"property\": ${JSON.stringify(tokenMatch[1])} }\\`.`)];\n    }\n\n    const errors = [];\n\n    if (options.layerType === 'symbol') {\n        if (propertyKey === 'text-field' && style && !style.glyphs) {\n            errors.push(new ValidationError(key, value, 'use of \"text-field\" requires a style \"glyphs\" property'));\n        }\n        if (propertyKey === 'text-font' && isFunction(unbundle.deep(value)) && unbundle(value.type) === 'identity') {\n            errors.push(new ValidationError(key, value, '\"text-font\" does not support identity functions'));\n        }\n    }\n\n    return errors.concat(validate({\n        key: options.key,\n        value: value,\n        valueSpec: valueSpec,\n        style: style,\n        styleSpec: styleSpec,\n        expressionContext: 'property',\n        propertyKey\n    }));\n};\n","\nconst validateProperty = require('./validate_property');\n\nmodule.exports = function validateLayoutProperty(options) {\n    return validateProperty(options, 'layout');\n};\n","\nconst ValidationError = require('../error/validation_error');\nconst unbundle = require('../util/unbundle_jsonlint');\nconst validateObject = require('./validate_object');\nconst validateEnum = require('./validate_enum');\n\nmodule.exports = function validateSource(options) {\n    const value = options.value;\n    const key = options.key;\n    const styleSpec = options.styleSpec;\n    const style = options.style;\n\n    if (!value.type) {\n        return [new ValidationError(key, value, '\"type\" is required')];\n    }\n\n    const type = unbundle(value.type);\n    let errors = [];\n\n    switch (type) {\n    case 'vector':\n    case 'raster':\n    case 'raster-dem':\n        errors = errors.concat(validateObject({\n            key: key,\n            value: value,\n            valueSpec: styleSpec[`source_${type.replace('-', '_')}`],\n            style: options.style,\n            styleSpec: styleSpec\n        }));\n        if ('url' in value) {\n            for (const prop in value) {\n                if (['type', 'url', 'tileSize'].indexOf(prop) < 0) {\n                    errors.push(new ValidationError(`${key}.${prop}`, value[prop], `a source with a \"url\" property may not include a \"${prop}\" property`));\n                }\n            }\n        }\n        return errors;\n\n    case 'geojson':\n        return validateObject({\n            key: key,\n            value: value,\n            valueSpec: styleSpec.source_geojson,\n            style: style,\n            styleSpec: styleSpec\n        });\n\n    case 'video':\n        return validateObject({\n            key: key,\n            value: value,\n            valueSpec: styleSpec.source_video,\n            style: style,\n            styleSpec: styleSpec\n        });\n\n    case 'image':\n        return validateObject({\n            key: key,\n            value: value,\n            valueSpec: styleSpec.source_image,\n            style: style,\n            styleSpec: styleSpec\n        });\n\n    case 'canvas':\n        return validateObject({\n            key: key,\n            value: value,\n            valueSpec: styleSpec.source_canvas,\n            style: style,\n            styleSpec: styleSpec\n        });\n\n    default:\n        return validateEnum({\n            key: `${key}.type`,\n            value: value.type,\n            valueSpec: {values: ['vector', 'raster', 'raster-dem', 'geojson', 'video', 'image', 'canvas']},\n            style: style,\n            styleSpec: styleSpec\n        });\n    }\n};\n","\nconst ValidationError = require('../error/validation_error');\nconst getType = require('../util/get_type');\nconst validate = require('./validate');\n\nmodule.exports = function validateLight(options) {\n    const light = options.value;\n    const styleSpec = options.styleSpec;\n    const lightSpec = styleSpec.light;\n    const style = options.style;\n\n    let errors = [];\n\n    const rootType = getType(light);\n    if (light === undefined) {\n        return errors;\n    } else if (rootType !== 'object') {\n        errors = errors.concat([new ValidationError('light', light, `object expected, ${rootType} found`)]);\n        return errors;\n    }\n\n    for (const key in light) {\n        const transitionMatch = key.match(/^(.*)-transition$/);\n\n        if (transitionMatch && lightSpec[transitionMatch[1]] && lightSpec[transitionMatch[1]].transition) {\n            errors = errors.concat(validate({\n                key: key,\n                value: light[key],\n                valueSpec: styleSpec.transition,\n                style: style,\n                styleSpec: styleSpec\n            }));\n        } else if (lightSpec[key]) {\n            errors = errors.concat(validate({\n                key: key,\n                value: light[key],\n                valueSpec: lightSpec[key],\n                style: style,\n                styleSpec: styleSpec\n            }));\n        } else {\n            errors = errors.concat([new ValidationError(key, light[key], `unknown property \"${key}\"`)]);\n        }\n    }\n\n    return errors;\n};\n","\nconst getType = require('../util/get_type');\nconst ValidationError = require('../error/validation_error');\n\nmodule.exports = function validateString(options) {\n    const value = options.value;\n    const key = options.key;\n    const type = getType(value);\n\n    if (type !== 'string') {\n        return [new ValidationError(key, value, `string expected, ${type} found`)];\n    }\n\n    return [];\n};\n","// @flow\n\nconst util = require('./util');\n\ntype Listener = (Object) => any;\ntype Listeners = { [string]: Array<Listener> };\n\nfunction _addEventListener(type: string, listener: Listener, listenerList: Listeners) {\n    listenerList[type] = listenerList[type] || [];\n    listenerList[type].push(listener);\n}\n\nfunction _removeEventListener(type: string, listener: Listener, listenerList: Listeners) {\n    if (listenerList && listenerList[type]) {\n        const index = listenerList[type].indexOf(listener);\n        if (index !== -1) {\n            listenerList[type].splice(index, 1);\n        }\n    }\n}\n\n/**\n * Methods mixed in to other classes for event capabilities.\n *\n * @mixin Evented\n */\nclass Evented {\n    _listeners: Listeners;\n    _oneTimeListeners: Listeners;\n    _eventedParent: ?Evented;\n    _eventedParentData: ?(Object | () => Object);\n\n    /**\n     * Adds a listener to a specified event type.\n     *\n     * @param {string} type The event type to add a listen for.\n     * @param {Function} listener The function to be called when the event is fired.\n     *   The listener function is called with the data object passed to `fire`,\n     *   extended with `target` and `type` properties.\n     * @returns {Object} `this`\n     */\n    on(type: *, listener: Listener): this {\n        this._listeners = this._listeners || {};\n        _addEventListener(type, listener, this._listeners);\n\n        return this;\n    }\n\n    /**\n     * Removes a previously registered event listener.\n     *\n     * @param {string} type The event type to remove listeners for.\n     * @param {Function} listener The listener function to remove.\n     * @returns {Object} `this`\n     */\n    off(type: *, listener: Listener) {\n        _removeEventListener(type, listener, this._listeners);\n        _removeEventListener(type, listener, this._oneTimeListeners);\n\n        return this;\n    }\n\n    /**\n     * Adds a listener that will be called only once to a specified event type.\n     *\n     * The listener will be called first time the event fires after the listener is registered.\n     *\n     * @param {string} type The event type to listen for.\n     * @param {Function} listener The function to be called when the event is fired the first time.\n     * @returns {Object} `this`\n     */\n    once(type: string, listener: Listener) {\n        this._oneTimeListeners = this._oneTimeListeners || {};\n        _addEventListener(type, listener, this._oneTimeListeners);\n\n        return this;\n    }\n\n    /**\n     * Fires an event of the specified type.\n     *\n     * @param {string} type The type of event to fire.\n     * @param {Object} [data] Data to be passed to any listeners.\n     * @returns {Object} `this`\n     */\n    fire(type: string, data?: Object) {\n        if (this.listens(type)) {\n            data = util.extend({}, data, {type: type, target: this});\n\n            // make sure adding or removing listeners inside other listeners won't cause an infinite loop\n            const listeners = this._listeners && this._listeners[type] ? this._listeners[type].slice() : [];\n            for (const listener of listeners) {\n                listener.call(this, data);\n            }\n\n            const oneTimeListeners = this._oneTimeListeners && this._oneTimeListeners[type] ? this._oneTimeListeners[type].slice() : [];\n            for (const listener of oneTimeListeners) {\n                _removeEventListener(type, listener, this._oneTimeListeners);\n                listener.call(this, data);\n            }\n\n            if (this._eventedParent) {\n                this._eventedParent.fire(type, util.extend({}, data, typeof this._eventedParentData === 'function' ? this._eventedParentData() : this._eventedParentData));\n            }\n\n        // To ensure that no error events are dropped, print them to the\n        // console if they have no listeners.\n        } else if (util.endsWith(type, 'error')) {\n            console.error((data && data.error) || data || 'Empty error event');\n        }\n\n        return this;\n    }\n\n    /**\n     * Returns a true if this instance of Evented or any forwardeed instances of Evented have a listener for the specified type.\n     *\n     * @param {string} type The event type\n     * @returns {boolean} `true` if there is at least one registered listener for specified event type, `false` otherwise\n     */\n    listens(type: string) {\n        return (\n            (this._listeners && this._listeners[type] && this._listeners[type].length > 0) ||\n            (this._oneTimeListeners && this._oneTimeListeners[type] && this._oneTimeListeners[type].length > 0) ||\n            (this._eventedParent && this._eventedParent.listens(type))\n        );\n    }\n\n    /**\n     * Bubble all events fired by this instance of Evented to this parent instance of Evented.\n     *\n     * @private\n     * @returns {Object} `this`\n     */\n    setEventedParent(parent: ?Evented, data?: Object | () => Object) {\n        this._eventedParent = parent;\n        this._eventedParentData = data;\n\n        return this;\n    }\n}\n\nmodule.exports = Evented;\n","// @flow\n\nconst {CircleLayoutArray} = require('../array_types');\nconst layoutAttributes = require('./circle_attributes').members;\nconst {SegmentVector} = require('../segment');\nconst {ProgramConfigurationSet} = require('../program_configuration');\nconst {TriangleIndexArray} = require('../index_array_type');\nconst loadGeometry = require('../load_geometry');\nconst EXTENT = require('../extent');\nconst {register} = require('../../util/web_worker_transfer');\n\nimport type {\n    Bucket,\n    BucketParameters,\n    IndexedFeature,\n    PopulateParameters\n} from '../bucket';\nimport type CircleStyleLayer from '../../style/style_layer/circle_style_layer';\nimport type HeatmapStyleLayer from '../../style/style_layer/heatmap_style_layer';\nimport type Context from '../../gl/context';\nimport type IndexBuffer from '../../gl/index_buffer';\nimport type VertexBuffer from '../../gl/vertex_buffer';\nimport type Point from '@mapbox/point-geometry';\n\nfunction addCircleVertex(layoutVertexArray, x, y, extrudeX, extrudeY) {\n    layoutVertexArray.emplaceBack(\n        (x * 2) + ((extrudeX + 1) / 2),\n        (y * 2) + ((extrudeY + 1) / 2));\n}\n\n\n/**\n * Circles are represented by two triangles.\n *\n * Each corner has a pos that is the center of the circle and an extrusion\n * vector that is where it points.\n * @private\n */\nclass CircleBucket<Layer: CircleStyleLayer | HeatmapStyleLayer> implements Bucket {\n    index: number;\n    zoom: number;\n    overscaling: number;\n    layerIds: Array<string>;\n    layers: Array<Layer>;\n\n    layoutVertexArray: CircleLayoutArray;\n    layoutVertexBuffer: VertexBuffer;\n\n    indexArray: TriangleIndexArray;\n    indexBuffer: IndexBuffer;\n\n    programConfigurations: ProgramConfigurationSet<Layer>;\n    segments: SegmentVector;\n    uploaded: boolean;\n\n    constructor(options: BucketParameters<Layer>) {\n        this.zoom = options.zoom;\n        this.overscaling = options.overscaling;\n        this.layers = options.layers;\n        this.layerIds = this.layers.map(layer => layer.id);\n        this.index = options.index;\n\n        this.layoutVertexArray = new CircleLayoutArray();\n        this.indexArray = new TriangleIndexArray();\n        this.segments = new SegmentVector();\n        this.programConfigurations = new ProgramConfigurationSet(layoutAttributes, options.layers, options.zoom);\n    }\n\n    populate(features: Array<IndexedFeature>, options: PopulateParameters) {\n        for (const {feature, index, sourceLayerIndex} of features) {\n            if (this.layers[0]._featureFilter({zoom: this.zoom}, feature)) {\n                const geometry = loadGeometry(feature);\n                this.addFeature(feature, geometry);\n                options.featureIndex.insert(feature, geometry, index, sourceLayerIndex, this.index);\n            }\n        }\n    }\n\n    isEmpty() {\n        return this.layoutVertexArray.length === 0;\n    }\n\n    upload(context: Context) {\n        this.layoutVertexBuffer = context.createVertexBuffer(this.layoutVertexArray, layoutAttributes);\n        this.indexBuffer = context.createIndexBuffer(this.indexArray);\n        this.programConfigurations.upload(context);\n    }\n\n    destroy() {\n        if (!this.layoutVertexBuffer) return;\n        this.layoutVertexBuffer.destroy();\n        this.indexBuffer.destroy();\n        this.programConfigurations.destroy();\n        this.segments.destroy();\n    }\n\n    addFeature(feature: VectorTileFeature, geometry: Array<Array<Point>>) {\n        for (const ring of geometry) {\n            for (const point of ring) {\n                const x = point.x;\n                const y = point.y;\n\n                // Do not include points that are outside the tile boundaries.\n                if (x < 0 || x >= EXTENT || y < 0 || y >= EXTENT) continue;\n\n                // this geometry will be of the Point type, and we'll derive\n                // two triangles from it.\n                //\n                // ┌─────────┐\n                // │ 3     2 │\n                // │         │\n                // │ 0     1 │\n                // └─────────┘\n\n                const segment = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray);\n                const index = segment.vertexLength;\n\n                addCircleVertex(this.layoutVertexArray, x, y, -1, -1);\n                addCircleVertex(this.layoutVertexArray, x, y, 1, -1);\n                addCircleVertex(this.layoutVertexArray, x, y, 1, 1);\n                addCircleVertex(this.layoutVertexArray, x, y, -1, 1);\n\n                this.indexArray.emplaceBack(index, index + 1, index + 2);\n                this.indexArray.emplaceBack(index, index + 3, index + 2);\n\n                segment.vertexLength += 4;\n                segment.primitiveLength += 2;\n            }\n        }\n\n        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, feature);\n    }\n}\n\nregister('CircleBucket', CircleBucket, {omit: ['layers']});\n\nmodule.exports = CircleBucket;\n","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(ear, triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return p;\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m.next;\n\n    while (p !== stop) {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if ((tan < tanMin || (tan === tanMin && p.x > m.x)) && locallyInside(p, hole)) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    }\n\n    return m;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) &&\n           locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    if ((equals(p1, q1) && equals(p2, q2)) ||\n        (equals(p1, q2) && equals(p2, q1))) return true;\n    return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 &&\n           area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","'use strict';\n\nvar VectorTileFeature = require('./vectortilefeature.js');\n\nmodule.exports = VectorTileLayer;\n\nfunction VectorTileLayer(pbf, end) {\n    // Public\n    this.version = 1;\n    this.name = null;\n    this.extent = 4096;\n    this.length = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._keys = [];\n    this._values = [];\n    this._features = [];\n\n    pbf.readFields(readLayer, this, end);\n\n    this.length = this._features.length;\n}\n\nfunction readLayer(tag, layer, pbf) {\n    if (tag === 15) layer.version = pbf.readVarint();\n    else if (tag === 1) layer.name = pbf.readString();\n    else if (tag === 5) layer.extent = pbf.readVarint();\n    else if (tag === 2) layer._features.push(pbf.pos);\n    else if (tag === 3) layer._keys.push(pbf.readString());\n    else if (tag === 4) layer._values.push(readValueMessage(pbf));\n}\n\nfunction readValueMessage(pbf) {\n    var value = null,\n        end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var tag = pbf.readVarint() >> 3;\n\n        value = tag === 1 ? pbf.readString() :\n            tag === 2 ? pbf.readFloat() :\n            tag === 3 ? pbf.readDouble() :\n            tag === 4 ? pbf.readVarint64() :\n            tag === 5 ? pbf.readVarint() :\n            tag === 6 ? pbf.readSVarint() :\n            tag === 7 ? pbf.readBoolean() : null;\n    }\n\n    return value;\n}\n\n// return feature `i` from this layer as a `VectorTileFeature`\nVectorTileLayer.prototype.feature = function(i) {\n    if (i < 0 || i >= this._features.length) throw new Error('feature index out of bounds');\n\n    this._pbf.pos = this._features[i];\n\n    var end = this._pbf.readVarint() + this._pbf.pos;\n    return new VectorTileFeature(this._pbf, end, this.extent, this._keys, this._values);\n};\n","'use strict';\n\nvar Point = require('@mapbox/point-geometry');\n\nmodule.exports = VectorTileFeature;\n\nfunction VectorTileFeature(pbf, end, extent, keys, values) {\n    // Public\n    this.properties = {};\n    this.extent = extent;\n    this.type = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._geometry = -1;\n    this._keys = keys;\n    this._values = values;\n\n    pbf.readFields(readFeature, this, end);\n}\n\nfunction readFeature(tag, feature, pbf) {\n    if (tag == 1) feature.id = pbf.readVarint();\n    else if (tag == 2) readTag(pbf, feature);\n    else if (tag == 3) feature.type = pbf.readVarint();\n    else if (tag == 4) feature._geometry = pbf.pos;\n}\n\nfunction readTag(pbf, feature) {\n    var end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var key = feature._keys[pbf.readVarint()],\n            value = feature._values[pbf.readVarint()];\n        feature.properties[key] = value;\n    }\n}\n\nVectorTileFeature.types = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\nVectorTileFeature.prototype.loadGeometry = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        lines = [],\n        line;\n\n    while (pbf.pos < end) {\n        if (length <= 0) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n\n            if (cmd === 1) { // moveTo\n                if (line) lines.push(line);\n                line = [];\n            }\n\n            line.push(new Point(x, y));\n\n        } else if (cmd === 7) {\n\n            // Workaround for https://github.com/mapbox/mapnik-vector-tile/issues/90\n            if (line) {\n                line.push(line[0].clone()); // closePolygon\n            }\n\n        } else {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    if (line) lines.push(line);\n\n    return lines;\n};\n\nVectorTileFeature.prototype.bbox = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        x1 = Infinity,\n        x2 = -Infinity,\n        y1 = Infinity,\n        y2 = -Infinity;\n\n    while (pbf.pos < end) {\n        if (length <= 0) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n            if (x < x1) x1 = x;\n            if (x > x2) x2 = x;\n            if (y < y1) y1 = y;\n            if (y > y2) y2 = y;\n\n        } else if (cmd !== 7) {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    return [x1, y1, x2, y2];\n};\n\nVectorTileFeature.prototype.toGeoJSON = function(x, y, z) {\n    var size = this.extent * Math.pow(2, z),\n        x0 = this.extent * x,\n        y0 = this.extent * y,\n        coords = this.loadGeometry(),\n        type = VectorTileFeature.types[this.type],\n        i, j;\n\n    function project(line) {\n        for (var j = 0; j < line.length; j++) {\n            var p = line[j], y2 = 180 - (p.y + y0) * 360 / size;\n            line[j] = [\n                (p.x + x0) * 360 / size - 180,\n                360 / Math.PI * Math.atan(Math.exp(y2 * Math.PI / 180)) - 90\n            ];\n        }\n    }\n\n    switch (this.type) {\n    case 1:\n        var points = [];\n        for (i = 0; i < coords.length; i++) {\n            points[i] = coords[i][0];\n        }\n        coords = points;\n        project(coords);\n        break;\n\n    case 2:\n        for (i = 0; i < coords.length; i++) {\n            project(coords[i]);\n        }\n        break;\n\n    case 3:\n        coords = classifyRings(coords);\n        for (i = 0; i < coords.length; i++) {\n            for (j = 0; j < coords[i].length; j++) {\n                project(coords[i][j]);\n            }\n        }\n        break;\n    }\n\n    if (coords.length === 1) {\n        coords = coords[0];\n    } else {\n        type = 'Multi' + type;\n    }\n\n    var result = {\n        type: \"Feature\",\n        geometry: {\n            type: type,\n            coordinates: coords\n        },\n        properties: this.properties\n    };\n\n    if ('id' in this) {\n        result.id = this.id;\n    }\n\n    return result;\n};\n\n// classifies an array of rings into polygons with outer rings and holes\n\nfunction classifyRings(rings) {\n    var len = rings.length;\n\n    if (len <= 1) return [rings];\n\n    var polygons = [],\n        polygon,\n        ccw;\n\n    for (var i = 0; i < len; i++) {\n        var area = signedArea(rings[i]);\n        if (area === 0) continue;\n\n        if (ccw === undefined) ccw = area < 0;\n\n        if (ccw === area < 0) {\n            if (polygon) polygons.push(polygon);\n            polygon = [rings[i]];\n\n        } else {\n            polygon.push(rings[i]);\n        }\n    }\n    if (polygon) polygons.push(polygon);\n\n    return polygons;\n}\n\nfunction signedArea(ring) {\n    var sum = 0;\n    for (var i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n}\n","// @flow\n\nconst scriptDetection = require('./script_detection');\n\nmodule.exports = function verticalizePunctuation(input: string) {\n    let output = '';\n\n    for (let i = 0; i < input.length; i++) {\n        const nextCharCode = input.charCodeAt(i + 1) || null;\n        const prevCharCode = input.charCodeAt(i - 1) || null;\n\n        const canReplacePunctuation = (\n            (!nextCharCode || !scriptDetection.charHasRotatedVerticalOrientation(nextCharCode) || module.exports.lookup[input[i + 1]]) &&\n            (!prevCharCode || !scriptDetection.charHasRotatedVerticalOrientation(prevCharCode) || module.exports.lookup[input[i - 1]])\n        );\n\n        if (canReplacePunctuation && module.exports.lookup[input[i]]) {\n            output += module.exports.lookup[input[i]];\n        } else {\n            output += input[i];\n        }\n    }\n\n    return output;\n};\n\nmodule.exports.lookup = {\n    '!': '︕',\n    '#': '＃',\n    '$': '＄',\n    '%': '％',\n    '&': '＆',\n    '(': '︵',\n    ')': '︶',\n    '*': '＊',\n    '+': '＋',\n    ',': '︐',\n    '-': '︲',\n    '.': '・',\n    '/': '／',\n    ':': '︓',\n    ';': '︔',\n    '<': '︿',\n    '=': '＝',\n    '>': '﹀',\n    '?': '︖',\n    '@': '＠',\n    '[': '﹇',\n    '\\\\': '＼',\n    ']': '﹈',\n    '^': '＾',\n    '_': '︳',\n    '`': '｀',\n    '{': '︷',\n    '|': '―',\n    '}': '︸',\n    '~': '～',\n    '¢': '￠',\n    '£': '￡',\n    '¥': '￥',\n    '¦': '￤',\n    '¬': '￢',\n    '¯': '￣',\n    '–': '︲',\n    '—': '︱',\n    '‘': '﹃',\n    '’': '﹄',\n    '“': '﹁',\n    '”': '﹂',\n    '…': '︙',\n    '‧': '・',\n    '₩': '￦',\n    '、': '︑',\n    '。': '︒',\n    '〈': '︿',\n    '〉': '﹀',\n    '《': '︽',\n    '》': '︾',\n    '「': '﹁',\n    '」': '﹂',\n    '『': '﹃',\n    '』': '﹄',\n    '【': '︻',\n    '】': '︼',\n    '〔': '︹',\n    '〕': '︺',\n    '〖': '︗',\n    '〗': '︘',\n    '！': '︕',\n    '（': '︵',\n    '）': '︶',\n    '，': '︐',\n    '－': '︲',\n    '．': '・',\n    '：': '︓',\n    '；': '︔',\n    '＜': '︿',\n    '＞': '﹀',\n    '？': '︖',\n    '［': '﹇',\n    '］': '﹈',\n    '＿': '︳',\n    '｛': '︷',\n    '｜': '―',\n    '｝': '︸',\n    '｟': '︵',\n    '｠': '︶',\n    '｡': '︒',\n    '｢': '﹁',\n    '｣': '﹂'\n};\n","// @flow\n\nconst ajax = require('../util/ajax');\nconst vt = require('@mapbox/vector-tile');\nconst Protobuf = require('pbf');\nconst WorkerTile = require('./worker_tile');\nconst util = require('../util/util');\n\nimport type {\n    WorkerSource,\n    WorkerTileParameters,\n    WorkerTileCallback,\n    TileParameters\n} from '../source/worker_source';\n\nimport type Actor from '../util/actor';\nimport type StyleLayerIndex from '../style/style_layer_index';\nimport type {Callback} from '../types/callback';\n\nexport type LoadVectorTileResult = {\n    vectorTile: VectorTile;\n    rawData: ArrayBuffer;\n    expires?: any;\n    cacheControl?: any;\n};\n\n/**\n * @callback LoadVectorDataCallback\n * @param error\n * @param vectorTile\n * @private\n */\nexport type LoadVectorDataCallback = Callback<?LoadVectorTileResult>;\n\nexport type AbortVectorData = () => void;\nexport type LoadVectorData = (params: WorkerTileParameters, callback: LoadVectorDataCallback) => ?AbortVectorData;\n\n/**\n * @private\n */\nfunction loadVectorTile(params: WorkerTileParameters, callback: LoadVectorDataCallback) {\n    const xhr = ajax.getArrayBuffer(params.request, (err, response) => {\n        if (err) {\n            callback(err);\n        } else if (response) {\n            callback(null, {\n                vectorTile: new vt.VectorTile(new Protobuf(response.data)),\n                rawData: response.data,\n                cacheControl: response.cacheControl,\n                expires: response.expires\n            });\n        }\n    });\n    return () => {\n        xhr.abort();\n        callback();\n    };\n}\n\n/**\n * The {@link WorkerSource} implementation that supports {@link VectorTileSource}.\n * This class is designed to be easily reused to support custom source types\n * for data formats that can be parsed/converted into an in-memory VectorTile\n * representation.  To do so, create it with\n * `new VectorTileWorkerSource(actor, styleLayers, customLoadVectorDataFunction)`.\n *\n * @private\n */\nclass VectorTileWorkerSource implements WorkerSource {\n    actor: Actor;\n    layerIndex: StyleLayerIndex;\n    loadVectorData: LoadVectorData;\n    loading: { [string]: { [string]: WorkerTile } };\n    loaded: { [string]: { [string]: WorkerTile } };\n\n    /**\n     * @param [loadVectorData] Optional method for custom loading of a VectorTile\n     * object based on parameters passed from the main-thread Source. See\n     * {@link VectorTileWorkerSource#loadTile}. The default implementation simply\n     * loads the pbf at `params.url`.\n     */\n    constructor(actor: Actor, layerIndex: StyleLayerIndex, loadVectorData: ?LoadVectorData) {\n        this.actor = actor;\n        this.layerIndex = layerIndex;\n        this.loadVectorData = loadVectorData || loadVectorTile;\n        this.loading = {};\n        this.loaded = {};\n    }\n\n    /**\n     * Implements {@link WorkerSource#loadTile}. Delegates to\n     * {@link VectorTileWorkerSource#loadVectorData} (which by default expects\n     * a `params.url` property) for fetching and producing a VectorTile object.\n     */\n    loadTile(params: WorkerTileParameters, callback: WorkerTileCallback) {\n        const source = params.source,\n            uid = params.uid;\n\n        if (!this.loading[source])\n            this.loading[source] = {};\n\n        const workerTile = this.loading[source][uid] = new WorkerTile(params);\n        workerTile.abort = this.loadVectorData(params, (err, response) => {\n            delete this.loading[source][uid];\n\n            if (err || !response) {\n                return callback(err);\n            }\n\n            const rawTileData = response.rawData;\n            const cacheControl = {};\n            if (response.expires) cacheControl.expires = response.expires;\n            if (response.cacheControl) cacheControl.cacheControl = response.cacheControl;\n\n            workerTile.vectorTile = response.vectorTile;\n            workerTile.parse(response.vectorTile, this.layerIndex, this.actor, (err, result) => {\n                if (err || !result) return callback(err);\n\n                // Transferring a copy of rawTileData because the worker needs to retain its copy.\n                callback(null, util.extend({rawTileData: rawTileData.slice(0)}, result, cacheControl));\n            });\n\n            this.loaded[source] = this.loaded[source] || {};\n            this.loaded[source][uid] = workerTile;\n        });\n    }\n\n    /**\n     * Implements {@link WorkerSource#reloadTile}.\n     */\n    reloadTile(params: WorkerTileParameters, callback: WorkerTileCallback) {\n        const loaded = this.loaded[params.source],\n            uid = params.uid,\n            vtSource = this;\n        if (loaded && loaded[uid]) {\n            const workerTile = loaded[uid];\n            workerTile.showCollisionBoxes = params.showCollisionBoxes;\n\n            if (workerTile.status === 'parsing') {\n                workerTile.reloadCallback = done.bind(workerTile);\n            } else if (workerTile.status === 'done') {\n                workerTile.parse(workerTile.vectorTile, this.layerIndex, this.actor, done.bind(workerTile));\n            }\n\n        }\n\n        function done(err, data) {\n            if (this.reloadCallback) {\n                const reloadCallback = this.reloadCallback;\n                delete this.reloadCallback;\n                this.parse(this.vectorTile, vtSource.layerIndex, vtSource.actor, reloadCallback);\n            }\n\n            callback(err, data);\n        }\n    }\n\n    /**\n     * Implements {@link WorkerSource#abortTile}.\n     *\n     * @param params\n     * @param params.source The id of the source for which we're loading this tile.\n     * @param params.uid The UID for this tile.\n     */\n    abortTile(params: TileParameters, callback: WorkerTileCallback) {\n        const loading = this.loading[params.source],\n            uid = params.uid;\n        if (loading && loading[uid] && loading[uid].abort) {\n            loading[uid].abort();\n            delete loading[uid];\n        }\n        callback();\n    }\n\n    /**\n     * Implements {@link WorkerSource#removeTile}.\n     *\n     * @param params\n     * @param params.source The id of the source for which we're loading this tile.\n     * @param params.uid The UID for this tile.\n     */\n    removeTile(params: TileParameters, callback: WorkerTileCallback) {\n        const loaded = this.loaded[params.source],\n            uid = params.uid;\n        if (loaded && loaded[uid]) {\n            delete loaded[uid];\n        }\n        callback();\n    }\n}\n\nmodule.exports = VectorTileWorkerSource;\n","// @flow\n\nconst assert = require('assert');\n\nclass DictionaryCoder {\n    _stringToNumber: { [string]: number };\n    _numberToString: Array<string>;\n\n    constructor(strings: Array<string>) {\n        this._stringToNumber = {};\n        this._numberToString = [];\n        for (let i = 0; i < strings.length; i++) {\n            const string = strings[i];\n            this._stringToNumber[string] = i;\n            this._numberToString[i] = string;\n        }\n    }\n\n    encode(string: string) {\n        assert(string in this._stringToNumber);\n        return this._stringToNumber[string];\n    }\n\n    decode(n: number) {\n        assert(n < this._numberToString.length);\n        return this._numberToString[n];\n    }\n}\n\nmodule.exports = DictionaryCoder;\n","// @flow\n\nconst WhooTS = require('@mapbox/whoots-js');\nconst assert = require('assert');\nconst {register} = require('../util/web_worker_transfer');\nconst Coordinate = require('../geo/coordinate');\n\nclass CanonicalTileID {\n    z: number;\n    x: number;\n    y: number;\n    key: number;\n\n    constructor(z: number, x: number, y: number) {\n        assert(z >= 0 && z <= 25);\n        assert(x >= 0 && x < Math.pow(2, z));\n        assert(y >= 0 && y < Math.pow(2, z));\n        this.z = z;\n        this.x = x;\n        this.y = y;\n        this.key = calculateKey(0, z, x, y);\n    }\n\n    equals(id: CanonicalTileID) {\n        return this.z === id.z && this.x === id.x && this.y === id.y;\n    }\n\n    // given a list of urls, choose a url template and return a tile URL\n    url(urls: Array<string>, scheme: ?string) {\n        const bbox = WhooTS.getTileBBox(this.x, this.y, this.z);\n        const quadkey = getQuadkey(this.z, this.x, this.y);\n\n        return urls[(this.x + this.y) % urls.length]\n            .replace('{prefix}', (this.x % 16).toString(16) + (this.y % 16).toString(16))\n            .replace('{z}', String(this.z))\n            .replace('{x}', String(this.x))\n            .replace('{y}', String(scheme === 'tms' ? (Math.pow(2, this.z) - this.y - 1) : this.y))\n            .replace('{quadkey}', quadkey)\n            .replace('{bbox-epsg-3857}', bbox);\n    }\n}\n\nclass UnwrappedTileID {\n    wrap: number;\n    canonical: CanonicalTileID;\n    key: number;\n\n    constructor(wrap: number, canonical: CanonicalTileID, posMatrix) {\n        this.wrap = wrap;\n        this.canonical = canonical;\n        this.key = calculateKey(wrap, canonical.z, canonical.x, canonical.y);\n        this.posMatrix = posMatrix\n    }\n}\n\nclass OverscaledTileID {\n    overscaledZ: number;\n    wrap: number;\n    canonical: CanonicalTileID;\n    key: number;\n    posMatrix: Float32Array;\n\n    constructor(overscaledZ: number, wrap: number, z: number, x: number, y: number) {\n        assert(overscaledZ >= z);\n        this.overscaledZ = overscaledZ;\n        this.wrap = wrap;\n        this.canonical = new CanonicalTileID(z, +x, +y);\n        this.key = calculateKey(wrap, overscaledZ, x, y);\n    }\n\n    scaledTo(targetZ: number) {\n        assert(targetZ <= this.overscaledZ);\n        const zDifference = this.canonical.z - targetZ;\n        if (targetZ > this.canonical.z) {\n            return new OverscaledTileID(targetZ, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y);\n        } else {\n            return new OverscaledTileID(targetZ, this.wrap, targetZ, this.canonical.x >> zDifference, this.canonical.y >> zDifference);\n        }\n    }\n\n    isChildOf(parent: OverscaledTileID) {\n        const zDifference = this.canonical.z - parent.canonical.z;\n        // We're first testing for z == 0, to avoid a 32 bit shift, which is undefined.\n        return parent.overscaledZ === 0 || (\n            parent.overscaledZ < this.overscaledZ &&\n                parent.canonical.x === (this.canonical.x >> zDifference) &&\n                parent.canonical.y === (this.canonical.y >> zDifference));\n    }\n\n    children(sourceMaxZoom: number) {\n        if (this.overscaledZ >= sourceMaxZoom) {\n            // return a single tile coord representing a an overscaled tile\n            return [new OverscaledTileID(this.overscaledZ + 1, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y)];\n        }\n\n        const z = this.canonical.z + 1;\n        const x = this.canonical.x * 2;\n        const y = this.canonical.y * 2;\n        return [\n            new OverscaledTileID(z, this.wrap, z, x, y),\n            new OverscaledTileID(z, this.wrap, z, x + 1, y),\n            new OverscaledTileID(z, this.wrap, z, x, y + 1),\n            new OverscaledTileID(z, this.wrap, z, x + 1, y + 1)\n        ];\n    }\n\n    isLessThan(rhs: OverscaledTileID) {\n        if (this.wrap < rhs.wrap) return true;\n        if (this.wrap > rhs.wrap) return false;\n\n        if (this.overscaledZ < rhs.overscaledZ) return true;\n        if (this.overscaledZ > rhs.overscaledZ) return false;\n\n        if (this.canonical.x < rhs.canonical.x) return true;\n        if (this.canonical.x > rhs.canonical.x) return false;\n\n        if (this.canonical.y < rhs.canonical.y) return true;\n        return false;\n    }\n\n    wrapped() {\n        return new OverscaledTileID(this.overscaledZ, 0, this.canonical.z, this.canonical.x, this.canonical.y);\n    }\n\n    overscaleFactor() {\n        return Math.pow(2, this.overscaledZ - this.canonical.z);\n    }\n\n    toUnwrapped() {\n        return new UnwrappedTileID(this.wrap, this.canonical, this.posMatrix);\n    }\n\n    toString() {\n        return `${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`;\n    }\n\n    toCoordinate() {\n        return new Coordinate(this.canonical.x + Math.pow(2, this.wrap), this.canonical.y, this.canonical.z);\n    }\n}\n\nfunction calculateKey(wrap: number, z: number, x: number, y: number) {\n    wrap *= 2;\n    if (wrap < 0) wrap = wrap * -1 - 1;\n    const dim = 1 << z;\n    return ((dim * dim * wrap + dim * y + x) * 32) + z;\n}\n\n\nfunction getQuadkey(z, x, y) {\n    let quadkey = '', mask;\n    for (let i = z; i > 0; i--) {\n        mask = 1 << (i - 1);\n        quadkey += ((x & mask ? 1 : 0) + (y & mask ? 2 : 0));\n    }\n    return quadkey;\n}\n\nregister('CanonicalTileID', CanonicalTileID);\nregister('OverscaledTileID', OverscaledTileID, {omit: ['posMatrix']});\n\nmodule.exports = {\n    CanonicalTileID: CanonicalTileID,\n    OverscaledTileID: OverscaledTileID,\n    UnwrappedTileID: UnwrappedTileID\n};\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ShelfPack = factory());\n}(this, (function () {\n\n/**\n * Create a new ShelfPack bin allocator.\n *\n * Uses the Shelf Best Height Fit algorithm from\n * http://clb.demon.fi/files/RectangleBinPack.pdf\n *\n * @class  ShelfPack\n * @param  {number}  [w=64]  Initial width of the sprite\n * @param  {number}  [h=64]  Initial width of the sprite\n * @param  {Object}  [options]\n * @param  {boolean} [options.autoResize=false]  If `true`, the sprite will automatically grow\n * @example\n * var sprite = new ShelfPack(64, 64, { autoResize: false });\n */\nfunction ShelfPack$1(w, h, options) {\n    options = options || {};\n    this.w = w || 64;\n    this.h = h || 64;\n    this.autoResize = !!options.autoResize;\n    this.shelves = [];\n    this.freebins = [];\n    this.stats = {};\n    this.bins = {};\n    this.maxId = 0;\n}\n\n\n/**\n * Batch pack multiple bins into the sprite.\n *\n * @param   {Object[]} bins       Array of requested bins - each object should have `width`, `height` (or `w`, `h`) properties\n * @param   {number}   bins[].w   Requested bin width\n * @param   {number}   bins[].h   Requested bin height\n * @param   {Object}   [options]\n * @param   {boolean}  [options.inPlace=false] If `true`, the supplied bin objects will be updated inplace with `x` and `y` properties\n * @returns {Bin[]}    Array of allocated Bins - each Bin is an object with `id`, `x`, `y`, `w`, `h` properties\n * @example\n * var bins = [\n *     { id: 1, w: 12, h: 12 },\n *     { id: 2, w: 12, h: 16 },\n *     { id: 3, w: 12, h: 24 }\n * ];\n * var results = sprite.pack(bins, { inPlace: false });\n */\nShelfPack$1.prototype.pack = function(bins, options) {\n    bins = [].concat(bins);\n    options = options || {};\n\n    var results = [],\n        w, h, id, allocation;\n\n    for (var i = 0; i < bins.length; i++) {\n        w  = bins[i].w || bins[i].width;\n        h  = bins[i].h || bins[i].height;\n        id = bins[i].id;\n\n        if (w && h) {\n            allocation = this.packOne(w, h, id);\n            if (!allocation) {\n                continue;\n            }\n            if (options.inPlace) {\n                bins[i].x  = allocation.x;\n                bins[i].y  = allocation.y;\n                bins[i].id = allocation.id;\n            }\n            results.push(allocation);\n        }\n    }\n\n    this.shrink();\n\n    return results;\n};\n\n\n/**\n * Pack a single bin into the sprite.\n *\n * Each bin will have a unique identitifer.\n * If no identifier is supplied in the `id` parameter, one will be created.\n * Note: The supplied `id` is used as an object index, so numeric values are fastest!\n *\n * Bins are automatically refcounted (i.e. a newly packed Bin will have a refcount of 1).\n * When a bin is no longer needed, use the `ShelfPack.unref` function to mark it\n *   as unused.  When a Bin's refcount decrements to 0, the Bin will be marked\n *   as free and its space may be reused by the packing code.\n *\n * @param    {number}         w      Width of the bin to allocate\n * @param    {number}         h      Height of the bin to allocate\n * @param    {number|string}  [id]   Unique identifier for this bin, (if unsupplied, assume it's a new bin and create an id)\n * @returns  {Bin}            Bin object with `id`, `x`, `y`, `w`, `h` properties, or `null` if allocation failed\n * @example\n * var results = sprite.packOne(12, 16, 'a');\n */\nShelfPack$1.prototype.packOne = function(w, h, id) {\n    var best = { freebin: -1, shelf: -1, waste: Infinity },\n        y = 0,\n        bin, shelf, waste, i;\n\n    // if id was supplied, attempt a lookup..\n    if (typeof id === 'string' || typeof id === 'number') {\n        bin = this.getBin(id);\n        if (bin) {              // we packed this bin already\n            this.ref(bin);\n            return bin;\n        }\n        if (typeof id === 'number') {\n            this.maxId = Math.max(id, this.maxId);\n        }\n    } else {\n        id = ++this.maxId;\n    }\n\n    // First try to reuse a free bin..\n    for (i = 0; i < this.freebins.length; i++) {\n        bin = this.freebins[i];\n\n        // exactly the right height and width, use it..\n        if (h === bin.maxh && w === bin.maxw) {\n            return this.allocFreebin(i, w, h, id);\n        }\n        // not enough height or width, skip it..\n        if (h > bin.maxh || w > bin.maxw) {\n            continue;\n        }\n        // extra height or width, minimize wasted area..\n        if (h <= bin.maxh && w <= bin.maxw) {\n            waste = (bin.maxw * bin.maxh) - (w * h);\n            if (waste < best.waste) {\n                best.waste = waste;\n                best.freebin = i;\n            }\n        }\n    }\n\n    // Next find the best shelf..\n    for (i = 0; i < this.shelves.length; i++) {\n        shelf = this.shelves[i];\n        y += shelf.h;\n\n        // not enough width on this shelf, skip it..\n        if (w > shelf.free) {\n            continue;\n        }\n        // exactly the right height, pack it..\n        if (h === shelf.h) {\n            return this.allocShelf(i, w, h, id);\n        }\n        // not enough height, skip it..\n        if (h > shelf.h) {\n            continue;\n        }\n        // extra height, minimize wasted area..\n        if (h < shelf.h) {\n            waste = (shelf.h - h) * w;\n            if (waste < best.waste) {\n                best.freebin = -1;\n                best.waste = waste;\n                best.shelf = i;\n            }\n        }\n    }\n\n    if (best.freebin !== -1) {\n        return this.allocFreebin(best.freebin, w, h, id);\n    }\n\n    if (best.shelf !== -1) {\n        return this.allocShelf(best.shelf, w, h, id);\n    }\n\n    // No free bins or shelves.. add shelf..\n    if (h <= (this.h - y) && w <= this.w) {\n        shelf = new Shelf(y, this.w, h);\n        return this.allocShelf(this.shelves.push(shelf) - 1, w, h, id);\n    }\n\n    // No room for more shelves..\n    // If `autoResize` option is set, grow the sprite as follows:\n    //  * double whichever sprite dimension is smaller (`w1` or `h1`)\n    //  * if sprite dimensions are equal, grow width before height\n    //  * accomodate very large bin requests (big `w` or `h`)\n    if (this.autoResize) {\n        var h1, h2, w1, w2;\n\n        h1 = h2 = this.h;\n        w1 = w2 = this.w;\n\n        if (w1 <= h1 || w > w1) {   // grow width..\n            w2 = Math.max(w, w1) * 2;\n        }\n        if (h1 < w1 || h > h1) {    // grow height..\n            h2 = Math.max(h, h1) * 2;\n        }\n\n        this.resize(w2, h2);\n        return this.packOne(w, h, id);  // retry\n    }\n\n    return null;\n};\n\n\n/**\n * Called by packOne() to allocate a bin by reusing an existing freebin\n *\n * @private\n * @param    {number}         index  Index into the `this.freebins` array\n * @param    {number}         w      Width of the bin to allocate\n * @param    {number}         h      Height of the bin to allocate\n * @param    {number|string}  id     Unique identifier for this bin\n * @returns  {Bin}            Bin object with `id`, `x`, `y`, `w`, `h` properties\n * @example\n * var bin = sprite.allocFreebin(0, 12, 16, 'a');\n */\nShelfPack$1.prototype.allocFreebin = function (index, w, h, id) {\n    var bin = this.freebins.splice(index, 1)[0];\n    bin.id = id;\n    bin.w = w;\n    bin.h = h;\n    bin.refcount = 0;\n    this.bins[id] = bin;\n    this.ref(bin);\n    return bin;\n};\n\n\n/**\n * Called by `packOne() to allocate bin on an existing shelf\n *\n * @private\n * @param    {number}         index  Index into the `this.shelves` array\n * @param    {number}         w      Width of the bin to allocate\n * @param    {number}         h      Height of the bin to allocate\n * @param    {number|string}  id     Unique identifier for this bin\n * @returns  {Bin}            Bin object with `id`, `x`, `y`, `w`, `h` properties\n * @example\n * var results = sprite.allocShelf(0, 12, 16, 'a');\n */\nShelfPack$1.prototype.allocShelf = function(index, w, h, id) {\n    var shelf = this.shelves[index];\n    var bin = shelf.alloc(w, h, id);\n    this.bins[id] = bin;\n    this.ref(bin);\n    return bin;\n};\n\n\n/**\n * Shrink the width/height of the sprite to the bare minimum.\n * Since shelf-pack doubles first width, then height when running out of shelf space\n * this can result in fairly large unused space both in width and height if that happens\n * towards the end of bin packing.\n */\nShelfPack$1.prototype.shrink = function() {\n    if (this.shelves.length > 0) {\n        var w2 = 0;\n        var h2 = 0;\n\n        for (var j = 0; j < this.shelves.length; j++) {\n            var shelf = this.shelves[j];\n            h2 += shelf.h;\n            w2 = Math.max(shelf.w - shelf.free, w2);\n        }\n\n        this.resize(w2, h2);\n    }\n};\n\n\n/**\n * Return a packed bin given its id, or undefined if the id is not found\n *\n * @param    {number|string}  id  Unique identifier for this bin,\n * @returns  {Bin}            The requested bin, or undefined if not yet packed\n * @example\n * var b = sprite.getBin('a');\n */\nShelfPack$1.prototype.getBin = function(id) {\n    return this.bins[id];\n};\n\n\n/**\n * Increment the ref count of a bin and update statistics.\n *\n * @param    {Bin}     bin  Bin instance\n * @returns  {number}  New refcount of the bin\n * @example\n * var bin = sprite.getBin('a');\n * sprite.ref(bin);\n */\nShelfPack$1.prototype.ref = function(bin) {\n    if (++bin.refcount === 1) {   // a new Bin.. record height in stats historgram..\n        var h = bin.h;\n        this.stats[h] = (this.stats[h] | 0) + 1;\n    }\n\n    return bin.refcount;\n};\n\n\n/**\n * Decrement the ref count of a bin and update statistics.\n * The bin will be automatically marked as free space once the refcount reaches 0.\n *\n * @param    {Bin}     bin  Bin instance\n * @returns  {number}  New refcount of the bin\n * @example\n * var bin = sprite.getBin('a');\n * sprite.unref(bin);\n */\nShelfPack$1.prototype.unref = function(bin) {\n    if (bin.refcount === 0) {\n        return 0;\n    }\n\n    if (--bin.refcount === 0) {\n        this.stats[bin.h]--;\n        delete this.bins[bin.id];\n        this.freebins.push(bin);\n    }\n\n    return bin.refcount;\n};\n\n\n/**\n * Clear the sprite.  Resets everything and resets statistics.\n *\n * @example\n * sprite.clear();\n */\nShelfPack$1.prototype.clear = function() {\n    this.shelves = [];\n    this.freebins = [];\n    this.stats = {};\n    this.bins = {};\n    this.maxId = 0;\n};\n\n\n/**\n * Resize the sprite.\n *\n * @param   {number}  w  Requested new sprite width\n * @param   {number}  h  Requested new sprite height\n * @returns {boolean} `true` if resize succeeded, `false` if failed\n * @example\n * sprite.resize(256, 256);\n */\nShelfPack$1.prototype.resize = function(w, h) {\n    this.w = w;\n    this.h = h;\n    for (var i = 0; i < this.shelves.length; i++) {\n        this.shelves[i].resize(w);\n    }\n    return true;\n};\n\n\n/**\n * Create a new Shelf.\n *\n * @private\n * @class  Shelf\n * @param  {number}  y   Top coordinate of the new shelf\n * @param  {number}  w   Width of the new shelf\n * @param  {number}  h   Height of the new shelf\n * @example\n * var shelf = new Shelf(64, 512, 24);\n */\nfunction Shelf(y, w, h) {\n    this.x = 0;\n    this.y = y;\n    this.w = this.free = w;\n    this.h = h;\n}\n\n\n/**\n * Allocate a single bin into the shelf.\n *\n * @private\n * @param   {number}         w   Width of the bin to allocate\n * @param   {number}         h   Height of the bin to allocate\n * @param   {number|string}  id  Unique id of the bin to allocate\n * @returns {Bin}            Bin object with `id`, `x`, `y`, `w`, `h` properties, or `null` if allocation failed\n * @example\n * shelf.alloc(12, 16, 'a');\n */\nShelf.prototype.alloc = function(w, h, id) {\n    if (w > this.free || h > this.h) {\n        return null;\n    }\n    var x = this.x;\n    this.x += w;\n    this.free -= w;\n    return new Bin(id, x, this.y, w, h, w, this.h);\n};\n\n\n/**\n * Resize the shelf.\n *\n * @private\n * @param   {number}  w  Requested new width of the shelf\n * @returns {boolean}    true\n * @example\n * shelf.resize(512);\n */\nShelf.prototype.resize = function(w) {\n    this.free += (w - this.w);\n    this.w = w;\n    return true;\n};\n\n\n/**\n * Create a new Bin object.\n *\n * @class  Bin\n * @param  {number|string}  id      Unique id of the bin\n * @param  {number}         x       Left coordinate of the bin\n * @param  {number}         y       Top coordinate of the bin\n * @param  {number}         w       Width of the bin\n * @param  {number}         h       Height of the bin\n * @param  {number}         [maxw]  Max width of the bin (defaults to `w` if not provided)\n * @param  {number}         [maxh]  Max height of the bin (defaults to `h` if not provided)\n * @example\n * var bin = new Bin('a', 0, 0, 12, 16);\n */\nfunction Bin(id, x, y, w, h, maxw, maxh) {\n    this.id = id;\n    this.x  = x;\n    this.y  = y;\n    this.w  = w;\n    this.h  = h;\n    this.maxw = maxw || w;\n    this.maxh = maxh || h;\n    this.refcount = 0;\n}\n\nreturn ShelfPack$1;\n\n})));\n","// @flow\n\nconst Actor = require('../util/actor');\nconst StyleLayerIndex = require('../style/style_layer_index');\n\nconst VectorTileWorkerSource = require('./vector_tile_worker_source');\nconst RasterDEMTileWorkerSource = require('./raster_dem_tile_worker_source');\nconst GeoJSONWorkerSource = require('./geojson_worker_source');\nconst assert = require('assert');\n\nconst globalRTLTextPlugin = require('./rtl_text_plugin');\n\nimport type {\n    WorkerSource,\n    WorkerTileParameters,\n    WorkerDEMTileParameters,\n    WorkerTileCallback,\n    WorkerDEMTileCallback,\n    TileParameters\n} from '../source/worker_source';\n\nimport type {WorkerGlobalScopeInterface} from '../util/web_worker';\nimport type {Callback} from '../types/callback';\n\n/**\n * @private\n */\nclass Worker {\n    self: WorkerGlobalScopeInterface;\n    actor: Actor;\n    layerIndexes: { [string]: StyleLayerIndex };\n    workerSourceTypes: { [string]: Class<WorkerSource> };\n    workerSources: { [string]: { [string]: WorkerSource } };\n    demWorkerSources: { [string]: RasterDEMTileWorkerSource };\n\n    constructor(self: WorkerGlobalScopeInterface) {\n        this.self = self;\n        this.actor = new Actor(self, this);\n\n        this.layerIndexes = {};\n\n        this.workerSourceTypes = {\n            vector: VectorTileWorkerSource,\n            geojson: GeoJSONWorkerSource\n        };\n\n        // [mapId][sourceType] => worker source instance\n        this.workerSources = {};\n        this.demWorkerSources = {};\n\n        this.self.registerWorkerSource = (name: string, WorkerSource: Class<WorkerSource>) => {\n            if (this.workerSourceTypes[name]) {\n                throw new Error(`Worker source with name \"${name}\" already registered.`);\n            }\n            this.workerSourceTypes[name] = WorkerSource;\n        };\n\n        this.self.registerRTLTextPlugin = (rtlTextPlugin: {applyArabicShaping: Function, processBidirectionalText: Function}) => {\n            if (globalRTLTextPlugin.applyArabicShaping || globalRTLTextPlugin.processBidirectionalText) {\n                throw new Error('RTL text plugin already registered.');\n            }\n            globalRTLTextPlugin['applyArabicShaping'] = rtlTextPlugin.applyArabicShaping;\n            globalRTLTextPlugin['processBidirectionalText'] = rtlTextPlugin.processBidirectionalText;\n        };\n    }\n\n    setLayers(mapId: string, layers: Array<LayerSpecification>, callback: WorkerTileCallback) {\n        this.getLayerIndex(mapId).replace(layers);\n        callback();\n    }\n\n    updateLayers(mapId: string, params: {layers: Array<LayerSpecification>, removedIds: Array<string>}, callback: WorkerTileCallback) {\n        this.getLayerIndex(mapId).update(params.layers, params.removedIds);\n        callback();\n    }\n\n    loadTile(mapId: string, params: WorkerTileParameters & {type: string}, callback: WorkerTileCallback) {\n        assert(params.type);\n        this.getWorkerSource(mapId, params.type).loadTile(params, callback);\n    }\n\n    loadDEMTile(mapId: string, params: WorkerDEMTileParameters, callback: WorkerDEMTileCallback) {\n        this.getDEMWorkerSource(mapId).loadTile(params, callback);\n    }\n\n    reloadTile(mapId: string, params: WorkerTileParameters & {type: string}, callback: WorkerTileCallback) {\n        assert(params.type);\n        this.getWorkerSource(mapId, params.type).reloadTile(params, callback);\n    }\n\n    abortTile(mapId: string, params: TileParameters & {type: string}, callback: WorkerTileCallback) {\n        assert(params.type);\n        this.getWorkerSource(mapId, params.type).abortTile(params, callback);\n    }\n\n    removeTile(mapId: string, params: TileParameters & {type: string}, callback: WorkerTileCallback) {\n        assert(params.type);\n        this.getWorkerSource(mapId, params.type).removeTile(params, callback);\n    }\n\n    removeDEMTile(mapId: string, params: TileParameters) {\n        this.getDEMWorkerSource(mapId).removeTile(params);\n    }\n\n    removeSource(mapId: string, params: {source: string} & {type: string}, callback: WorkerTileCallback) {\n        assert(params.type);\n        const worker = this.getWorkerSource(mapId, params.type);\n        if (worker.removeSource !== undefined) {\n            worker.removeSource(params, callback);\n        } else {\n            callback();\n        }\n    }\n\n    /**\n     * Load a {@link WorkerSource} script at params.url.  The script is run\n     * (using importScripts) with `registerWorkerSource` in scope, which is a\n     * function taking `(name, workerSourceObject)`.\n     *  @private\n     */\n    loadWorkerSource(map: string, params: { url: string }, callback: Callback<void>) {\n        try {\n            this.self.importScripts(params.url);\n            callback();\n        } catch (e) {\n            callback(e);\n        }\n    }\n\n    loadRTLTextPlugin(map: string, pluginURL: string, callback: Callback<void>) {\n        try {\n            if (!globalRTLTextPlugin.applyArabicShaping && !globalRTLTextPlugin.processBidirectionalText) {\n                this.self.importScripts(pluginURL);\n                if (!globalRTLTextPlugin.applyArabicShaping || !globalRTLTextPlugin.processBidirectionalText) {\n                    callback(new Error(`RTL Text Plugin failed to import scripts from ${pluginURL}`));\n                }\n            }\n        } catch (e) {\n            callback(e);\n        }\n    }\n\n    getLayerIndex(mapId: string) {\n        let layerIndexes = this.layerIndexes[mapId];\n        if (!layerIndexes) {\n            layerIndexes = this.layerIndexes[mapId] = new StyleLayerIndex();\n        }\n        return layerIndexes;\n    }\n\n    getWorkerSource(mapId: string, type: string) {\n        if (!this.workerSources[mapId])\n            this.workerSources[mapId] = {};\n        if (!this.workerSources[mapId][type]) {\n            // use a wrapped actor so that we can attach a target mapId param\n            // to any messages invoked by the WorkerSource\n            const actor = {\n                send: (type, data, callback) => {\n                    this.actor.send(type, data, callback, mapId);\n                }\n            };\n\n            this.workerSources[mapId][type] = new (this.workerSourceTypes[type]: any)((actor: any), this.getLayerIndex(mapId));\n        }\n\n        return this.workerSources[mapId][type];\n    }\n\n    getDEMWorkerSource(mapId: string) {\n        if (!this.demWorkerSources[mapId]) {\n            this.demWorkerSources[mapId] = new RasterDEMTileWorkerSource();\n        }\n\n        return this.demWorkerSources[mapId];\n    }\n}\n\nconst w = new Worker(self);\n","// @flow\n\nconst util = require('./util');\nconst {serialize, deserialize} = require('./web_worker_transfer');\n\nimport type {Transferable} from '../types/transferable';\n\n/**\n * An implementation of the [Actor design pattern](http://en.wikipedia.org/wiki/Actor_model)\n * that maintains the relationship between asynchronous tasks and the objects\n * that spin them off - in this case, tasks like parsing parts of styles,\n * owned by the styles\n *\n * @param {WebWorker} target\n * @param {WebWorker} parent\n * @param {string|number} mapId A unique identifier for the Map instance using this Actor.\n * @private\n */\nclass Actor {\n    target: any;\n    parent: any;\n    mapId: string;\n    callbacks: any;\n    callbackID: number;\n    name: string;\n\n    constructor(target: any, parent: any, mapId: any) {\n        this.target = target;\n        this.parent = parent;\n        this.mapId = mapId;\n        this.callbacks = {};\n        this.callbackID = 0;\n        util.bindAll(['receive'], this);\n        this.target.addEventListener('message', this.receive, false);\n    }\n\n    /**\n     * Sends a message from a main-thread map to a Worker or from a Worker back to\n     * a main-thread map instance.\n     *\n     * @param type The name of the target method to invoke or '[source-type].name' for a method on a WorkerSource.\n     * @param targetMapId A particular mapId to which to send this message.\n     * @private\n     */\n    send(type: string, data: mixed, callback: ?Function, targetMapId: ?string) {\n        const id = callback ? `${this.mapId}:${this.callbackID++}` : null;\n        if (callback) this.callbacks[id] = callback;\n        const buffers: Array<Transferable> = [];\n        this.target.postMessage({\n            targetMapId: targetMapId,\n            sourceMapId: this.mapId,\n            type: type,\n            id: String(id),\n            data: serialize(data, buffers)\n        }, buffers);\n    }\n\n    receive(message: Object) {\n        const data = message.data,\n            id = data.id;\n        let callback;\n\n        if (data.targetMapId && this.mapId !== data.targetMapId)\n            return;\n\n        const done = (err, data) => {\n            const buffers: Array<Transferable> = [];\n            this.target.postMessage({\n                sourceMapId: this.mapId,\n                type: '<response>',\n                id: String(id),\n                error: err ? String(err) : null,\n                data: serialize(data, buffers)\n            }, buffers);\n        };\n\n        if (data.type === '<response>') {\n            callback = this.callbacks[data.id];\n            delete this.callbacks[data.id];\n            if (callback && data.error) {\n                callback(new Error(data.error));\n            } else if (callback) {\n                callback(null, deserialize(data.data));\n            }\n        } else if (typeof data.id !== 'undefined' && this.parent[data.type]) {\n            // data.type == 'loadTile', 'removeTile', etc.\n            this.parent[data.type](data.sourceMapId, deserialize(data.data), done);\n        } else if (typeof data.id !== 'undefined' && this.parent.getWorkerSource) {\n            // data.type == sourcetype.method\n            const keys = data.type.split('.');\n            const workerSource = (this.parent: any).getWorkerSource(data.sourceMapId, keys[0]);\n            workerSource[keys[1]](deserialize(data.data), done);\n        } else {\n            this.parent[data.type](deserialize(data.data));\n        }\n    }\n\n    remove() {\n        this.target.removeEventListener('message', this.receive, false);\n    }\n}\n\nmodule.exports = Actor;\n","// @flow\n\n/**\n * Deeply compares two object literals.\n *\n * @private\n */\nfunction deepEqual(a: ?mixed, b: ?mixed): boolean {\n    if (Array.isArray(a)) {\n        if (!Array.isArray(b) || a.length !== b.length) return false;\n        for (let i = 0; i < a.length; i++) {\n            if (!deepEqual(a[i], b[i])) return false;\n        }\n        return true;\n    }\n    if (typeof a === 'object' && a !== null && b !== null) {\n        if (!(typeof b === 'object')) return false;\n        const keys = Object.keys(a);\n        if (keys.length !== Object.keys(b).length) return false;\n        for (const key in a) {\n            if (!deepEqual(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a === b;\n}\n\nmodule.exports = deepEqual;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","// @flow\n\nconst {\n    array,\n    ValueType,\n    NumberType\n} = require('../types');\n\nconst RuntimeError = require('../runtime_error');\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type, ArrayType } from '../types';\nimport type { Value } from '../values';\n\nclass At implements Expression {\n    type: Type;\n    index: Expression;\n    input: Expression;\n\n    constructor(type: Type, index: Expression, input: Expression) {\n        this.type = type;\n        this.index = index;\n        this.input = input;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length !== 3)\n            return context.error(`Expected 2 arguments, but found ${args.length - 1} instead.`);\n\n        const index = context.parse(args[1], 1, NumberType);\n        const input = context.parse(args[2], 2, array(context.expectedType || ValueType));\n\n        if (!index || !input) return null;\n\n        const t: ArrayType = (input.type: any);\n        return new At(t.itemType, index, input);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const index = ((this.index.evaluate(ctx): any): number);\n        const array = ((this.input.evaluate(ctx): any): Array<Value>);\n\n        if (index < 0 || index >= array.length) {\n            throw new RuntimeError(`Array index out of bounds: ${index} > ${array.length}.`);\n        }\n\n        if (index !== Math.floor(index)) {\n            throw new RuntimeError(`Array index must be an integer, but found ${index} instead.`);\n        }\n\n        return array[index];\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.index);\n        fn(this.input);\n    }\n\n    possibleOutputs() {\n        return [undefined];\n    }\n}\n\nmodule.exports = At;\n","// @flow\n\nconst assert = require('assert');\nconst { typeOf } = require('../values');\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\n// Map input label values to output expression index\ntype Cases = {[number | string]: number};\n\nclass Match implements Expression {\n    type: Type;\n    inputType: Type;\n\n    input: Expression;\n    cases: Cases;\n    outputs: Array<Expression>;\n    otherwise: Expression;\n\n    constructor(inputType: Type, outputType: Type, input: Expression, cases: Cases, outputs: Array<Expression>, otherwise: Expression) {\n        this.inputType = inputType;\n        this.type = outputType;\n        this.input = input;\n        this.cases = cases;\n        this.outputs = outputs;\n        this.otherwise = otherwise;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length < 5)\n            return context.error(`Expected at least 4 arguments, but found only ${args.length - 1}.`);\n        if (args.length % 2 !== 1)\n            return context.error(`Expected an even number of arguments.`);\n\n        let inputType;\n        let outputType;\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n        const cases = {};\n        const outputs = [];\n        for (let i = 2; i < args.length - 1; i += 2) {\n            let labels = args[i];\n            const value = args[i + 1];\n\n            if (!Array.isArray(labels)) {\n                labels = [labels];\n            }\n\n            const labelContext = context.concat(i);\n            if (labels.length === 0) {\n                return labelContext.error('Expected at least one branch label.');\n            }\n\n            for (const label of labels) {\n                if (typeof label !== 'number' && typeof label !== 'string') {\n                    return labelContext.error(`Branch labels must be numbers or strings.`);\n                } else if (typeof label === 'number' && Math.abs(label) > Number.MAX_SAFE_INTEGER) {\n                    return labelContext.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);\n\n                } else if (typeof label === 'number' && Math.floor(label) !== label) {\n                    return labelContext.error(`Numeric branch labels must be integer values.`);\n\n                } else if (!inputType) {\n                    inputType = typeOf(label);\n                } else if (labelContext.checkSubtype(inputType, typeOf(label))) {\n                    return null;\n                }\n\n                if (typeof cases[String(label)] !== 'undefined') {\n                    return labelContext.error('Branch labels must be unique.');\n                }\n\n                cases[String(label)] = outputs.length;\n            }\n\n            const result = context.parse(value, i, outputType);\n            if (!result) return null;\n            outputType = outputType || result.type;\n            outputs.push(result);\n        }\n\n        const input = context.parse(args[1], 1, inputType);\n        if (!input) return null;\n\n        const otherwise = context.parse(args[args.length - 1], args.length - 1, outputType);\n        if (!otherwise) return null;\n\n        assert(inputType && outputType);\n        return new Match((inputType: any), (outputType: any), input, cases, outputs, otherwise);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const input = (this.input.evaluate(ctx): any);\n        return (this.outputs[this.cases[input]] || this.otherwise).evaluate(ctx);\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.input);\n        this.outputs.forEach(fn);\n        fn(this.otherwise);\n    }\n\n    possibleOutputs() {\n        return []\n            .concat(...this.outputs.map((out) => out.possibleOutputs()))\n            .concat(this.otherwise.possibleOutputs());\n    }\n}\n\nmodule.exports = Match;\n","// @flow\n\nconst assert = require('assert');\nconst { BooleanType } = require('../types');\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\ntype Branches = Array<[Expression, Expression]>;\n\nclass Case implements Expression {\n    type: Type;\n\n    branches: Branches;\n    otherwise: Expression;\n\n    constructor(type: Type, branches: Branches, otherwise: Expression) {\n        this.type = type;\n        this.branches = branches;\n        this.otherwise = otherwise;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length < 4)\n            return context.error(`Expected at least 3 arguments, but found only ${args.length - 1}.`);\n        if (args.length % 2 !== 0)\n            return context.error(`Expected an odd number of arguments.`);\n\n        let outputType: ?Type;\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n\n        const branches = [];\n        for (let i = 1; i < args.length - 1; i += 2) {\n            const test = context.parse(args[i], i, BooleanType);\n            if (!test) return null;\n\n            const result = context.parse(args[i + 1], i + 1, outputType);\n            if (!result) return null;\n\n            branches.push([test, result]);\n\n            outputType = outputType || result.type;\n        }\n\n        const otherwise = context.parse(args[args.length - 1], args.length - 1, outputType);\n        if (!otherwise) return null;\n\n        assert(outputType);\n        return new Case((outputType: any), branches, otherwise);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        for (const [test, expression] of this.branches) {\n            if (test.evaluate(ctx)) {\n                return expression.evaluate(ctx);\n            }\n        }\n        return this.otherwise.evaluate(ctx);\n    }\n\n    eachChild(fn: (Expression) => void) {\n        for (const [test, expression] of this.branches) {\n            fn(test);\n            fn(expression);\n        }\n        fn(this.otherwise);\n    }\n\n    possibleOutputs() {\n        return []\n            .concat(...this.branches.map(([_, out]) => out.possibleOutputs()))\n            .concat(this.otherwise.possibleOutputs());\n    }\n}\n\nmodule.exports = Case;\n","// @flow\n\nconst {\n    ValueType,\n    BooleanType,\n} = require('../types');\nconst {toString} = require('../types');\n\nimport type { Expression } from '../expression';\nimport type EvaluationContext from '../evaluation_context';\nimport type ParsingContext from '../parsing_context';\nimport type { Type } from '../types';\n\nfunction isComparableType(type: Type) {\n    return type.kind === 'string' ||\n        type.kind === 'number' ||\n        type.kind === 'boolean' ||\n        type.kind === 'null';\n}\n\n/**\n * Special form for ==, !=, implementing the following signatures:\n * - (T1: Comparable, T2: Comparable) => boolean { T1 == T2 }\n * - (Comparable, value) => boolean\n * - (value, Comparable) => boolean\n *\n * Where Comparable = string | number | boolean | null.\n *\n * Evaluation semantics for the value cases are equivalent to Javascript's\n * strict equality (===/!==) -- i.e., when the value argument's type doesn't\n * match that of the Comparable argument, == evaluates to false, != to true.\n *\n * @private\n */\nfunction makeComparison(compare) {\n    return class Comparison implements Expression {\n        type: Type;\n        lhs: Expression;\n        rhs: Expression;\n\n        constructor(lhs: Expression, rhs: Expression) {\n            this.type = BooleanType;\n            this.lhs = lhs;\n            this.rhs = rhs;\n        }\n\n        static parse(args: Array<mixed>, context: ParsingContext): ?Expression {\n            if (args.length !== 3)\n                return context.error(`Expected two arguments.`);\n\n            const lhs = context.parse(args[1], 1, ValueType);\n            if (!lhs) return null;\n            const rhs = context.parse(args[2], 2, ValueType);\n            if (!rhs) return null;\n\n            if (!isComparableType(lhs.type) && !isComparableType(rhs.type)) {\n                return context.error(`Expected at least one argument to be a string, number, boolean, or null, but found (${toString(lhs.type)}, ${toString(rhs.type)}) instead.`);\n            }\n\n            if (lhs.type.kind !== rhs.type.kind && lhs.type.kind !== 'value' && rhs.type.kind !== 'value') {\n                return context.error(`Cannot compare ${toString(lhs.type)} and ${toString(rhs.type)}.`);\n            }\n\n            return new Comparison(lhs, rhs);\n        }\n\n        evaluate(ctx: EvaluationContext) {\n            return compare(this.lhs.evaluate(ctx), this.rhs.evaluate(ctx));\n        }\n\n        eachChild(fn: (Expression) => void) {\n            fn(this.lhs);\n            fn(this.rhs);\n        }\n\n        possibleOutputs() {\n            return [true, false];\n        }\n    };\n}\n\nmodule.exports = {\n    Equals: makeComparison((lhs, rhs) => lhs === rhs),\n    NotEquals: makeComparison((lhs, rhs) => lhs !== rhs)\n};\n","// @flow\n\n/**\n * A type used for returning and propagating errors. The first element of the union\n * represents success and contains a value, and the second represents an error and\n * contains an error value.\n */\nexport type Result<T, E> =\n    | {| result: 'success', value: T |}\n    | {| result: 'error', value: E |};\n\nfunction success<T, E>(value: T): Result<T, E> {\n    return { result: 'success', value };\n}\n\nfunction error<T, E>(value: E): Result<T, E> {\n    return { result: 'error', value };\n}\n\nmodule.exports = {\n    success,\n    error\n};\n","// @flow\n\nconst Color = require('./color');\nconst interpolateNumber = require('./interpolate').number;\n\ntype LABColor = {\n    l: number,\n    a: number,\n    b: number,\n    alpha: number\n};\n\ntype HCLColor = {\n    h: number,\n    c: number,\n    l: number,\n    alpha: number\n};\n\n// Constants\nconst Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1,\n    deg2rad = Math.PI / 180,\n    rad2deg = 180 / Math.PI;\n\n// Utilities\nfunction xyz2lab(t) {\n    return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n    return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x) {\n    return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2xyz(x) {\n    x /= 255;\n    return x <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\n// LAB\nfunction rgbToLab(rgbColor: Color): LABColor {\n    const b = rgb2xyz(rgbColor.r),\n        a = rgb2xyz(rgbColor.g),\n        l = rgb2xyz(rgbColor.b),\n        x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n        y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n        z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n\n    return {\n        l: 116 * y - 16,\n        a: 500 * (x - y),\n        b: 200 * (y - z),\n        alpha: rgbColor.a\n    };\n}\n\nfunction labToRgb(labColor: LABColor): Color {\n    let y = (labColor.l + 16) / 116,\n        x = isNaN(labColor.a) ? y : y + labColor.a / 500,\n        z = isNaN(labColor.b) ? y : y - labColor.b / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return new Color(\n        xyz2rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n        xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n        xyz2rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n        labColor.alpha\n    );\n}\n\nfunction interpolateLab(from: LABColor, to: LABColor, t: number) {\n    return {\n        l: interpolateNumber(from.l, to.l, t),\n        a: interpolateNumber(from.a, to.a, t),\n        b: interpolateNumber(from.b, to.b, t),\n        alpha: interpolateNumber(from.alpha, to.alpha, t)\n    };\n}\n\n// HCL\nfunction rgbToHcl(rgbColor: Color): HCLColor {\n    const {l, a, b} = rgbToLab(rgbColor);\n    const h = Math.atan2(b, a) * rad2deg;\n    return {\n        h: h < 0 ? h + 360 : h,\n        c: Math.sqrt(a * a + b * b),\n        l: l,\n        alpha: rgbColor.a\n    };\n}\n\nfunction hclToRgb(hclColor: HCLColor): Color {\n    const h = hclColor.h * deg2rad,\n        c = hclColor.c,\n        l = hclColor.l;\n    return labToRgb({\n        l: l,\n        a: Math.cos(h) * c,\n        b: Math.sin(h) * c,\n        alpha: hclColor.alpha\n    });\n}\n\nfunction interpolateHue(a: number, b: number, t: number) {\n    const d = b - a;\n    return a + t * (d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d);\n}\n\nfunction interpolateHcl(from: HCLColor, to: HCLColor, t: number) {\n    return {\n        h: interpolateHue(from.h, to.h, t),\n        c: interpolateNumber(from.c, to.c, t),\n        l: interpolateNumber(from.l, to.l, t),\n        alpha: interpolateNumber(from.alpha, to.alpha, t)\n    };\n}\n\nmodule.exports = {\n    lab: {\n        forward: rgbToLab,\n        reverse: labToRgb,\n        interpolate: interpolateLab\n    },\n    hcl: {\n        forward: rgbToHcl,\n        reverse: hclToRgb,\n        interpolate: interpolateHcl\n    }\n};\n","// @flow\n\nconst StyleLayer = require('./style_layer');\nconst util = require('../util/util');\nconst featureFilter = require('../style-spec/feature_filter');\nconst groupByLayout = require('../style-spec/group_by_layout');\n\nimport type {TypedStyleLayer} from './style_layer/typed_style_layer';\n\nexport type LayerConfigs = { [string]: LayerSpecification };\nexport type Family<Layer: TypedStyleLayer> = Array<Layer>;\n\nclass StyleLayerIndex {\n    familiesBySource: { [source: string]: { [sourceLayer: string]: Array<Family<*>> } };\n\n    _layerConfigs: LayerConfigs;\n    _layers: { [string]: StyleLayer };\n\n    constructor(layerConfigs: ?Array<LayerSpecification>) {\n        if (layerConfigs) {\n            this.replace(layerConfigs);\n        }\n    }\n\n    replace(layerConfigs: Array<LayerSpecification>) {\n        this._layerConfigs = {};\n        this._layers = {};\n        this.update(layerConfigs, []);\n    }\n\n    update(layerConfigs: Array<LayerSpecification>, removedIds: Array<string>) {\n        for (const layerConfig of layerConfigs) {\n            this._layerConfigs[layerConfig.id] = layerConfig;\n\n            const layer = this._layers[layerConfig.id] = StyleLayer.create(layerConfig);\n            layer._featureFilter = featureFilter(layer.filter);\n        }\n        for (const id of removedIds) {\n            delete this._layerConfigs[id];\n            delete this._layers[id];\n        }\n\n        this.familiesBySource = {};\n\n        const groups = groupByLayout(util.values(this._layerConfigs));\n\n        for (const layerConfigs of groups) {\n            const layers = layerConfigs.map((layerConfig) => this._layers[layerConfig.id]);\n\n            const layer = layers[0];\n            if (layer.visibility === 'none') {\n                continue;\n            }\n\n            const sourceId = layer.source || '';\n            let sourceGroup = this.familiesBySource[sourceId];\n            if (!sourceGroup) {\n                sourceGroup = this.familiesBySource[sourceId] = {};\n            }\n\n            const sourceLayerId = layer.sourceLayer || '_geojsonTileLayer';\n            let sourceLayerFamilies = sourceGroup[sourceLayerId];\n            if (!sourceLayerFamilies) {\n                sourceLayerFamilies = sourceGroup[sourceLayerId] = [];\n            }\n\n            sourceLayerFamilies.push(layers);\n        }\n    }\n}\n\nmodule.exports = StyleLayerIndex;\n","// @flow\n\nmodule.exports = require('../style-spec/validate_style.min');\n\nimport type Evented from '../util/evented';\n\nmodule.exports.emitErrors = function (emitter: Evented, errors: ?Array<{message: string}>) {\n    if (errors && errors.length) {\n        for (const {message} of errors) {\n            emitter.fire('error', { error: new Error(message) });\n        }\n        return true;\n    } else {\n        return false;\n    }\n};\n","\nconst validateConstants = require('./validate/validate_constants');\nconst validate = require('./validate/validate');\nconst latestStyleSpec = require('./reference/latest');\nconst validateGlyphsURL = require('./validate/validate_glyphs_url');\n\n/**\n * Validate a Mapbox GL style against the style specification. This entrypoint,\n * `mapbox-gl-style-spec/lib/validate_style.min`, is designed to produce as\n * small a browserify bundle as possible by omitting unnecessary functionality\n * and legacy style specifications.\n *\n * @private\n * @param {Object} style The style to be validated.\n * @param {Object} [styleSpec] The style specification to validate against.\n *     If omitted, the latest style spec is used.\n * @returns {Array<ValidationError>}\n * @example\n *   var validate = require('mapbox-gl-style-spec/lib/validate_style.min');\n *   var errors = validate(style);\n */\nfunction validateStyleMin(style, styleSpec) {\n    styleSpec = styleSpec || latestStyleSpec;\n\n    let errors = [];\n\n    errors = errors.concat(validate({\n        key: '',\n        value: style,\n        valueSpec: styleSpec.$root,\n        styleSpec: styleSpec,\n        style: style,\n        objectElementValidators: {\n            glyphs: validateGlyphsURL,\n            '*': function() {\n                return [];\n            }\n        }\n    }));\n\n    if (style.constants) {\n        errors = errors.concat(validateConstants({\n            key: 'constants',\n            value: style.constants,\n            style: style,\n            styleSpec: styleSpec\n        }));\n    }\n\n    return sortErrors(errors);\n}\n\nvalidateStyleMin.source = wrapCleanErrors(require('./validate/validate_source'));\nvalidateStyleMin.light = wrapCleanErrors(require('./validate/validate_light'));\nvalidateStyleMin.layer = wrapCleanErrors(require('./validate/validate_layer'));\nvalidateStyleMin.filter = wrapCleanErrors(require('./validate/validate_filter'));\nvalidateStyleMin.paintProperty = wrapCleanErrors(require('./validate/validate_paint_property'));\nvalidateStyleMin.layoutProperty = wrapCleanErrors(require('./validate/validate_layout_property'));\n\nfunction sortErrors(errors) {\n    return [].concat(errors).sort((a, b) => {\n        return a.line - b.line;\n    });\n}\n\nfunction wrapCleanErrors(inner) {\n    return function() {\n        return sortErrors(inner.apply(this, arguments));\n    };\n}\n\nmodule.exports = validateStyleMin;\n","\nconst getType = require('../util/get_type');\nconst ValidationError = require('../error/validation_error');\n\nmodule.exports = function validateBoolean(options) {\n    const value = options.value;\n    const key = options.key;\n    const type = getType(value);\n\n    if (type !== 'boolean') {\n        return [new ValidationError(key, value, `boolean expected, ${type} found`)];\n    }\n\n    return [];\n};\n","\nconst ValidationError = require('../error/validation_error');\nconst getType = require('../util/get_type');\nconst parseCSSColor = require('csscolorparser').parseCSSColor;\n\nmodule.exports = function validateColor(options) {\n    const key = options.key;\n    const value = options.value;\n    const type = getType(value);\n\n    if (type !== 'string') {\n        return [new ValidationError(key, value, `color expected, ${type} found`)];\n    }\n\n    if (parseCSSColor(value) === null) {\n        return [new ValidationError(key, value, `color expected, \"${value}\" found`)];\n    }\n\n    return [];\n};\n","\nconst ValidationError = require('../error/validation_error');\nconst validateString = require('./validate_string');\n\nmodule.exports = function(options) {\n    const value = options.value;\n    const key = options.key;\n\n    const errors = validateString(options);\n    if (errors.length) return errors;\n\n    if (value.indexOf('{fontstack}') === -1) {\n        errors.push(new ValidationError(key, value, '\"glyphs\" url must include a \"{fontstack}\" token'));\n    }\n\n    if (value.indexOf('{range}') === -1) {\n        errors.push(new ValidationError(key, value, '\"glyphs\" url must include a \"{range}\" token'));\n    }\n\n    return errors;\n};\n","// @flow\n\nconst StyleLayer = require('../style_layer');\nconst CircleBucket = require('../../data/bucket/circle_bucket');\nconst {multiPolygonIntersectsBufferedMultiPoint} = require('../../util/intersection_tests');\nconst {getMaximumPaintValue, translateDistance, translate} = require('../query_utils');\nconst properties = require('./circle_style_layer_properties');\n\nconst {\n    Transitionable,\n    Transitioning,\n    PossiblyEvaluated\n} = require('../properties');\n\nimport type {Bucket, BucketParameters} from '../../data/bucket';\nimport type Point from '@mapbox/point-geometry';\nimport type {PaintProps} from './circle_style_layer_properties';\n\nclass CircleStyleLayer extends StyleLayer {\n    _transitionablePaint: Transitionable<PaintProps>;\n    _transitioningPaint: Transitioning<PaintProps>;\n    paint: PossiblyEvaluated<PaintProps>;\n\n    constructor(layer: LayerSpecification) {\n        super(layer, properties);\n    }\n\n    createBucket(parameters: BucketParameters<*>) {\n        return new CircleBucket(parameters);\n    }\n\n    queryRadius(bucket: Bucket): number {\n        const circleBucket: CircleBucket<CircleStyleLayer> = (bucket: any);\n        return getMaximumPaintValue('circle-radius', this, circleBucket) +\n            getMaximumPaintValue('circle-stroke-width', this, circleBucket) +\n            translateDistance(this.paint.get('circle-translate'));\n    }\n\n    queryIntersectsFeature(queryGeometry: Array<Array<Point>>,\n                           feature: VectorTileFeature,\n                           geometry: Array<Array<Point>>,\n                           zoom: number,\n                           bearing: number,\n                           pixelsToTileUnits: number): boolean {\n        const translatedPolygon = translate(queryGeometry,\n            this.paint.get('circle-translate'),\n            this.paint.get('circle-translate-anchor'),\n            bearing, pixelsToTileUnits);\n        const radius = this.paint.get('circle-radius').evaluate(feature) * pixelsToTileUnits;\n        const stroke = this.paint.get('circle-stroke-width').evaluate(feature) * pixelsToTileUnits;\n        return multiPolygonIntersectsBufferedMultiPoint(translatedPolygon, geometry, radius + stroke);\n    }\n}\n\nmodule.exports = CircleStyleLayer;\n","// @flow\nconst {createLayout} = require('../../util/struct_array');\nmodule.exports = createLayout([\n    {name: 'a_pos', components: 2, type: 'Int16'}\n], 4);\n","// @flow\n\nconst util = require('../util/util');\n\n/**\n * Packs two numbers, interpreted as 8-bit unsigned integers, into a single\n * float.  Unpack them in the shader using the `unpack_float()` function,\n * defined in _prelude.vertex.glsl\n *\n * @private\n */\nexports.packUint8ToFloat = function pack(a: number, b: number) {\n    // coerce a and b to 8-bit ints\n    a = util.clamp(Math.floor(a), 0, 255);\n    b = util.clamp(Math.floor(b), 0, 255);\n    return 256 * a + b;\n};\n\n","// This file is generated. Edit build/generate-style-code.js, then run `yarn run codegen`.\n// @flow\n/* eslint-disable */\n\nconst styleSpec = require('../../style-spec/reference/latest');\n\nconst {\n    Properties,\n    DataConstantProperty,\n    DataDrivenProperty,\n    CrossFadedProperty,\n    HeatmapColorProperty\n} = require('../properties');\n\nimport type Color from '../../style-spec/util/color';\n\n\nexport type PaintProps = {|\n    \"circle-radius\": DataDrivenProperty<number>,\n    \"circle-color\": DataDrivenProperty<Color>,\n    \"circle-blur\": DataDrivenProperty<number>,\n    \"circle-opacity\": DataDrivenProperty<number>,\n    \"circle-translate\": DataConstantProperty<[number, number]>,\n    \"circle-translate-anchor\": DataConstantProperty<\"map\" | \"viewport\">,\n    \"circle-pitch-scale\": DataConstantProperty<\"map\" | \"viewport\">,\n    \"circle-pitch-alignment\": DataConstantProperty<\"map\" | \"viewport\">,\n    \"circle-stroke-width\": DataDrivenProperty<number>,\n    \"circle-stroke-color\": DataDrivenProperty<Color>,\n    \"circle-stroke-opacity\": DataDrivenProperty<number>,\n|};\n\nconst paint: Properties<PaintProps> = new Properties({\n    \"circle-radius\": new DataDrivenProperty(styleSpec[\"paint_circle\"][\"circle-radius\"]),\n    \"circle-color\": new DataDrivenProperty(styleSpec[\"paint_circle\"][\"circle-color\"]),\n    \"circle-blur\": new DataDrivenProperty(styleSpec[\"paint_circle\"][\"circle-blur\"]),\n    \"circle-opacity\": new DataDrivenProperty(styleSpec[\"paint_circle\"][\"circle-opacity\"]),\n    \"circle-translate\": new DataConstantProperty(styleSpec[\"paint_circle\"][\"circle-translate\"]),\n    \"circle-translate-anchor\": new DataConstantProperty(styleSpec[\"paint_circle\"][\"circle-translate-anchor\"]),\n    \"circle-pitch-scale\": new DataConstantProperty(styleSpec[\"paint_circle\"][\"circle-pitch-scale\"]),\n    \"circle-pitch-alignment\": new DataConstantProperty(styleSpec[\"paint_circle\"][\"circle-pitch-alignment\"]),\n    \"circle-stroke-width\": new DataDrivenProperty(styleSpec[\"paint_circle\"][\"circle-stroke-width\"]),\n    \"circle-stroke-color\": new DataDrivenProperty(styleSpec[\"paint_circle\"][\"circle-stroke-color\"]),\n    \"circle-stroke-opacity\": new DataDrivenProperty(styleSpec[\"paint_circle\"][\"circle-stroke-opacity\"]),\n});\n\nmodule.exports = { paint };\n","// @flow\n\nconst StyleLayer = require('../style_layer');\nconst HeatmapBucket = require('../../data/bucket/heatmap_bucket');\nconst RGBAImage = require('../../util/image').RGBAImage;\nconst properties = require('./heatmap_style_layer_properties');\n\nconst {\n    Transitionable,\n    Transitioning,\n    PossiblyEvaluated\n} = require('../properties');\n\nimport type Texture from '../../render/texture';\nimport type Framebuffer from '../../gl/framebuffer';\nimport type {PaintProps} from './heatmap_style_layer_properties';\n\nclass HeatmapStyleLayer extends StyleLayer {\n\n    heatmapFbo: ?Framebuffer;\n    colorRamp: RGBAImage;\n    colorRampTexture: ?Texture;\n\n    _transitionablePaint: Transitionable<PaintProps>;\n    _transitioningPaint: Transitioning<PaintProps>;\n    paint: PossiblyEvaluated<PaintProps>;\n\n    createBucket(options: any) {\n        return new HeatmapBucket(options);\n    }\n\n    constructor(layer: LayerSpecification) {\n        super(layer, properties);\n\n        // make sure color ramp texture is generated for default heatmap color too\n        this._updateColorRamp();\n    }\n\n    setPaintProperty(name: string, value: mixed, options: {validate: boolean}) {\n        super.setPaintProperty(name, value, options);\n        if (name === 'heatmap-color') {\n            this._updateColorRamp();\n        }\n    }\n\n    _updateColorRamp() {\n        const expression = this._transitionablePaint._values['heatmap-color'].value.expression;\n        const colorRampData = new Uint8Array(256 * 4);\n        const len = colorRampData.length;\n        for (let i = 4; i < len; i += 4) {\n            const pxColor = expression.evaluate(({heatmapDensity: i / len}: any));\n            // the colors are being unpremultiplied because Color uses\n            // premultiplied values, and the Texture class expects unpremultiplied ones\n            colorRampData[i + 0] = Math.floor(pxColor.r * 255 / pxColor.a);\n            colorRampData[i + 1] = Math.floor(pxColor.g * 255 / pxColor.a);\n            colorRampData[i + 2] = Math.floor(pxColor.b * 255 / pxColor.a);\n            colorRampData[i + 3] = Math.floor(pxColor.a * 255);\n        }\n        this.colorRamp = new RGBAImage({width: 256, height: 1}, colorRampData);\n        this.colorRampTexture = null;\n    }\n\n    resize() {\n        if (this.heatmapFbo) {\n            this.heatmapFbo.destroy();\n            this.heatmapFbo = null;\n        }\n    }\n\n    queryRadius(): number {\n        return 0;\n    }\n\n    queryIntersectsFeature(): boolean  {\n        return false;\n    }\n\n    hasOffscreenPass() {\n        return this.paint.get('heatmap-opacity') !== 0 && this.visibility !== 'none';\n    }\n}\n\nmodule.exports = HeatmapStyleLayer;\n","// @flow\n\nconst CircleBucket = require('./circle_bucket');\nconst {register} = require('../../util/web_worker_transfer');\n\nimport type HeatmapStyleLayer from '../../style/style_layer/heatmap_style_layer';\n\nclass HeatmapBucket extends CircleBucket<HeatmapStyleLayer> {\n    // Needed for flow to accept omit: ['layers'] below, due to\n    // https://github.com/facebook/flow/issues/4262\n    layers: Array<HeatmapStyleLayer>;\n}\n\nregister('HeatmapBucket', HeatmapBucket, {omit: ['layers']});\n\nmodule.exports = HeatmapBucket;\n","// This file is generated. Edit build/generate-style-code.js, then run `yarn run codegen`.\n// @flow\n/* eslint-disable */\n\nconst styleSpec = require('../../style-spec/reference/latest');\n\nconst {\n    Properties,\n    DataConstantProperty,\n    DataDrivenProperty,\n    CrossFadedProperty,\n    HeatmapColorProperty\n} = require('../properties');\n\nimport type Color from '../../style-spec/util/color';\n\n\nexport type PaintProps = {|\n    \"heatmap-radius\": DataDrivenProperty<number>,\n    \"heatmap-weight\": DataDrivenProperty<number>,\n    \"heatmap-intensity\": DataConstantProperty<number>,\n    \"heatmap-color\": HeatmapColorProperty,\n    \"heatmap-opacity\": DataConstantProperty<number>,\n|};\n\nconst paint: Properties<PaintProps> = new Properties({\n    \"heatmap-radius\": new DataDrivenProperty(styleSpec[\"paint_heatmap\"][\"heatmap-radius\"]),\n    \"heatmap-weight\": new DataDrivenProperty(styleSpec[\"paint_heatmap\"][\"heatmap-weight\"]),\n    \"heatmap-intensity\": new DataConstantProperty(styleSpec[\"paint_heatmap\"][\"heatmap-intensity\"]),\n    \"heatmap-color\": new HeatmapColorProperty(styleSpec[\"paint_heatmap\"][\"heatmap-color\"]),\n    \"heatmap-opacity\": new DataConstantProperty(styleSpec[\"paint_heatmap\"][\"heatmap-opacity\"]),\n});\n\nmodule.exports = { paint };\n","// @flow\n\nconst StyleLayer = require('../style_layer');\nconst properties = require('./hillshade_style_layer_properties');\n\nconst {\n    Transitionable,\n    Transitioning,\n    PossiblyEvaluated\n} = require('../properties');\n\nimport type {PaintProps} from './hillshade_style_layer_properties';\n\nclass HillshadeStyleLayer extends StyleLayer {\n    _transitionablePaint: Transitionable<PaintProps>;\n    _transitioningPaint: Transitioning<PaintProps>;\n    paint: PossiblyEvaluated<PaintProps>;\n\n    constructor(layer: LayerSpecification) {\n        super(layer, properties);\n    }\n\n    hasOffscreenPass() {\n        return this.paint.get('hillshade-exaggeration') !== 0 && this.visibility !== 'none';\n    }\n}\n\nmodule.exports = HillshadeStyleLayer;\n","// This file is generated. Edit build/generate-style-code.js, then run `yarn run codegen`.\n// @flow\n/* eslint-disable */\n\nconst styleSpec = require('../../style-spec/reference/latest');\n\nconst {\n    Properties,\n    DataConstantProperty,\n    DataDrivenProperty,\n    CrossFadedProperty,\n    HeatmapColorProperty\n} = require('../properties');\n\nimport type Color from '../../style-spec/util/color';\n\n\nexport type PaintProps = {|\n    \"hillshade-illumination-direction\": DataConstantProperty<number>,\n    \"hillshade-illumination-anchor\": DataConstantProperty<\"map\" | \"viewport\">,\n    \"hillshade-exaggeration\": DataConstantProperty<number>,\n    \"hillshade-shadow-color\": DataConstantProperty<Color>,\n    \"hillshade-highlight-color\": DataConstantProperty<Color>,\n    \"hillshade-accent-color\": DataConstantProperty<Color>,\n|};\n\nconst paint: Properties<PaintProps> = new Properties({\n    \"hillshade-illumination-direction\": new DataConstantProperty(styleSpec[\"paint_hillshade\"][\"hillshade-illumination-direction\"]),\n    \"hillshade-illumination-anchor\": new DataConstantProperty(styleSpec[\"paint_hillshade\"][\"hillshade-illumination-anchor\"]),\n    \"hillshade-exaggeration\": new DataConstantProperty(styleSpec[\"paint_hillshade\"][\"hillshade-exaggeration\"]),\n    \"hillshade-shadow-color\": new DataConstantProperty(styleSpec[\"paint_hillshade\"][\"hillshade-shadow-color\"]),\n    \"hillshade-highlight-color\": new DataConstantProperty(styleSpec[\"paint_hillshade\"][\"hillshade-highlight-color\"]),\n    \"hillshade-accent-color\": new DataConstantProperty(styleSpec[\"paint_hillshade\"][\"hillshade-accent-color\"]),\n});\n\nmodule.exports = { paint };\n","// @flow\n\nconst StyleLayer = require('../style_layer');\nconst FillBucket = require('../../data/bucket/fill_bucket');\nconst {multiPolygonIntersectsMultiPolygon} = require('../../util/intersection_tests');\nconst {translateDistance, translate} = require('../query_utils');\nconst properties = require('./fill_style_layer_properties');\n\nconst {\n    Transitionable,\n    Transitioning,\n    PossiblyEvaluated\n} = require('../properties');\n\nimport type {BucketParameters} from '../../data/bucket';\nimport type Point from '@mapbox/point-geometry';\nimport type {PaintProps} from './fill_style_layer_properties';\nimport type EvaluationParameters from '../evaluation_parameters';\n\nclass FillStyleLayer extends StyleLayer {\n    _transitionablePaint: Transitionable<PaintProps>;\n    _transitioningPaint: Transitioning<PaintProps>;\n    paint: PossiblyEvaluated<PaintProps>;\n\n    constructor(layer: LayerSpecification) {\n        super(layer, properties);\n    }\n\n    recalculate(parameters: EvaluationParameters) {\n        this.paint = this._transitioningPaint.possiblyEvaluate(parameters);\n\n        if (this._transitionablePaint.getValue('fill-outline-color') === undefined) {\n            this.paint._values['fill-outline-color'] = this.paint._values['fill-color'];\n        }\n    }\n\n    createBucket(parameters: BucketParameters<*>) {\n        return new FillBucket(parameters);\n    }\n\n    queryRadius(): number {\n        return translateDistance(this.paint.get('fill-translate'));\n    }\n\n    queryIntersectsFeature(queryGeometry: Array<Array<Point>>,\n                           feature: VectorTileFeature,\n                           geometry: Array<Array<Point>>,\n                           zoom: number,\n                           bearing: number,\n                           pixelsToTileUnits: number): boolean {\n        const translatedPolygon = translate(queryGeometry,\n            this.paint.get('fill-translate'),\n            this.paint.get('fill-translate-anchor'),\n            bearing, pixelsToTileUnits);\n        return multiPolygonIntersectsMultiPolygon(translatedPolygon, geometry);\n    }\n}\n\nmodule.exports = FillStyleLayer;\n","// @flow\n\nconst {FillLayoutArray} = require('../array_types');\nconst layoutAttributes = require('./fill_attributes').members;\nconst {SegmentVector} = require('../segment');\nconst {ProgramConfigurationSet} = require('../program_configuration');\nconst {LineIndexArray, TriangleIndexArray} = require('../index_array_type');\nconst loadGeometry = require('../load_geometry');\nconst earcut = require('earcut');\nconst classifyRings = require('../../util/classify_rings');\nconst assert = require('assert');\nconst EARCUT_MAX_RINGS = 500;\nconst {register} = require('../../util/web_worker_transfer');\n\nimport type {\n    Bucket,\n    BucketParameters,\n    IndexedFeature,\n    PopulateParameters\n} from '../bucket';\nimport type FillStyleLayer from '../../style/style_layer/fill_style_layer';\nimport type Context from '../../gl/context';\nimport type IndexBuffer from '../../gl/index_buffer';\nimport type VertexBuffer from '../../gl/vertex_buffer';\nimport type Point from '@mapbox/point-geometry';\n\nclass FillBucket implements Bucket {\n    index: number;\n    zoom: number;\n    overscaling: number;\n    layers: Array<FillStyleLayer>;\n    layerIds: Array<string>;\n\n    layoutVertexArray: FillLayoutArray;\n    layoutVertexBuffer: VertexBuffer;\n\n    indexArray: TriangleIndexArray;\n    indexBuffer: IndexBuffer;\n\n    indexArray2: LineIndexArray;\n    indexBuffer2: IndexBuffer;\n\n    programConfigurations: ProgramConfigurationSet<FillStyleLayer>;\n    segments: SegmentVector;\n    segments2: SegmentVector;\n    uploaded: boolean;\n\n    constructor(options: BucketParameters<FillStyleLayer>) {\n        this.zoom = options.zoom;\n        this.overscaling = options.overscaling;\n        this.layers = options.layers;\n        this.layerIds = this.layers.map(layer => layer.id);\n        this.index = options.index;\n\n        this.layoutVertexArray = new FillLayoutArray();\n        this.indexArray = new TriangleIndexArray();\n        this.indexArray2 = new LineIndexArray();\n        this.programConfigurations = new ProgramConfigurationSet(layoutAttributes, options.layers, options.zoom);\n        this.segments = new SegmentVector();\n        this.segments2 = new SegmentVector();\n    }\n\n    populate(features: Array<IndexedFeature>, options: PopulateParameters) {\n        for (const {feature, index, sourceLayerIndex} of features) {\n            if (this.layers[0]._featureFilter({zoom: this.zoom}, feature)) {\n                const geometry = loadGeometry(feature);\n                this.addFeature(feature, geometry);\n                options.featureIndex.insert(feature, geometry, index, sourceLayerIndex, this.index);\n            }\n        }\n    }\n\n    isEmpty() {\n        return this.layoutVertexArray.length === 0;\n    }\n\n    upload(context: Context) {\n        this.layoutVertexBuffer = context.createVertexBuffer(this.layoutVertexArray, layoutAttributes);\n        this.indexBuffer = context.createIndexBuffer(this.indexArray);\n        this.indexBuffer2 = context.createIndexBuffer(this.indexArray2);\n        this.programConfigurations.upload(context);\n    }\n\n    destroy() {\n        if (!this.layoutVertexBuffer) return;\n        this.layoutVertexBuffer.destroy();\n        this.indexBuffer.destroy();\n        this.indexBuffer2.destroy();\n        this.programConfigurations.destroy();\n        this.segments.destroy();\n        this.segments2.destroy();\n    }\n\n    addFeature(feature: VectorTileFeature, geometry: Array<Array<Point>>) {\n        for (const polygon of classifyRings(geometry, EARCUT_MAX_RINGS)) {\n            let numVertices = 0;\n            for (const ring of polygon) {\n                numVertices += ring.length;\n            }\n\n            const triangleSegment = this.segments.prepareSegment(numVertices, this.layoutVertexArray, this.indexArray);\n            const triangleIndex = triangleSegment.vertexLength;\n\n            const flattened = [];\n            const holeIndices = [];\n\n            for (const ring of polygon) {\n                if (ring.length === 0) {\n                    continue;\n                }\n\n                if (ring !== polygon[0]) {\n                    holeIndices.push(flattened.length / 2);\n                }\n\n                const lineSegment = this.segments2.prepareSegment(ring.length, this.layoutVertexArray, this.indexArray2);\n                const lineIndex = lineSegment.vertexLength;\n\n                this.layoutVertexArray.emplaceBack(ring[0].x, ring[0].y);\n                this.indexArray2.emplaceBack(lineIndex + ring.length - 1, lineIndex);\n                flattened.push(ring[0].x);\n                flattened.push(ring[0].y);\n\n                for (let i = 1; i < ring.length; i++) {\n                    this.layoutVertexArray.emplaceBack(ring[i].x, ring[i].y);\n                    this.indexArray2.emplaceBack(lineIndex + i - 1, lineIndex + i);\n                    flattened.push(ring[i].x);\n                    flattened.push(ring[i].y);\n                }\n\n                lineSegment.vertexLength += ring.length;\n                lineSegment.primitiveLength += ring.length;\n            }\n\n            const indices = earcut(flattened, holeIndices);\n            assert(indices.length % 3 === 0);\n\n            for (let i = 0; i < indices.length; i += 3) {\n                this.indexArray.emplaceBack(\n                    triangleIndex + indices[i],\n                    triangleIndex + indices[i + 1],\n                    triangleIndex + indices[i + 2]);\n            }\n\n            triangleSegment.vertexLength += numVertices;\n            triangleSegment.primitiveLength += indices.length / 3;\n        }\n\n        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, feature);\n    }\n}\n\nregister('FillBucket', FillBucket, {omit: ['layers']});\n\nmodule.exports = FillBucket;\n","// @flow\nconst {createLayout} = require('../../util/struct_array');\nmodule.exports = createLayout([\n    {name: 'a_pos', components: 2, type: 'Int16'}\n], 4);\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.quickselect = factory());\n}(this, (function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nreturn quickselect;\n\n})));\n","// This file is generated. Edit build/generate-style-code.js, then run `yarn run codegen`.\n// @flow\n/* eslint-disable */\n\nconst styleSpec = require('../../style-spec/reference/latest');\n\nconst {\n    Properties,\n    DataConstantProperty,\n    DataDrivenProperty,\n    CrossFadedProperty,\n    HeatmapColorProperty\n} = require('../properties');\n\nimport type Color from '../../style-spec/util/color';\n\n\nexport type PaintProps = {|\n    \"fill-antialias\": DataConstantProperty<boolean>,\n    \"fill-opacity\": DataDrivenProperty<number>,\n    \"fill-color\": DataDrivenProperty<Color>,\n    \"fill-outline-color\": DataDrivenProperty<Color>,\n    \"fill-translate\": DataConstantProperty<[number, number]>,\n    \"fill-translate-anchor\": DataConstantProperty<\"map\" | \"viewport\">,\n    \"fill-pattern\": CrossFadedProperty<string>,\n|};\n\nconst paint: Properties<PaintProps> = new Properties({\n    \"fill-antialias\": new DataConstantProperty(styleSpec[\"paint_fill\"][\"fill-antialias\"]),\n    \"fill-opacity\": new DataDrivenProperty(styleSpec[\"paint_fill\"][\"fill-opacity\"]),\n    \"fill-color\": new DataDrivenProperty(styleSpec[\"paint_fill\"][\"fill-color\"]),\n    \"fill-outline-color\": new DataDrivenProperty(styleSpec[\"paint_fill\"][\"fill-outline-color\"]),\n    \"fill-translate\": new DataConstantProperty(styleSpec[\"paint_fill\"][\"fill-translate\"]),\n    \"fill-translate-anchor\": new DataConstantProperty(styleSpec[\"paint_fill\"][\"fill-translate-anchor\"]),\n    \"fill-pattern\": new CrossFadedProperty(styleSpec[\"paint_fill\"][\"fill-pattern\"]),\n});\n\nmodule.exports = { paint };\n","// @flow\n\nconst StyleLayer = require('../style_layer');\nconst FillExtrusionBucket = require('../../data/bucket/fill_extrusion_bucket');\nconst {multiPolygonIntersectsMultiPolygon} = require('../../util/intersection_tests');\nconst {translateDistance, translate} = require('../query_utils');\nconst properties = require('./fill_extrusion_style_layer_properties');\n\nconst {\n    Transitionable,\n    Transitioning,\n    PossiblyEvaluated\n} = require('../properties');\n\nimport type {BucketParameters} from '../../data/bucket';\nimport type Point from '@mapbox/point-geometry';\nimport type {PaintProps} from './fill_extrusion_style_layer_properties';\nimport type Framebuffer from '../../gl/framebuffer';\n\nclass FillExtrusionStyleLayer extends StyleLayer {\n    _transitionablePaint: Transitionable<PaintProps>;\n    _transitioningPaint: Transitioning<PaintProps>;\n    paint: PossiblyEvaluated<PaintProps>;\n    viewportFrame: ?Framebuffer;\n\n    constructor(layer: LayerSpecification) {\n        super(layer, properties);\n    }\n\n    createBucket(parameters: BucketParameters<FillExtrusionStyleLayer>) {\n        return new FillExtrusionBucket(parameters);\n    }\n\n    queryRadius(): number {\n        return translateDistance(this.paint.get('fill-extrusion-translate'));\n    }\n\n    queryIntersectsFeature(queryGeometry: Array<Array<Point>>,\n                           feature: VectorTileFeature,\n                           geometry: Array<Array<Point>>,\n                           zoom: number,\n                           bearing: number,\n                           pixelsToTileUnits: number): boolean {\n        const translatedPolygon = translate(queryGeometry,\n            this.paint.get('fill-extrusion-translate'),\n            this.paint.get('fill-extrusion-translate-anchor'),\n            bearing, pixelsToTileUnits);\n        return multiPolygonIntersectsMultiPolygon(translatedPolygon, geometry);\n    }\n\n    hasOffscreenPass() {\n        return this.paint.get('fill-extrusion-opacity') !== 0 && this.visibility !== 'none';\n    }\n\n    resize() {\n        if (this.viewportFrame) {\n            this.viewportFrame.destroy();\n            this.viewportFrame = null;\n        }\n    }\n}\n\nmodule.exports = FillExtrusionStyleLayer;\n","// @flow\n\nconst {FillExtrusionLayoutArray} = require('../array_types');\nconst layoutAttributes = require('./fill_extrusion_attributes').members;\nconst {SegmentVector, MAX_VERTEX_ARRAY_LENGTH} = require('../segment');\nconst {ProgramConfigurationSet} = require('../program_configuration');\nconst {TriangleIndexArray} = require('../index_array_type');\nconst loadGeometry = require('../load_geometry');\nconst EXTENT = require('../extent');\nconst earcut = require('earcut');\nconst classifyRings = require('../../util/classify_rings');\nconst assert = require('assert');\nconst EARCUT_MAX_RINGS = 500;\nconst {register} = require('../../util/web_worker_transfer');\n\nimport type {\n    Bucket,\n    BucketParameters,\n    IndexedFeature,\n    PopulateParameters\n} from '../bucket';\nimport type FillExtrusionStyleLayer from '../../style/style_layer/fill_extrusion_style_layer';\nimport type Context from '../../gl/context';\nimport type IndexBuffer from '../../gl/index_buffer';\nimport type VertexBuffer from '../../gl/vertex_buffer';\nimport type Point from '@mapbox/point-geometry';\n\nconst FACTOR = Math.pow(2, 13);\n\nfunction addVertex(vertexArray, x, y, nx, ny, nz, t, e) {\n    vertexArray.emplaceBack(\n        // a_pos\n        x,\n        y,\n        // a_normal_ed: 3-component normal and 1-component edgedistance\n        Math.floor(nx * FACTOR) * 2 + t,\n        ny * FACTOR * 2,\n        nz * FACTOR * 2,\n        // edgedistance (used for wrapping patterns around extrusion sides)\n        Math.round(e)\n    );\n}\n\n\nclass FillExtrusionBucket implements Bucket {\n    index: number;\n    zoom: number;\n    overscaling: number;\n    layers: Array<FillExtrusionStyleLayer>;\n    layerIds: Array<string>;\n\n    layoutVertexArray: FillExtrusionLayoutArray;\n    layoutVertexBuffer: VertexBuffer;\n\n    indexArray: TriangleIndexArray;\n    indexBuffer: IndexBuffer;\n\n    programConfigurations: ProgramConfigurationSet<FillExtrusionStyleLayer>;\n    segments: SegmentVector;\n    uploaded: boolean;\n\n    constructor(options: BucketParameters<FillExtrusionStyleLayer>) {\n        this.zoom = options.zoom;\n        this.overscaling = options.overscaling;\n        this.layers = options.layers;\n        this.layerIds = this.layers.map(layer => layer.id);\n        this.index = options.index;\n\n        this.layoutVertexArray = new FillExtrusionLayoutArray();\n        this.indexArray = new TriangleIndexArray();\n        this.programConfigurations = new ProgramConfigurationSet(layoutAttributes, options.layers, options.zoom);\n        this.segments = new SegmentVector();\n    }\n\n    populate(features: Array<IndexedFeature>, options: PopulateParameters) {\n        for (const {feature, index, sourceLayerIndex} of features) {\n            if (this.layers[0]._featureFilter({zoom: this.zoom}, feature)) {\n                const geometry = loadGeometry(feature);\n                this.addFeature(feature, geometry);\n                options.featureIndex.insert(feature, geometry, index, sourceLayerIndex, this.index);\n            }\n        }\n    }\n\n    isEmpty() {\n        return this.layoutVertexArray.length === 0;\n    }\n\n    upload(context: Context) {\n        this.layoutVertexBuffer = context.createVertexBuffer(this.layoutVertexArray, layoutAttributes);\n        this.indexBuffer = context.createIndexBuffer(this.indexArray);\n        this.programConfigurations.upload(context);\n    }\n\n    destroy() {\n        if (!this.layoutVertexBuffer) return;\n        this.layoutVertexBuffer.destroy();\n        this.indexBuffer.destroy();\n        this.programConfigurations.destroy();\n        this.segments.destroy();\n    }\n\n    addFeature(feature: VectorTileFeature, geometry: Array<Array<Point>>) {\n        for (const polygon of classifyRings(geometry, EARCUT_MAX_RINGS)) {\n            let numVertices = 0;\n            for (const ring of polygon) {\n                numVertices += ring.length;\n            }\n            let segment = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray);\n\n            for (const ring of polygon) {\n                if (ring.length === 0) {\n                    continue;\n                }\n\n                if (isEntirelyOutside(ring)) {\n                    continue;\n                }\n\n                let edgeDistance = 0;\n\n                for (let p = 0; p < ring.length; p++) {\n                    const p1 = ring[p];\n\n                    if (p >= 1) {\n                        const p2 = ring[p - 1];\n\n                        if (!isBoundaryEdge(p1, p2)) {\n                            if (segment.vertexLength + 4 > MAX_VERTEX_ARRAY_LENGTH) {\n                                segment = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray);\n                            }\n\n                            const perp = p1.sub(p2)._perp()._unit();\n                            const dist = p2.dist(p1);\n                            if (edgeDistance + dist > 32768) edgeDistance = 0;\n\n                            addVertex(this.layoutVertexArray, p1.x, p1.y, perp.x, perp.y, 0, 0, edgeDistance);\n                            addVertex(this.layoutVertexArray, p1.x, p1.y, perp.x, perp.y, 0, 1, edgeDistance);\n\n                            edgeDistance += dist;\n\n                            addVertex(this.layoutVertexArray, p2.x, p2.y, perp.x, perp.y, 0, 0, edgeDistance);\n                            addVertex(this.layoutVertexArray, p2.x, p2.y, perp.x, perp.y, 0, 1, edgeDistance);\n\n                            const bottomRight = segment.vertexLength;\n\n                            this.indexArray.emplaceBack(bottomRight, bottomRight + 1, bottomRight + 2);\n                            this.indexArray.emplaceBack(bottomRight + 1, bottomRight + 2, bottomRight + 3);\n\n                            segment.vertexLength += 4;\n                            segment.primitiveLength += 2;\n                        }\n                    }\n                }\n            }\n\n            if (segment.vertexLength + numVertices > MAX_VERTEX_ARRAY_LENGTH) {\n                segment = this.segments.prepareSegment(numVertices, this.layoutVertexArray, this.indexArray);\n            }\n\n            const flattened = [];\n            const holeIndices = [];\n            const triangleIndex = segment.vertexLength;\n\n            for (const ring of polygon) {\n                if (ring.length === 0) {\n                    continue;\n                }\n\n                if (ring !== polygon[0]) {\n                    holeIndices.push(flattened.length / 2);\n                }\n\n                for (let i = 0; i < ring.length; i++) {\n                    const p = ring[i];\n\n                    addVertex(this.layoutVertexArray, p.x, p.y, 0, 0, 1, 1, 0);\n\n                    flattened.push(p.x);\n                    flattened.push(p.y);\n                }\n            }\n\n            const indices = earcut(flattened, holeIndices);\n            assert(indices.length % 3 === 0);\n\n            for (let j = 0; j < indices.length; j += 3) {\n                this.indexArray.emplaceBack(\n                    triangleIndex + indices[j],\n                    triangleIndex + indices[j + 1],\n                    triangleIndex + indices[j + 2]);\n            }\n\n            segment.primitiveLength += indices.length / 3;\n            segment.vertexLength += numVertices;\n        }\n\n        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, feature);\n    }\n}\n\nregister('FillExtrusionBucket', FillExtrusionBucket, {omit: ['layers']});\n\nmodule.exports = FillExtrusionBucket;\n\nfunction isBoundaryEdge(p1, p2) {\n    return (p1.x === p2.x && (p1.x < 0 || p1.x > EXTENT)) ||\n        (p1.y === p2.y && (p1.y < 0 || p1.y > EXTENT));\n}\n\nfunction isEntirelyOutside(ring) {\n    return ring.every(p => p.x < 0) ||\n        ring.every(p => p.x > EXTENT) ||\n        ring.every(p => p.y < 0) ||\n        ring.every(p => p.y > EXTENT);\n}\n","// @flow\nconst {createLayout} = require('../../util/struct_array');\nmodule.exports = createLayout([\n    {name: 'a_pos',          components: 2, type: 'Int16'},\n    {name: 'a_normal_ed',    components: 4, type: 'Int16'},\n], 4);\n","// This file is generated. Edit build/generate-style-code.js, then run `yarn run codegen`.\n// @flow\n/* eslint-disable */\n\nconst styleSpec = require('../../style-spec/reference/latest');\n\nconst {\n    Properties,\n    DataConstantProperty,\n    DataDrivenProperty,\n    CrossFadedProperty,\n    HeatmapColorProperty\n} = require('../properties');\n\nimport type Color from '../../style-spec/util/color';\n\n\nexport type PaintProps = {|\n    \"fill-extrusion-opacity\": DataConstantProperty<number>,\n    \"fill-extrusion-color\": DataDrivenProperty<Color>,\n    \"fill-extrusion-translate\": DataConstantProperty<[number, number]>,\n    \"fill-extrusion-translate-anchor\": DataConstantProperty<\"map\" | \"viewport\">,\n    \"fill-extrusion-pattern\": CrossFadedProperty<string>,\n    \"fill-extrusion-height\": DataDrivenProperty<number>,\n    \"fill-extrusion-base\": DataDrivenProperty<number>,\n|};\n\nconst paint: Properties<PaintProps> = new Properties({\n    \"fill-extrusion-opacity\": new DataConstantProperty(styleSpec[\"paint_fill-extrusion\"][\"fill-extrusion-opacity\"]),\n    \"fill-extrusion-color\": new DataDrivenProperty(styleSpec[\"paint_fill-extrusion\"][\"fill-extrusion-color\"]),\n    \"fill-extrusion-translate\": new DataConstantProperty(styleSpec[\"paint_fill-extrusion\"][\"fill-extrusion-translate\"]),\n    \"fill-extrusion-translate-anchor\": new DataConstantProperty(styleSpec[\"paint_fill-extrusion\"][\"fill-extrusion-translate-anchor\"]),\n    \"fill-extrusion-pattern\": new CrossFadedProperty(styleSpec[\"paint_fill-extrusion\"][\"fill-extrusion-pattern\"]),\n    \"fill-extrusion-height\": new DataDrivenProperty(styleSpec[\"paint_fill-extrusion\"][\"fill-extrusion-height\"]),\n    \"fill-extrusion-base\": new DataDrivenProperty(styleSpec[\"paint_fill-extrusion\"][\"fill-extrusion-base\"]),\n});\n\nmodule.exports = { paint };\n","// @flow\n\nconst Point = require('@mapbox/point-geometry');\n\nconst StyleLayer = require('../style_layer');\nconst LineBucket = require('../../data/bucket/line_bucket');\nconst {multiPolygonIntersectsBufferedMultiLine} = require('../../util/intersection_tests');\nconst {getMaximumPaintValue, translateDistance, translate} = require('../query_utils');\nconst properties = require('./line_style_layer_properties');\nconst {extend} = require('../../util/util');\nconst EvaluationParameters = require('../evaluation_parameters');\n\nconst {\n    Transitionable,\n    Transitioning,\n    Layout,\n    PossiblyEvaluated,\n    DataDrivenProperty\n} = require('../properties');\n\nimport type {Bucket, BucketParameters} from '../../data/bucket';\nimport type {LayoutProps, PaintProps} from './line_style_layer_properties';\n\nclass LineFloorwidthProperty extends DataDrivenProperty<number> {\n    useIntegerZoom: true;\n\n    possiblyEvaluate(value, parameters) {\n        parameters = new EvaluationParameters(Math.floor(parameters.zoom), {\n            now: parameters.now,\n            fadeDuration: parameters.fadeDuration,\n            zoomHistory: parameters.zoomHistory,\n            transition: parameters.transition\n        });\n        return super.possiblyEvaluate(value, parameters);\n    }\n\n    evaluate(value, globals, feature) {\n        globals = extend({}, globals, {zoom: Math.floor(globals.zoom)});\n        return super.evaluate(value, globals, feature);\n    }\n}\n\nconst lineFloorwidthProperty = new LineFloorwidthProperty(properties.paint.properties['line-width'].specification);\nlineFloorwidthProperty.useIntegerZoom = true;\n\nclass LineStyleLayer extends StyleLayer {\n    _unevaluatedLayout: Layout<LayoutProps>;\n    layout: PossiblyEvaluated<LayoutProps>;\n\n    _transitionablePaint: Transitionable<PaintProps>;\n    _transitioningPaint: Transitioning<PaintProps>;\n    paint: PossiblyEvaluated<PaintProps>;\n\n    constructor(layer: LayerSpecification) {\n        super(layer, properties);\n    }\n\n    recalculate(parameters: EvaluationParameters) {\n        super.recalculate(parameters);\n\n        (this.paint._values: any)['line-floorwidth'] =\n            lineFloorwidthProperty.possiblyEvaluate(this._transitioningPaint._values['line-width'].value, parameters);\n    }\n\n    createBucket(parameters: BucketParameters<*>) {\n        return new LineBucket(parameters);\n    }\n\n    queryRadius(bucket: Bucket): number {\n        const lineBucket: LineBucket = (bucket: any);\n        const width = getLineWidth(\n            getMaximumPaintValue('line-width', this, lineBucket),\n            getMaximumPaintValue('line-gap-width', this, lineBucket));\n        const offset = getMaximumPaintValue('line-offset', this, lineBucket);\n        return width / 2 + Math.abs(offset) + translateDistance(this.paint.get('line-translate'));\n    }\n\n    queryIntersectsFeature(queryGeometry: Array<Array<Point>>,\n                           feature: VectorTileFeature,\n                           geometry: Array<Array<Point>>,\n                           zoom: number,\n                           bearing: number,\n                           pixelsToTileUnits: number): boolean {\n        const translatedPolygon = translate(queryGeometry,\n            this.paint.get('line-translate'),\n            this.paint.get('line-translate-anchor'),\n            bearing, pixelsToTileUnits);\n        const halfWidth = pixelsToTileUnits / 2 * getLineWidth(\n            this.paint.get('line-width').evaluate(feature),\n            this.paint.get('line-gap-width').evaluate(feature));\n        const lineOffset = this.paint.get('line-offset').evaluate(feature);\n        if (lineOffset) {\n            geometry = offsetLine(geometry, lineOffset * pixelsToTileUnits);\n        }\n        return multiPolygonIntersectsBufferedMultiLine(translatedPolygon, geometry, halfWidth);\n    }\n}\n\nmodule.exports = LineStyleLayer;\n\nfunction getLineWidth(lineWidth, lineGapWidth) {\n    if (lineGapWidth > 0) {\n        return lineGapWidth + 2 * lineWidth;\n    } else {\n        return lineWidth;\n    }\n}\n\nfunction offsetLine(rings, offset) {\n    const newRings = [];\n    const zero = new Point(0, 0);\n    for (let k = 0; k < rings.length; k++) {\n        const ring = rings[k];\n        const newRing = [];\n        for (let i = 0; i < ring.length; i++) {\n            const a = ring[i - 1];\n            const b = ring[i];\n            const c = ring[i + 1];\n            const aToB = i === 0 ? zero : b.sub(a)._unit()._perp();\n            const bToC = i === ring.length - 1 ? zero : c.sub(b)._unit()._perp();\n            const extrude = aToB._add(bToC)._unit();\n\n            const cosHalfAngle = extrude.x * bToC.x + extrude.y * bToC.y;\n            extrude._mult(1 / cosHalfAngle);\n\n            newRing.push(extrude._mult(offset)._add(b));\n        }\n        newRings.push(newRing);\n    }\n    return newRings;\n}\n","// @flow\n\nconst {LineLayoutArray} = require('../array_types');\nconst layoutAttributes = require('./line_attributes').members;\nconst {SegmentVector} = require('../segment');\nconst {ProgramConfigurationSet} = require('../program_configuration');\nconst {TriangleIndexArray} = require('../index_array_type');\nconst loadGeometry = require('../load_geometry');\nconst EXTENT = require('../extent');\nconst vectorTileFeatureTypes = require('@mapbox/vector-tile').VectorTileFeature.types;\nconst {register} = require('../../util/web_worker_transfer');\n\nimport type {\n    Bucket,\n    BucketParameters,\n    IndexedFeature,\n    PopulateParameters\n} from '../bucket';\nimport type LineStyleLayer from '../../style/style_layer/line_style_layer';\nimport type Point from '@mapbox/point-geometry';\nimport type {Segment} from '../segment';\nimport type Context from '../../gl/context';\nimport type IndexBuffer from '../../gl/index_buffer';\nimport type VertexBuffer from '../../gl/vertex_buffer';\n\n// NOTE ON EXTRUDE SCALE:\n// scale the extrusion vector so that the normal length is this value.\n// contains the \"texture\" normals (-1..1). this is distinct from the extrude\n// normals for line joins, because the x-value remains 0 for the texture\n// normal array, while the extrude normal actually moves the vertex to create\n// the acute/bevelled line join.\nconst EXTRUDE_SCALE = 63;\n\n/*\n * Sharp corners cause dashed lines to tilt because the distance along the line\n * is the same at both the inner and outer corners. To improve the appearance of\n * dashed lines we add extra points near sharp corners so that a smaller part\n * of the line is tilted.\n *\n * COS_HALF_SHARP_CORNER controls how sharp a corner has to be for us to add an\n * extra vertex. The default is 75 degrees.\n *\n * The newly created vertices are placed SHARP_CORNER_OFFSET pixels from the corner.\n */\nconst COS_HALF_SHARP_CORNER = Math.cos(75 / 2 * (Math.PI / 180));\nconst SHARP_CORNER_OFFSET = 15;\n\n// The number of bits that is used to store the line distance in the buffer.\nconst LINE_DISTANCE_BUFFER_BITS = 15;\n\n// We don't have enough bits for the line distance as we'd like to have, so\n// use this value to scale the line distance (in tile units) down to a smaller\n// value. This lets us store longer distances while sacrificing precision.\nconst LINE_DISTANCE_SCALE = 1 / 2;\n\n// The maximum line distance, in tile units, that fits in the buffer.\nconst MAX_LINE_DISTANCE = Math.pow(2, LINE_DISTANCE_BUFFER_BITS - 1) / LINE_DISTANCE_SCALE;\n\nfunction addLineVertex(layoutVertexBuffer, point: Point, extrude: Point, round: boolean, up: boolean, dir: number, linesofar: number) {\n    layoutVertexBuffer.emplaceBack(\n        // a_pos_normal\n        point.x,\n        point.y,\n        round ? 1 : 0,\n        up ? 1 : -1,\n        // a_data\n        // add 128 to store a byte in an unsigned byte\n        Math.round(EXTRUDE_SCALE * extrude.x) + 128,\n        Math.round(EXTRUDE_SCALE * extrude.y) + 128,\n        // Encode the -1/0/1 direction value into the first two bits of .z of a_data.\n        // Combine it with the lower 6 bits of `linesofar` (shifted by 2 bites to make\n        // room for the direction value). The upper 8 bits of `linesofar` are placed in\n        // the `w` component. `linesofar` is scaled down by `LINE_DISTANCE_SCALE` so that\n        // we can store longer distances while sacrificing precision.\n        ((dir === 0 ? 0 : (dir < 0 ? -1 : 1)) + 1) | (((linesofar * LINE_DISTANCE_SCALE) & 0x3F) << 2),\n        (linesofar * LINE_DISTANCE_SCALE) >> 6);\n}\n\n\n/**\n * @private\n */\nclass LineBucket implements Bucket {\n    distance: number;\n    e1: number;\n    e2: number;\n    e3: number;\n\n    index: number;\n    zoom: number;\n    overscaling: number;\n    layers: Array<LineStyleLayer>;\n    layerIds: Array<string>;\n\n    layoutVertexArray: LineLayoutArray;\n    layoutVertexBuffer: VertexBuffer;\n\n    indexArray: TriangleIndexArray;\n    indexBuffer: IndexBuffer;\n\n    programConfigurations: ProgramConfigurationSet<LineStyleLayer>;\n    segments: SegmentVector;\n    uploaded: boolean;\n\n    constructor(options: BucketParameters<LineStyleLayer>) {\n        this.zoom = options.zoom;\n        this.overscaling = options.overscaling;\n        this.layers = options.layers;\n        this.layerIds = this.layers.map(layer => layer.id);\n        this.index = options.index;\n\n        this.layoutVertexArray = new LineLayoutArray();\n        this.indexArray = new TriangleIndexArray();\n        this.programConfigurations = new ProgramConfigurationSet(layoutAttributes, options.layers, options.zoom);\n        this.segments = new SegmentVector();\n    }\n\n    populate(features: Array<IndexedFeature>, options: PopulateParameters) {\n        for (const {feature, index, sourceLayerIndex} of features) {\n            if (this.layers[0]._featureFilter({zoom: this.zoom}, feature)) {\n                const geometry = loadGeometry(feature);\n                this.addFeature(feature, geometry);\n                options.featureIndex.insert(feature, geometry, index, sourceLayerIndex, this.index);\n            }\n        }\n    }\n\n    isEmpty() {\n        return this.layoutVertexArray.length === 0;\n    }\n\n    upload(context: Context) {\n        this.layoutVertexBuffer = context.createVertexBuffer(this.layoutVertexArray, layoutAttributes);\n        this.indexBuffer = context.createIndexBuffer(this.indexArray);\n        this.programConfigurations.upload(context);\n    }\n\n    destroy() {\n        if (!this.layoutVertexBuffer) return;\n        this.layoutVertexBuffer.destroy();\n        this.indexBuffer.destroy();\n        this.programConfigurations.destroy();\n        this.segments.destroy();\n    }\n\n    addFeature(feature: VectorTileFeature, geometry: Array<Array<Point>>) {\n        const layout = this.layers[0].layout;\n        const join = layout.get('line-join').evaluate(feature);\n        const cap = layout.get('line-cap');\n        const miterLimit = layout.get('line-miter-limit');\n        const roundLimit = layout.get('line-round-limit');\n\n        for (const line of geometry) {\n            this.addLine(line, feature, join, cap, miterLimit, roundLimit);\n        }\n    }\n\n    addLine(vertices: Array<Point>, feature: VectorTileFeature, join: string, cap: string, miterLimit: number, roundLimit: number) {\n        const isPolygon = vectorTileFeatureTypes[feature.type] === 'Polygon';\n\n        // If the line has duplicate vertices at the ends, adjust start/length to remove them.\n        let len = vertices.length;\n        while (len >= 2 && vertices[len - 1].equals(vertices[len - 2])) {\n            len--;\n        }\n        let first = 0;\n        while (first < len - 1 && vertices[first].equals(vertices[first + 1])) {\n            first++;\n        }\n\n        // Ignore invalid geometry.\n        if (len < (isPolygon ? 3 : 2)) return;\n\n        if (join === 'bevel') miterLimit = 1.05;\n\n        const sharpCornerOffset = SHARP_CORNER_OFFSET * (EXTENT / (512 * this.overscaling));\n\n        const firstVertex = vertices[first];\n\n        // we could be more precise, but it would only save a negligible amount of space\n        const segment = this.segments.prepareSegment(len * 10, this.layoutVertexArray, this.indexArray);\n\n        this.distance = 0;\n\n        const beginCap = cap,\n            endCap = isPolygon ? 'butt' : cap;\n        let startOfLine = true;\n        let currentVertex;\n        let prevVertex = ((undefined: any): Point);\n        let nextVertex = ((undefined: any): Point);\n        let prevNormal = ((undefined: any): Point);\n        let nextNormal = ((undefined: any): Point);\n        let offsetA;\n        let offsetB;\n\n        // the last three vertices added\n        this.e1 = this.e2 = this.e3 = -1;\n\n        if (isPolygon) {\n            currentVertex = vertices[len - 2];\n            nextNormal = firstVertex.sub(currentVertex)._unit()._perp();\n        }\n\n        for (let i = first; i < len; i++) {\n\n            nextVertex = isPolygon && i === len - 1 ?\n                vertices[first + 1] : // if the line is closed, we treat the last vertex like the first\n                vertices[i + 1]; // just the next vertex\n\n            // if two consecutive vertices exist, skip the current one\n            if (nextVertex && vertices[i].equals(nextVertex)) continue;\n\n            if (nextNormal) prevNormal = nextNormal;\n            if (currentVertex) prevVertex = currentVertex;\n\n            currentVertex = vertices[i];\n\n            // Calculate the normal towards the next vertex in this line. In case\n            // there is no next vertex, pretend that the line is continuing straight,\n            // meaning that we are just using the previous normal.\n            nextNormal = nextVertex ? nextVertex.sub(currentVertex)._unit()._perp() : prevNormal;\n\n            // If we still don't have a previous normal, this is the beginning of a\n            // non-closed line, so we're doing a straight \"join\".\n            prevNormal = prevNormal || nextNormal;\n\n            // Determine the normal of the join extrusion. It is the angle bisector\n            // of the segments between the previous line and the next line.\n            // In the case of 180° angles, the prev and next normals cancel each other out:\n            // prevNormal + nextNormal = (0, 0), its magnitude is 0, so the unit vector would be\n            // undefined. In that case, we're keeping the joinNormal at (0, 0), so that the cosHalfAngle\n            // below will also become 0 and miterLength will become Infinity.\n            let joinNormal = prevNormal.add(nextNormal);\n            if (joinNormal.x !== 0 || joinNormal.y !== 0) {\n                joinNormal._unit();\n            }\n            /*  joinNormal     prevNormal\n             *             ↖      ↑\n             *                .________. prevVertex\n             *                |\n             * nextNormal  ←  |  currentVertex\n             *                |\n             *     nextVertex !\n             *\n             */\n\n            // Calculate the length of the miter (the ratio of the miter to the width).\n            // Find the cosine of the angle between the next and join normals\n            // using dot product. The inverse of that is the miter length.\n            const cosHalfAngle = joinNormal.x * nextNormal.x + joinNormal.y * nextNormal.y;\n            const miterLength = cosHalfAngle !== 0 ? 1 / cosHalfAngle : Infinity;\n\n            const isSharpCorner = cosHalfAngle < COS_HALF_SHARP_CORNER && prevVertex && nextVertex;\n\n            if (isSharpCorner && i > first) {\n                const prevSegmentLength = currentVertex.dist(prevVertex);\n                if (prevSegmentLength > 2 * sharpCornerOffset) {\n                    const newPrevVertex = currentVertex.sub(currentVertex.sub(prevVertex)._mult(sharpCornerOffset / prevSegmentLength)._round());\n                    this.distance += newPrevVertex.dist(prevVertex);\n                    this.addCurrentVertex(newPrevVertex, this.distance, prevNormal.mult(1), 0, 0, false, segment);\n                    prevVertex = newPrevVertex;\n                }\n            }\n\n            // The join if a middle vertex, otherwise the cap.\n            const middleVertex = prevVertex && nextVertex;\n            let currentJoin = middleVertex ? join : nextVertex ? beginCap : endCap;\n\n            if (middleVertex && currentJoin === 'round') {\n                if (miterLength < roundLimit) {\n                    currentJoin = 'miter';\n                } else if (miterLength <= 2) {\n                    currentJoin = 'fakeround';\n                }\n            }\n\n            if (currentJoin === 'miter' && miterLength > miterLimit) {\n                currentJoin = 'bevel';\n            }\n\n            if (currentJoin === 'bevel') {\n                // The maximum extrude length is 128 / 63 = 2 times the width of the line\n                // so if miterLength >= 2 we need to draw a different type of bevel here.\n                if (miterLength > 2) currentJoin = 'flipbevel';\n\n                // If the miterLength is really small and the line bevel wouldn't be visible,\n                // just draw a miter join to save a triangle.\n                if (miterLength < miterLimit) currentJoin = 'miter';\n            }\n\n            // Calculate how far along the line the currentVertex is\n            if (prevVertex) this.distance += currentVertex.dist(prevVertex);\n\n            if (currentJoin === 'miter') {\n\n                joinNormal._mult(miterLength);\n                this.addCurrentVertex(currentVertex, this.distance, joinNormal, 0, 0, false, segment);\n\n            } else if (currentJoin === 'flipbevel') {\n                // miter is too big, flip the direction to make a beveled join\n\n                if (miterLength > 100) {\n                    // Almost parallel lines\n                    joinNormal = nextNormal.clone().mult(-1);\n\n                } else {\n                    const direction = prevNormal.x * nextNormal.y - prevNormal.y * nextNormal.x > 0 ? -1 : 1;\n                    const bevelLength = miterLength * prevNormal.add(nextNormal).mag() / prevNormal.sub(nextNormal).mag();\n                    joinNormal._perp()._mult(bevelLength * direction);\n                }\n                this.addCurrentVertex(currentVertex, this.distance, joinNormal, 0, 0, false, segment);\n                this.addCurrentVertex(currentVertex, this.distance, joinNormal.mult(-1), 0, 0, false, segment);\n\n            } else if (currentJoin === 'bevel' || currentJoin === 'fakeround') {\n                const lineTurnsLeft = (prevNormal.x * nextNormal.y - prevNormal.y * nextNormal.x) > 0;\n                const offset = -Math.sqrt(miterLength * miterLength - 1);\n                if (lineTurnsLeft) {\n                    offsetB = 0;\n                    offsetA = offset;\n                } else {\n                    offsetA = 0;\n                    offsetB = offset;\n                }\n\n                // Close previous segment with a bevel\n                if (!startOfLine) {\n                    this.addCurrentVertex(currentVertex, this.distance, prevNormal, offsetA, offsetB, false, segment);\n                }\n\n                if (currentJoin === 'fakeround') {\n                    // The join angle is sharp enough that a round join would be visible.\n                    // Bevel joins fill the gap between segments with a single pie slice triangle.\n                    // Create a round join by adding multiple pie slices. The join isn't actually round, but\n                    // it looks like it is at the sizes we render lines at.\n\n                    // Add more triangles for sharper angles.\n                    // This math is just a good enough approximation. It isn't \"correct\".\n                    const n = Math.floor((0.5 - (cosHalfAngle - 0.5)) * 8);\n                    let approxFractionalJoinNormal;\n\n                    for (let m = 0; m < n; m++) {\n                        approxFractionalJoinNormal = nextNormal.mult((m + 1) / (n + 1))._add(prevNormal)._unit();\n                        this.addPieSliceVertex(currentVertex, this.distance, approxFractionalJoinNormal, lineTurnsLeft, segment);\n                    }\n\n                    this.addPieSliceVertex(currentVertex, this.distance, joinNormal, lineTurnsLeft, segment);\n\n                    for (let k = n - 1; k >= 0; k--) {\n                        approxFractionalJoinNormal = prevNormal.mult((k + 1) / (n + 1))._add(nextNormal)._unit();\n                        this.addPieSliceVertex(currentVertex, this.distance, approxFractionalJoinNormal, lineTurnsLeft, segment);\n                    }\n                }\n\n                // Start next segment\n                if (nextVertex) {\n                    this.addCurrentVertex(currentVertex, this.distance, nextNormal, -offsetA, -offsetB, false, segment);\n                }\n\n            } else if (currentJoin === 'butt') {\n                if (!startOfLine) {\n                    // Close previous segment with a butt\n                    this.addCurrentVertex(currentVertex, this.distance, prevNormal, 0, 0, false, segment);\n                }\n\n                // Start next segment with a butt\n                if (nextVertex) {\n                    this.addCurrentVertex(currentVertex, this.distance, nextNormal, 0, 0, false, segment);\n                }\n\n            } else if (currentJoin === 'square') {\n\n                if (!startOfLine) {\n                    // Close previous segment with a square cap\n                    this.addCurrentVertex(currentVertex, this.distance, prevNormal, 1, 1, false, segment);\n\n                    // The segment is done. Unset vertices to disconnect segments.\n                    this.e1 = this.e2 = -1;\n                }\n\n                // Start next segment\n                if (nextVertex) {\n                    this.addCurrentVertex(currentVertex, this.distance, nextNormal, -1, -1, false, segment);\n                }\n\n            } else if (currentJoin === 'round') {\n\n                if (!startOfLine) {\n                    // Close previous segment with butt\n                    this.addCurrentVertex(currentVertex, this.distance, prevNormal, 0, 0, false, segment);\n\n                    // Add round cap or linejoin at end of segment\n                    this.addCurrentVertex(currentVertex, this.distance, prevNormal, 1, 1, true, segment);\n\n                    // The segment is done. Unset vertices to disconnect segments.\n                    this.e1 = this.e2 = -1;\n                }\n\n\n                // Start next segment with a butt\n                if (nextVertex) {\n                    // Add round cap before first segment\n                    this.addCurrentVertex(currentVertex, this.distance, nextNormal, -1, -1, true, segment);\n\n                    this.addCurrentVertex(currentVertex, this.distance, nextNormal, 0, 0, false, segment);\n                }\n            }\n\n            if (isSharpCorner && i < len - 1) {\n                const nextSegmentLength = currentVertex.dist(nextVertex);\n                if (nextSegmentLength > 2 * sharpCornerOffset) {\n                    const newCurrentVertex = currentVertex.add(nextVertex.sub(currentVertex)._mult(sharpCornerOffset / nextSegmentLength)._round());\n                    this.distance += newCurrentVertex.dist(currentVertex);\n                    this.addCurrentVertex(newCurrentVertex, this.distance, nextNormal.mult(1), 0, 0, false, segment);\n                    currentVertex = newCurrentVertex;\n                }\n            }\n\n            startOfLine = false;\n        }\n\n        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, feature);\n    }\n\n    /**\n     * Add two vertices to the buffers.\n     *\n     * @param {Object} currentVertex the line vertex to add buffer vertices for\n     * @param {number} distance the distance from the beginning of the line to the vertex\n     * @param {number} endLeft extrude to shift the left vertex along the line\n     * @param {number} endRight extrude to shift the left vertex along the line\n     * @param {boolean} round whether this is a round cap\n     * @private\n     */\n    addCurrentVertex(currentVertex: Point,\n                     distance: number,\n                     normal: Point,\n                     endLeft: number,\n                     endRight: number,\n                     round: boolean,\n                     segment: Segment) {\n        let extrude;\n        const layoutVertexArray = this.layoutVertexArray;\n        const indexArray = this.indexArray;\n\n        extrude = normal.clone();\n        if (endLeft) extrude._sub(normal.perp()._mult(endLeft));\n        addLineVertex(layoutVertexArray, currentVertex, extrude, round, false, endLeft, distance);\n        this.e3 = segment.vertexLength++;\n        if (this.e1 >= 0 && this.e2 >= 0) {\n            indexArray.emplaceBack(this.e1, this.e2, this.e3);\n            segment.primitiveLength++;\n        }\n        this.e1 = this.e2;\n        this.e2 = this.e3;\n\n        extrude = normal.mult(-1);\n        if (endRight) extrude._sub(normal.perp()._mult(endRight));\n        addLineVertex(layoutVertexArray, currentVertex, extrude, round, true, -endRight, distance);\n        this.e3 = segment.vertexLength++;\n        if (this.e1 >= 0 && this.e2 >= 0) {\n            indexArray.emplaceBack(this.e1, this.e2, this.e3);\n            segment.primitiveLength++;\n        }\n        this.e1 = this.e2;\n        this.e2 = this.e3;\n\n        // There is a maximum \"distance along the line\" that we can store in the buffers.\n        // When we get close to the distance, reset it to zero and add the vertex again with\n        // a distance of zero. The max distance is determined by the number of bits we allocate\n        // to `linesofar`.\n        if (distance > MAX_LINE_DISTANCE / 2) {\n            this.distance = 0;\n            this.addCurrentVertex(currentVertex, this.distance, normal, endLeft, endRight, round, segment);\n        }\n    }\n\n    /**\n     * Add a single new vertex and a triangle using two previous vertices.\n     * This adds a pie slice triangle near a join to simulate round joins\n     *\n     * @param currentVertex the line vertex to add buffer vertices for\n     * @param distance the distance from the beggining of the line to the vertex\n     * @param extrude the offset of the new vertex from the currentVertex\n     * @param lineTurnsLeft whether the line is turning left or right at this angle\n     * @private\n     */\n    addPieSliceVertex(currentVertex: Point,\n                      distance: number,\n                      extrude: Point,\n                      lineTurnsLeft: boolean,\n                      segment: Segment) {\n        extrude = extrude.mult(lineTurnsLeft ? -1 : 1);\n        const layoutVertexArray = this.layoutVertexArray;\n        const indexArray = this.indexArray;\n\n        addLineVertex(layoutVertexArray, currentVertex, extrude, false, lineTurnsLeft, 0, distance);\n        this.e3 = segment.vertexLength++;\n        if (this.e1 >= 0 && this.e2 >= 0) {\n            indexArray.emplaceBack(this.e1, this.e2, this.e3);\n            segment.primitiveLength++;\n        }\n\n        if (lineTurnsLeft) {\n            this.e2 = this.e3;\n        } else {\n            this.e1 = this.e3;\n        }\n    }\n}\n\nregister('LineBucket', LineBucket, {omit: ['layers']});\n\nmodule.exports = LineBucket;\n","// @flow\nconst {createLayout} = require('../../util/struct_array');\nmodule.exports = createLayout([\n    {name: 'a_pos_normal', components: 4, type: 'Int16'},\n    {name: 'a_data', components: 4, type: 'Uint8'}\n], 4);\n","'use strict';\n\nvar VectorTileLayer = require('./vectortilelayer');\n\nmodule.exports = VectorTile;\n\nfunction VectorTile(pbf, end) {\n    this.layers = pbf.readFields(readTile, {}, end);\n}\n\nfunction readTile(tag, layers, pbf) {\n    if (tag === 3) {\n        var layer = new VectorTileLayer(pbf, pbf.readVarint() + pbf.pos);\n        if (layer.length) layers[layer.name] = layer;\n    }\n}\n\n","// This file is generated. Edit build/generate-style-code.js, then run `yarn run codegen`.\n// @flow\n/* eslint-disable */\n\nconst styleSpec = require('../../style-spec/reference/latest');\n\nconst {\n    Properties,\n    DataConstantProperty,\n    DataDrivenProperty,\n    CrossFadedProperty,\n    HeatmapColorProperty\n} = require('../properties');\n\nimport type Color from '../../style-spec/util/color';\n\nexport type LayoutProps = {|\n    \"line-cap\": DataConstantProperty<\"butt\" | \"round\" | \"square\">,\n    \"line-join\": DataDrivenProperty<\"bevel\" | \"round\" | \"miter\">,\n    \"line-miter-limit\": DataConstantProperty<number>,\n    \"line-round-limit\": DataConstantProperty<number>,\n|};\n\nconst layout: Properties<LayoutProps> = new Properties({\n    \"line-cap\": new DataConstantProperty(styleSpec[\"layout_line\"][\"line-cap\"]),\n    \"line-join\": new DataDrivenProperty(styleSpec[\"layout_line\"][\"line-join\"]),\n    \"line-miter-limit\": new DataConstantProperty(styleSpec[\"layout_line\"][\"line-miter-limit\"]),\n    \"line-round-limit\": new DataConstantProperty(styleSpec[\"layout_line\"][\"line-round-limit\"]),\n});\n\nexport type PaintProps = {|\n    \"line-opacity\": DataDrivenProperty<number>,\n    \"line-color\": DataDrivenProperty<Color>,\n    \"line-translate\": DataConstantProperty<[number, number]>,\n    \"line-translate-anchor\": DataConstantProperty<\"map\" | \"viewport\">,\n    \"line-width\": DataDrivenProperty<number>,\n    \"line-gap-width\": DataDrivenProperty<number>,\n    \"line-offset\": DataDrivenProperty<number>,\n    \"line-blur\": DataDrivenProperty<number>,\n    \"line-dasharray\": CrossFadedProperty<Array<number>>,\n    \"line-pattern\": CrossFadedProperty<string>,\n|};\n\nconst paint: Properties<PaintProps> = new Properties({\n    \"line-opacity\": new DataDrivenProperty(styleSpec[\"paint_line\"][\"line-opacity\"]),\n    \"line-color\": new DataDrivenProperty(styleSpec[\"paint_line\"][\"line-color\"]),\n    \"line-translate\": new DataConstantProperty(styleSpec[\"paint_line\"][\"line-translate\"]),\n    \"line-translate-anchor\": new DataConstantProperty(styleSpec[\"paint_line\"][\"line-translate-anchor\"]),\n    \"line-width\": new DataDrivenProperty(styleSpec[\"paint_line\"][\"line-width\"]),\n    \"line-gap-width\": new DataDrivenProperty(styleSpec[\"paint_line\"][\"line-gap-width\"]),\n    \"line-offset\": new DataDrivenProperty(styleSpec[\"paint_line\"][\"line-offset\"]),\n    \"line-blur\": new DataDrivenProperty(styleSpec[\"paint_line\"][\"line-blur\"]),\n    \"line-dasharray\": new CrossFadedProperty(styleSpec[\"paint_line\"][\"line-dasharray\"]),\n    \"line-pattern\": new CrossFadedProperty(styleSpec[\"paint_line\"][\"line-pattern\"]),\n});\n\nmodule.exports = { paint, layout };\n","// @flow\n\nclass ZoomHistory {\n    lastZoom: number;\n    lastFloorZoom: number;\n    lastIntegerZoom: number;\n    lastIntegerZoomTime: number;\n    first: boolean;\n\n    constructor() {\n        this.first = true;\n    }\n\n    update(z: number, now: number) {\n        const floorZ = Math.floor(z);\n\n        if (this.first) {\n            this.first = false;\n            this.lastIntegerZoom = floorZ;\n            this.lastIntegerZoomTime = 0;\n            this.lastZoom = z;\n            this.lastFloorZoom = floorZ;\n            return true;\n        }\n\n        if (this.lastFloorZoom > floorZ) {\n            this.lastIntegerZoom = floorZ + 1;\n            this.lastIntegerZoomTime = now;\n        } else if (this.lastFloorZoom < floorZ) {\n            this.lastIntegerZoom = floorZ;\n            this.lastIntegerZoomTime = now;\n        }\n\n        if (z !== this.lastZoom) {\n            this.lastZoom = z;\n            this.lastFloorZoom = floorZ;\n            return true;\n        }\n\n        return false;\n    }\n}\n\nmodule.exports = ZoomHistory;\n","// @flow\n\nconst StyleLayer = require('../style_layer');\nconst SymbolBucket = require('../../data/bucket/symbol_bucket');\nconst resolveTokens = require('../../util/token');\nconst {isExpression} = require('../../style-spec/expression');\nconst assert = require('assert');\nconst properties = require('./symbol_style_layer_properties');\n\nconst {\n    Transitionable,\n    Transitioning,\n    Layout,\n    PossiblyEvaluated\n} = require('../properties');\n\nimport type {BucketParameters} from '../../data/bucket';\nimport type {LayoutProps, PaintProps} from './symbol_style_layer_properties';\nimport type {Feature} from '../../style-spec/expression';\nimport type EvaluationParameters from '../evaluation_parameters';\n\nclass SymbolStyleLayer extends StyleLayer {\n    _unevaluatedLayout: Layout<LayoutProps>;\n    layout: PossiblyEvaluated<LayoutProps>;\n\n    _transitionablePaint: Transitionable<PaintProps>;\n    _transitioningPaint: Transitioning<PaintProps>;\n    paint: PossiblyEvaluated<PaintProps>;\n\n    constructor(layer: LayerSpecification) {\n        super(layer, properties);\n    }\n\n    recalculate(parameters: EvaluationParameters) {\n        super.recalculate(parameters);\n\n        if (this.layout.get('icon-rotation-alignment') === 'auto') {\n            if (this.layout.get('symbol-placement') === 'line') {\n                this.layout._values['icon-rotation-alignment'] = 'map';\n            } else {\n                this.layout._values['icon-rotation-alignment'] = 'viewport';\n            }\n        }\n\n        if (this.layout.get('text-rotation-alignment') === 'auto') {\n            if (this.layout.get('symbol-placement') === 'line') {\n                this.layout._values['text-rotation-alignment'] = 'map';\n            } else {\n                this.layout._values['text-rotation-alignment'] = 'viewport';\n            }\n        }\n\n        // If unspecified, `*-pitch-alignment` inherits `*-rotation-alignment`\n        if (this.layout.get('text-pitch-alignment') === 'auto') {\n            this.layout._values['text-pitch-alignment'] = this.layout.get('text-rotation-alignment');\n        }\n        if (this.layout.get('icon-pitch-alignment') === 'auto') {\n            this.layout._values['icon-pitch-alignment'] = this.layout.get('icon-rotation-alignment');\n        }\n    }\n\n    getValueAndResolveTokens(name: *, feature: Feature) {\n        const value = this.layout.get(name).evaluate(feature);\n        const unevaluated = this._unevaluatedLayout._values[name];\n        if (!unevaluated.isDataDriven() && !isExpression(unevaluated.value)) {\n            return resolveTokens(feature.properties, value);\n        }\n\n        return value;\n    }\n\n    createBucket(parameters: BucketParameters<*>) {\n        return new SymbolBucket(parameters);\n    }\n\n    queryRadius(): number {\n        return 0;\n    }\n\n    queryIntersectsFeature(): boolean {\n        assert(false); // Should take a different path in FeatureIndex\n        return false;\n    }\n}\n\nmodule.exports = SymbolStyleLayer;\n","// @flow\n\nconst {createLayout} = require('../../util/struct_array');\nimport type {StructArrayLayout} from '../../util/struct_array';\n\nconst symbolLayoutAttributes = createLayout([\n    {name: 'a_pos_offset',  components: 4, type: 'Int16'},\n    {name: 'a_data',        components: 4, type: 'Uint16'}\n]);\n\nconst dynamicLayoutAttributes = createLayout([\n    { name: 'a_projected_pos', components: 3, type: 'Float32' }\n], 4);\n\nconst placementOpacityAttributes = createLayout([\n    { name: 'a_fade_opacity', components: 1, type: 'Uint32' }\n], 4);\n\nconst collisionVertexAttributes = createLayout([\n    { name: 'a_placed', components: 2, type: 'Uint8' }\n], 4);\n\nconst symbolAttributes: {[string]: StructArrayLayout} = {\n    symbolLayoutAttributes,\n    dynamicLayoutAttributes,\n    placementOpacityAttributes,\n    collisionVertexAttributes,\n    collisionBox: createLayout([\n        // the box is centered around the anchor point\n        { type: 'Int16', name: 'anchorPointX' },\n        { type: 'Int16', name: 'anchorPointY' },\n\n        // distances to the edges from the anchor\n        { type: 'Int16', name: 'x1' },\n        { type: 'Int16', name: 'y1' },\n        { type: 'Int16', name: 'x2' },\n        { type: 'Int16', name: 'y2' },\n\n        // the index of the feature in the original vectortile\n        { type: 'Uint32', name: 'featureIndex' },\n        // the source layer the feature appears in\n        { type: 'Uint16', name: 'sourceLayerIndex' },\n        // the bucket the feature appears in\n        { type: 'Uint16', name: 'bucketIndex' },\n\n        // collision circles for lines store their distance to the anchor in tile units\n        // so that they can be ignored if the projected label doesn't extend into\n        // the box area\n        { type: 'Int16', name: 'radius' },\n        { type: 'Int16', name: 'signedDistanceFromAnchor' }\n    ]),\n    collisionBoxLayout: createLayout([ // used to render collision boxes for debugging purposes\n        {name: 'a_pos',        components: 2, type: 'Int16'},\n        {name: 'a_anchor_pos', components: 2, type: 'Int16'},\n        {name: 'a_extrude',    components: 2, type: 'Int16'}\n    ], 4),\n    collisionCircleLayout: createLayout([ // used to render collision circles for debugging purposes\n        {name: 'a_pos',        components: 2, type: 'Int16'},\n        {name: 'a_anchor_pos', components: 2, type: 'Int16'},\n        {name: 'a_extrude',    components: 2, type: 'Int16'}\n    ], 4),\n    placement: createLayout([\n        { type: 'Int16', name: 'anchorX' },\n        { type: 'Int16', name: 'anchorY' },\n        { type: 'Uint16', name: 'glyphStartIndex' },\n        { type: 'Uint16', name: 'numGlyphs' },\n        { type: 'Uint32', name: 'vertexStartIndex' },\n        { type: 'Uint32', name: 'lineStartIndex' },\n        { type: 'Uint32', name: 'lineLength' },\n        { type: 'Uint16', name: 'segment' },\n        { type: 'Uint16', name: 'lowerSize' },\n        { type: 'Uint16', name: 'upperSize' },\n        { type: 'Float32', name: 'lineOffsetX' },\n        { type: 'Float32', name: 'lineOffsetY' },\n        { type: 'Uint8', name: 'writingMode' },\n        { type: 'Uint8', name: 'hidden' }\n    ]),\n    glyphOffset: createLayout([\n        { type: 'Float32', name: 'offsetX' }\n    ]),\n    lineVertex: createLayout([\n        { type: 'Int16', name: 'x' },\n        { type: 'Int16', name: 'y' },\n        { type: 'Int16', name: 'tileUnitDistanceFromAnchor' }\n    ])\n};\n\nmodule.exports = symbolAttributes;\n","// @flow\n\nconst rtlTextPlugin = require('../source/rtl_text_plugin');\n\nimport type SymbolStyleLayer from '../style/style_layer/symbol_style_layer';\nimport type {Feature} from '../style-spec/expression';\n\nmodule.exports = function(text: string, layer: SymbolStyleLayer, feature: Feature) {\n    const transform = layer.layout.get('text-transform').evaluate(feature);\n    if (transform === 'uppercase') {\n        text = text.toLocaleUpperCase();\n    } else if (transform === 'lowercase') {\n        text = text.toLocaleLowerCase();\n    }\n\n    if (rtlTextPlugin.applyArabicShaping) {\n        text = rtlTextPlugin.applyArabicShaping(text);\n    }\n\n    return text;\n};\n","// @flow\n\nimport type {SymbolFeature} from '../data/bucket/symbol_bucket';\n\nmodule.exports = function (features: Array<SymbolFeature>) {\n    const leftIndex: {[string]: number} = {};\n    const rightIndex: {[string]: number} = {};\n    const mergedFeatures = [];\n    let mergedIndex = 0;\n\n    function add(k) {\n        mergedFeatures.push(features[k]);\n        mergedIndex++;\n    }\n\n    function mergeFromRight(leftKey: string, rightKey: string, geom) {\n        const i = rightIndex[leftKey];\n        delete rightIndex[leftKey];\n        rightIndex[rightKey] = i;\n\n        mergedFeatures[i].geometry[0].pop();\n        mergedFeatures[i].geometry[0] = mergedFeatures[i].geometry[0].concat(geom[0]);\n        return i;\n    }\n\n    function mergeFromLeft(leftKey: string, rightKey: string, geom) {\n        const i = leftIndex[rightKey];\n        delete leftIndex[rightKey];\n        leftIndex[leftKey] = i;\n\n        mergedFeatures[i].geometry[0].shift();\n        mergedFeatures[i].geometry[0] = geom[0].concat(mergedFeatures[i].geometry[0]);\n        return i;\n    }\n\n    function getKey(text, geom, onRight) {\n        const point = onRight ? geom[0][geom[0].length - 1] : geom[0][0];\n        return `${text}:${point.x}:${point.y}`;\n    }\n\n    for (let k = 0; k < features.length; k++) {\n        const feature = features[k];\n        const geom = feature.geometry;\n        const text = feature.text;\n\n        if (!text) {\n            add(k);\n            continue;\n        }\n\n        const leftKey = getKey(text, geom),\n            rightKey = getKey(text, geom, true);\n\n        if ((leftKey in rightIndex) && (rightKey in leftIndex) && (rightIndex[leftKey] !== leftIndex[rightKey])) {\n            // found lines with the same text adjacent to both ends of the current line, merge all three\n            const j = mergeFromLeft(leftKey, rightKey, geom);\n            const i = mergeFromRight(leftKey, rightKey, mergedFeatures[j].geometry);\n\n            delete leftIndex[leftKey];\n            delete rightIndex[rightKey];\n\n            rightIndex[getKey(text, mergedFeatures[i].geometry, true)] = i;\n            mergedFeatures[j].geometry = (null: any);\n\n        } else if (leftKey in rightIndex) {\n            // found mergeable line adjacent to the start of the current line, merge\n            mergeFromRight(leftKey, rightKey, geom);\n\n        } else if (rightKey in leftIndex) {\n            // found mergeable line adjacent to the end of the current line, merge\n            mergeFromLeft(leftKey, rightKey, geom);\n\n        } else {\n            // no adjacent lines, add as a new item\n            add(k);\n            leftIndex[leftKey] = mergedIndex - 1;\n            rightIndex[rightKey] = mergedIndex - 1;\n        }\n    }\n\n    return mergedFeatures.filter((f) => f.geometry);\n};\n","// @flow\n\n// The following table comes from <http://www.unicode.org/Public/10.0.0/ucd/Blocks.txt>.\n// Keep it synchronized with <http://www.unicode.org/Public/UCD/latest/ucd/Blocks.txt>.\n\ntype UnicodeBlockLookup = {[key: string]: (char: number) => boolean};\n\nconst unicodeBlockLookup: UnicodeBlockLookup = {\n    // 'Basic Latin': (char) => char >= 0x0000 && char <= 0x007F,\n    'Latin-1 Supplement': (char) => char >= 0x0080 && char <= 0x00FF,\n    // 'Latin Extended-A': (char) => char >= 0x0100 && char <= 0x017F,\n    // 'Latin Extended-B': (char) => char >= 0x0180 && char <= 0x024F,\n    // 'IPA Extensions': (char) => char >= 0x0250 && char <= 0x02AF,\n    // 'Spacing Modifier Letters': (char) => char >= 0x02B0 && char <= 0x02FF,\n    // 'Combining Diacritical Marks': (char) => char >= 0x0300 && char <= 0x036F,\n    // 'Greek and Coptic': (char) => char >= 0x0370 && char <= 0x03FF,\n    // 'Cyrillic': (char) => char >= 0x0400 && char <= 0x04FF,\n    // 'Cyrillic Supplement': (char) => char >= 0x0500 && char <= 0x052F,\n    // 'Armenian': (char) => char >= 0x0530 && char <= 0x058F,\n    //'Hebrew': (char) => char >= 0x0590 && char <= 0x05FF,\n    'Arabic': (char) => char >= 0x0600 && char <= 0x06FF,\n    //'Syriac': (char) => char >= 0x0700 && char <= 0x074F,\n    'Arabic Supplement': (char) => char >= 0x0750 && char <= 0x077F,\n    // 'Thaana': (char) => char >= 0x0780 && char <= 0x07BF,\n    // 'NKo': (char) => char >= 0x07C0 && char <= 0x07FF,\n    // 'Samaritan': (char) => char >= 0x0800 && char <= 0x083F,\n    // 'Mandaic': (char) => char >= 0x0840 && char <= 0x085F,\n    // 'Syriac Supplement': (char) => char >= 0x0860 && char <= 0x086F,\n    'Arabic Extended-A': (char) => char >= 0x08A0 && char <= 0x08FF,\n    // 'Devanagari': (char) => char >= 0x0900 && char <= 0x097F,\n    // 'Bengali': (char) => char >= 0x0980 && char <= 0x09FF,\n    // 'Gurmukhi': (char) => char >= 0x0A00 && char <= 0x0A7F,\n    // 'Gujarati': (char) => char >= 0x0A80 && char <= 0x0AFF,\n    // 'Oriya': (char) => char >= 0x0B00 && char <= 0x0B7F,\n    // 'Tamil': (char) => char >= 0x0B80 && char <= 0x0BFF,\n    // 'Telugu': (char) => char >= 0x0C00 && char <= 0x0C7F,\n    // 'Kannada': (char) => char >= 0x0C80 && char <= 0x0CFF,\n    // 'Malayalam': (char) => char >= 0x0D00 && char <= 0x0D7F,\n    // 'Sinhala': (char) => char >= 0x0D80 && char <= 0x0DFF,\n    // 'Thai': (char) => char >= 0x0E00 && char <= 0x0E7F,\n    // 'Lao': (char) => char >= 0x0E80 && char <= 0x0EFF,\n    // 'Tibetan': (char) => char >= 0x0F00 && char <= 0x0FFF,\n    // 'Myanmar': (char) => char >= 0x1000 && char <= 0x109F,\n    // 'Georgian': (char) => char >= 0x10A0 && char <= 0x10FF,\n    'Hangul Jamo': (char) => char >= 0x1100 && char <= 0x11FF,\n    // 'Ethiopic': (char) => char >= 0x1200 && char <= 0x137F,\n    // 'Ethiopic Supplement': (char) => char >= 0x1380 && char <= 0x139F,\n    // 'Cherokee': (char) => char >= 0x13A0 && char <= 0x13FF,\n    'Unified Canadian Aboriginal Syllabics': (char) => char >= 0x1400 && char <= 0x167F,\n    // 'Ogham': (char) => char >= 0x1680 && char <= 0x169F,\n    // 'Runic': (char) => char >= 0x16A0 && char <= 0x16FF,\n    // 'Tagalog': (char) => char >= 0x1700 && char <= 0x171F,\n    // 'Hanunoo': (char) => char >= 0x1720 && char <= 0x173F,\n    // 'Buhid': (char) => char >= 0x1740 && char <= 0x175F,\n    // 'Tagbanwa': (char) => char >= 0x1760 && char <= 0x177F,\n    // 'Khmer': (char) => char >= 0x1780 && char <= 0x17FF,\n    // 'Mongolian': (char) => char >= 0x1800 && char <= 0x18AF,\n    'Unified Canadian Aboriginal Syllabics Extended': (char) => char >= 0x18B0 && char <= 0x18FF,\n    // 'Limbu': (char) => char >= 0x1900 && char <= 0x194F,\n    // 'Tai Le': (char) => char >= 0x1950 && char <= 0x197F,\n    // 'New Tai Lue': (char) => char >= 0x1980 && char <= 0x19DF,\n    // 'Khmer Symbols': (char) => char >= 0x19E0 && char <= 0x19FF,\n    // 'Buginese': (char) => char >= 0x1A00 && char <= 0x1A1F,\n    // 'Tai Tham': (char) => char >= 0x1A20 && char <= 0x1AAF,\n    // 'Combining Diacritical Marks Extended': (char) => char >= 0x1AB0 && char <= 0x1AFF,\n    // 'Balinese': (char) => char >= 0x1B00 && char <= 0x1B7F,\n    // 'Sundanese': (char) => char >= 0x1B80 && char <= 0x1BBF,\n    // 'Batak': (char) => char >= 0x1BC0 && char <= 0x1BFF,\n    // 'Lepcha': (char) => char >= 0x1C00 && char <= 0x1C4F,\n    // 'Ol Chiki': (char) => char >= 0x1C50 && char <= 0x1C7F,\n    // 'Cyrillic Extended-C': (char) => char >= 0x1C80 && char <= 0x1C8F,\n    // 'Sundanese Supplement': (char) => char >= 0x1CC0 && char <= 0x1CCF,\n    // 'Vedic Extensions': (char) => char >= 0x1CD0 && char <= 0x1CFF,\n    // 'Phonetic Extensions': (char) => char >= 0x1D00 && char <= 0x1D7F,\n    // 'Phonetic Extensions Supplement': (char) => char >= 0x1D80 && char <= 0x1DBF,\n    // 'Combining Diacritical Marks Supplement': (char) => char >= 0x1DC0 && char <= 0x1DFF,\n    // 'Latin Extended Additional': (char) => char >= 0x1E00 && char <= 0x1EFF,\n    // 'Greek Extended': (char) => char >= 0x1F00 && char <= 0x1FFF,\n    'General Punctuation': (char) => char >= 0x2000 && char <= 0x206F,\n    // 'Superscripts and Subscripts': (char) => char >= 0x2070 && char <= 0x209F,\n    // 'Currency Symbols': (char) => char >= 0x20A0 && char <= 0x20CF,\n    // 'Combining Diacritical Marks for Symbols': (char) => char >= 0x20D0 && char <= 0x20FF,\n    'Letterlike Symbols': (char) => char >= 0x2100 && char <= 0x214F,\n    'Number Forms': (char) => char >= 0x2150 && char <= 0x218F,\n    // 'Arrows': (char) => char >= 0x2190 && char <= 0x21FF,\n    // 'Mathematical Operators': (char) => char >= 0x2200 && char <= 0x22FF,\n    'Miscellaneous Technical': (char) => char >= 0x2300 && char <= 0x23FF,\n    'Control Pictures': (char) => char >= 0x2400 && char <= 0x243F,\n    'Optical Character Recognition': (char) => char >= 0x2440 && char <= 0x245F,\n    'Enclosed Alphanumerics': (char) => char >= 0x2460 && char <= 0x24FF,\n    // 'Box Drawing': (char) => char >= 0x2500 && char <= 0x257F,\n    // 'Block Elements': (char) => char >= 0x2580 && char <= 0x259F,\n    'Geometric Shapes': (char) => char >= 0x25A0 && char <= 0x25FF,\n    'Miscellaneous Symbols': (char) => char >= 0x2600 && char <= 0x26FF,\n    // 'Dingbats': (char) => char >= 0x2700 && char <= 0x27BF,\n    // 'Miscellaneous Mathematical Symbols-A': (char) => char >= 0x27C0 && char <= 0x27EF,\n    // 'Supplemental Arrows-A': (char) => char >= 0x27F0 && char <= 0x27FF,\n    // 'Braille Patterns': (char) => char >= 0x2800 && char <= 0x28FF,\n    // 'Supplemental Arrows-B': (char) => char >= 0x2900 && char <= 0x297F,\n    // 'Miscellaneous Mathematical Symbols-B': (char) => char >= 0x2980 && char <= 0x29FF,\n    // 'Supplemental Mathematical Operators': (char) => char >= 0x2A00 && char <= 0x2AFF,\n    'Miscellaneous Symbols and Arrows': (char) => char >= 0x2B00 && char <= 0x2BFF,\n    // 'Glagolitic': (char) => char >= 0x2C00 && char <= 0x2C5F,\n    // 'Latin Extended-C': (char) => char >= 0x2C60 && char <= 0x2C7F,\n    // 'Coptic': (char) => char >= 0x2C80 && char <= 0x2CFF,\n    // 'Georgian Supplement': (char) => char >= 0x2D00 && char <= 0x2D2F,\n    // 'Tifinagh': (char) => char >= 0x2D30 && char <= 0x2D7F,\n    // 'Ethiopic Extended': (char) => char >= 0x2D80 && char <= 0x2DDF,\n    // 'Cyrillic Extended-A': (char) => char >= 0x2DE0 && char <= 0x2DFF,\n    // 'Supplemental Punctuation': (char) => char >= 0x2E00 && char <= 0x2E7F,\n    'CJK Radicals Supplement': (char) => char >= 0x2E80 && char <= 0x2EFF,\n    'Kangxi Radicals': (char) => char >= 0x2F00 && char <= 0x2FDF,\n    'Ideographic Description Characters': (char) => char >= 0x2FF0 && char <= 0x2FFF,\n    'CJK Symbols and Punctuation': (char) => char >= 0x3000 && char <= 0x303F,\n    'Hiragana': (char) => char >= 0x3040 && char <= 0x309F,\n    'Katakana': (char) => char >= 0x30A0 && char <= 0x30FF,\n    'Bopomofo': (char) => char >= 0x3100 && char <= 0x312F,\n    'Hangul Compatibility Jamo': (char) => char >= 0x3130 && char <= 0x318F,\n    'Kanbun': (char) => char >= 0x3190 && char <= 0x319F,\n    'Bopomofo Extended': (char) => char >= 0x31A0 && char <= 0x31BF,\n    'CJK Strokes': (char) => char >= 0x31C0 && char <= 0x31EF,\n    'Katakana Phonetic Extensions': (char) => char >= 0x31F0 && char <= 0x31FF,\n    'Enclosed CJK Letters and Months': (char) => char >= 0x3200 && char <= 0x32FF,\n    'CJK Compatibility': (char) => char >= 0x3300 && char <= 0x33FF,\n    'CJK Unified Ideographs Extension A': (char) => char >= 0x3400 && char <= 0x4DBF,\n    'Yijing Hexagram Symbols': (char) => char >= 0x4DC0 && char <= 0x4DFF,\n    'CJK Unified Ideographs': (char) => char >= 0x4E00 && char <= 0x9FFF,\n    'Yi Syllables': (char) => char >= 0xA000 && char <= 0xA48F,\n    'Yi Radicals': (char) => char >= 0xA490 && char <= 0xA4CF,\n    // 'Lisu': (char) => char >= 0xA4D0 && char <= 0xA4FF,\n    // 'Vai': (char) => char >= 0xA500 && char <= 0xA63F,\n    // 'Cyrillic Extended-B': (char) => char >= 0xA640 && char <= 0xA69F,\n    // 'Bamum': (char) => char >= 0xA6A0 && char <= 0xA6FF,\n    // 'Modifier Tone Letters': (char) => char >= 0xA700 && char <= 0xA71F,\n    // 'Latin Extended-D': (char) => char >= 0xA720 && char <= 0xA7FF,\n    // 'Syloti Nagri': (char) => char >= 0xA800 && char <= 0xA82F,\n    // 'Common Indic Number Forms': (char) => char >= 0xA830 && char <= 0xA83F,\n    // 'Phags-pa': (char) => char >= 0xA840 && char <= 0xA87F,\n    // 'Saurashtra': (char) => char >= 0xA880 && char <= 0xA8DF,\n    // 'Devanagari Extended': (char) => char >= 0xA8E0 && char <= 0xA8FF,\n    // 'Kayah Li': (char) => char >= 0xA900 && char <= 0xA92F,\n    // 'Rejang': (char) => char >= 0xA930 && char <= 0xA95F,\n    'Hangul Jamo Extended-A': (char) => char >= 0xA960 && char <= 0xA97F,\n    // 'Javanese': (char) => char >= 0xA980 && char <= 0xA9DF,\n    // 'Myanmar Extended-B': (char) => char >= 0xA9E0 && char <= 0xA9FF,\n    // 'Cham': (char) => char >= 0xAA00 && char <= 0xAA5F,\n    // 'Myanmar Extended-A': (char) => char >= 0xAA60 && char <= 0xAA7F,\n    // 'Tai Viet': (char) => char >= 0xAA80 && char <= 0xAADF,\n    // 'Meetei Mayek Extensions': (char) => char >= 0xAAE0 && char <= 0xAAFF,\n    // 'Ethiopic Extended-A': (char) => char >= 0xAB00 && char <= 0xAB2F,\n    // 'Latin Extended-E': (char) => char >= 0xAB30 && char <= 0xAB6F,\n    // 'Cherokee Supplement': (char) => char >= 0xAB70 && char <= 0xABBF,\n    // 'Meetei Mayek': (char) => char >= 0xABC0 && char <= 0xABFF,\n    'Hangul Syllables': (char) => char >= 0xAC00 && char <= 0xD7AF,\n    'Hangul Jamo Extended-B': (char) => char >= 0xD7B0 && char <= 0xD7FF,\n    // 'High Surrogates': (char) => char >= 0xD800 && char <= 0xDB7F,\n    // 'High Private Use Surrogates': (char) => char >= 0xDB80 && char <= 0xDBFF,\n    // 'Low Surrogates': (char) => char >= 0xDC00 && char <= 0xDFFF,\n    'Private Use Area': (char) => char >= 0xE000 && char <= 0xF8FF,\n    'CJK Compatibility Ideographs': (char) => char >= 0xF900 && char <= 0xFAFF,\n    // 'Alphabetic Presentation Forms': (char) => char >= 0xFB00 && char <= 0xFB4F,\n    'Arabic Presentation Forms-A': (char) => char >= 0xFB50 && char <= 0xFDFF,\n    // 'Variation Selectors': (char) => char >= 0xFE00 && char <= 0xFE0F,\n    'Vertical Forms': (char) => char >= 0xFE10 && char <= 0xFE1F,\n    // 'Combining Half Marks': (char) => char >= 0xFE20 && char <= 0xFE2F,\n    'CJK Compatibility Forms': (char) => char >= 0xFE30 && char <= 0xFE4F,\n    'Small Form Variants': (char) => char >= 0xFE50 && char <= 0xFE6F,\n    'Arabic Presentation Forms-B': (char) => char >= 0xFE70 && char <= 0xFEFF,\n    'Halfwidth and Fullwidth Forms': (char) => char >= 0xFF00 && char <= 0xFFEF\n    // 'Specials': (char) => char >= 0xFFF0 && char <= 0xFFFF,\n    // 'Linear B Syllabary': (char) => char >= 0x10000 && char <= 0x1007F,\n    // 'Linear B Ideograms': (char) => char >= 0x10080 && char <= 0x100FF,\n    // 'Aegean Numbers': (char) => char >= 0x10100 && char <= 0x1013F,\n    // 'Ancient Greek Numbers': (char) => char >= 0x10140 && char <= 0x1018F,\n    // 'Ancient Symbols': (char) => char >= 0x10190 && char <= 0x101CF,\n    // 'Phaistos Disc': (char) => char >= 0x101D0 && char <= 0x101FF,\n    // 'Lycian': (char) => char >= 0x10280 && char <= 0x1029F,\n    // 'Carian': (char) => char >= 0x102A0 && char <= 0x102DF,\n    // 'Coptic Epact Numbers': (char) => char >= 0x102E0 && char <= 0x102FF,\n    // 'Old Italic': (char) => char >= 0x10300 && char <= 0x1032F,\n    // 'Gothic': (char) => char >= 0x10330 && char <= 0x1034F,\n    // 'Old Permic': (char) => char >= 0x10350 && char <= 0x1037F,\n    // 'Ugaritic': (char) => char >= 0x10380 && char <= 0x1039F,\n    // 'Old Persian': (char) => char >= 0x103A0 && char <= 0x103DF,\n    // 'Deseret': (char) => char >= 0x10400 && char <= 0x1044F,\n    // 'Shavian': (char) => char >= 0x10450 && char <= 0x1047F,\n    // 'Osmanya': (char) => char >= 0x10480 && char <= 0x104AF,\n    // 'Osage': (char) => char >= 0x104B0 && char <= 0x104FF,\n    // 'Elbasan': (char) => char >= 0x10500 && char <= 0x1052F,\n    // 'Caucasian Albanian': (char) => char >= 0x10530 && char <= 0x1056F,\n    // 'Linear A': (char) => char >= 0x10600 && char <= 0x1077F,\n    // 'Cypriot Syllabary': (char) => char >= 0x10800 && char <= 0x1083F,\n    // 'Imperial Aramaic': (char) => char >= 0x10840 && char <= 0x1085F,\n    // 'Palmyrene': (char) => char >= 0x10860 && char <= 0x1087F,\n    // 'Nabataean': (char) => char >= 0x10880 && char <= 0x108AF,\n    // 'Hatran': (char) => char >= 0x108E0 && char <= 0x108FF,\n    // 'Phoenician': (char) => char >= 0x10900 && char <= 0x1091F,\n    // 'Lydian': (char) => char >= 0x10920 && char <= 0x1093F,\n    // 'Meroitic Hieroglyphs': (char) => char >= 0x10980 && char <= 0x1099F,\n    // 'Meroitic Cursive': (char) => char >= 0x109A0 && char <= 0x109FF,\n    // 'Kharoshthi': (char) => char >= 0x10A00 && char <= 0x10A5F,\n    // 'Old South Arabian': (char) => char >= 0x10A60 && char <= 0x10A7F,\n    // 'Old North Arabian': (char) => char >= 0x10A80 && char <= 0x10A9F,\n    // 'Manichaean': (char) => char >= 0x10AC0 && char <= 0x10AFF,\n    // 'Avestan': (char) => char >= 0x10B00 && char <= 0x10B3F,\n    // 'Inscriptional Parthian': (char) => char >= 0x10B40 && char <= 0x10B5F,\n    // 'Inscriptional Pahlavi': (char) => char >= 0x10B60 && char <= 0x10B7F,\n    // 'Psalter Pahlavi': (char) => char >= 0x10B80 && char <= 0x10BAF,\n    // 'Old Turkic': (char) => char >= 0x10C00 && char <= 0x10C4F,\n    // 'Old Hungarian': (char) => char >= 0x10C80 && char <= 0x10CFF,\n    // 'Rumi Numeral Symbols': (char) => char >= 0x10E60 && char <= 0x10E7F,\n    // 'Brahmi': (char) => char >= 0x11000 && char <= 0x1107F,\n    // 'Kaithi': (char) => char >= 0x11080 && char <= 0x110CF,\n    // 'Sora Sompeng': (char) => char >= 0x110D0 && char <= 0x110FF,\n    // 'Chakma': (char) => char >= 0x11100 && char <= 0x1114F,\n    // 'Mahajani': (char) => char >= 0x11150 && char <= 0x1117F,\n    // 'Sharada': (char) => char >= 0x11180 && char <= 0x111DF,\n    // 'Sinhala Archaic Numbers': (char) => char >= 0x111E0 && char <= 0x111FF,\n    // 'Khojki': (char) => char >= 0x11200 && char <= 0x1124F,\n    // 'Multani': (char) => char >= 0x11280 && char <= 0x112AF,\n    // 'Khudawadi': (char) => char >= 0x112B0 && char <= 0x112FF,\n    // 'Grantha': (char) => char >= 0x11300 && char <= 0x1137F,\n    // 'Newa': (char) => char >= 0x11400 && char <= 0x1147F,\n    // 'Tirhuta': (char) => char >= 0x11480 && char <= 0x114DF,\n    // 'Siddham': (char) => char >= 0x11580 && char <= 0x115FF,\n    // 'Modi': (char) => char >= 0x11600 && char <= 0x1165F,\n    // 'Mongolian Supplement': (char) => char >= 0x11660 && char <= 0x1167F,\n    // 'Takri': (char) => char >= 0x11680 && char <= 0x116CF,\n    // 'Ahom': (char) => char >= 0x11700 && char <= 0x1173F,\n    // 'Warang Citi': (char) => char >= 0x118A0 && char <= 0x118FF,\n    // 'Zanabazar Square': (char) => char >= 0x11A00 && char <= 0x11A4F,\n    // 'Soyombo': (char) => char >= 0x11A50 && char <= 0x11AAF,\n    // 'Pau Cin Hau': (char) => char >= 0x11AC0 && char <= 0x11AFF,\n    // 'Bhaiksuki': (char) => char >= 0x11C00 && char <= 0x11C6F,\n    // 'Marchen': (char) => char >= 0x11C70 && char <= 0x11CBF,\n    // 'Masaram Gondi': (char) => char >= 0x11D00 && char <= 0x11D5F,\n    // 'Cuneiform': (char) => char >= 0x12000 && char <= 0x123FF,\n    // 'Cuneiform Numbers and Punctuation': (char) => char >= 0x12400 && char <= 0x1247F,\n    // 'Early Dynastic Cuneiform': (char) => char >= 0x12480 && char <= 0x1254F,\n    // 'Egyptian Hieroglyphs': (char) => char >= 0x13000 && char <= 0x1342F,\n    // 'Anatolian Hieroglyphs': (char) => char >= 0x14400 && char <= 0x1467F,\n    // 'Bamum Supplement': (char) => char >= 0x16800 && char <= 0x16A3F,\n    // 'Mro': (char) => char >= 0x16A40 && char <= 0x16A6F,\n    // 'Bassa Vah': (char) => char >= 0x16AD0 && char <= 0x16AFF,\n    // 'Pahawh Hmong': (char) => char >= 0x16B00 && char <= 0x16B8F,\n    // 'Miao': (char) => char >= 0x16F00 && char <= 0x16F9F,\n    // 'Ideographic Symbols and Punctuation': (char) => char >= 0x16FE0 && char <= 0x16FFF,\n    // 'Tangut': (char) => char >= 0x17000 && char <= 0x187FF,\n    // 'Tangut Components': (char) => char >= 0x18800 && char <= 0x18AFF,\n    // 'Kana Supplement': (char) => char >= 0x1B000 && char <= 0x1B0FF,\n    // 'Kana Extended-A': (char) => char >= 0x1B100 && char <= 0x1B12F,\n    // 'Nushu': (char) => char >= 0x1B170 && char <= 0x1B2FF,\n    // 'Duployan': (char) => char >= 0x1BC00 && char <= 0x1BC9F,\n    // 'Shorthand Format Controls': (char) => char >= 0x1BCA0 && char <= 0x1BCAF,\n    // 'Byzantine Musical Symbols': (char) => char >= 0x1D000 && char <= 0x1D0FF,\n    // 'Musical Symbols': (char) => char >= 0x1D100 && char <= 0x1D1FF,\n    // 'Ancient Greek Musical Notation': (char) => char >= 0x1D200 && char <= 0x1D24F,\n    // 'Tai Xuan Jing Symbols': (char) => char >= 0x1D300 && char <= 0x1D35F,\n    // 'Counting Rod Numerals': (char) => char >= 0x1D360 && char <= 0x1D37F,\n    // 'Mathematical Alphanumeric Symbols': (char) => char >= 0x1D400 && char <= 0x1D7FF,\n    // 'Sutton SignWriting': (char) => char >= 0x1D800 && char <= 0x1DAAF,\n    // 'Glagolitic Supplement': (char) => char >= 0x1E000 && char <= 0x1E02F,\n    // 'Mende Kikakui': (char) => char >= 0x1E800 && char <= 0x1E8DF,\n    // 'Adlam': (char) => char >= 0x1E900 && char <= 0x1E95F,\n    // 'Arabic Mathematical Alphabetic Symbols': (char) => char >= 0x1EE00 && char <= 0x1EEFF,\n    // 'Mahjong Tiles': (char) => char >= 0x1F000 && char <= 0x1F02F,\n    // 'Domino Tiles': (char) => char >= 0x1F030 && char <= 0x1F09F,\n    // 'Playing Cards': (char) => char >= 0x1F0A0 && char <= 0x1F0FF,\n    // 'Enclosed Alphanumeric Supplement': (char) => char >= 0x1F100 && char <= 0x1F1FF,\n    // 'Enclosed Ideographic Supplement': (char) => char >= 0x1F200 && char <= 0x1F2FF,\n    // 'Miscellaneous Symbols and Pictographs': (char) => char >= 0x1F300 && char <= 0x1F5FF,\n    // 'Emoticons': (char) => char >= 0x1F600 && char <= 0x1F64F,\n    // 'Ornamental Dingbats': (char) => char >= 0x1F650 && char <= 0x1F67F,\n    // 'Transport and Map Symbols': (char) => char >= 0x1F680 && char <= 0x1F6FF,\n    // 'Alchemical Symbols': (char) => char >= 0x1F700 && char <= 0x1F77F,\n    // 'Geometric Shapes Extended': (char) => char >= 0x1F780 && char <= 0x1F7FF,\n    // 'Supplemental Arrows-C': (char) => char >= 0x1F800 && char <= 0x1F8FF,\n    // 'Supplemental Symbols and Pictographs': (char) => char >= 0x1F900 && char <= 0x1F9FF,\n    // 'CJK Unified Ideographs Extension B': (char) => char >= 0x20000 && char <= 0x2A6DF,\n    // 'CJK Unified Ideographs Extension C': (char) => char >= 0x2A700 && char <= 0x2B73F,\n    // 'CJK Unified Ideographs Extension D': (char) => char >= 0x2B740 && char <= 0x2B81F,\n    // 'CJK Unified Ideographs Extension E': (char) => char >= 0x2B820 && char <= 0x2CEAF,\n    // 'CJK Unified Ideographs Extension F': (char) => char >= 0x2CEB0 && char <= 0x2EBEF,\n    // 'CJK Compatibility Ideographs Supplement': (char) => char >= 0x2F800 && char <= 0x2FA1F,\n    // 'Tags': (char) => char >= 0xE0000 && char <= 0xE007F,\n    // 'Variation Selectors Supplement': (char) => char >= 0xE0100 && char <= 0xE01EF,\n    // 'Supplementary Private Use Area-A': (char) => char >= 0xF0000 && char <= 0xFFFFF,\n    // 'Supplementary Private Use Area-B': (char) => char >= 0x100000 && char <= 0x10FFFF,\n};\n\nmodule.exports = unicodeBlockLookup;\n","// @flow\n\nconst {normalizePropertyExpression} = require('../style-spec/expression');\nconst interpolate = require('../style-spec/util/interpolate');\nconst util = require('../util/util');\n\nimport type {Property, PropertyValue, PossiblyEvaluatedPropertyValue} from '../style/properties';\nimport type {CameraExpression, CompositeExpression} from '../style-spec/expression/index';\n\nmodule.exports = {\n    getSizeData,\n    evaluateSizeForFeature,\n    evaluateSizeForZoom\n};\n\nexport type SizeData = {\n    functionType: 'constant',\n    layoutSize: number\n} | {\n    functionType: 'source'\n} | {\n    functionType: 'camera',\n    layoutSize: number,\n    zoomRange: {min: number, max: number},\n    sizeRange: {min: number, max: number},\n    propertyValue: PropertyValueSpecification<number>\n} | {\n    functionType: 'composite',\n    zoomRange: {min: number, max: number},\n    propertyValue: PropertyValueSpecification<number>\n};\n\n// For {text,icon}-size, get the bucket-level data that will be needed by\n// the painter to set symbol-size-related uniforms\nfunction getSizeData(tileZoom: number, value: PropertyValue<number, PossiblyEvaluatedPropertyValue<number>>): SizeData {\n    const {expression} = value;\n    if (expression.kind === 'constant') {\n        return {\n            functionType: 'constant',\n            layoutSize: expression.evaluate({zoom: tileZoom + 1})\n        };\n    } else if (expression.kind === 'source') {\n        return {\n            functionType: 'source'\n        };\n    } else {\n        // calculate covering zoom stops for zoom-dependent values\n        const levels = expression.zoomStops;\n\n        let lower = 0;\n        while (lower < levels.length && levels[lower] <= tileZoom) lower++;\n        lower = Math.max(0, lower - 1);\n        let upper = lower;\n        while (upper < levels.length && levels[upper] < tileZoom + 1) upper++;\n        upper = Math.min(levels.length - 1, upper);\n\n        const zoomRange = {\n            min: levels[lower],\n            max: levels[upper]\n        };\n\n        // We'd like to be able to use CameraExpression or CompositeExpression in these\n        // return types rather than ExpressionSpecification, but the former are not\n        // transferrable across Web Worker boundaries.\n        if (expression.kind === 'composite') {\n            return {\n                functionType: 'composite',\n                zoomRange,\n                propertyValue: (value.value: any)\n            };\n        } else {\n            // for camera functions, also save off the function values\n            // evaluated at the covering zoom levels\n            return {\n                functionType: 'camera',\n                layoutSize: expression.evaluate({zoom: tileZoom + 1}),\n                zoomRange,\n                sizeRange: {\n                    min: expression.evaluate({zoom: zoomRange.min}),\n                    max: expression.evaluate({zoom: zoomRange.max})\n                },\n                propertyValue: (value.value: any)\n            };\n        }\n    }\n}\n\nfunction evaluateSizeForFeature(sizeData: SizeData,\n                                partiallyEvaluatedSize: { uSize: number, uSizeT: number },\n                                symbol: { lowerSize: number, upperSize: number}) {\n    const part = partiallyEvaluatedSize;\n    if (sizeData.functionType === 'source') {\n        return symbol.lowerSize / 10;\n    } else if (sizeData.functionType === 'composite') {\n        return interpolate.number(symbol.lowerSize / 10, symbol.upperSize / 10, part.uSizeT);\n    } else {\n        return part.uSize;\n    }\n}\n\nfunction evaluateSizeForZoom(sizeData: SizeData, currentZoom: number, property: Property<number, PossiblyEvaluatedPropertyValue<number>>) {\n    if (sizeData.functionType === 'constant') {\n        return {\n            uSizeT: 0,\n            uSize: sizeData.layoutSize\n        };\n    } else if (sizeData.functionType === 'source') {\n        return {\n            uSizeT: 0,\n            uSize: 0\n        };\n    } else if (sizeData.functionType === 'camera') {\n        const {propertyValue, zoomRange, sizeRange} = sizeData;\n        const expression = ((normalizePropertyExpression(propertyValue, property.specification): any): CameraExpression);\n\n        // Even though we could get the exact value of the camera function\n        // at z = tr.zoom, we intentionally do not: instead, we interpolate\n        // between the camera function values at a pair of zoom stops covering\n        // [tileZoom, tileZoom + 1] in order to be consistent with this\n        // restriction on composite functions\n        const t = util.clamp(\n            expression.interpolationFactor(currentZoom, zoomRange.min, zoomRange.max),\n            0, 1);\n\n        return {\n            uSizeT: 0,\n            uSize: sizeRange.min + t * (sizeRange.max - sizeRange.min)\n        };\n    } else {\n        const {propertyValue, zoomRange} = sizeData;\n        const expression = ((normalizePropertyExpression(propertyValue, property.specification): any): CompositeExpression);\n\n        return {\n            uSizeT: util.clamp(expression.interpolationFactor(currentZoom, zoomRange.min, zoomRange.max), 0, 1),\n            uSize: 0\n        };\n    }\n}\n","// @flow\n\nmodule.exports = resolveTokens;\n\n/**\n * Replace tokens in a string template with values in an object\n *\n * @param properties a key/value relationship between tokens and replacements\n * @param text the template string\n * @returns the template with tokens replaced\n * @private\n */\nfunction resolveTokens(properties: {+[string]: mixed}, text: string): string {\n    return text.replace(/{([^{}]+)}/g, (match, key: string) => {\n        return key in properties ? String(properties[key]) : '';\n    }).replace(/FORMAT_NUMBER\\(([^\\)]+)\\)/g, (match, key) => formatNumber(key));\n}\n\n/*\nAfter tokens have been resolved, anything of the form FORMAT_NUMBER(...) will be passed\nthrough this function, which renders numbers in a short form:\n   123 => 0K\n   123456 => 123K\n   123456789 => 123.45M\n   1234567890 => 1,234M\n   123456789000 => 123,456M\n   1234567890000 => HUGE_NUM\n\n   (12000,null,2.2) => 26K  i.e. the third argument is an optional scaling factor\n\n   the second argument is currently unused, in future it may allow customizing of\n   the formatting in some way. \n*/\nfunction formatNumber(arg){\n\targ = arg.split(\",\"); //arg is a string, which may contain multiple arguments\n\tlet value = parseFloat(arg[0]); \n\tif(arg[2]){\n\t\tvalue = value*parseFloat(arg[2]);\n\t}\n\tif(value<1e3){\n\t\treturn Math.round(value);\n\t} else if (value<1e5){\n\t\treturn (value/1e3).toFixed(1) + 'K';\n\t} else if (value<1e6){\n\t\treturn Math.round(value/1e3) + 'K';\n\t} else if(value<1e9){\n\t\treturn (value/1e6).toFixed(2) + 'M';\n\t} else if(value<1e12){\n\t\tvalue = Math.round(value/1e6).toFixed(0);\n\t\treturn value.slice(0,-3) + ',' + value.slice(-4,-1) + 'M';\n\t} else {\n\t\treturn 'HUGE_NUM';\n\t}\n}","// This file is generated. Edit build/generate-style-code.js, then run `yarn run codegen`.\n// @flow\n/* eslint-disable */\n\nconst styleSpec = require('../../style-spec/reference/latest');\n\nconst {\n    Properties,\n    DataConstantProperty,\n    DataDrivenProperty,\n    CrossFadedProperty,\n    HeatmapColorProperty\n} = require('../properties');\n\nimport type Color from '../../style-spec/util/color';\n\nexport type LayoutProps = {|\n    \"symbol-placement\": DataConstantProperty<\"point\" | \"line\">,\n    \"symbol-spacing\": DataConstantProperty<number>,\n    \"symbol-avoid-edges\": DataConstantProperty<boolean>,\n    \"icon-allow-overlap\": DataConstantProperty<boolean>,\n    \"icon-ignore-placement\": DataConstantProperty<boolean>,\n    \"icon-optional\": DataConstantProperty<boolean>,\n    \"icon-rotation-alignment\": DataConstantProperty<\"map\" | \"viewport\" | \"auto\">,\n    \"icon-size\": DataDrivenProperty<number>,\n    \"icon-text-fit\": DataConstantProperty<\"none\" | \"width\" | \"height\" | \"both\">,\n    \"icon-text-fit-padding\": DataConstantProperty<[number, number, number, number]>,\n    \"icon-image\": DataDrivenProperty<string>,\n    \"icon-rotate\": DataDrivenProperty<number>,\n    \"icon-padding\": DataConstantProperty<number>,\n    \"icon-keep-upright\": DataConstantProperty<boolean>,\n    \"icon-offset\": DataDrivenProperty<[number, number]>,\n    \"icon-anchor\": DataDrivenProperty<\"center\" | \"left\" | \"right\" | \"top\" | \"bottom\" | \"top-left\" | \"top-right\" | \"bottom-left\" | \"bottom-right\">,\n    \"icon-pitch-alignment\": DataConstantProperty<\"map\" | \"viewport\" | \"auto\">,\n    \"text-pitch-alignment\": DataConstantProperty<\"map\" | \"viewport\" | \"auto\">,\n    \"text-rotation-alignment\": DataConstantProperty<\"map\" | \"viewport\" | \"auto\">,\n    \"text-field\": DataDrivenProperty<string>,\n    \"text-font\": DataDrivenProperty<Array<string>>,\n    \"text-size\": DataDrivenProperty<number>,\n    \"text-max-width\": DataDrivenProperty<number>,\n    \"text-line-height\": DataConstantProperty<number>,\n    \"text-letter-spacing\": DataDrivenProperty<number>,\n    \"text-justify\": DataDrivenProperty<\"left\" | \"center\" | \"right\">,\n    \"text-anchor\": DataDrivenProperty<\"center\" | \"left\" | \"right\" | \"top\" | \"bottom\" | \"top-left\" | \"top-right\" | \"bottom-left\" | \"bottom-right\">,\n    \"text-max-angle\": DataConstantProperty<number>,\n    \"text-rotate\": DataDrivenProperty<number>,\n    \"text-padding\": DataConstantProperty<number>,\n    \"text-keep-upright\": DataConstantProperty<boolean>,\n    \"text-transform\": DataDrivenProperty<\"none\" | \"uppercase\" | \"lowercase\">,\n    \"text-offset\": DataDrivenProperty<[number, number]>,\n    \"text-allow-overlap\": DataConstantProperty<boolean>,\n    \"text-ignore-placement\": DataConstantProperty<boolean>,\n    \"text-optional\": DataConstantProperty<boolean>,\n|};\n\nconst layout: Properties<LayoutProps> = new Properties({\n    \"symbol-placement\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"symbol-placement\"]),\n    \"symbol-spacing\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"symbol-spacing\"]),\n    \"symbol-avoid-edges\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"symbol-avoid-edges\"]),\n    \"icon-allow-overlap\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"icon-allow-overlap\"]),\n    \"icon-ignore-placement\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"icon-ignore-placement\"]),\n    \"icon-optional\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"icon-optional\"]),\n    \"icon-rotation-alignment\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"icon-rotation-alignment\"]),\n    \"icon-size\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"icon-size\"]),\n    \"icon-text-fit\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"icon-text-fit\"]),\n    \"icon-text-fit-padding\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"icon-text-fit-padding\"]),\n    \"icon-image\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"icon-image\"]),\n    \"icon-rotate\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"icon-rotate\"]),\n    \"icon-padding\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"icon-padding\"]),\n    \"icon-keep-upright\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"icon-keep-upright\"]),\n    \"icon-offset\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"icon-offset\"]),\n    \"icon-anchor\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"icon-anchor\"]),\n    \"icon-pitch-alignment\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"icon-pitch-alignment\"]),\n    \"text-pitch-alignment\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"text-pitch-alignment\"]),\n    \"text-rotation-alignment\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"text-rotation-alignment\"]),\n    \"text-field\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"text-field\"]),\n    \"text-font\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"text-font\"]),\n    \"text-size\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"text-size\"]),\n    \"text-max-width\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"text-max-width\"]),\n    \"text-line-height\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"text-line-height\"]),\n    \"text-letter-spacing\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"text-letter-spacing\"]),\n    \"text-justify\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"text-justify\"]),\n    \"text-anchor\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"text-anchor\"]),\n    \"text-max-angle\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"text-max-angle\"]),\n    \"text-rotate\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"text-rotate\"]),\n    \"text-padding\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"text-padding\"]),\n    \"text-keep-upright\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"text-keep-upright\"]),\n    \"text-transform\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"text-transform\"]),\n    \"text-offset\": new DataDrivenProperty(styleSpec[\"layout_symbol\"][\"text-offset\"]),\n    \"text-allow-overlap\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"text-allow-overlap\"]),\n    \"text-ignore-placement\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"text-ignore-placement\"]),\n    \"text-optional\": new DataConstantProperty(styleSpec[\"layout_symbol\"][\"text-optional\"]),\n});\n\nexport type PaintProps = {|\n    \"icon-opacity\": DataDrivenProperty<number>,\n    \"icon-color\": DataDrivenProperty<Color>,\n    \"icon-halo-color\": DataDrivenProperty<Color>,\n    \"icon-halo-width\": DataDrivenProperty<number>,\n    \"icon-halo-blur\": DataDrivenProperty<number>,\n    \"icon-translate\": DataConstantProperty<[number, number]>,\n    \"icon-translate-anchor\": DataConstantProperty<\"map\" | \"viewport\">,\n    \"text-opacity\": DataDrivenProperty<number>,\n    \"text-color\": DataDrivenProperty<Color>,\n    \"text-halo-color\": DataDrivenProperty<Color>,\n    \"text-halo-width\": DataDrivenProperty<number>,\n    \"text-halo-blur\": DataDrivenProperty<number>,\n    \"text-translate\": DataConstantProperty<[number, number]>,\n    \"text-translate-anchor\": DataConstantProperty<\"map\" | \"viewport\">,\n|};\n\nconst paint: Properties<PaintProps> = new Properties({\n    \"icon-opacity\": new DataDrivenProperty(styleSpec[\"paint_symbol\"][\"icon-opacity\"]),\n    \"icon-color\": new DataDrivenProperty(styleSpec[\"paint_symbol\"][\"icon-color\"]),\n    \"icon-halo-color\": new DataDrivenProperty(styleSpec[\"paint_symbol\"][\"icon-halo-color\"]),\n    \"icon-halo-width\": new DataDrivenProperty(styleSpec[\"paint_symbol\"][\"icon-halo-width\"]),\n    \"icon-halo-blur\": new DataDrivenProperty(styleSpec[\"paint_symbol\"][\"icon-halo-blur\"]),\n    \"icon-translate\": new DataConstantProperty(styleSpec[\"paint_symbol\"][\"icon-translate\"]),\n    \"icon-translate-anchor\": new DataConstantProperty(styleSpec[\"paint_symbol\"][\"icon-translate-anchor\"]),\n    \"text-opacity\": new DataDrivenProperty(styleSpec[\"paint_symbol\"][\"text-opacity\"]),\n    \"text-color\": new DataDrivenProperty(styleSpec[\"paint_symbol\"][\"text-color\"]),\n    \"text-halo-color\": new DataDrivenProperty(styleSpec[\"paint_symbol\"][\"text-halo-color\"]),\n    \"text-halo-width\": new DataDrivenProperty(styleSpec[\"paint_symbol\"][\"text-halo-width\"]),\n    \"text-halo-blur\": new DataDrivenProperty(styleSpec[\"paint_symbol\"][\"text-halo-blur\"]),\n    \"text-translate\": new DataConstantProperty(styleSpec[\"paint_symbol\"][\"text-translate\"]),\n    \"text-translate-anchor\": new DataConstantProperty(styleSpec[\"paint_symbol\"][\"text-translate-anchor\"]),\n});\n\nmodule.exports = { paint, layout };\n","// @flow\n\nconst StyleLayer = require('../style_layer');\nconst properties = require('./background_style_layer_properties');\n\nconst {\n    Transitionable,\n    Transitioning,\n    PossiblyEvaluated\n} = require('../properties');\n\nimport type {PaintProps} from './background_style_layer_properties';\n\nclass BackgroundStyleLayer extends StyleLayer {\n    _transitionablePaint: Transitionable<PaintProps>;\n    _transitioningPaint: Transitioning<PaintProps>;\n    paint: PossiblyEvaluated<PaintProps>;\n\n    constructor(layer: LayerSpecification) {\n        super(layer, properties);\n    }\n}\n\nmodule.exports = BackgroundStyleLayer;\n","// This file is generated. Edit build/generate-style-code.js, then run `yarn run codegen`.\n// @flow\n/* eslint-disable */\n\nconst styleSpec = require('../../style-spec/reference/latest');\n\nconst {\n    Properties,\n    DataConstantProperty,\n    DataDrivenProperty,\n    CrossFadedProperty,\n    HeatmapColorProperty\n} = require('../properties');\n\nimport type Color from '../../style-spec/util/color';\n\n\nexport type PaintProps = {|\n    \"background-color\": DataConstantProperty<Color>,\n    \"background-pattern\": CrossFadedProperty<string>,\n    \"background-opacity\": DataConstantProperty<number>,\n|};\n\nconst paint: Properties<PaintProps> = new Properties({\n    \"background-color\": new DataConstantProperty(styleSpec[\"paint_background\"][\"background-color\"]),\n    \"background-pattern\": new CrossFadedProperty(styleSpec[\"paint_background\"][\"background-pattern\"]),\n    \"background-opacity\": new DataConstantProperty(styleSpec[\"paint_background\"][\"background-opacity\"]),\n});\n\nmodule.exports = { paint };\n","// @flow\n\nconst StyleLayer = require('../style_layer');\nconst properties = require('./raster_style_layer_properties');\n\nconst {\n    Transitionable,\n    Transitioning,\n    PossiblyEvaluated\n} = require('../properties');\n\nimport type {PaintProps} from './raster_style_layer_properties';\n\nclass RasterStyleLayer extends StyleLayer {\n    _transitionablePaint: Transitionable<PaintProps>;\n    _transitioningPaint: Transitioning<PaintProps>;\n    paint: PossiblyEvaluated<PaintProps>;\n\n    constructor(layer: LayerSpecification) {\n        super(layer, properties);\n    }\n}\n\nmodule.exports = RasterStyleLayer;\n","// This file is generated. Edit build/generate-style-code.js, then run `yarn run codegen`.\n// @flow\n/* eslint-disable */\n\nconst styleSpec = require('../../style-spec/reference/latest');\n\nconst {\n    Properties,\n    DataConstantProperty,\n    DataDrivenProperty,\n    CrossFadedProperty,\n    HeatmapColorProperty\n} = require('../properties');\n\nimport type Color from '../../style-spec/util/color';\n\n\nexport type PaintProps = {|\n    \"raster-opacity\": DataConstantProperty<number>,\n    \"raster-hue-rotate\": DataConstantProperty<number>,\n    \"raster-brightness-min\": DataConstantProperty<number>,\n    \"raster-brightness-max\": DataConstantProperty<number>,\n    \"raster-saturation\": DataConstantProperty<number>,\n    \"raster-contrast\": DataConstantProperty<number>,\n    \"raster-fade-duration\": DataConstantProperty<number>,\n|};\n\nconst paint: Properties<PaintProps> = new Properties({\n    \"raster-opacity\": new DataConstantProperty(styleSpec[\"paint_raster\"][\"raster-opacity\"]),\n    \"raster-hue-rotate\": new DataConstantProperty(styleSpec[\"paint_raster\"][\"raster-hue-rotate\"]),\n    \"raster-brightness-min\": new DataConstantProperty(styleSpec[\"paint_raster\"][\"raster-brightness-min\"]),\n    \"raster-brightness-max\": new DataConstantProperty(styleSpec[\"paint_raster\"][\"raster-brightness-max\"]),\n    \"raster-saturation\": new DataConstantProperty(styleSpec[\"paint_raster\"][\"raster-saturation\"]),\n    \"raster-contrast\": new DataConstantProperty(styleSpec[\"paint_raster\"][\"raster-contrast\"]),\n    \"raster-fade-duration\": new DataConstantProperty(styleSpec[\"paint_raster\"][\"raster-fade-duration\"]),\n});\n\nmodule.exports = { paint };\n","\nconst refProperties = require('./util/ref_properties');\n\nfunction stringify(obj) {\n    const type = typeof obj;\n    if (type === 'number' || type === 'boolean' || type === 'string' || obj === undefined || obj === null)\n        return JSON.stringify(obj);\n\n    if (Array.isArray(obj)) {\n        let str = '[';\n        for (const val of obj) {\n            str += `${stringify(val)},`;\n        }\n        return `${str}]`;\n    }\n\n    const keys = Object.keys(obj).sort();\n\n    let str = '{';\n    for (let i = 0; i < keys.length; i++) {\n        str += `${JSON.stringify(keys[i])}:${stringify(obj[keys[i]])},`;\n    }\n    return `${str}}`;\n}\n\nfunction getKey(layer) {\n    let key = '';\n    for (const k of refProperties) {\n        key += `/${stringify(layer[k])}`;\n    }\n    return key;\n}\n\nmodule.exports = groupByLayout;\n\n/**\n * Given an array of layers, return an array of arrays of layers where all\n * layers in each group have identical layout-affecting properties. These\n * are the properties that were formerly used by explicit `ref` mechanism\n * for layers: 'type', 'source', 'source-layer', 'minzoom', 'maxzoom',\n * 'filter', and 'layout'.\n *\n * The input is not modified. The output layers are references to the\n * input layers.\n *\n * @private\n * @param {Array<Layer>} layers\n * @returns {Array<Array<Layer>>}\n */\nfunction groupByLayout(layers) {\n    const groups = {};\n\n    for (let i = 0; i < layers.length; i++) {\n        const k = getKey(layers[i]);\n        let group = groups[k];\n        if (!group) {\n            group = groups[k] = [];\n        }\n        group.push(layers[i]);\n    }\n\n    const result = [];\n\n    for (const k in groups) {\n        result.push(groups[k]);\n    }\n\n    return result;\n}\n","\nmodule.exports = ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout'];\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","// @flow\n\nconst FeatureIndex = require('../data/feature_index');\nconst {performSymbolLayout} = require('../symbol/symbol_layout');\nconst {CollisionBoxArray} = require('../data/array_types');\nconst DictionaryCoder = require('../util/dictionary_coder');\nconst SymbolBucket = require('../data/bucket/symbol_bucket');\nconst util = require('../util/util');\nconst assert = require('assert');\nconst {makeImageAtlas} = require('../render/image_atlas');\nconst {makeGlyphAtlas} = require('../render/glyph_atlas');\nconst EvaluationParameters = require('../style/evaluation_parameters');\nconst {OverscaledTileID} = require('./tile_id');\n\nimport type {Bucket} from '../data/bucket';\nimport type Actor from '../util/actor';\nimport type StyleLayer from '../style/style_layer';\nimport type StyleLayerIndex from '../style/style_layer_index';\nimport type {StyleImage} from '../style/style_image';\nimport type {StyleGlyph} from '../style/style_glyph';\nimport type {\n    WorkerTileParameters,\n    WorkerTileCallback,\n} from '../source/worker_source';\n\nclass WorkerTile {\n    tileID: OverscaledTileID;\n    uid: string;\n    zoom: number;\n    pixelRatio: number;\n    tileSize: number;\n    source: string;\n    overscaling: number;\n    showCollisionBoxes: boolean;\n\n    status: 'parsing' | 'done';\n    data: VectorTile;\n    collisionBoxArray: CollisionBoxArray;\n\n    abort: ?() => void;\n    reloadCallback: WorkerTileCallback;\n    vectorTile: VectorTile;\n\n    constructor(params: WorkerTileParameters) {\n        this.tileID = new OverscaledTileID(params.tileID.overscaledZ, params.tileID.wrap, params.tileID.canonical.z, params.tileID.canonical.x, params.tileID.canonical.y);\n        this.uid = params.uid;\n        this.zoom = params.zoom;\n        this.pixelRatio = params.pixelRatio;\n        this.tileSize = params.tileSize;\n        this.source = params.source;\n        this.overscaling = params.overscaling;\n        this.showCollisionBoxes = params.showCollisionBoxes;\n    }\n\n    parse(data: VectorTile, layerIndex: StyleLayerIndex, actor: Actor, callback: WorkerTileCallback) {\n        this.status = 'parsing';\n        this.data = data;\n\n        this.collisionBoxArray = new CollisionBoxArray();\n        const sourceLayerCoder = new DictionaryCoder(Object.keys(data.layers).sort());\n\n        const featureIndex = new FeatureIndex(this.tileID, this.overscaling);\n        featureIndex.bucketLayerIDs = [];\n\n        const buckets: {[string]: Bucket} = {};\n\n        const options = {\n            featureIndex: featureIndex,\n            iconDependencies: {},\n            glyphDependencies: {}\n        };\n\n        const layerFamilies = layerIndex.familiesBySource[this.source];\n        for (const sourceLayerId in layerFamilies) {\n            const sourceLayer = data.layers[sourceLayerId];\n            if (!sourceLayer) {\n                continue;\n            }\n\n            if (sourceLayer.version === 1) {\n                util.warnOnce(`Vector tile source \"${this.source}\" layer \"${sourceLayerId}\" ` +\n                    `does not use vector tile spec v2 and therefore may have some rendering errors.`);\n            }\n\n            const sourceLayerIndex = sourceLayerCoder.encode(sourceLayerId);\n            const features = [];\n            for (let index = 0; index < sourceLayer.length; index++) {\n                const feature = sourceLayer.feature(index);\n                features.push({ feature, index, sourceLayerIndex });\n            }\n\n            for (const family of layerFamilies[sourceLayerId]) {\n                const layer = family[0];\n\n                assert(layer.source === this.source);\n                if (layer.minzoom && this.zoom < Math.floor(layer.minzoom)) continue;\n                if (layer.maxzoom && this.zoom >= layer.maxzoom) continue;\n                if (layer.visibility === 'none') continue;\n\n                recalculateLayers(family, this.zoom);\n\n                const bucket = buckets[layer.id] = layer.createBucket({\n                    index: featureIndex.bucketLayerIDs.length,\n                    layers: family,\n                    zoom: this.zoom,\n                    pixelRatio: this.pixelRatio,\n                    overscaling: this.overscaling,\n                    collisionBoxArray: this.collisionBoxArray\n                });\n\n                bucket.populate(features, options);\n                featureIndex.bucketLayerIDs.push(family.map((l) => l.id));\n            }\n        }\n\n        let error: ?Error;\n        let glyphMap: ?{[string]: {[number]: ?StyleGlyph}};\n        let imageMap: ?{[string]: StyleImage};\n\n        const stacks = util.mapObject(options.glyphDependencies, (glyphs) => Object.keys(glyphs).map(Number));\n        if (Object.keys(stacks).length) {\n            actor.send('getGlyphs', {uid: this.uid, stacks}, (err, result) => {\n                if (!error) {\n                    error = err;\n                    glyphMap = result;\n                    maybePrepare.call(this);\n                }\n            });\n        } else {\n            glyphMap = {};\n        }\n\n        const icons = Object.keys(options.iconDependencies);\n        if (icons.length) {\n            actor.send('getImages', {icons}, (err, result) => {\n                if (!error) {\n                    error = err;\n                    imageMap = result;\n                    maybePrepare.call(this);\n                }\n            });\n        } else {\n            imageMap = {};\n        }\n\n        maybePrepare.call(this);\n\n        function maybePrepare() {\n            if (error) {\n                return callback(error);\n            } else if (glyphMap && imageMap) {\n                const glyphAtlas = makeGlyphAtlas(glyphMap);\n                const imageAtlas = makeImageAtlas(imageMap);\n\n                for (const key in buckets) {\n                    const bucket = buckets[key];\n                    if (bucket instanceof SymbolBucket) {\n                        recalculateLayers(bucket.layers, this.zoom);\n                        performSymbolLayout(bucket, glyphMap, glyphAtlas.positions, imageMap, imageAtlas.positions, this.showCollisionBoxes);\n                    }\n                }\n\n                this.status = 'done';\n\n                callback(null, {\n                    buckets: util.values(buckets).filter(b => !b.isEmpty()),\n                    featureIndex,\n                    collisionBoxArray: this.collisionBoxArray,\n                    glyphAtlasImage: glyphAtlas.image,\n                    iconAtlasImage: imageAtlas.image\n                });\n            }\n        }\n    }\n}\n\nfunction recalculateLayers(layers: $ReadOnlyArray<StyleLayer>, zoom: number) {\n    // Layers are shared and may have been used by a WorkerTile with a different zoom.\n    const parameters = new EvaluationParameters(zoom);\n    for (const layer of layers) {\n        layer.recalculate(parameters);\n    }\n}\n\nmodule.exports = WorkerTile;\n","// @flow\n\nconst Point = require('@mapbox/point-geometry');\nconst loadGeometry = require('./load_geometry');\nconst EXTENT = require('./extent');\nconst featureFilter = require('../style-spec/feature_filter');\nconst Grid = require('grid-index');\nconst DictionaryCoder = require('../util/dictionary_coder');\nconst vt = require('@mapbox/vector-tile');\nconst Protobuf = require('pbf');\nconst GeoJSONFeature = require('../util/vectortile_to_geojson');\nconst arraysIntersect = require('../util/util').arraysIntersect;\nconst {OverscaledTileID} = require('../source/tile_id');\nconst {register} = require('../util/web_worker_transfer');\n\nimport type CollisionIndex from '../symbol/collision_index';\nimport type StyleLayer from '../style/style_layer';\nimport type {FeatureFilter} from '../style-spec/feature_filter';\nimport type {CollisionBoxArray} from './array_types';\n\nconst {FeatureIndexArray} = require('./array_types');\n\ntype QueryParameters = {\n    scale: number,\n    bearing: number,\n    tileSize: number,\n    queryGeometry: Array<Array<Point>>,\n    additionalRadius: number,\n    params: {\n        filter: FilterSpecification,\n        layers: Array<string>,\n    },\n    collisionBoxArray: CollisionBoxArray,\n    sourceID: string,\n    bucketInstanceIds: { [number]: boolean },\n    collisionIndex: CollisionIndex\n}\n\nclass FeatureIndex {\n    tileID: OverscaledTileID;\n    overscaling: number;\n    x: number;\n    y: number;\n    z: number;\n    grid: Grid;\n    featureIndexArray: FeatureIndexArray;\n\n    rawTileData: ArrayBuffer;\n    bucketLayerIDs: Array<Array<string>>;\n\n    vtLayers: {[string]: VectorTileLayer};\n    sourceLayerCoder: DictionaryCoder;\n\n    collisionIndex: CollisionIndex;\n\n    constructor(tileID: OverscaledTileID,\n                overscaling: number,\n                grid?: Grid,\n                featureIndexArray?: FeatureIndexArray) {\n        this.tileID = tileID;\n        this.overscaling = overscaling;\n        this.x = tileID.canonical.x;\n        this.y = tileID.canonical.y;\n        this.z = tileID.canonical.z;\n        this.grid = grid || new Grid(EXTENT, 16, 0);\n        this.featureIndexArray = featureIndexArray || new FeatureIndexArray();\n    }\n\n    insert(feature: VectorTileFeature, geometry: Array<Array<Point>>, featureIndex: number, sourceLayerIndex: number, bucketIndex: number) {\n        const key = this.featureIndexArray.length;\n        this.featureIndexArray.emplaceBack(featureIndex, sourceLayerIndex, bucketIndex);\n\n        for (let r = 0; r < geometry.length; r++) {\n            const ring = geometry[r];\n\n            const bbox = [Infinity, Infinity, -Infinity, -Infinity];\n            for (let i = 0; i < ring.length; i++) {\n                const p = ring[i];\n                bbox[0] = Math.min(bbox[0], p.x);\n                bbox[1] = Math.min(bbox[1], p.y);\n                bbox[2] = Math.max(bbox[2], p.x);\n                bbox[3] = Math.max(bbox[3], p.y);\n            }\n\n            this.grid.insert(key, bbox[0], bbox[1], bbox[2], bbox[3]);\n        }\n    }\n\n    // Finds features in this tile at a particular position.\n    query(args: QueryParameters, styleLayers: {[string]: StyleLayer}) {\n        if (!this.vtLayers) {\n            this.vtLayers = new vt.VectorTile(new Protobuf(this.rawTileData)).layers;\n            this.sourceLayerCoder = new DictionaryCoder(this.vtLayers ? Object.keys(this.vtLayers).sort() : ['_geojsonTileLayer']);\n        }\n\n        const result = {};\n\n        const params = args.params || {},\n            pixelsToTileUnits = EXTENT / args.tileSize / args.scale,\n            filter = featureFilter(params.filter);\n\n        const queryGeometry = args.queryGeometry;\n        const additionalRadius = args.additionalRadius * pixelsToTileUnits;\n\n        let minX = Infinity;\n        let minY = Infinity;\n        let maxX = -Infinity;\n        let maxY = -Infinity;\n        for (let i = 0; i < queryGeometry.length; i++) {\n            const ring = queryGeometry[i];\n            for (let k = 0; k < ring.length; k++) {\n                const p = ring[k];\n                minX = Math.min(minX, p.x);\n                minY = Math.min(minY, p.y);\n                maxX = Math.max(maxX, p.x);\n                maxY = Math.max(maxY, p.y);\n            }\n        }\n\n        const matching = this.grid.query(minX - additionalRadius, minY - additionalRadius, maxX + additionalRadius, maxY + additionalRadius);\n        matching.sort(topDownFeatureComparator);\n        this.filterMatching(result, matching, this.featureIndexArray, queryGeometry, filter, params.layers, styleLayers, args.bearing, pixelsToTileUnits);\n\n        const matchingSymbols = args.collisionIndex ?\n            args.collisionIndex.queryRenderedSymbols(queryGeometry, this.tileID, EXTENT / args.tileSize, args.collisionBoxArray, args.sourceID, args.bucketInstanceIds) :\n            [];\n        matchingSymbols.sort();\n        this.filterMatching(result, matchingSymbols, args.collisionBoxArray, queryGeometry, filter, params.layers, styleLayers, args.bearing, pixelsToTileUnits);\n\n        return result;\n    }\n\n    filterMatching(\n        result: {[string]: Array<{ featureIndex: number, feature: GeoJSONFeature }>},\n        matching: Array<any>,\n        array: FeatureIndexArray | CollisionBoxArray,\n        queryGeometry: Array<Array<Point>>,\n        filter: FeatureFilter,\n        filterLayerIDs: Array<string>,\n        styleLayers: {[string]: StyleLayer},\n        bearing: number,\n        pixelsToTileUnits: number\n    ) {\n        let previousIndex;\n        for (let k = 0; k < matching.length; k++) {\n            const index = matching[k];\n\n            // don't check the same feature more than once\n            if (index === previousIndex) continue;\n            previousIndex = index;\n\n            const match = array.get(index);\n\n            const layerIDs = this.bucketLayerIDs[match.bucketIndex];\n            if (filterLayerIDs && !arraysIntersect(filterLayerIDs, layerIDs)) continue;\n\n            const sourceLayerName = this.sourceLayerCoder.decode(match.sourceLayerIndex);\n            const sourceLayer = this.vtLayers[sourceLayerName];\n            const feature = sourceLayer.feature(match.featureIndex);\n\n            if (!filter({zoom: this.tileID.overscaledZ}, feature)) continue;\n\n            let geometry = null;\n\n            for (let l = 0; l < layerIDs.length; l++) {\n                const layerID = layerIDs[l];\n\n                if (filterLayerIDs && filterLayerIDs.indexOf(layerID) < 0) {\n                    continue;\n                }\n\n                const styleLayer = styleLayers[layerID];\n                if (!styleLayer) continue;\n\n                if (styleLayer.type !== 'symbol') {\n                    // all symbols already match the style\n                    if (!geometry) {\n                        geometry = loadGeometry(feature);\n                    }\n                    if (!styleLayer.queryIntersectsFeature(queryGeometry, feature, geometry, this.z, bearing, pixelsToTileUnits)) {\n                        continue;\n                    }\n                }\n\n                const geojsonFeature = new GeoJSONFeature(feature, this.z, this.x, this.y);\n                (geojsonFeature: any).layer = styleLayer.serialize();\n                let layerResult = result[layerID];\n                if (layerResult === undefined) {\n                    layerResult = result[layerID] = [];\n                }\n                layerResult.push({ featureIndex: index, feature: geojsonFeature });\n            }\n        }\n    }\n\n    hasLayer(id: string) {\n        for (const layerIDs of this.bucketLayerIDs) {\n            for (const layerID of layerIDs) {\n                if (id === layerID) return true;\n            }\n        }\n\n        return false;\n    }\n}\n\nregister(\n    'FeatureIndex',\n    FeatureIndex,\n    { omit: ['rawTileData', 'sourceLayerCoder', 'collisionIndex'] }\n);\n\nmodule.exports = FeatureIndex;\n\nfunction topDownFeatureComparator(a, b) {\n    return b - a;\n}\n","// @flow\n\nclass Feature {\n    type: 'Feature';\n    _geometry: ?GeoJSONGeometry;\n    properties: {};\n    id: number | string | void;\n\n    _vectorTileFeature: VectorTileFeature;\n\n    constructor(vectorTileFeature: VectorTileFeature, z: number, x: number, y: number) {\n        this.type = 'Feature';\n\n        this._vectorTileFeature = vectorTileFeature;\n        (vectorTileFeature: any)._z = z;\n        (vectorTileFeature: any)._x = x;\n        (vectorTileFeature: any)._y = y;\n\n        this.properties = vectorTileFeature.properties;\n\n        if (vectorTileFeature.id != null) {\n            this.id = vectorTileFeature.id;\n        }\n    }\n\n    get geometry(): ?GeoJSONGeometry {\n        if (this._geometry === undefined) {\n            this._geometry = this._vectorTileFeature.toGeoJSON(\n                (this._vectorTileFeature: any)._x,\n                (this._vectorTileFeature: any)._y,\n                (this._vectorTileFeature: any)._z).geometry;\n        }\n        return this._geometry;\n    }\n\n    set geometry(g: ?GeoJSONGeometry) {\n        this._geometry = g;\n    }\n\n    toJSON() {\n        const json = {\n            geometry: this.geometry\n        };\n        for (const i in this) {\n            if (i === '_geometry' || i === '_vectorTileFeature') continue;\n            json[i] = (this: any)[i];\n        }\n        return json;\n    }\n}\n\nmodule.exports = Feature;\n","export { getURL, getTileBBox, getMercCoords };\n\n\n/**\n * getURL\n *\n * @param    {String}  baseUrl  Base url of the WMS server\n * @param    {String}  layer    Layer name\n * @param    {Number}  x        Tile coordinate x\n * @param    {Number}  y        Tile coordinate y\n * @param    {Number}  z        Tile zoom\n * @param    {Object}  [options]\n * @param    {String}  [options.format='image/png']\n * @param    {String}  [options.service='WMS']\n * @param    {String}  [options.version='1.1.1']\n * @param    {String}  [options.request='GetMap']\n * @param    {String}  [options.srs='EPSG:3857']\n * @param    {Number}  [options.width='256']\n * @param    {Number}  [options.height='256']\n * @returns  {String}  url\n * @example\n * var baseUrl = 'http://geodata.state.nj.us/imagerywms/Natural2015';\n * var layer = 'Natural2015';\n * var url = whoots.getURL(baseUrl, layer, 154308, 197167, 19);\n */\nfunction getURL(baseUrl, layer, x, y, z, options) {\n    options = options || {};\n\n    var url = baseUrl + '?' + [\n        'bbox='    + getTileBBox(x, y, z),\n        'format='  + (options.format || 'image/png'),\n        'service=' + (options.service || 'WMS'),\n        'version=' + (options.version || '1.1.1'),\n        'request=' + (options.request || 'GetMap'),\n        'srs='     + (options.srs || 'EPSG:3857'),\n        'width='   + (options.width || 256),\n        'height='  + (options.height || 256),\n        'layers='  + layer\n    ].join('&');\n\n    return url;\n}\n\n\n/**\n * getTileBBox\n *\n * @param    {Number}  x  Tile coordinate x\n * @param    {Number}  y  Tile coordinate y\n * @param    {Number}  z  Tile zoom\n * @returns  {String}  String of the bounding box\n */\nfunction getTileBBox(x, y, z) {\n    // for Google/OSM tile scheme we need to alter the y\n    y = (Math.pow(2, z) - y - 1);\n\n    var min = getMercCoords(x * 256, y * 256, z),\n        max = getMercCoords((x + 1) * 256, (y + 1) * 256, z);\n\n    return min[0] + ',' + min[1] + ',' + max[0] + ',' + max[1];\n}\n\n\n/**\n * getMercCoords\n *\n * @param    {Number}  x  Pixel coordinate x\n * @param    {Number}  y  Pixel coordinate y\n * @param    {Number}  z  Tile zoom\n * @returns  {Array}   [x, y]\n */\nfunction getMercCoords(x, y, z) {\n    var resolution = (2 * Math.PI * 6378137 / 256) / Math.pow(2, z),\n        merc_x = (x * resolution - 2 * Math.PI  * 6378137 / 2.0),\n        merc_y = (y * resolution - 2 * Math.PI  * 6378137 / 2.0);\n\n    return [merc_x, merc_y];\n}\n","// @flow\n\nconst Anchor = require('./anchor');\nconst getAnchors = require('./get_anchors');\nconst clipLine = require('./clip_line');\nconst OpacityState = require('./opacity_state');\nconst {shapeText, shapeIcon, WritingMode} = require('./shaping');\nconst {getGlyphQuads, getIconQuads} = require('./quads');\nconst CollisionFeature = require('./collision_feature');\nconst util = require('../util/util');\nconst scriptDetection = require('../util/script_detection');\nconst findPoleOfInaccessibility = require('../util/find_pole_of_inaccessibility');\nconst classifyRings = require('../util/classify_rings');\nconst EXTENT = require('../data/extent');\nconst SymbolBucket = require('../data/bucket/symbol_bucket');\nconst EvaluationParameters = require('../style/evaluation_parameters');\n\nimport type {Shaping, PositionedIcon} from './shaping';\nimport type {CollisionBoxArray} from '../data/array_types';\nimport type {SymbolFeature} from '../data/bucket/symbol_bucket';\nimport type {StyleImage} from '../style/style_image';\nimport type {StyleGlyph} from '../style/style_glyph';\nimport type SymbolStyleLayer from '../style/style_layer/symbol_style_layer';\nimport type {ImagePosition} from '../render/image_atlas';\nimport type {GlyphPosition} from '../render/glyph_atlas';\nimport type {PossiblyEvaluatedPropertyValue} from '../style/properties';\n\nconst Point = require('@mapbox/point-geometry');\n\nmodule.exports = {\n    performSymbolLayout\n};\n\n// The symbol layout process needs `text-size` evaluated at up to five different zoom levels, and\n// `icon-size` at up to three:\n//\n//   1. `text-size` at the zoom level of the bucket. Used to calculate a per-feature size for source `text-size`\n//       expressions, and to calculate the box dimensions for icon-text-fit.\n//   2. `icon-size` at the zoom level of the bucket. Used to calculate a per-feature size for source `icon-size`\n//       expressions.\n//   3. `text-size` and `icon-size` at the zoom level of the bucket, plus one. Used to calculate collision boxes.\n//   4. `text-size` at zoom level 18. Used for something line-symbol-placement-related.\n//   5.  For composite `*-size` expressions: two zoom levels of curve stops that \"cover\" the zoom level of the\n//       bucket. These go into a vertex buffer and are used by the shader to interpolate the size at render time.\n//\n// (1) and (2) are stored in `bucket.layers[0].layout`. The remainder are below.\n//\ntype Sizes = {\n    layoutTextSize: PossiblyEvaluatedPropertyValue<number>, // (3)\n    layoutIconSize: PossiblyEvaluatedPropertyValue<number>, // (3)\n    textMaxSize: PossiblyEvaluatedPropertyValue<number>,    // (4)\n    compositeTextSizes: [PossiblyEvaluatedPropertyValue<number>, PossiblyEvaluatedPropertyValue<number>], // (5)\n    compositeIconSizes: [PossiblyEvaluatedPropertyValue<number>, PossiblyEvaluatedPropertyValue<number>], // (5)\n};\n\nfunction performSymbolLayout(bucket: SymbolBucket,\n                             glyphMap: {[string]: {[number]: ?StyleGlyph}},\n                             glyphPositions: {[string]: {[number]: GlyphPosition}},\n                             imageMap: {[string]: StyleImage},\n                             imagePositions: {[string]: ImagePosition},\n                             showCollisionBoxes: boolean) {\n    bucket.createArrays();\n    bucket.symbolInstances = [];\n\n    const tileSize = 512 * bucket.overscaling;\n    bucket.tilePixelRatio = EXTENT / tileSize;\n    bucket.compareText = {};\n    bucket.iconsNeedLinear = false;\n\n    const layout = bucket.layers[0].layout;\n    const unevaluatedLayoutValues = bucket.layers[0]._unevaluatedLayout._values;\n\n    const sizes = {};\n\n    if (bucket.textSizeData.functionType === 'composite') {\n        const {min, max} = bucket.textSizeData.zoomRange;\n        sizes.compositeTextSizes = [\n            unevaluatedLayoutValues['text-size'].possiblyEvaluate(new EvaluationParameters(min)),\n            unevaluatedLayoutValues['text-size'].possiblyEvaluate(new EvaluationParameters(max))\n        ];\n    }\n\n    if (bucket.iconSizeData.functionType === 'composite') {\n        const {min, max} = bucket.iconSizeData.zoomRange;\n        sizes.compositeIconSizes = [\n            unevaluatedLayoutValues['icon-size'].possiblyEvaluate(new EvaluationParameters(min)),\n            unevaluatedLayoutValues['icon-size'].possiblyEvaluate(new EvaluationParameters(max))\n        ];\n    }\n\n    sizes.layoutTextSize = unevaluatedLayoutValues['text-size'].possiblyEvaluate(new EvaluationParameters(bucket.zoom + 1));\n    sizes.layoutIconSize = unevaluatedLayoutValues['icon-size'].possiblyEvaluate(new EvaluationParameters(bucket.zoom + 1));\n    sizes.textMaxSize = unevaluatedLayoutValues['text-size'].possiblyEvaluate(new EvaluationParameters(18));\n\n    const oneEm = 24;\n    const lineHeight = layout.get('text-line-height') * oneEm;\n    const textAlongLine = layout.get('text-rotation-alignment') === 'map' && layout.get('symbol-placement') === 'line';\n    const keepUpright = layout.get('text-keep-upright');\n\n\n    for (const feature of bucket.features) {\n        const fontstack = layout.get('text-font').evaluate(feature).join(',');\n        const glyphs = glyphMap[fontstack] || {};\n        const glyphPositionMap = glyphPositions[fontstack] || {};\n\n        const shapedTextOrientations = {};\n        const text = feature.text;\n        if (text) {\n            const allowsVerticalWritingMode = scriptDetection.allowsVerticalWritingMode(text);\n            const textOffset: [number, number] = (layout.get('text-offset').evaluate(feature).map((t)=> t * oneEm): any);\n            const spacing = layout.get('text-letter-spacing').evaluate(feature) * oneEm;\n            const spacingIfAllowed = scriptDetection.allowsLetterSpacing(text) ? spacing : 0;\n            const textAnchor = layout.get('text-anchor').evaluate(feature);\n            const textJustify = layout.get('text-justify').evaluate(feature);\n            const maxWidth = layout.get('symbol-placement') !== 'line' ?\n                layout.get('text-max-width').evaluate(feature) * oneEm :\n                0;\n\n            shapedTextOrientations.horizontal = shapeText(text, glyphs, maxWidth, lineHeight, textAnchor, textJustify, spacingIfAllowed, textOffset, oneEm, WritingMode.horizontal);\n            if (allowsVerticalWritingMode && textAlongLine && keepUpright) {\n                shapedTextOrientations.vertical = shapeText(text, glyphs, maxWidth, lineHeight, textAnchor, textJustify, spacingIfAllowed, textOffset, oneEm, WritingMode.vertical);\n            }\n        }\n\n        let shapedIcon;\n        if (feature.icon) {\n            const image = imageMap[feature.icon];\n            if (image) {\n                shapedIcon = shapeIcon(\n                    imagePositions[feature.icon],\n                    layout.get('icon-offset').evaluate(feature),\n                    layout.get('icon-anchor').evaluate(feature));\n                if (bucket.sdfIcons === undefined) {\n                    bucket.sdfIcons = image.sdf;\n                } else if (bucket.sdfIcons !== image.sdf) {\n                    util.warnOnce('Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer');\n                }\n                if (image.pixelRatio !== bucket.pixelRatio) {\n                    bucket.iconsNeedLinear = true;\n                } else if (layout.get('icon-rotate').constantOr(1) !== 0) {\n                    bucket.iconsNeedLinear = true;\n                }\n            }\n        }\n\n        if (shapedTextOrientations.horizontal || shapedIcon) {\n            addFeature(bucket, feature, shapedTextOrientations, shapedIcon, glyphPositionMap, sizes);\n        }\n    }\n\n    if (showCollisionBoxes) {\n        bucket.generateCollisionDebugBuffers();\n    }\n}\n\n\n/**\n * Given a feature and its shaped text and icon data, add a 'symbol\n * instance' for each _possible_ placement of the symbol feature.\n * (At render timePlaceSymbols#place() selects which of these instances to\n * show or hide based on collisions with symbols in other layers.)\n * @private\n */\nfunction addFeature(bucket: SymbolBucket,\n                    feature: SymbolFeature,\n                    shapedTextOrientations: any,\n                    shapedIcon: PositionedIcon | void,\n                    glyphPositionMap: {[number]: GlyphPosition},\n                    sizes: Sizes) {\n    const layoutTextSize = sizes.layoutTextSize.evaluate(feature);\n    const layoutIconSize = sizes.layoutIconSize.evaluate(feature);\n\n    // To reduce the number of labels that jump around when zooming we need\n    // to use a text-size value that is the same for all zoom levels.\n    // bucket calculates text-size at a high zoom level so that all tiles can\n    // use the same value when calculating anchor positions.\n    let textMaxSize = sizes.textMaxSize.evaluate(feature);\n    if (textMaxSize === undefined) {\n        textMaxSize = layoutTextSize;\n    }\n\n    const layout = bucket.layers[0].layout;\n    const textOffset = layout.get('text-offset').evaluate(feature);\n    const iconOffset = layout.get('icon-offset').evaluate(feature);\n\n    const glyphSize = 24,\n        fontScale = layoutTextSize / glyphSize,\n        textBoxScale = bucket.tilePixelRatio * fontScale,\n        textMaxBoxScale = bucket.tilePixelRatio * textMaxSize / glyphSize,\n        iconBoxScale = bucket.tilePixelRatio * layoutIconSize,\n        symbolMinDistance = bucket.tilePixelRatio * layout.get('symbol-spacing'),\n        textPadding = layout.get('text-padding') * bucket.tilePixelRatio,\n        iconPadding = layout.get('icon-padding') * bucket.tilePixelRatio,\n        textMaxAngle = layout.get('text-max-angle') / 180 * Math.PI,\n        textAlongLine = layout.get('text-rotation-alignment') === 'map' && layout.get('symbol-placement') === 'line',\n        iconAlongLine = layout.get('icon-rotation-alignment') === 'map' && layout.get('symbol-placement') === 'line',\n        symbolPlacement = layout.get('symbol-placement'),\n        textRepeatDistance = symbolMinDistance / 2;\n\n    const addSymbolAtAnchor = (line, anchor) => {\n        if (anchor.x < 0 || anchor.x >= EXTENT || anchor.y < 0 || anchor.y >= EXTENT) {\n            // Symbol layers are drawn across tile boundaries, We filter out symbols\n            // outside our tile boundaries (which may be included in vector tile buffers)\n            // to prevent double-drawing symbols.\n            return;\n        }\n\n        bucket.symbolInstances.push(addSymbol(bucket, anchor, line, shapedTextOrientations, shapedIcon, bucket.layers[0],\n            bucket.collisionBoxArray, feature.index, feature.sourceLayerIndex, bucket.index,\n            textBoxScale, textPadding, textAlongLine, textOffset,\n            iconBoxScale, iconPadding, iconAlongLine, iconOffset,\n            {zoom: bucket.zoom}, feature, glyphPositionMap, sizes));\n    };\n\n    if (symbolPlacement === 'line') {\n        for (const line of clipLine(feature.geometry, 0, 0, EXTENT, EXTENT)) {\n            const anchors = getAnchors(\n                line,\n                symbolMinDistance,\n                textMaxAngle,\n                shapedTextOrientations.vertical || shapedTextOrientations.horizontal,\n                shapedIcon,\n                glyphSize,\n                textMaxBoxScale,\n                bucket.overscaling,\n                EXTENT\n            );\n            for (const anchor of anchors) {\n                const shapedText = shapedTextOrientations.horizontal;\n                if (!shapedText || !anchorIsTooClose(bucket, shapedText.text, textRepeatDistance, anchor)) {\n                    addSymbolAtAnchor(line, anchor);\n                }\n            }\n        }\n    } else if (feature.type === 'Polygon') {\n        for (const polygon of classifyRings(feature.geometry, 0)) {\n            // 16 here represents 2 pixels\n            const poi = findPoleOfInaccessibility(polygon, 16);\n            addSymbolAtAnchor(polygon[0], new Anchor(poi.x, poi.y, 0));\n        }\n    } else if (feature.type === 'LineString') {\n        // https://github.com/mapbox/mapbox-gl-js/issues/3808\n        for (const line of feature.geometry) {\n            addSymbolAtAnchor(line, new Anchor(line[0].x, line[0].y, 0));\n        }\n    } else if (feature.type === 'Point') {\n        for (const points of feature.geometry) {\n            for (const point of points) {\n                addSymbolAtAnchor([point], new Anchor(point.x, point.y, 0));\n            }\n        }\n    }\n}\n\nfunction addTextVertices(bucket: SymbolBucket,\n                         anchor: Point,\n                         shapedText: Shaping,\n                         layer: SymbolStyleLayer,\n                         textAlongLine: boolean,\n                         globalProperties: Object,\n                         feature: SymbolFeature,\n                         textOffset: [number, number],\n                         lineArray: {lineStartIndex: number, lineLength: number},\n                         writingMode: number,\n                         placedTextSymbolIndices: Array<number>,\n                         glyphPositionMap: {[number]: GlyphPosition},\n                         sizes: Sizes) {\n    const glyphQuads = getGlyphQuads(anchor, shapedText,\n                            layer, textAlongLine, globalProperties, feature, glyphPositionMap);\n\n    const sizeData = bucket.textSizeData;\n    let textSizeData = null;\n\n    if (sizeData.functionType === 'source') {\n        textSizeData = [\n            10 * layer.layout.get('text-size').evaluate(feature)\n        ];\n    } else if (sizeData.functionType === 'composite') {\n        textSizeData = [\n            10 * sizes.compositeTextSizes[0].evaluate(feature),\n            10 * sizes.compositeTextSizes[1].evaluate(feature)\n        ];\n    }\n\n    bucket.addSymbols(\n        bucket.text,\n        glyphQuads,\n        textSizeData,\n        textOffset,\n        textAlongLine,\n        feature,\n        writingMode,\n        anchor,\n        lineArray.lineStartIndex,\n        lineArray.lineLength);\n\n    // The placedSymbolArray is used at render time in drawTileSymbols\n    // These indices allow access to the array at collision detection time\n    placedTextSymbolIndices.push(bucket.text.placedSymbolArray.length - 1);\n\n    return glyphQuads.length * 4;\n}\n\n\n/**\n * Add a single label & icon placement.\n *\n * @private\n */\nfunction addSymbol(bucket: SymbolBucket,\n                   anchor: Anchor,\n                   line: Array<Point>,\n                   shapedTextOrientations: any,\n                   shapedIcon: PositionedIcon | void,\n                   layer: SymbolStyleLayer,\n                   collisionBoxArray: CollisionBoxArray,\n                   featureIndex: number,\n                   sourceLayerIndex: number,\n                   bucketIndex: number,\n                   textBoxScale: number,\n                   textPadding: number,\n                   textAlongLine: boolean,\n                   textOffset: [number, number],\n                   iconBoxScale: number,\n                   iconPadding: number,\n                   iconAlongLine: boolean,\n                   iconOffset: [number, number],\n                   globalProperties: Object,\n                   feature: SymbolFeature,\n                   glyphPositionMap: {[number]: GlyphPosition},\n                   sizes: Sizes) {\n    const lineArray = bucket.addToLineVertexArray(anchor, line);\n\n    let textCollisionFeature, iconCollisionFeature;\n\n    let numIconVertices = 0;\n    let numGlyphVertices = 0;\n    let numVerticalGlyphVertices = 0;\n    const key = shapedTextOrientations.horizontal ? shapedTextOrientations.horizontal.text : '';\n    const placedTextSymbolIndices = [];\n    if (shapedTextOrientations.horizontal) {\n        // As a collision approximation, we can use either the vertical or the horizontal version of the feature\n        // We're counting on the two versions having similar dimensions\n        textCollisionFeature = new CollisionFeature(collisionBoxArray, line, anchor, featureIndex, sourceLayerIndex, bucketIndex, shapedTextOrientations.horizontal, textBoxScale, textPadding, textAlongLine, bucket.overscaling);\n        numGlyphVertices += addTextVertices(bucket, anchor, shapedTextOrientations.horizontal, layer, textAlongLine, globalProperties, feature, textOffset, lineArray, shapedTextOrientations.vertical ? WritingMode.horizontal : WritingMode.horizontalOnly, placedTextSymbolIndices, glyphPositionMap, sizes);\n\n        if (shapedTextOrientations.vertical) {\n            numVerticalGlyphVertices += addTextVertices(bucket, anchor, shapedTextOrientations.vertical, layer, textAlongLine, globalProperties, feature, textOffset, lineArray, WritingMode.vertical, placedTextSymbolIndices, glyphPositionMap, sizes);\n        }\n    }\n\n    const textBoxStartIndex = textCollisionFeature ? textCollisionFeature.boxStartIndex : bucket.collisionBoxArray.length;\n    const textBoxEndIndex = textCollisionFeature ? textCollisionFeature.boxEndIndex : bucket.collisionBoxArray.length;\n\n    if (shapedIcon) {\n        const iconQuads = getIconQuads(anchor, shapedIcon, layer,\n                            iconAlongLine, shapedTextOrientations.horizontal,\n                            globalProperties, feature);\n        iconCollisionFeature = new CollisionFeature(collisionBoxArray, line, anchor, featureIndex, sourceLayerIndex, bucketIndex, shapedIcon, iconBoxScale, iconPadding, /*align boxes to line*/false, bucket.overscaling);\n\n        numIconVertices = iconQuads.length * 4;\n\n        const sizeData = bucket.iconSizeData;\n        let iconSizeData = null;\n\n        if (sizeData.functionType === 'source') {\n            iconSizeData = [\n                10 * layer.layout.get('icon-size').evaluate(feature)\n            ];\n        } else if (sizeData.functionType === 'composite') {\n            iconSizeData = [\n                10 * sizes.compositeIconSizes[0].evaluate(feature),\n                10 * sizes.compositeIconSizes[1].evaluate(feature)\n            ];\n        }\n\n        bucket.addSymbols(\n            bucket.icon,\n            iconQuads,\n            iconSizeData,\n            iconOffset,\n            iconAlongLine,\n            feature,\n            false,\n            anchor,\n            lineArray.lineStartIndex,\n            lineArray.lineLength);\n    }\n\n    const iconBoxStartIndex = iconCollisionFeature ? iconCollisionFeature.boxStartIndex : bucket.collisionBoxArray.length;\n    const iconBoxEndIndex = iconCollisionFeature ? iconCollisionFeature.boxEndIndex : bucket.collisionBoxArray.length;\n\n    if (bucket.glyphOffsetArray.length >= SymbolBucket.MAX_GLYPHS) util.warnOnce(\"Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907\");\n\n    const textOpacityState = new OpacityState();\n    const iconOpacityState = new OpacityState();\n\n    return {\n        key,\n        textBoxStartIndex,\n        textBoxEndIndex,\n        iconBoxStartIndex,\n        iconBoxEndIndex,\n        textOffset,\n        iconOffset,\n        anchor,\n        line,\n        featureIndex,\n        feature,\n        numGlyphVertices,\n        numVerticalGlyphVertices,\n        numIconVertices,\n        textOpacityState,\n        iconOpacityState,\n        isDuplicate: false,\n        placedTextSymbolIndices,\n        crossTileID: 0\n    };\n}\n\nfunction anchorIsTooClose(bucket: any, text: string, repeatDistance: number, anchor: Point) {\n    const compareText = bucket.compareText;\n    if (!(text in compareText)) {\n        compareText[text] = [];\n    } else {\n        const otherAnchors = compareText[text];\n        for (let k = otherAnchors.length - 1; k >= 0; k--) {\n            if (anchor.dist(otherAnchors[k]) < repeatDistance) {\n                // If it's within repeatDistance of one anchor, stop looking\n                return true;\n            }\n        }\n    }\n    // If anchor is not within repeatDistance of any other anchor, add to array\n    compareText[text].push(anchor);\n    return false;\n}\n","// @flow\n\nconst interpolate = require('../style-spec/util/interpolate').number;\nconst Anchor = require('../symbol/anchor');\nconst checkMaxAngle = require('./check_max_angle');\n\nimport type Point from '@mapbox/point-geometry';\nimport type {Shaping, PositionedIcon} from './shaping';\n\nmodule.exports = getAnchors;\n\nfunction getAnchors(line: Array<Point>,\n                    spacing: number,\n                    maxAngle: number,\n                    shapedText: ?Shaping,\n                    shapedIcon: ?PositionedIcon,\n                    glyphSize: number,\n                    boxScale: number,\n                    overscaling: number,\n                    tileExtent: number) {\n\n    // Resample a line to get anchor points for labels and check that each\n    // potential label passes text-max-angle check and has enough froom to fit\n    // on the line.\n\n    const angleWindowSize = shapedText ?\n        3 / 5 * glyphSize * boxScale :\n        0;\n\n    const labelLength = Math.max(\n        shapedText ? shapedText.right - shapedText.left : 0,\n        shapedIcon ? shapedIcon.right - shapedIcon.left : 0);\n\n    // Is the line continued from outside the tile boundary?\n    const isLineContinued = line[0].x === 0 || line[0].x === tileExtent || line[0].y === 0 || line[0].y === tileExtent;\n\n    // Is the label long, relative to the spacing?\n    // If so, adjust the spacing so there is always a minimum space of `spacing / 4` between label edges.\n    if (spacing - labelLength * boxScale  < spacing / 4) {\n        spacing = labelLength * boxScale + spacing / 4;\n    }\n\n    // Offset the first anchor by:\n    // Either half the label length plus a fixed extra offset if the line is not continued\n    // Or half the spacing if the line is continued.\n\n    // For non-continued lines, add a bit of fixed extra offset to avoid collisions at T intersections.\n    const fixedExtraOffset = glyphSize * 2;\n\n    const offset = !isLineContinued ?\n        ((labelLength / 2 + fixedExtraOffset) * boxScale * overscaling) % spacing :\n        (spacing / 2 * overscaling) % spacing;\n\n    return resample(line, offset, spacing, angleWindowSize, maxAngle, labelLength * boxScale, isLineContinued, false, tileExtent);\n}\n\n\nfunction resample(line, offset, spacing, angleWindowSize, maxAngle, labelLength, isLineContinued, placeAtMiddle, tileExtent) {\n\n    const halfLabelLength = labelLength / 2;\n    let lineLength = 0;\n    for (let k = 0; k < line.length - 1; k++) {\n        lineLength += line[k].dist(line[k + 1]);\n    }\n\n    let distance = 0,\n        markedDistance = offset - spacing;\n\n    let anchors = [];\n\n    for (let i = 0; i < line.length - 1; i++) {\n\n        const a = line[i],\n            b = line[i + 1];\n\n        const segmentDist = a.dist(b),\n            angle = b.angleTo(a);\n\n        while (markedDistance + spacing < distance + segmentDist) {\n            markedDistance += spacing;\n\n            const t = (markedDistance - distance) / segmentDist,\n                x = interpolate(a.x, b.x, t),\n                y = interpolate(a.y, b.y, t);\n\n            // Check that the point is within the tile boundaries and that\n            // the label would fit before the beginning and end of the line\n            // if placed at this point.\n            if (x >= 0 && x < tileExtent && y >= 0 && y < tileExtent &&\n                    markedDistance - halfLabelLength >= 0 &&\n                    markedDistance + halfLabelLength <= lineLength) {\n                const anchor = new Anchor(x, y, angle, i);\n                anchor._round();\n\n                if (!angleWindowSize || checkMaxAngle(line, anchor, labelLength, angleWindowSize, maxAngle)) {\n                    anchors.push(anchor);\n                }\n            }\n        }\n\n        distance += segmentDist;\n    }\n\n    if (!placeAtMiddle && !anchors.length && !isLineContinued) {\n        // The first attempt at finding anchors at which labels can be placed failed.\n        // Try again, but this time just try placing one anchor at the middle of the line.\n        // This has the most effect for short lines in overscaled tiles, since the\n        // initial offset used in overscaled tiles is calculated to align labels with positions in\n        // parent tiles instead of placing the label as close to the beginning as possible.\n        anchors = resample(line, distance / 2, spacing, angleWindowSize, maxAngle, labelLength, isLineContinued, true, tileExtent);\n    }\n\n    return anchors;\n}\n","// @flow\n\nmodule.exports = checkMaxAngle;\n\nimport type Point from '@mapbox/point-geometry';\nimport type Anchor from './anchor';\n\n/**\n * Labels placed around really sharp angles aren't readable. Check if any\n * part of the potential label has a combined angle that is too big.\n *\n * @param line\n * @param anchor The point on the line around which the label is anchored.\n * @param labelLength The length of the label in geometry units.\n * @param windowSize The check fails if the combined angles within a part of the line that is `windowSize` long is too big.\n * @param maxAngle The maximum combined angle that any window along the label is allowed to have.\n *\n * @returns {boolean} whether the label should be placed\n * @private\n */\nfunction checkMaxAngle(line: Array<Point>, anchor: Anchor, labelLength: number, windowSize: number, maxAngle: number) {\n\n    // horizontal labels always pass\n    if (anchor.segment === undefined) return true;\n\n    let p = anchor;\n    let index = anchor.segment + 1;\n    let anchorDistance = 0;\n\n    // move backwards along the line to the first segment the label appears on\n    while (anchorDistance > -labelLength / 2) {\n        index--;\n\n        // there isn't enough room for the label after the beginning of the line\n        if (index < 0) return false;\n\n        anchorDistance -= line[index].dist(p);\n        p = line[index];\n    }\n\n    anchorDistance += line[index].dist(line[index + 1]);\n    index++;\n\n    // store recent corners and their total angle difference\n    const recentCorners = [];\n    let recentAngleDelta = 0;\n\n    // move forwards by the length of the label and check angles along the way\n    while (anchorDistance < labelLength / 2) {\n        const prev = line[index - 1];\n        const current = line[index];\n        const next = line[index + 1];\n\n        // there isn't enough room for the label before the end of the line\n        if (!next) return false;\n\n        let angleDelta = prev.angleTo(current) - current.angleTo(next);\n        // restrict angle to -pi..pi range\n        angleDelta = Math.abs(((angleDelta + 3 * Math.PI) % (Math.PI * 2)) - Math.PI);\n\n        recentCorners.push({\n            distance: anchorDistance,\n            angleDelta: angleDelta\n        });\n        recentAngleDelta += angleDelta;\n\n        // remove corners that are far enough away from the list of recent anchors\n        while (anchorDistance - recentCorners[0].distance > windowSize) {\n            recentAngleDelta -= recentCorners.shift().angleDelta;\n        }\n\n        // the sum of angles within the window area exceeds the maximum allowed value. check fails.\n        if (recentAngleDelta > maxAngle) return false;\n\n        index++;\n        anchorDistance += current.dist(next);\n    }\n\n    // no part of the line had an angle greater than the maximum allowed. check passes.\n    return true;\n}\n","// @flow\n\nconst Point = require('@mapbox/point-geometry');\n\nmodule.exports = clipLine;\n\n/**\n * Returns the part of a multiline that intersects with the provided rectangular box.\n *\n * @param lines\n * @param x1 the left edge of the box\n * @param y1 the top edge of the box\n * @param x2 the right edge of the box\n * @param y2 the bottom edge of the box\n * @returns lines\n * @private\n */\nfunction clipLine(lines: Array<Array<Point>>, x1: number, y1: number, x2: number, y2: number): Array<Array<Point>> {\n    const clippedLines = [];\n\n    for (let l = 0; l < lines.length; l++) {\n        const line = lines[l];\n        let clippedLine;\n\n        for (let i = 0; i < line.length - 1; i++) {\n            let p0 = line[i];\n            let p1 = line[i + 1];\n\n\n            if (p0.x < x1 && p1.x < x1) {\n                continue;\n            } else if (p0.x < x1) {\n                p0 = new Point(x1, p0.y + (p1.y - p0.y) * ((x1 - p0.x) / (p1.x - p0.x)))._round();\n            } else if (p1.x < x1) {\n                p1 = new Point(x1, p0.y + (p1.y - p0.y) * ((x1 - p0.x) / (p1.x - p0.x)))._round();\n            }\n\n            if (p0.y < y1 && p1.y < y1) {\n                continue;\n            } else if (p0.y < y1) {\n                p0 = new Point(p0.x + (p1.x - p0.x) * ((y1 - p0.y) / (p1.y - p0.y)), y1)._round();\n            } else if (p1.y < y1) {\n                p1 = new Point(p0.x + (p1.x - p0.x) * ((y1 - p0.y) / (p1.y - p0.y)), y1)._round();\n            }\n\n            if (p0.x >= x2 && p1.x >= x2) {\n                continue;\n            } else if (p0.x >= x2) {\n                p0 = new Point(x2, p0.y + (p1.y - p0.y) * ((x2 - p0.x) / (p1.x - p0.x)))._round();\n            } else if (p1.x >= x2) {\n                p1 = new Point(x2, p0.y + (p1.y - p0.y) * ((x2 - p0.x) / (p1.x - p0.x)))._round();\n            }\n\n            if (p0.y >= y2 && p1.y >= y2) {\n                continue;\n            } else if (p0.y >= y2) {\n                p0 = new Point(p0.x + (p1.x - p0.x) * ((y2 - p0.y) / (p1.y - p0.y)), y2)._round();\n            } else if (p1.y >= y2) {\n                p1 = new Point(p0.x + (p1.x - p0.x) * ((y2 - p0.y) / (p1.y - p0.y)), y2)._round();\n            }\n\n            if (!clippedLine || !p0.equals(clippedLine[clippedLine.length - 1])) {\n                clippedLine = [p0];\n                clippedLines.push(clippedLine);\n            }\n\n            clippedLine.push(p1);\n        }\n    }\n\n    return clippedLines;\n}\n","// @flow\n\nconst {register} = require('../util/web_worker_transfer');\n\nclass OpacityState {\n    opacity: number;\n    targetOpacity: number;\n    time: number\n\n    constructor() {\n        this.opacity = 0;\n        this.targetOpacity = 0;\n        this.time = 0;\n    }\n\n    clone() {\n        const clone = new OpacityState();\n        clone.opacity = this.opacity;\n        clone.targetOpacity = this.targetOpacity;\n        clone.time = this.time;\n        return clone;\n    }\n}\n\nregister('OpacityState', OpacityState);\n\nmodule.exports = OpacityState;\n","// @flow\n\nconst scriptDetection = require('../util/script_detection');\nconst verticalizePunctuation = require('../util/verticalize_punctuation');\nconst rtlTextPlugin = require('../source/rtl_text_plugin');\n\nimport type {StyleGlyph} from '../style/style_glyph';\nimport type {ImagePosition} from '../render/image_atlas';\n\nconst WritingMode = {\n    horizontal: 1,\n    vertical: 2,\n    horizontalOnly: 3\n};\n\nmodule.exports = {\n    shapeText,\n    shapeIcon,\n    WritingMode\n};\n\n// The position of a glyph relative to the text's anchor point.\nexport type PositionedGlyph = {\n    glyph: number,\n    x: number,\n    y: number,\n    vertical: boolean\n};\n\n// A collection of positioned glyphs and some metadata\nexport type Shaping = {\n    positionedGlyphs: Array<PositionedGlyph>,\n    top: number,\n    bottom: number,\n    left: number,\n    right: number,\n    writingMode: 1 | 2\n};\n\ntype SymbolAnchor = 'center' | 'left' | 'right' | 'top' | 'bottom' | 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\ntype TextJustify = 'left' | 'center' | 'right';\n\nfunction breakLines(text: string, lineBreakPoints: Array<number>) {\n    const lines = [];\n    let start = 0;\n    for (const lineBreak of lineBreakPoints) {\n        lines.push(text.substring(start, lineBreak));\n        start = lineBreak;\n    }\n\n    if (start < text.length) {\n        lines.push(text.substring(start, text.length));\n    }\n    return lines;\n}\n\nfunction shapeText(text: string,\n                   glyphs: {[number]: ?StyleGlyph},\n                   maxWidth: number,\n                   lineHeight: number,\n                   textAnchor: SymbolAnchor,\n                   textJustify: TextJustify,\n                   spacing: number,\n                   translate: [number, number],\n                   verticalHeight: number,\n                   writingMode: 1 | 2): Shaping | false {\n    let logicalInput = text.trim();\n    if (writingMode === WritingMode.vertical) {\n        logicalInput = verticalizePunctuation(logicalInput);\n    }\n\n    const positionedGlyphs = [];\n    const shaping = {\n        positionedGlyphs,\n        text: logicalInput,\n        top: translate[1],\n        bottom: translate[1],\n        left: translate[0],\n        right: translate[0],\n        writingMode\n    };\n\n    let lines: Array<string>;\n\n    const {processBidirectionalText} = rtlTextPlugin;\n    if (processBidirectionalText) {\n        lines = processBidirectionalText(logicalInput, determineLineBreaks(logicalInput, spacing, maxWidth, glyphs));\n    } else {\n        lines = breakLines(logicalInput, determineLineBreaks(logicalInput, spacing, maxWidth, glyphs));\n    }\n\n    shapeLines(shaping, glyphs, lines, lineHeight, textAnchor, textJustify, writingMode, spacing, verticalHeight);\n\n    if (!positionedGlyphs.length)\n        return false;\n\n    return shaping;\n}\n\nconst whitespace: {[number]: boolean} = {\n    [0x09]: true, // tab\n    [0x0a]: true, // newline\n    [0x0b]: true, // vertical tab\n    [0x0c]: true, // form feed\n    [0x0d]: true, // carriage return\n    [0x20]: true, // space\n};\n\nconst breakable: {[number]: boolean} = {\n    [0x0a]:   true, // newline\n    [0x20]:   true, // space\n    [0x26]:   true, // ampersand\n    [0x28]:   true, // left parenthesis\n    [0x29]:   true, // right parenthesis\n    [0x2b]:   true, // plus sign\n    [0x2d]:   true, // hyphen-minus\n    [0x2f]:   true, // solidus\n    [0xad]:   true, // soft hyphen\n    [0xb7]:   true, // middle dot\n    [0x200b]: true, // zero-width space\n    [0x2010]: true, // hyphen\n    [0x2013]: true, // en dash\n    [0x2027]: true  // interpunct\n    // Many other characters may be reasonable breakpoints\n    // Consider \"neutral orientation\" characters at scriptDetection.charHasNeutralVerticalOrientation\n    // See https://github.com/mapbox/mapbox-gl-js/issues/3658\n};\n\nfunction determineAverageLineWidth(logicalInput: string,\n                                   spacing: number,\n                                   maxWidth: number,\n                                   glyphs: {[number]: ?StyleGlyph}) {\n    let totalWidth = 0;\n\n    for (let index = 0; index < logicalInput.length; index++) {\n        const glyph = glyphs[logicalInput.charCodeAt(index)];\n        if (!glyph)\n            continue;\n        totalWidth += glyph.metrics.advance + spacing;\n    }\n\n    const lineCount = Math.max(1, Math.ceil(totalWidth / maxWidth));\n    return totalWidth / lineCount;\n}\n\nfunction calculateBadness(lineWidth: number,\n                          targetWidth: number,\n                          penalty: number,\n                          isLastBreak: boolean) {\n    const raggedness = Math.pow(lineWidth - targetWidth, 2);\n    if (isLastBreak) {\n        // Favor finals lines shorter than average over longer than average\n        if (lineWidth < targetWidth) {\n            return raggedness / 2;\n        } else {\n            return raggedness * 2;\n        }\n    }\n\n    return raggedness + Math.abs(penalty) * penalty;\n}\n\nfunction calculatePenalty(codePoint: number, nextCodePoint: number) {\n    let penalty = 0;\n    // Force break on newline\n    if (codePoint === 0x0a) {\n        penalty -= 10000;\n    }\n    // Penalize open parenthesis at end of line\n    if (codePoint === 0x28 || codePoint === 0xff08) {\n        penalty += 50;\n    }\n\n    // Penalize close parenthesis at beginning of line\n    if (nextCodePoint === 0x29 || nextCodePoint === 0xff09) {\n        penalty += 50;\n    }\n    return penalty;\n}\n\ntype Break = {\n    index: number,\n    x: number,\n    priorBreak: ?Break,\n    badness: number\n};\n\nfunction evaluateBreak(breakIndex: number,\n                       breakX: number,\n                       targetWidth: number,\n                       potentialBreaks: Array<Break>,\n                       penalty: number,\n                       isLastBreak: boolean): Break {\n    // We could skip evaluating breaks where the line length (breakX - priorBreak.x) > maxWidth\n    //  ...but in fact we allow lines longer than maxWidth (if there's no break points)\n    //  ...and when targetWidth and maxWidth are close, strictly enforcing maxWidth can give\n    //     more lopsided results.\n\n    let bestPriorBreak: ?Break = null;\n    let bestBreakBadness = calculateBadness(breakX, targetWidth, penalty, isLastBreak);\n\n    for (const potentialBreak of potentialBreaks) {\n        const lineWidth = breakX - potentialBreak.x;\n        const breakBadness =\n            calculateBadness(lineWidth, targetWidth, penalty, isLastBreak) + potentialBreak.badness;\n        if (breakBadness <= bestBreakBadness) {\n            bestPriorBreak = potentialBreak;\n            bestBreakBadness = breakBadness;\n        }\n    }\n\n    return {\n        index: breakIndex,\n        x: breakX,\n        priorBreak: bestPriorBreak,\n        badness: bestBreakBadness\n    };\n}\n\nfunction leastBadBreaks(lastLineBreak: ?Break): Array<number> {\n    if (!lastLineBreak) {\n        return [];\n    }\n    return leastBadBreaks(lastLineBreak.priorBreak).concat(lastLineBreak.index);\n}\n\nfunction determineLineBreaks(logicalInput: string,\n                             spacing: number,\n                             maxWidth: number,\n                             glyphs: {[number]: ?StyleGlyph}): Array<number> {\n    if (!maxWidth)\n        return [];\n\n    if (!logicalInput)\n        return [];\n\n    const potentialLineBreaks = [];\n    const targetWidth = determineAverageLineWidth(logicalInput, spacing, maxWidth, glyphs);\n\n    let currentX = 0;\n\n    for (let i = 0; i < logicalInput.length; i++) {\n        const codePoint = logicalInput.charCodeAt(i);\n        const glyph = glyphs[codePoint];\n\n        if (glyph && !whitespace[codePoint])\n            currentX += glyph.metrics.advance + spacing;\n\n        // Ideographic characters, spaces, and word-breaking punctuation that often appear without\n        // surrounding spaces.\n        if ((i < logicalInput.length - 1) &&\n            (breakable[codePoint] ||\n                scriptDetection.charAllowsIdeographicBreaking(codePoint))) {\n\n            potentialLineBreaks.push(\n                evaluateBreak(\n                    i + 1,\n                    currentX,\n                    targetWidth,\n                    potentialLineBreaks,\n                    calculatePenalty(codePoint, logicalInput.charCodeAt(i + 1)),\n                    false));\n        }\n    }\n\n    return leastBadBreaks(\n        evaluateBreak(\n            logicalInput.length,\n            currentX,\n            targetWidth,\n            potentialLineBreaks,\n            0,\n            true));\n}\n\nfunction getAnchorAlignment(anchor: SymbolAnchor) {\n    let horizontalAlign = 0.5, verticalAlign = 0.5;\n\n    switch (anchor) {\n    case 'right':\n    case 'top-right':\n    case 'bottom-right':\n        horizontalAlign = 1;\n        break;\n    case 'left':\n    case 'top-left':\n    case 'bottom-left':\n        horizontalAlign = 0;\n        break;\n    }\n\n    switch (anchor) {\n    case 'bottom':\n    case 'bottom-right':\n    case 'bottom-left':\n        verticalAlign = 1;\n        break;\n    case 'top':\n    case 'top-right':\n    case 'top-left':\n        verticalAlign = 0;\n        break;\n    }\n\n    return { horizontalAlign, verticalAlign };\n}\n\nfunction shapeLines(shaping: Shaping,\n                    glyphs: {[number]: ?StyleGlyph},\n                    lines: Array<string>,\n                    lineHeight: number,\n                    textAnchor: SymbolAnchor,\n                    textJustify: TextJustify,\n                    writingMode: 1 | 2,\n                    spacing: number,\n                    verticalHeight: number) {\n    // the y offset *should* be part of the font metadata\n    const yOffset = -17;\n\n    let x = 0;\n    let y = yOffset;\n\n    let maxLineLength = 0;\n    const positionedGlyphs = shaping.positionedGlyphs;\n\n    const justify =\n        textJustify === 'right' ? 1 :\n        textJustify === 'left' ? 0 : 0.5;\n\n    for (let line of lines) {\n        line = line.trim();\n\n        if (!line.length) {\n            y += lineHeight; // Still need a line feed after empty line\n            continue;\n        }\n\n        const lineStartIndex = positionedGlyphs.length;\n        for (let i = 0; i < line.length; i++) {\n            const codePoint = line.charCodeAt(i);\n            const glyph = glyphs[codePoint];\n\n            if (!glyph) continue;\n\n            if (!scriptDetection.charHasUprightVerticalOrientation(codePoint) || writingMode === WritingMode.horizontal) {\n                positionedGlyphs.push({glyph: codePoint, x, y, vertical: false});\n                x += glyph.metrics.advance + spacing;\n            } else {\n                positionedGlyphs.push({glyph: codePoint, x, y: 0, vertical: true});\n                x += verticalHeight + spacing;\n            }\n        }\n\n        // Only justify if we placed at least one glyph\n        if (positionedGlyphs.length !== lineStartIndex) {\n            const lineLength = x - spacing;\n            maxLineLength = Math.max(lineLength, maxLineLength);\n\n            justifyLine(positionedGlyphs, glyphs, lineStartIndex, positionedGlyphs.length - 1, justify);\n        }\n\n        x = 0;\n        y += lineHeight;\n    }\n\n    const {horizontalAlign, verticalAlign} = getAnchorAlignment(textAnchor);\n    align(positionedGlyphs, justify, horizontalAlign, verticalAlign, maxLineLength, lineHeight, lines.length);\n\n    // Calculate the bounding box\n    const height = lines.length * lineHeight;\n\n    shaping.top += -verticalAlign * height;\n    shaping.bottom = shaping.top + height;\n    shaping.left += -horizontalAlign * maxLineLength;\n    shaping.right = shaping.left + maxLineLength;\n}\n\n// justify right = 1, left = 0, center = 0.5\nfunction justifyLine(positionedGlyphs: Array<PositionedGlyph>,\n                     glyphs: {[number]: ?StyleGlyph},\n                     start: number,\n                     end: number,\n                     justify: 1 | 0 | 0.5) {\n    if (!justify)\n        return;\n\n    const glyph = glyphs[positionedGlyphs[end].glyph];\n    if (glyph) {\n        const lastAdvance = glyph.metrics.advance;\n        const lineIndent = (positionedGlyphs[end].x + lastAdvance) * justify;\n\n        for (let j = start; j <= end; j++) {\n            positionedGlyphs[j].x -= lineIndent;\n        }\n    }\n}\n\nfunction align(positionedGlyphs: Array<PositionedGlyph>,\n               justify: number,\n               horizontalAlign: number,\n               verticalAlign: number,\n               maxLineLength: number,\n               lineHeight: number,\n               lineCount: number) {\n    const shiftX = (justify - horizontalAlign) * maxLineLength;\n    const shiftY = (-verticalAlign * lineCount + 0.5) * lineHeight;\n\n    for (let j = 0; j < positionedGlyphs.length; j++) {\n        positionedGlyphs[j].x += shiftX;\n        positionedGlyphs[j].y += shiftY;\n    }\n}\n\nexport type PositionedIcon = {\n    image: ImagePosition,\n    top: number,\n    bottom: number,\n    left: number,\n    right: number\n};\n\nfunction shapeIcon(image: ImagePosition, iconOffset: [number, number], iconAnchor: SymbolAnchor): PositionedIcon {\n    const {horizontalAlign, verticalAlign} = getAnchorAlignment(iconAnchor);\n    const dx = iconOffset[0];\n    const dy = iconOffset[1];\n    const x1 = dx - image.displaySize[0] * horizontalAlign;\n    const x2 = x1 + image.displaySize[0];\n    const y1 = dy - image.displaySize[1] * verticalAlign;\n    const y2 = y1 + image.displaySize[1];\n    return {image, top: y1, bottom: y2, left: x1, right: x2};\n}\n","// @flow\n\nconst Point = require('@mapbox/point-geometry');\nconst {GLYPH_PBF_BORDER} = require('../style/parse_glyph_pbf');\n\nimport type Anchor from './anchor';\nimport type {PositionedIcon, Shaping} from './shaping';\nimport type SymbolStyleLayer from '../style/style_layer/symbol_style_layer';\nimport type {Feature} from '../style-spec/expression';\nimport type {GlyphPosition} from '../render/glyph_atlas';\n\nmodule.exports = {\n    getIconQuads,\n    getGlyphQuads\n};\n\n/**\n * A textured quad for rendering a single icon or glyph.\n *\n * The zoom range the glyph can be shown is defined by minScale and maxScale.\n *\n * @param tl The offset of the top left corner from the anchor.\n * @param tr The offset of the top right corner from the anchor.\n * @param bl The offset of the bottom left corner from the anchor.\n * @param br The offset of the bottom right corner from the anchor.\n * @param tex The texture coordinates.\n *\n * @private\n */\nexport type SymbolQuad = {\n    tl: Point,\n    tr: Point,\n    bl: Point,\n    br: Point,\n    tex: {\n        x: number,\n        y: number,\n        w: number,\n        h: number\n    },\n    writingMode: any | void,\n    glyphOffset: [number, number]\n};\n\n/**\n * Create the quads used for rendering an icon.\n * @private\n */\nfunction getIconQuads(anchor: Anchor,\n                      shapedIcon: PositionedIcon,\n                      layer: SymbolStyleLayer,\n                      alongLine: boolean,\n                      shapedText: Shaping,\n                      globalProperties: Object,\n                      feature: Feature): Array<SymbolQuad> {\n    const image = shapedIcon.image;\n    const layout = layer.layout;\n\n    // If you have a 10px icon that isn't perfectly aligned to the pixel grid it will cover 11 actual\n    // pixels. The quad needs to be padded to account for this, otherwise they'll look slightly clipped\n    // on one edge in some cases.\n    const border = 1;\n\n    const top = shapedIcon.top - border / image.pixelRatio;\n    const left = shapedIcon.left - border / image.pixelRatio;\n    const bottom = shapedIcon.bottom + border / image.pixelRatio;\n    const right = shapedIcon.right + border / image.pixelRatio;\n    let tl, tr, br, bl;\n\n    // text-fit mode\n    if (layout.get('icon-text-fit') !== 'none' && shapedText) {\n        const iconWidth = (right - left),\n            iconHeight = (bottom - top),\n            size = layout.get('text-size').evaluate(feature) / 24,\n            textLeft = shapedText.left * size,\n            textRight = shapedText.right * size,\n            textTop = shapedText.top * size,\n            textBottom = shapedText.bottom * size,\n            textWidth = textRight - textLeft,\n            textHeight = textBottom - textTop,\n            padT = layout.get('icon-text-fit-padding')[0],\n            padR = layout.get('icon-text-fit-padding')[1],\n            padB = layout.get('icon-text-fit-padding')[2],\n            padL = layout.get('icon-text-fit-padding')[3],\n            offsetY = layout.get('icon-text-fit') === 'width' ? (textHeight - iconHeight) * 0.5 : 0,\n            offsetX = layout.get('icon-text-fit') === 'height' ? (textWidth - iconWidth) * 0.5 : 0,\n            width = layout.get('icon-text-fit') === 'width' || layout.get('icon-text-fit') === 'both' ? textWidth : iconWidth,\n            height = layout.get('icon-text-fit') === 'height' || layout.get('icon-text-fit') === 'both' ? textHeight : iconHeight;\n        tl = new Point(textLeft + offsetX - padL,         textTop + offsetY - padT);\n        tr = new Point(textLeft + offsetX + padR + width, textTop + offsetY - padT);\n        br = new Point(textLeft + offsetX + padR + width, textTop + offsetY + padB + height);\n        bl = new Point(textLeft + offsetX - padL,         textTop + offsetY + padB + height);\n    // Normal icon size mode\n    } else {\n        tl = new Point(left, top);\n        tr = new Point(right, top);\n        br = new Point(right, bottom);\n        bl = new Point(left, bottom);\n    }\n\n    const angle = layer.layout.get('icon-rotate').evaluate(feature) * Math.PI / 180;\n\n    if (angle) {\n        const sin = Math.sin(angle),\n            cos = Math.cos(angle),\n            matrix = [cos, -sin, sin, cos];\n\n        tl._matMult(matrix);\n        tr._matMult(matrix);\n        bl._matMult(matrix);\n        br._matMult(matrix);\n    }\n\n    // Icon quad is padded, so texture coordinates also need to be padded.\n    const textureRect = {\n        x: image.textureRect.x - border,\n        y: image.textureRect.y - border,\n        w: image.textureRect.w + border * 2,\n        h: image.textureRect.h + border * 2\n    };\n\n    return [{tl, tr, bl, br, tex: textureRect, writingMode: undefined, glyphOffset: [0, 0]}];\n}\n\n/**\n * Create the quads used for rendering a text label.\n * @private\n */\nfunction getGlyphQuads(anchor: Anchor,\n                       shaping: Shaping,\n                       layer: SymbolStyleLayer,\n                       alongLine: boolean,\n                       globalProperties: Object,\n                       feature: Feature,\n                       positions: {[number]: GlyphPosition}): Array<SymbolQuad> {\n\n    const oneEm = 24;\n    const textRotate = layer.layout.get('text-rotate').evaluate(feature) * Math.PI / 180;\n    const textOffset = layer.layout.get('text-offset').evaluate(feature).map((t)=> t * oneEm);\n\n    const positionedGlyphs = shaping.positionedGlyphs;\n    const quads = [];\n\n\n    for (let k = 0; k < positionedGlyphs.length; k++) {\n        const positionedGlyph = positionedGlyphs[k];\n        const glyph = positions[positionedGlyph.glyph];\n        if (!glyph) continue;\n\n        const rect = glyph.rect;\n        if (!rect) continue;\n\n        // The rects have an addditional buffer that is not included in their size.\n        const glyphPadding = 1.0;\n        const rectBuffer = GLYPH_PBF_BORDER + glyphPadding;\n\n        const halfAdvance = glyph.metrics.advance / 2;\n\n        const glyphOffset = alongLine ?\n            [positionedGlyph.x + halfAdvance, positionedGlyph.y] :\n            [0, 0];\n\n        const builtInOffset = alongLine ?\n            [0, 0] :\n            [positionedGlyph.x + halfAdvance + textOffset[0], positionedGlyph.y + textOffset[1]];\n\n\n        const x1 = glyph.metrics.left - rectBuffer - halfAdvance + builtInOffset[0];\n        const y1 = -glyph.metrics.top - rectBuffer + builtInOffset[1];\n        const x2 = x1 + rect.w;\n        const y2 = y1 + rect.h;\n\n        const tl = new Point(x1, y1);\n        const tr = new Point(x2, y1);\n        const bl  = new Point(x1, y2);\n        const br = new Point(x2, y2);\n\n        if (alongLine && positionedGlyph.vertical) {\n            // Vertical-supporting glyphs are laid out in 24x24 point boxes (1 square em)\n            // In horizontal orientation, the y values for glyphs are below the midline\n            // and we use a \"yOffset\" of -17 to pull them up to the middle.\n            // By rotating counter-clockwise around the point at the center of the left\n            // edge of a 24x24 layout box centered below the midline, we align the center\n            // of the glyphs with the horizontal midline, so the yOffset is no longer\n            // necessary, but we also pull the glyph to the left along the x axis\n            const center = new Point(-halfAdvance, halfAdvance);\n            const verticalRotation = -Math.PI / 2;\n            const xOffsetCorrection = new Point(5, 0);\n            tl._rotateAround(verticalRotation, center)._add(xOffsetCorrection);\n            tr._rotateAround(verticalRotation, center)._add(xOffsetCorrection);\n            bl._rotateAround(verticalRotation, center)._add(xOffsetCorrection);\n            br._rotateAround(verticalRotation, center)._add(xOffsetCorrection);\n        }\n\n        if (textRotate) {\n            const sin = Math.sin(textRotate),\n                cos = Math.cos(textRotate),\n                matrix = [cos, -sin, sin, cos];\n\n            tl._matMult(matrix);\n            tr._matMult(matrix);\n            bl._matMult(matrix);\n            br._matMult(matrix);\n        }\n\n        quads.push({tl, tr, bl, br, tex: rect, writingMode: shaping.writingMode, glyphOffset});\n    }\n\n    return quads;\n}\n","// @flow\n\nconst {AlphaImage} = require('../util/image');\nconst Protobuf = require('pbf');\nconst border = 3;\n\nimport type {StyleGlyph} from './style_glyph';\n\nfunction readFontstacks(tag: number, glyphs: Array<StyleGlyph>, pbf: Protobuf) {\n    if (tag === 1) {\n        pbf.readMessage(readFontstack, glyphs);\n    }\n}\n\nfunction readFontstack(tag: number, glyphs: Array<StyleGlyph>, pbf: Protobuf) {\n    if (tag === 3) {\n        const {id, bitmap, width, height, left, top, advance} = pbf.readMessage(readGlyph, {});\n        glyphs.push({\n            id,\n            bitmap: new AlphaImage({\n                width: width + 2 * border,\n                height: height + 2 * border\n            }, bitmap),\n            metrics: {width, height, left, top, advance}\n        });\n    }\n}\n\nfunction readGlyph(tag: number, glyph: Object, pbf: Protobuf) {\n    if (tag === 1) glyph.id = pbf.readVarint();\n    else if (tag === 2) glyph.bitmap = pbf.readBytes();\n    else if (tag === 3) glyph.width = pbf.readVarint();\n    else if (tag === 4) glyph.height = pbf.readVarint();\n    else if (tag === 5) glyph.left = pbf.readSVarint();\n    else if (tag === 6) glyph.top = pbf.readSVarint();\n    else if (tag === 7) glyph.advance = pbf.readVarint();\n}\n\nmodule.exports = function (data: ArrayBuffer | Uint8Array): Array<StyleGlyph> {\n    return new Protobuf(data).readFields(readFontstacks, []);\n};\n\nmodule.exports.GLYPH_PBF_BORDER = border;\n","// @flow\n\nimport type {CollisionBoxArray} from '../data/array_types';\nimport type Point from '@mapbox/point-geometry';\nimport type Anchor from './anchor';\n\n/**\n * A CollisionFeature represents the area of the tile covered by a single label.\n * It is used with CollisionIndex to check if the label overlaps with any\n * previous labels. A CollisionFeature is mostly just a set of CollisionBox\n * objects.\n *\n * @private\n */\nclass CollisionFeature {\n    boxStartIndex: number;\n    boxEndIndex: number;\n\n    /**\n     * Create a CollisionFeature, adding its collision box data to the given collisionBoxArray in the process.\n     *\n     * @param line The geometry the label is placed on.\n     * @param anchor The point along the line around which the label is anchored.\n     * @param shaped The text or icon shaping results.\n     * @param boxScale A magic number used to convert from glyph metrics units to geometry units.\n     * @param padding The amount of padding to add around the label edges.\n     * @param alignLine Whether the label is aligned with the line or the viewport.\n     */\n    constructor(collisionBoxArray: CollisionBoxArray,\n                line: Array<Point>,\n                anchor: Anchor,\n                featureIndex: number,\n                sourceLayerIndex: number,\n                bucketIndex: number,\n                shaped: Object,\n                boxScale: number,\n                padding: number,\n                alignLine: boolean,\n                overscaling: number) {\n        const y1 = shaped.top * boxScale - padding;\n        const y2 = shaped.bottom * boxScale + padding;\n        const x1 = shaped.left * boxScale - padding;\n        const x2 = shaped.right * boxScale + padding;\n\n        this.boxStartIndex = collisionBoxArray.length;\n\n        if (alignLine) {\n\n            let height = y2 - y1;\n            const length = x2 - x1;\n\n            if (height > 0) {\n                // set minimum box height to avoid very many small labels\n                height = Math.max(10 * boxScale, height);\n\n                this._addLineCollisionCircles(collisionBoxArray, line, anchor, (anchor.segment: any), length, height, featureIndex, sourceLayerIndex, bucketIndex, overscaling);\n            }\n\n        } else {\n            collisionBoxArray.emplaceBack(anchor.x, anchor.y, x1, y1, x2, y2, featureIndex, sourceLayerIndex, bucketIndex,\n                0, 0);\n        }\n\n        this.boxEndIndex = collisionBoxArray.length;\n    }\n\n    /**\n     * Create a set of CollisionBox objects for a line.\n     *\n     * @param labelLength The length of the label in geometry units.\n     * @param anchor The point along the line around which the label is anchored.\n     * @param boxSize The size of the collision boxes that will be created.\n     * @private\n     */\n    _addLineCollisionCircles(collisionBoxArray: CollisionBoxArray,\n                           line: Array<Point>,\n                           anchor: Anchor,\n                           segment: number,\n                           labelLength: number,\n                           boxSize: number,\n                           featureIndex: number,\n                           sourceLayerIndex: number,\n                           bucketIndex: number,\n                           overscaling: number) {\n        const step = boxSize / 2;\n        const nBoxes = Math.floor(labelLength / step);\n        // We calculate line collision circles out to 300% of what would normally be our\n        // max size, to allow collision detection to work on labels that expand as\n        // they move into the distance\n        // Vertically oriented labels in the distant field can extend past this padding\n        // This is a noticeable problem in overscaled tiles where the pitch 0-based\n        // symbol spacing will put labels very close together in a pitched map.\n        // To reduce the cost of adding extra collision circles, we slowly increase\n        // them for overscaled tiles.\n        const overscalingPaddingFactor = 1 + .4 * Math.log(overscaling) / Math.LN2;\n        const nPitchPaddingBoxes = Math.floor(nBoxes * overscalingPaddingFactor / 2);\n\n        // offset the center of the first box by half a box so that the edge of the\n        // box is at the edge of the label.\n        const firstBoxOffset = -boxSize / 2;\n\n        let p = anchor;\n        let index = segment + 1;\n        let anchorDistance = firstBoxOffset;\n        const labelStartDistance = -labelLength / 2;\n        const paddingStartDistance = labelStartDistance - labelLength / 4;\n        // move backwards along the line to the first segment the label appears on\n        do {\n            index--;\n\n            if (index < 0) {\n                if (anchorDistance > labelStartDistance) {\n                    // there isn't enough room for the label after the beginning of the line\n                    // checkMaxAngle should have already caught this\n                    return;\n                } else {\n                    // The line doesn't extend far enough back for all of our padding,\n                    // but we got far enough to show the label under most conditions.\n                    index = 0;\n                    break;\n                }\n            } else {\n                anchorDistance -= line[index].dist(p);\n                p = line[index];\n            }\n        } while (anchorDistance > paddingStartDistance);\n\n        let segmentLength = line[index].dist(line[index + 1]);\n\n        for (let i = -nPitchPaddingBoxes; i < nBoxes + nPitchPaddingBoxes; i++) {\n\n            // the distance the box will be from the anchor\n            const boxOffset = i * step;\n            let boxDistanceToAnchor = labelStartDistance + boxOffset;\n\n            // make the distance between pitch padding boxes bigger\n            if (boxOffset < 0) boxDistanceToAnchor += boxOffset;\n            if (boxOffset > labelLength) boxDistanceToAnchor += boxOffset - labelLength;\n\n            if (boxDistanceToAnchor < anchorDistance) {\n                // The line doesn't extend far enough back for this box, skip it\n                // (This could allow for line collisions on distant tiles)\n                continue;\n            }\n\n            // the box is not on the current segment. Move to the next segment.\n            while (anchorDistance + segmentLength < boxDistanceToAnchor) {\n                anchorDistance += segmentLength;\n                index++;\n\n                // There isn't enough room before the end of the line.\n                if (index + 1 >= line.length) {\n                    return;\n                }\n\n                segmentLength = line[index].dist(line[index + 1]);\n            }\n\n            // the distance the box will be from the beginning of the segment\n            const segmentBoxDistance = boxDistanceToAnchor - anchorDistance;\n\n            const p0 = line[index];\n            const p1 = line[index + 1];\n            const boxAnchorPoint = p1.sub(p0)._unit()._mult(segmentBoxDistance)._add(p0)._round();\n\n            // If the box is within boxSize of the anchor, force the box to be used\n            // (so even 0-width labels use at least one box)\n            // Otherwise, the .8 multiplication gives us a little bit of conservative\n            // padding in choosing which boxes to use (see CollisionIndex#placedCollisionCircles)\n            const paddedAnchorDistance = Math.abs(boxDistanceToAnchor - firstBoxOffset) < step ?\n                0 :\n                (boxDistanceToAnchor - firstBoxOffset) * 0.8;\n\n            collisionBoxArray.emplaceBack(boxAnchorPoint.x, boxAnchorPoint.y,\n                -boxSize / 2, -boxSize / 2, boxSize / 2, boxSize / 2,\n                featureIndex, sourceLayerIndex, bucketIndex,\n                boxSize / 2, paddedAnchorDistance);\n        }\n    }\n}\n\nmodule.exports = CollisionFeature;\n","// @flow\n\nconst Queue = require('tinyqueue');\nconst Point = require('@mapbox/point-geometry');\nconst distToSegmentSquared = require('./intersection_tests').distToSegmentSquared;\n\n/**\n * Finds an approximation of a polygon's Pole Of Inaccessibiliy https://en.wikipedia.org/wiki/Pole_of_inaccessibility\n * This is a copy of http://github.com/mapbox/polylabel adapted to use Points\n *\n * @param polygonRings first item in array is the outer ring followed optionally by the list of holes, should be an element of the result of util/classify_rings\n * @param precision Specified in input coordinate units. If 0 returns after first run, if > 0 repeatedly narrows the search space until the radius of the area searched for the best pole is less than precision\n * @param debug Print some statistics to the console during execution\n * @returns Pole of Inaccessibiliy.\n * @private\n */\nmodule.exports = function (polygonRings: Array<Array<Point>>, precision?: number = 1, debug?: boolean = false): Point {\n    // find the bounding box of the outer ring\n    let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\n    const outerRing = polygonRings[0];\n    for (let i = 0; i < outerRing.length; i++) {\n        const p = outerRing[i];\n        if (!i || p.x < minX) minX = p.x;\n        if (!i || p.y < minY) minY = p.y;\n        if (!i || p.x > maxX) maxX = p.x;\n        if (!i || p.y > maxY) maxY = p.y;\n    }\n\n    const width = maxX - minX;\n    const height = maxY - minY;\n    const cellSize = Math.min(width, height);\n    let h = cellSize / 2;\n\n    // a priority queue of cells in order of their \"potential\" (max distance to polygon)\n    const cellQueue = new Queue(null, compareMax);\n\n    if (cellSize === 0) return new Point(minX, minY);\n\n    // cover polygon with initial cells\n    for (let x = minX; x < maxX; x += cellSize) {\n        for (let y = minY; y < maxY; y += cellSize) {\n            cellQueue.push(new Cell(x + h, y + h, h, polygonRings));\n        }\n    }\n\n    // take centroid as the first best guess\n    let bestCell = getCentroidCell(polygonRings);\n    let numProbes = cellQueue.length;\n\n    while (cellQueue.length) {\n        // pick the most promising cell from the queue\n        const cell = cellQueue.pop();\n\n        // update the best cell if we found a better one\n        if (cell.d > bestCell.d || !bestCell.d) {\n            bestCell = cell;\n            if (debug) console.log('found best %d after %d probes', Math.round(1e4 * cell.d) / 1e4, numProbes);\n        }\n\n        // do not drill down further if there's no chance of a better solution\n        if (cell.max - bestCell.d <= precision) continue;\n\n        // split the cell into four cells\n        h = cell.h / 2;\n        cellQueue.push(new Cell(cell.p.x - h, cell.p.y - h, h, polygonRings));\n        cellQueue.push(new Cell(cell.p.x + h, cell.p.y - h, h, polygonRings));\n        cellQueue.push(new Cell(cell.p.x - h, cell.p.y + h, h, polygonRings));\n        cellQueue.push(new Cell(cell.p.x + h, cell.p.y + h, h, polygonRings));\n        numProbes += 4;\n    }\n\n    if (debug) {\n        console.log(`num probes: ${numProbes}`);\n        console.log(`best distance: ${bestCell.d}`);\n    }\n\n    return bestCell.p;\n};\n\nfunction compareMax(a, b) {\n    return b.max - a.max;\n}\n\nfunction Cell(x, y, h, polygon) {\n    this.p = new Point(x, y);\n    this.h = h; // half the cell size\n    this.d = pointToPolygonDist(this.p, polygon); // distance from cell center to polygon\n    this.max = this.d + this.h * Math.SQRT2; // max distance to polygon within a cell\n}\n\n// signed distance from point to polygon outline (negative if point is outside)\nfunction pointToPolygonDist(p, polygon) {\n    let inside = false;\n    let minDistSq = Infinity;\n\n    for (let k = 0; k < polygon.length; k++) {\n        const ring = polygon[k];\n\n        for (let i = 0, len = ring.length, j = len - 1; i < len; j = i++) {\n            const a = ring[i];\n            const b = ring[j];\n\n            if ((a.y > p.y !== b.y > p.y) &&\n                (p.x < (b.x - a.x) * (p.y - a.y) / (b.y - a.y) + a.x)) inside = !inside;\n\n            minDistSq = Math.min(minDistSq, distToSegmentSquared(p, a, b));\n        }\n    }\n\n    return (inside ? 1 : -1) * Math.sqrt(minDistSq);\n}\n\n// get polygon centroid\nfunction getCentroidCell(polygon) {\n    let area = 0;\n    let x = 0;\n    let y = 0;\n    const points = polygon[0];\n    for (let i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n        const a = points[i];\n        const b = points[j];\n        const f = a.x * b.y - b.x * a.y;\n        x += (a.x + b.x) * f;\n        y += (a.y + b.y) * f;\n        area += f * 3;\n    }\n    return new Cell(x / area, y / area, 0, polygon);\n}\n","'use strict';\n\nmodule.exports = TinyQueue;\nmodule.exports.default = TinyQueue;\n\nfunction TinyQueue(data, compare) {\n    if (!(this instanceof TinyQueue)) return new TinyQueue(data, compare);\n\n    this.data = data || [];\n    this.length = this.data.length;\n    this.compare = compare || defaultCompare;\n\n    if (this.length > 0) {\n        for (var i = (this.length >> 1) - 1; i >= 0; i--) this._down(i);\n    }\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nTinyQueue.prototype = {\n\n    push: function (item) {\n        this.data.push(item);\n        this.length++;\n        this._up(this.length - 1);\n    },\n\n    pop: function () {\n        if (this.length === 0) return undefined;\n\n        var top = this.data[0];\n        this.length--;\n\n        if (this.length > 0) {\n            this.data[0] = this.data[this.length];\n            this._down(0);\n        }\n        this.data.pop();\n\n        return top;\n    },\n\n    peek: function () {\n        return this.data[0];\n    },\n\n    _up: function (pos) {\n        var data = this.data;\n        var compare = this.compare;\n        var item = data[pos];\n\n        while (pos > 0) {\n            var parent = (pos - 1) >> 1;\n            var current = data[parent];\n            if (compare(item, current) >= 0) break;\n            data[pos] = current;\n            pos = parent;\n        }\n\n        data[pos] = item;\n    },\n\n    _down: function (pos) {\n        var data = this.data;\n        var compare = this.compare;\n        var halfLength = this.length >> 1;\n        var item = data[pos];\n\n        while (pos < halfLength) {\n            var left = (pos << 1) + 1;\n            var right = left + 1;\n            var best = data[left];\n\n            if (right < this.length && compare(data[right], best) < 0) {\n                left = right;\n                best = data[right];\n            }\n            if (compare(best, item) >= 0) break;\n\n            data[pos] = best;\n            pos = left;\n        }\n\n        data[pos] = item;\n    }\n};\n","// @flow\n\nconst ShelfPack = require('@mapbox/shelf-pack');\nconst {RGBAImage} = require('../util/image');\n\nimport type {StyleImage} from '../style/style_image';\n\nconst padding = 1;\n\ntype Rect = {\n    x: number,\n    y: number,\n    w: number,\n    h: number\n};\n\nexport type ImagePosition = {\n    pixelRatio: number,\n    textureRect: Rect,\n    tl: [number, number],\n    br: [number, number],\n    displaySize: [number, number]\n};\n\n// This wants to be a class, but is sent to workers, so must be a plain JSON blob.\nfunction imagePosition(rect: Rect, {pixelRatio}: StyleImage): ImagePosition {\n    const textureRect = {\n        x: rect.x + padding,\n        y: rect.y + padding,\n        w: rect.w - padding * 2,\n        h: rect.h - padding * 2\n    };\n    return {\n        pixelRatio,\n        textureRect,\n\n        // Redundant calculated members.\n        tl: [\n            textureRect.x,\n            textureRect.y\n        ],\n        br: [\n            textureRect.x + textureRect.w,\n            textureRect.y + textureRect.h\n        ],\n        displaySize: [\n            textureRect.w / pixelRatio,\n            textureRect.h / pixelRatio\n        ]\n    };\n}\n\nexport type ImageAtlas = {\n    image: RGBAImage,\n    positions: {[string]: ImagePosition}\n};\n\nfunction makeImageAtlas(images: {[string]: StyleImage}): ImageAtlas {\n    const image = new RGBAImage({width: 0, height: 0});\n    const positions = {};\n\n    const pack = new ShelfPack(0, 0, {autoResize: true});\n\n    for (const id in images) {\n        const src = images[id];\n\n        const bin = pack.packOne(\n            src.data.width + 2 * padding,\n            src.data.height + 2 * padding);\n\n        image.resize({\n            width: pack.w,\n            height: pack.h\n        });\n\n        RGBAImage.copy(\n            src.data,\n            image,\n            { x: 0, y: 0 },\n            {\n                x: bin.x + padding,\n                y: bin.y + padding\n            },\n            src.data);\n\n        positions[id] = imagePosition(bin, src);\n    }\n\n    pack.shrink();\n    image.resize({\n        width: pack.w,\n        height: pack.h\n    });\n\n    return {image, positions};\n}\n\nmodule.exports = {\n    imagePosition,\n    makeImageAtlas\n};\n","// @flow\n\nconst ShelfPack = require('@mapbox/shelf-pack');\nconst {AlphaImage} = require('../util/image');\n\nimport type {GlyphMetrics, StyleGlyph} from '../style/style_glyph';\n\nconst padding = 1;\n\ntype Rect = {\n    x: number,\n    y: number,\n    w: number,\n    h: number\n};\n\nexport type GlyphPosition = {\n    rect: Rect,\n    metrics: GlyphMetrics\n};\n\nexport type GlyphAtlas = {\n    image: AlphaImage,\n    positions: {[string]: {[number]: GlyphPosition}}\n};\n\nfunction makeGlyphAtlas(stacks: {[string]: {[number]: ?StyleGlyph}}): GlyphAtlas {\n    const image = new AlphaImage({width: 0, height: 0});\n    const positions = {};\n\n    const pack = new ShelfPack(0, 0, {autoResize: true});\n\n    for (const stack in stacks) {\n        const glyphs = stacks[stack];\n        const stackPositions = positions[stack] = {};\n\n        for (const id in glyphs) {\n            const src = glyphs[+id];\n            if (src && src.bitmap.width !== 0 && src.bitmap.height !== 0) {\n                const bin = pack.packOne(\n                    src.bitmap.width + 2 * padding,\n                    src.bitmap.height + 2 * padding);\n\n                image.resize({\n                    width: pack.w,\n                    height: pack.h\n                });\n\n                AlphaImage.copy(\n                    src.bitmap,\n                    image,\n                    { x: 0, y: 0 },\n                    {\n                        x: bin.x + padding,\n                        y: bin.y + padding\n                    },\n                    src.bitmap);\n\n                stackPositions[id] = { rect: bin, metrics: src.metrics };\n            }\n        }\n    }\n\n    pack.shrink();\n    image.resize({\n        width: pack.w,\n        height: pack.h\n    });\n\n    return {image, positions};\n}\n\nmodule.exports = {\n    makeGlyphAtlas\n};\n","// @flow\n\nconst {DEMData} = require('../data/dem_data');\n\nimport type Actor from '../util/actor';\nimport type {\n    WorkerDEMTileParameters,\n    WorkerDEMTileCallback,\n    TileParameters\n} from './worker_source';\n\n\nclass RasterDEMTileWorkerSource {\n    actor: Actor;\n    loading: {[string]: {[string]: DEMData}};\n    loaded: {[string]: {[string]: DEMData}};\n\n    constructor() {\n        this.loading = {};\n        this.loaded = {};\n    }\n\n    loadTile(params: WorkerDEMTileParameters, callback: WorkerDEMTileCallback) {\n        const source = params.source,\n            uid = params.uid;\n\n        if (!this.loading[source])\n            this.loading[source] = {};\n\n        const dem = new DEMData(uid);\n        this.loading[source][uid] = dem;\n        dem.loadFromImage(params.rawImageData);\n        delete this.loading[source][uid];\n\n        this.loaded[source] = this.loaded[source] || {};\n        this.loaded[source][uid] = dem;\n        callback(null, dem);\n    }\n\n    removeTile(params: TileParameters) {\n        const loaded = this.loaded[params.source],\n            uid = params.uid;\n        if (loaded && loaded[uid]) {\n            delete loaded[uid];\n        }\n    }\n}\n\nmodule.exports = RasterDEMTileWorkerSource;\n","// @flow\nconst {RGBAImage} = require('../util/image');\nconst util = require('../util/util');\nconst {register} = require('../util/web_worker_transfer');\n\nclass Level {\n    dim: number;\n    border: number;\n    stride: number;\n    data: Int32Array;\n\n    constructor(dim: number, border: number, data: ?Int32Array) {\n        if (dim <= 0) throw new RangeError('Level must have positive dimension');\n        this.dim = dim;\n        this.border = border;\n        this.stride = this.dim + 2 * this.border;\n        this.data = data || new Int32Array((this.dim + 2 * this.border) * (this.dim + 2 * this.border));\n    }\n\n    set(x: number, y: number, value: number) {\n        this.data[this._idx(x, y)] = value + 65536;\n    }\n\n    get(x: number, y: number) {\n        return this.data[this._idx(x, y)] - 65536;\n    }\n\n    _idx(x: number, y: number) {\n        if (x < -this.border || x >= this.dim + this.border ||  y < -this.border || y >= this.dim + this.border) throw new RangeError('out of range source coordinates for DEM data');\n        return (y + this.border) * this.stride + (x + this.border);\n    }\n}\n\nregister('Level', Level);\n\n// DEMData is a data structure for decoding, backfilling, and storing elevation data for processing in the hillshade shaders\n// data can be populated either from a pngraw image tile or from serliazed data sent back from a worker. When data is initially\n// loaded from a image tile, we decode the pixel values using the mapbox terrain-rgb tileset decoding formula, but we store the\n// elevation data in a Level as an Int32 value. we add 65536 (2^16) to eliminate negative values and enable the use of\n// integer overflow when creating the texture used in the hillshadePrepare step.\n\n// DEMData also handles the backfilling of data from a tile's neighboring tiles. This is necessary because we use a pixel's 8\n// surrounding pixel values to compute the slope at that pixel, and we cannot accurately calculate the slope at pixels on a\n// tile's edge without backfilling from neighboring tiles.\n\nclass DEMData {\n    uid: string;\n    scale: number;\n    level: Level;\n    loaded: boolean;\n\n    constructor(uid: string, scale: ?number, data: ?Level) {\n        this.uid = uid;\n        this.scale = scale || 1;\n        // if no data is provided, use a temporary empty level to satisfy flow\n        this.level = data || new Level(256, 512);\n        this.loaded = !!data;\n    }\n\n    loadFromImage(data: RGBAImage) {\n        if (data.height !== data.width) throw new RangeError('DEM tiles must be square');\n\n        // Build level 0\n        const level = this.level = new Level(data.width, data.width / 2);\n        const pixels = data.data;\n\n        // unpack\n        for (let y = 0; y < level.dim; y++) {\n            for (let x = 0; x < level.dim; x++) {\n                const i = y * level.dim + x;\n                const j = i * 4;\n                // decoding per https://blog.mapbox.com/global-elevation-data-6689f1d0ba65\n                level.set(x, y, this.scale * ((pixels[j] * 256 * 256 + pixels[j + 1] * 256.0 + pixels[j + 2]) / 10.0 - 10000.0));\n            }\n        }\n\n        // in order to avoid flashing seams between tiles, here we are initially populating a 1px border of pixels around the image\n        // with the data of the nearest pixel from the image. this data is eventually replaced when the tile's neighboring\n        // tiles are loaded and the accurate data can be backfilled using DEMData#backfillBorder\n        for (let x = 0; x < level.dim; x++) {\n            // left vertical border\n            level.set(-1, x, level.get(0, x));\n            // right vertical border\n            level.set(level.dim, x, level.get(level.dim - 1, x));\n            // left horizontal border\n            level.set(x, -1, level.get(x, 0));\n            // right horizontal border\n            level.set(x, level.dim, level.get(x, level.dim - 1));\n        }\n        // corners\n        level.set(-1, -1, level.get(0, 0));\n        level.set(level.dim, -1, level.get(level.dim - 1, 0));\n        level.set(-1, level.dim, level.get(0, level.dim - 1));\n        level.set(level.dim, level.dim, level.get(level.dim - 1, level.dim - 1));\n        this.loaded = true;\n    }\n\n    getPixels() {\n        return new RGBAImage({width: this.level.dim + 2 * this.level.border, height: this.level.dim + 2 * this.level.border}, new Uint8Array(this.level.data.buffer));\n    }\n\n    backfillBorder(borderTile: DEMData, dx: number, dy: number) {\n        const t = this.level;\n        const o = borderTile.level;\n\n        if (t.dim !== o.dim) throw new Error('level mismatch (dem dimension)');\n\n        let _xMin = dx * t.dim,\n            _xMax = dx * t.dim + t.dim,\n            _yMin = dy * t.dim,\n            _yMax = dy * t.dim + t.dim;\n\n        switch (dx) {\n        case -1:\n            _xMin = _xMax - 1;\n            break;\n        case 1:\n            _xMax = _xMin + 1;\n            break;\n        }\n\n        switch (dy) {\n        case -1:\n            _yMin = _yMax - 1;\n            break;\n        case 1:\n            _yMax = _yMin + 1;\n            break;\n        }\n\n        const xMin = util.clamp(_xMin, -t.border, t.dim + t.border);\n        const xMax = util.clamp(_xMax, -t.border, t.dim + t.border);\n        const yMin = util.clamp(_yMin, -t.border, t.dim + t.border);\n        const yMax = util.clamp(_yMax, -t.border, t.dim + t.border);\n\n        const ox = -dx * t.dim;\n        const oy = -dy * t.dim;\n        for (let y = yMin; y < yMax; y++) {\n            for (let x = xMin; x < xMax; x++) {\n                t.set(x, y, o.get(x + ox, y + oy));\n            }\n        }\n    }\n}\n\nregister('DEMData', DEMData);\nmodule.exports = {DEMData, Level};\n\n","// @flow\n\nconst ajax = require('../util/ajax');\nconst rewind = require('geojson-rewind');\nconst GeoJSONWrapper = require('./geojson_wrapper');\nconst vtpbf = require('vt-pbf');\nconst supercluster = require('supercluster');\nconst geojsonvt = require('geojson-vt');\n\nconst VectorTileWorkerSource = require('./vector_tile_worker_source');\n\nimport type {\n    WorkerTileParameters,\n    WorkerTileCallback,\n} from '../source/worker_source';\n\nimport type Actor from '../util/actor';\nimport type StyleLayerIndex from '../style/style_layer_index';\n\nimport type {LoadVectorDataCallback} from './vector_tile_worker_source';\nimport type {RequestParameters} from '../util/ajax';\nimport type { Callback } from '../types/callback';\n\nexport type GeoJSON = Object;\n\nexport type LoadGeoJSONParameters = {\n    request?: RequestParameters,\n    data?: string,\n    source: string,\n    superclusterOptions?: Object,\n    geojsonVtOptions?: Object\n};\n\nexport type LoadGeoJSON = (params: LoadGeoJSONParameters, callback: Callback<mixed>) => void;\n\nexport interface GeoJSONIndex {\n}\n\nfunction loadGeoJSONTile(params: WorkerTileParameters, callback: LoadVectorDataCallback) {\n    const source = params.source,\n        canonical = params.tileID.canonical;\n\n    if (!this._geoJSONIndexes[source]) {\n        return callback(null, null);  // we couldn't load the file\n    }\n\n    const geoJSONTile = this._geoJSONIndexes[source].getTile(canonical.z, canonical.x, canonical.y);\n    if (!geoJSONTile) {\n        return callback(null, null); // nothing in the given tile\n    }\n\n    const geojsonWrapper = new GeoJSONWrapper(geoJSONTile.features);\n\n    // Encode the geojson-vt tile into binary vector tile form form.  This\n    // is a convenience that allows `FeatureIndex` to operate the same way\n    // across `VectorTileSource` and `GeoJSONSource` data.\n    let pbf = vtpbf(geojsonWrapper);\n    if (pbf.byteOffset !== 0 || pbf.byteLength !== pbf.buffer.byteLength) {\n        // Compatibility with node Buffer (https://github.com/mapbox/pbf/issues/35)\n        pbf = new Uint8Array(pbf);\n    }\n\n    callback(null, {\n        vectorTile: geojsonWrapper,\n        rawData: pbf.buffer\n    });\n}\n\n/**\n * The {@link WorkerSource} implementation that supports {@link GeoJSONSource}.\n * This class is designed to be easily reused to support custom source types\n * for data formats that can be parsed/converted into an in-memory GeoJSON\n * representation.  To do so, create it with\n * `new GeoJSONWorkerSource(actor, layerIndex, customLoadGeoJSONFunction)`.\n * For a full example, see [mapbox-gl-topojson](https://github.com/developmentseed/mapbox-gl-topojson).\n *\n * @private\n */\nclass GeoJSONWorkerSource extends VectorTileWorkerSource {\n    _geoJSONIndexes: { [string]: GeoJSONIndex };\n    loadGeoJSON: LoadGeoJSON;\n\n    /**\n     * @param [loadGeoJSON] Optional method for custom loading/parsing of\n     * GeoJSON based on parameters passed from the main-thread Source.\n     * See {@link GeoJSONWorkerSource#loadGeoJSON}.\n     */\n    constructor(actor: Actor, layerIndex: StyleLayerIndex, loadGeoJSON: ?LoadGeoJSON) {\n        super(actor, layerIndex, loadGeoJSONTile);\n        if (loadGeoJSON) {\n            this.loadGeoJSON = loadGeoJSON;\n        }\n        // object mapping source ids to geojson-vt-like tile indexes\n        this._geoJSONIndexes = {};\n    }\n\n    /**\n     * Fetches (if appropriate), parses, and index geojson data into tiles. This\n     * preparatory method must be called before {@link GeoJSONWorkerSource#loadTile}\n     * can correctly serve up tiles.\n     *\n     * Defers to {@link GeoJSONWorkerSource#loadGeoJSON} for the fetching/parsing,\n     * expecting `callback(error, data)` to be called with either an error or a\n     * parsed GeoJSON object.\n     * @param params\n     * @param params.source The id of the source.\n     * @param callback\n     */\n    loadData(params: LoadGeoJSONParameters, callback: Callback<void>) {\n        this.loadGeoJSON(params, (err, data) => {\n            if (err || !data) {\n                return callback(err);\n            } else if (typeof data !== 'object') {\n                return callback(new Error(\"Input data is not a valid GeoJSON object.\"));\n            } else {\n                rewind(data, true);\n\n                try {\n                    this._geoJSONIndexes[params.source] = params.cluster ?\n                        supercluster(params.superclusterOptions).load(data.features) :\n                        geojsonvt(data, params.geojsonVtOptions);\n                } catch (err) {\n                    return callback(err);\n                }\n\n                this.loaded[params.source] = {};\n                callback(null);\n            }\n        });\n    }\n\n    /**\n    * Implements {@link WorkerSource#reloadTile}.\n    *\n    * If the tile is loaded, uses the implementation in VectorTileWorkerSource.\n    * Otherwise, such as after a setData() call, we load the tile fresh.\n    *\n    * @param params\n    * @param params.source The id of the source for which we're loading this tile.\n    * @param params.uid The UID for this tile.\n    */\n    reloadTile(params: WorkerTileParameters, callback: WorkerTileCallback) {\n        const loaded = this.loaded[params.source],\n            uid = params.uid;\n\n        if (loaded && loaded[uid]) {\n            return super.reloadTile(params, callback);\n        } else {\n            return this.loadTile(params, callback);\n        }\n    }\n\n    /**\n     * Fetch and parse GeoJSON according to the given params.  Calls `callback`\n     * with `(err, data)`, where `data` is a parsed GeoJSON object.\n     *\n     * GeoJSON is loaded and parsed from `params.url` if it exists, or else\n     * expected as a literal (string or object) `params.data`.\n     *\n     * @param params\n     * @param [params.url] A URL to the remote GeoJSON data.\n     * @param [params.data] Literal GeoJSON data. Must be provided if `params.url` is not.\n     */\n    loadGeoJSON(params: LoadGeoJSONParameters, callback: Callback<mixed>) {\n        // Because of same origin issues, urls must either include an explicit\n        // origin or absolute path.\n        // ie: /foo/bar.json or http://example.com/bar.json\n        // but not ../foo/bar.json\n        if (params.request) {\n            ajax.getJSON(params.request, callback);\n        } else if (typeof params.data === 'string') {\n            try {\n                return callback(null, JSON.parse(params.data));\n            } catch (e) {\n                return callback(new Error(\"Input data is not a valid GeoJSON object.\"));\n            }\n        } else {\n            return callback(new Error(\"Input data is not a valid GeoJSON object.\"));\n        }\n    }\n\n    removeSource(params: {source: string}, callback: Callback<mixed>) {\n        if (this._geoJSONIndexes[params.source]) {\n            delete this._geoJSONIndexes[params.source];\n        }\n        callback();\n    }\n}\n\nmodule.exports = GeoJSONWorkerSource;\n","var geojsonArea = require('@mapbox/geojson-area');\n\nmodule.exports = rewind;\n\nfunction rewind(gj, outer) {\n    switch ((gj && gj.type) || null) {\n        case 'FeatureCollection':\n            gj.features = gj.features.map(curryOuter(rewind, outer));\n            return gj;\n        case 'Feature':\n            gj.geometry = rewind(gj.geometry, outer);\n            return gj;\n        case 'Polygon':\n        case 'MultiPolygon':\n            return correct(gj, outer);\n        default:\n            return gj;\n    }\n}\n\nfunction curryOuter(a, b) {\n    return function(_) { return a(_, b); };\n}\n\nfunction correct(_, outer) {\n    if (_.type === 'Polygon') {\n        _.coordinates = correctRings(_.coordinates, outer);\n    } else if (_.type === 'MultiPolygon') {\n        _.coordinates = _.coordinates.map(curryOuter(correctRings, outer));\n    }\n    return _;\n}\n\nfunction correctRings(_, outer) {\n    outer = !!outer;\n    _[0] = wind(_[0], outer);\n    for (var i = 1; i < _.length; i++) {\n        _[i] = wind(_[i], !outer);\n    }\n    return _;\n}\n\nfunction wind(_, dir) {\n    return cw(_) === dir ? _ : _.reverse();\n}\n\nfunction cw(_) {\n    return geojsonArea.ring(_) >= 0;\n}\n","var wgs84 = require('wgs84');\n\nmodule.exports.geometry = geometry;\nmodule.exports.ring = ringArea;\n\nfunction geometry(_) {\n    var area = 0, i;\n    switch (_.type) {\n        case 'Polygon':\n            return polygonArea(_.coordinates);\n        case 'MultiPolygon':\n            for (i = 0; i < _.coordinates.length; i++) {\n                area += polygonArea(_.coordinates[i]);\n            }\n            return area;\n        case 'Point':\n        case 'MultiPoint':\n        case 'LineString':\n        case 'MultiLineString':\n            return 0;\n        case 'GeometryCollection':\n            for (i = 0; i < _.geometries.length; i++) {\n                area += geometry(_.geometries[i]);\n            }\n            return area;\n    }\n}\n\nfunction polygonArea(coords) {\n    var area = 0;\n    if (coords && coords.length > 0) {\n        area += Math.abs(ringArea(coords[0]));\n        for (var i = 1; i < coords.length; i++) {\n            area -= Math.abs(ringArea(coords[i]));\n        }\n    }\n    return area;\n}\n\n/**\n * Calculate the approximate area of the polygon were it projected onto\n *     the earth.  Note that this area will be positive if ring is oriented\n *     clockwise, otherwise it will be negative.\n *\n * Reference:\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n *     Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n *     Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409\n *\n * Returns:\n * {float} The approximate signed geodesic area of the polygon in square\n *     meters.\n */\n\nfunction ringArea(coords) {\n    var p1, p2, p3, lowerIndex, middleIndex, upperIndex, i,\n    area = 0,\n    coordsLength = coords.length;\n\n    if (coordsLength > 2) {\n        for (i = 0; i < coordsLength; i++) {\n            if (i === coordsLength - 2) {// i = N-2\n                lowerIndex = coordsLength - 2;\n                middleIndex = coordsLength -1;\n                upperIndex = 0;\n            } else if (i === coordsLength - 1) {// i = N-1\n                lowerIndex = coordsLength - 1;\n                middleIndex = 0;\n                upperIndex = 1;\n            } else { // i = 0 to N-3\n                lowerIndex = i;\n                middleIndex = i+1;\n                upperIndex = i+2;\n            }\n            p1 = coords[lowerIndex];\n            p2 = coords[middleIndex];\n            p3 = coords[upperIndex];\n            area += ( rad(p3[0]) - rad(p1[0]) ) * Math.sin( rad(p2[1]));\n        }\n\n        area = area * wgs84.RADIUS * wgs84.RADIUS / 2;\n    }\n\n    return area;\n}\n\nfunction rad(_) {\n    return _ * Math.PI / 180;\n}","module.exports.RADIUS = 6378137;\nmodule.exports.FLATTENING = 1/298.257223563;\nmodule.exports.POLAR_RADIUS = 6356752.3142;\n","// @flow\n\nconst Point = require('@mapbox/point-geometry');\nconst toGeoJSON = require('@mapbox/vector-tile').VectorTileFeature.prototype.toGeoJSON;\nconst EXTENT = require('../data/extent');\n\n// The feature type used by geojson-vt and supercluster. Should be extracted to\n// global type and used in module definitions for those two modules.\ntype Feature = {\n    type: 1,\n    id: mixed,\n    tags: {[string]: string | number | boolean},\n    geometry: Array<[number, number]>,\n} | {\n    type: 2 | 3,\n    id: mixed,\n    tags: {[string]: string | number | boolean},\n    geometry: Array<Array<[number, number]>>,\n}\n\nclass FeatureWrapper implements VectorTileFeature {\n    _feature: Feature;\n\n    extent: number;\n    type: 1 | 2 | 3;\n    id: number;\n    properties: {[string]: string | number | boolean};\n\n    constructor(feature: Feature) {\n        this._feature = feature;\n\n        this.extent = EXTENT;\n        this.type = feature.type;\n        this.properties = feature.tags;\n\n        // If the feature has a top-level `id` property, copy it over, but only\n        // if it can be coerced to an integer, because this wrapper is used for\n        // serializing geojson feature data into vector tile PBF data, and the\n        // vector tile spec only supports integer values for feature ids --\n        // allowing non-integer values here results in a non-compliant PBF\n        // that causes an exception when it is parsed with vector-tile-js\n        if ('id' in feature && !isNaN(feature.id)) {\n            this.id = parseInt(feature.id, 10);\n        }\n    }\n\n    loadGeometry() {\n        if (this._feature.type === 1) {\n            const geometry = [];\n            for (const point of this._feature.geometry) {\n                geometry.push([new Point(point[0], point[1])]);\n            }\n            return geometry;\n        } else {\n            const geometry = [];\n            for (const ring of this._feature.geometry) {\n                const newRing = [];\n                for (const point of ring) {\n                    newRing.push(new Point(point[0], point[1]));\n                }\n                geometry.push(newRing);\n            }\n            return geometry;\n        }\n    }\n\n    toGeoJSON(x: number, y: number, z: number) {\n        return toGeoJSON.call(this, x, y, z);\n    }\n}\n\nclass GeoJSONWrapper implements VectorTile, VectorTileLayer {\n    layers: {[string]: VectorTileLayer};\n    name: string;\n    extent: number;\n    length: number;\n    _features: Array<Feature>;\n\n    constructor(features: Array<Feature>) {\n        this.layers = { '_geojsonTileLayer': this };\n        this.name = '_geojsonTileLayer';\n        this.extent = EXTENT;\n        this.length = features.length;\n        this._features = features;\n    }\n\n    feature(i: number): VectorTileFeature {\n        return new FeatureWrapper(this._features[i]);\n    }\n}\n\nmodule.exports = GeoJSONWrapper;\n","var Pbf = require('pbf')\nvar GeoJSONWrapper = require('./lib/geojson_wrapper')\n\nmodule.exports = fromVectorTileJs\nmodule.exports.fromVectorTileJs = fromVectorTileJs\nmodule.exports.fromGeojsonVt = fromGeojsonVt\nmodule.exports.GeoJSONWrapper = GeoJSONWrapper\n\n/**\n * Serialize a vector-tile-js-created tile to pbf\n *\n * @param {Object} tile\n * @return {Buffer} uncompressed, pbf-serialized tile data\n */\nfunction fromVectorTileJs (tile) {\n  var out = new Pbf()\n  writeTile(tile, out)\n  return out.finish()\n}\n\n/**\n * Serialized a geojson-vt-created tile to pbf.\n *\n * @param {Object} layers - An object mapping layer names to geojson-vt-created vector tile objects\n * @param {Object} [options] - An object specifying the vector-tile specification version and extent that were used to create `layers`.\n * @param {Number} [options.version=1] - Version of vector-tile spec used\n * @param {Number} [options.extent=4096] - Extent of the vector tile\n * @return {Buffer} uncompressed, pbf-serialized tile data\n */\nfunction fromGeojsonVt (layers, options) {\n  options = options || {}\n  var l = {}\n  for (var k in layers) {\n    l[k] = new GeoJSONWrapper(layers[k].features, options)\n    l[k].name = k\n    l[k].version = options.version\n    l[k].extent = options.extent\n  }\n  return fromVectorTileJs({layers: l})\n}\n\nfunction writeTile (tile, pbf) {\n  for (var key in tile.layers) {\n    pbf.writeMessage(3, writeLayer, tile.layers[key])\n  }\n}\n\nfunction writeLayer (layer, pbf) {\n  pbf.writeVarintField(15, layer.version || 1)\n  pbf.writeStringField(1, layer.name || '')\n  pbf.writeVarintField(5, layer.extent || 4096)\n\n  var i\n  var context = {\n    keys: [],\n    values: [],\n    keycache: {},\n    valuecache: {}\n  }\n\n  for (i = 0; i < layer.length; i++) {\n    context.feature = layer.feature(i)\n    pbf.writeMessage(2, writeFeature, context)\n  }\n\n  var keys = context.keys\n  for (i = 0; i < keys.length; i++) {\n    pbf.writeStringField(3, keys[i])\n  }\n\n  var values = context.values\n  for (i = 0; i < values.length; i++) {\n    pbf.writeMessage(4, writeValue, values[i])\n  }\n}\n\nfunction writeFeature (context, pbf) {\n  var feature = context.feature\n\n  if (feature.id !== undefined) {\n    pbf.writeVarintField(1, feature.id)\n  }\n\n  pbf.writeMessage(2, writeProperties, context)\n  pbf.writeVarintField(3, feature.type)\n  pbf.writeMessage(4, writeGeometry, feature)\n}\n\nfunction writeProperties (context, pbf) {\n  var feature = context.feature\n  var keys = context.keys\n  var values = context.values\n  var keycache = context.keycache\n  var valuecache = context.valuecache\n\n  for (var key in feature.properties) {\n    var keyIndex = keycache[key]\n    if (typeof keyIndex === 'undefined') {\n      keys.push(key)\n      keyIndex = keys.length - 1\n      keycache[key] = keyIndex\n    }\n    pbf.writeVarint(keyIndex)\n\n    var value = feature.properties[key]\n    var type = typeof value\n    if (type !== 'string' && type !== 'boolean' && type !== 'number') {\n      value = JSON.stringify(value)\n    }\n    var valueKey = type + ':' + value\n    var valueIndex = valuecache[valueKey]\n    if (typeof valueIndex === 'undefined') {\n      values.push(value)\n      valueIndex = values.length - 1\n      valuecache[valueKey] = valueIndex\n    }\n    pbf.writeVarint(valueIndex)\n  }\n}\n\nfunction command (cmd, length) {\n  return (length << 3) + (cmd & 0x7)\n}\n\nfunction zigzag (num) {\n  return (num << 1) ^ (num >> 31)\n}\n\nfunction writeGeometry (feature, pbf) {\n  var geometry = feature.loadGeometry()\n  var type = feature.type\n  var x = 0\n  var y = 0\n  var rings = geometry.length\n  for (var r = 0; r < rings; r++) {\n    var ring = geometry[r]\n    var count = 1\n    if (type === 1) {\n      count = ring.length\n    }\n    pbf.writeVarint(command(1, count)) // moveto\n    // do not write polygon closing path as lineto\n    var lineCount = type === 3 ? ring.length - 1 : ring.length\n    for (var i = 0; i < lineCount; i++) {\n      if (i === 1 && type !== 1) {\n        pbf.writeVarint(command(2, lineCount - 1)) // lineto\n      }\n      var dx = ring[i].x - x\n      var dy = ring[i].y - y\n      pbf.writeVarint(zigzag(dx))\n      pbf.writeVarint(zigzag(dy))\n      x += dx\n      y += dy\n    }\n    if (type === 3) {\n      pbf.writeVarint(command(7, 1)) // closepath\n    }\n  }\n}\n\nfunction writeValue (value, pbf) {\n  var type = typeof value\n  if (type === 'string') {\n    pbf.writeStringField(1, value)\n  } else if (type === 'boolean') {\n    pbf.writeBooleanField(7, value)\n  } else if (type === 'number') {\n    if (value % 1 !== 0) {\n      pbf.writeDoubleField(3, value)\n    } else if (value < 0) {\n      pbf.writeSVarintField(6, value)\n    } else {\n      pbf.writeVarintField(5, value)\n    }\n  }\n}\n","'use strict'\n\nvar Point = require('@mapbox/point-geometry')\nvar VectorTileFeature = require('@mapbox/vector-tile').VectorTileFeature\n\nmodule.exports = GeoJSONWrapper\n\n// conform to vectortile api\nfunction GeoJSONWrapper (features, options) {\n  this.options = options || {}\n  this.features = features\n  this.length = features.length\n}\n\nGeoJSONWrapper.prototype.feature = function (i) {\n  return new FeatureWrapper(this.features[i], this.options.extent)\n}\n\nfunction FeatureWrapper (feature, extent) {\n  this.id = typeof feature.id === 'number' ? feature.id : undefined\n  this.type = feature.type\n  this.rawGeometry = feature.type === 1 ? [feature.geometry] : feature.geometry\n  this.properties = feature.tags\n  this.extent = extent || 4096\n}\n\nFeatureWrapper.prototype.loadGeometry = function () {\n  var rings = this.rawGeometry\n  this.geometry = []\n\n  for (var i = 0; i < rings.length; i++) {\n    var ring = rings[i]\n    var newRing = []\n    for (var j = 0; j < ring.length; j++) {\n      newRing.push(new Point(ring[j][0], ring[j][1]))\n    }\n    this.geometry.push(newRing)\n  }\n  return this.geometry\n}\n\nFeatureWrapper.prototype.bbox = function () {\n  if (!this.geometry) this.loadGeometry()\n\n  var rings = this.geometry\n  var x1 = Infinity\n  var x2 = -Infinity\n  var y1 = Infinity\n  var y2 = -Infinity\n\n  for (var i = 0; i < rings.length; i++) {\n    var ring = rings[i]\n\n    for (var j = 0; j < ring.length; j++) {\n      var coord = ring[j]\n\n      x1 = Math.min(x1, coord.x)\n      x2 = Math.max(x2, coord.x)\n      y1 = Math.min(y1, coord.y)\n      y2 = Math.max(y2, coord.y)\n    }\n  }\n\n  return [x1, y1, x2, y2]\n}\n\nFeatureWrapper.prototype.toGeoJSON = VectorTileFeature.prototype.toGeoJSON\n","'use strict';\n\nvar kdbush = require('kdbush');\n\nmodule.exports = supercluster;\n\nfunction supercluster(options) {\n    return new SuperCluster(options);\n}\n\nfunction SuperCluster(options) {\n    this.options = extend(Object.create(this.options), options);\n    this.trees = new Array(this.options.maxZoom + 1);\n}\n\nSuperCluster.prototype = {\n    options: {\n        minZoom: 0,   // min zoom to generate clusters on\n        maxZoom: 16,  // max zoom level to cluster the points on\n        radius: 40,   // cluster radius in pixels\n        extent: 512,  // tile extent (radius is calculated relative to it)\n        nodeSize: 64, // size of the KD-tree leaf node, affects performance\n        log: false,   // whether to log timing info\n\n        // a reduce function for calculating custom cluster properties\n        reduce: null, // function (accumulated, props) { accumulated.sum += props.sum; }\n\n        // initial properties of a cluster (before running the reducer)\n        initial: function () { return {}; }, // function () { return {sum: 0}; },\n\n        // properties to use for individual points when running the reducer\n        map: function (props) { return props; } // function (props) { return {sum: props.my_value}; },\n    },\n\n    load: function (points) {\n        var log = this.options.log;\n\n        if (log) console.time('total time');\n\n        var timerId = 'prepare ' + points.length + ' points';\n        if (log) console.time(timerId);\n\n        this.points = points;\n\n        // generate a cluster object for each point\n        var clusters = points.map(createPointCluster);\n        if (log) console.timeEnd(timerId);\n\n        // cluster points on max zoom, then cluster the results on previous zoom, etc.;\n        // results in a cluster hierarchy across zoom levels\n        for (var z = this.options.maxZoom; z >= this.options.minZoom; z--) {\n            var now = +Date.now();\n\n            // index input points into a KD-tree\n            this.trees[z + 1] = kdbush(clusters, getX, getY, this.options.nodeSize, Float32Array);\n\n            clusters = this._cluster(clusters, z); // create a new set of clusters for the zoom\n\n            if (log) console.log('z%d: %d clusters in %dms', z, clusters.length, +Date.now() - now);\n        }\n\n        // index top-level clusters\n        this.trees[this.options.minZoom] = kdbush(clusters, getX, getY, this.options.nodeSize, Float32Array);\n\n        if (log) console.timeEnd('total time');\n\n        return this;\n    },\n\n    getClusters: function (bbox, zoom) {\n        var tree = this.trees[this._limitZoom(zoom)];\n        var ids = tree.range(lngX(bbox[0]), latY(bbox[3]), lngX(bbox[2]), latY(bbox[1]));\n        var clusters = [];\n        for (var i = 0; i < ids.length; i++) {\n            var c = tree.points[ids[i]];\n            clusters.push(c.numPoints ? getClusterJSON(c) : this.points[c.id]);\n        }\n        return clusters;\n    },\n\n    getChildren: function (clusterId, clusterZoom) {\n        var origin = this.trees[clusterZoom + 1].points[clusterId];\n        var r = this.options.radius / (this.options.extent * Math.pow(2, clusterZoom));\n        var points = this.trees[clusterZoom + 1].within(origin.x, origin.y, r);\n        var children = [];\n        for (var i = 0; i < points.length; i++) {\n            var c = this.trees[clusterZoom + 1].points[points[i]];\n            if (c.parentId === clusterId) {\n                children.push(c.numPoints ? getClusterJSON(c) : this.points[c.id]);\n            }\n        }\n        return children;\n    },\n\n    getLeaves: function (clusterId, clusterZoom, limit, offset) {\n        limit = limit || 10;\n        offset = offset || 0;\n\n        var leaves = [];\n        this._appendLeaves(leaves, clusterId, clusterZoom, limit, offset, 0);\n\n        return leaves;\n    },\n\n    getTile: function (z, x, y) {\n        var tree = this.trees[this._limitZoom(z)];\n        var z2 = Math.pow(2, z);\n        var extent = this.options.extent;\n        var r = this.options.radius;\n        var p = r / extent;\n        var top = (y - p) / z2;\n        var bottom = (y + 1 + p) / z2;\n\n        var tile = {\n            features: []\n        };\n\n        this._addTileFeatures(\n            tree.range((x - p) / z2, top, (x + 1 + p) / z2, bottom),\n            tree.points, x, y, z2, tile);\n\n        if (x === 0) {\n            this._addTileFeatures(\n                tree.range(1 - p / z2, top, 1, bottom),\n                tree.points, z2, y, z2, tile);\n        }\n        if (x === z2 - 1) {\n            this._addTileFeatures(\n                tree.range(0, top, p / z2, bottom),\n                tree.points, -1, y, z2, tile);\n        }\n\n        return tile.features.length ? tile : null;\n    },\n\n    getClusterExpansionZoom: function (clusterId, clusterZoom) {\n        while (clusterZoom < this.options.maxZoom) {\n            var children = this.getChildren(clusterId, clusterZoom);\n            clusterZoom++;\n            if (children.length !== 1) break;\n            clusterId = children[0].properties.cluster_id;\n        }\n        return clusterZoom;\n    },\n\n    _appendLeaves: function (result, clusterId, clusterZoom, limit, offset, skipped) {\n        var children = this.getChildren(clusterId, clusterZoom);\n\n        for (var i = 0; i < children.length; i++) {\n            var props = children[i].properties;\n\n            if (props.cluster) {\n                if (skipped + props.point_count <= offset) {\n                    // skip the whole cluster\n                    skipped += props.point_count;\n                } else {\n                    // enter the cluster\n                    skipped = this._appendLeaves(\n                        result, props.cluster_id, clusterZoom + 1, limit, offset, skipped);\n                    // exit the cluster\n                }\n            } else if (skipped < offset) {\n                // skip a single point\n                skipped++;\n            } else {\n                // add a single point\n                result.push(children[i]);\n            }\n            if (result.length === limit) break;\n        }\n\n        return skipped;\n    },\n\n    _addTileFeatures: function (ids, points, x, y, z2, tile) {\n        for (var i = 0; i < ids.length; i++) {\n            var c = points[ids[i]];\n            tile.features.push({\n                type: 1,\n                geometry: [[\n                    Math.round(this.options.extent * (c.x * z2 - x)),\n                    Math.round(this.options.extent * (c.y * z2 - y))\n                ]],\n                tags: c.numPoints ? getClusterProperties(c) : this.points[c.id].properties\n            });\n        }\n    },\n\n    _limitZoom: function (z) {\n        return Math.max(this.options.minZoom, Math.min(z, this.options.maxZoom + 1));\n    },\n\n    _cluster: function (points, zoom) {\n        var clusters = [];\n        var r = this.options.radius / (this.options.extent * Math.pow(2, zoom));\n\n        // loop through each point\n        for (var i = 0; i < points.length; i++) {\n            var p = points[i];\n            // if we've already visited the point at this zoom level, skip it\n            if (p.zoom <= zoom) continue;\n            p.zoom = zoom;\n\n            // find all nearby points\n            var tree = this.trees[zoom + 1];\n            var neighborIds = tree.within(p.x, p.y, r);\n\n            var numPoints = p.numPoints || 1;\n            var wx = p.x * numPoints;\n            var wy = p.y * numPoints;\n\n            var clusterProperties = null;\n\n            if (this.options.reduce) {\n                clusterProperties = this.options.initial();\n                this._accumulate(clusterProperties, p);\n            }\n\n            for (var j = 0; j < neighborIds.length; j++) {\n                var b = tree.points[neighborIds[j]];\n                // filter out neighbors that are too far or already processed\n                if (zoom < b.zoom) {\n                    var numPoints2 = b.numPoints || 1;\n                    b.zoom = zoom; // save the zoom (so it doesn't get processed twice)\n                    wx += b.x * numPoints2; // accumulate coordinates for calculating weighted center\n                    wy += b.y * numPoints2;\n                    numPoints += numPoints2;\n                    b.parentId = i;\n\n                    if (this.options.reduce) {\n                        this._accumulate(clusterProperties, b);\n                    }\n                }\n            }\n\n            if (numPoints === 1) {\n                clusters.push(p);\n            } else {\n                p.parentId = i;\n                clusters.push(createCluster(wx / numPoints, wy / numPoints, numPoints, i, clusterProperties));\n            }\n        }\n\n        return clusters;\n    },\n\n    _accumulate: function (clusterProperties, point) {\n        var properties = point.numPoints ?\n            point.properties :\n            this.options.map(this.points[point.id].properties);\n\n        this.options.reduce(clusterProperties, properties);\n    }\n};\n\nfunction createCluster(x, y, numPoints, id, properties) {\n    return {\n        x: x, // weighted cluster center\n        y: y,\n        zoom: Infinity, // the last zoom the cluster was processed at\n        id: id, // index of the first child of the cluster in the zoom level tree\n        properties: properties,\n        parentId: -1, // parent cluster id\n        numPoints: numPoints\n    };\n}\n\nfunction createPointCluster(p, id) {\n    var coords = p.geometry.coordinates;\n    return {\n        x: lngX(coords[0]), // projected point coordinates\n        y: latY(coords[1]),\n        zoom: Infinity, // the last zoom the point was processed at\n        id: id, // index of the source feature in the original input array\n        parentId: -1 // parent cluster id\n    };\n}\n\nfunction getClusterJSON(cluster) {\n    return {\n        type: 'Feature',\n        properties: getClusterProperties(cluster),\n        geometry: {\n            type: 'Point',\n            coordinates: [xLng(cluster.x), yLat(cluster.y)]\n        }\n    };\n}\n\nfunction getClusterProperties(cluster) {\n    var count = cluster.numPoints;\n    var abbrev = count >= 10000 ? Math.round(count / 1000) + 'k' :\n                 count >= 1000 ? (Math.round(count / 100) / 10) + 'k' : count;\n    return extend(extend({}, cluster.properties), {\n        cluster: true,\n        cluster_id: cluster.id,\n        point_count: count,\n        point_count_abbreviated: abbrev\n    });\n}\n\n// longitude/latitude to spherical mercator in [0..1] range\nfunction lngX(lng) {\n    return lng / 360 + 0.5;\n}\nfunction latY(lat) {\n    var sin = Math.sin(lat * Math.PI / 180),\n        y = (0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI);\n    return y < 0 ? 0 :\n           y > 1 ? 1 : y;\n}\n\n// spherical mercator to longitude/latitude\nfunction xLng(x) {\n    return (x - 0.5) * 360;\n}\nfunction yLat(y) {\n    var y2 = (180 - y * 360) * Math.PI / 180;\n    return 360 * Math.atan(Math.exp(y2)) / Math.PI - 90;\n}\n\nfunction extend(dest, src) {\n    for (var id in src) dest[id] = src[id];\n    return dest;\n}\n\nfunction getX(p) {\n    return p.x;\n}\nfunction getY(p) {\n    return p.y;\n}\n","'use strict';\n\nvar sort = require('./sort');\nvar range = require('./range');\nvar within = require('./within');\n\nmodule.exports = kdbush;\n\nfunction kdbush(points, getX, getY, nodeSize, ArrayType) {\n    return new KDBush(points, getX, getY, nodeSize, ArrayType);\n}\n\nfunction KDBush(points, getX, getY, nodeSize, ArrayType) {\n    getX = getX || defaultGetX;\n    getY = getY || defaultGetY;\n    ArrayType = ArrayType || Array;\n\n    this.nodeSize = nodeSize || 64;\n    this.points = points;\n\n    this.ids = new ArrayType(points.length);\n    this.coords = new ArrayType(points.length * 2);\n\n    for (var i = 0; i < points.length; i++) {\n        this.ids[i] = i;\n        this.coords[2 * i] = getX(points[i]);\n        this.coords[2 * i + 1] = getY(points[i]);\n    }\n\n    sort(this.ids, this.coords, this.nodeSize, 0, this.ids.length - 1, 0);\n}\n\nKDBush.prototype = {\n    range: function (minX, minY, maxX, maxY) {\n        return range(this.ids, this.coords, minX, minY, maxX, maxY, this.nodeSize);\n    },\n\n    within: function (x, y, r) {\n        return within(this.ids, this.coords, x, y, r, this.nodeSize);\n    }\n};\n\nfunction defaultGetX(p) { return p[0]; }\nfunction defaultGetY(p) { return p[1]; }\n","'use strict';\n\nmodule.exports = sortKD;\n\nfunction sortKD(ids, coords, nodeSize, left, right, depth) {\n    if (right - left <= nodeSize) return;\n\n    var m = Math.floor((left + right) / 2);\n\n    select(ids, coords, m, left, right, depth % 2);\n\n    sortKD(ids, coords, nodeSize, left, m - 1, depth + 1);\n    sortKD(ids, coords, nodeSize, m + 1, right, depth + 1);\n}\n\nfunction select(ids, coords, k, left, right, inc) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            select(ids, coords, k, newLeft, newRight, inc);\n        }\n\n        var t = coords[2 * k + inc];\n        var i = left;\n        var j = right;\n\n        swapItem(ids, coords, left, k);\n        if (coords[2 * right + inc] > t) swapItem(ids, coords, left, right);\n\n        while (i < j) {\n            swapItem(ids, coords, i, j);\n            i++;\n            j--;\n            while (coords[2 * i + inc] < t) i++;\n            while (coords[2 * j + inc] > t) j--;\n        }\n\n        if (coords[2 * left + inc] === t) swapItem(ids, coords, left, j);\n        else {\n            j++;\n            swapItem(ids, coords, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swapItem(ids, coords, i, j) {\n    swap(ids, i, j);\n    swap(coords, 2 * i, 2 * j);\n    swap(coords, 2 * i + 1, 2 * j + 1);\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n","'use strict';\n\nmodule.exports = range;\n\nfunction range(ids, coords, minX, minY, maxX, maxY, nodeSize) {\n    var stack = [0, ids.length - 1, 0];\n    var result = [];\n    var x, y;\n\n    while (stack.length) {\n        var axis = stack.pop();\n        var right = stack.pop();\n        var left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (var i = left; i <= right; i++) {\n                x = coords[2 * i];\n                y = coords[2 * i + 1];\n                if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        var m = Math.floor((left + right) / 2);\n\n        x = coords[2 * m];\n        y = coords[2 * m + 1];\n\n        if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[m]);\n\n        var nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? minX <= x : minY <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? maxX >= x : maxY >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n","'use strict';\n\nmodule.exports = within;\n\nfunction within(ids, coords, qx, qy, r, nodeSize) {\n    var stack = [0, ids.length - 1, 0];\n    var result = [];\n    var r2 = r * r;\n\n    while (stack.length) {\n        var axis = stack.pop();\n        var right = stack.pop();\n        var left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (var i = left; i <= right; i++) {\n                if (sqDist(coords[2 * i], coords[2 * i + 1], qx, qy) <= r2) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        var m = Math.floor((left + right) / 2);\n\n        var x = coords[2 * m];\n        var y = coords[2 * m + 1];\n\n        if (sqDist(x, y, qx, qy) <= r2) result.push(ids[m]);\n\n        var nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? qx - r <= x : qy - r <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? qx + r >= x : qy + r >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n\nfunction sqDist(ax, ay, bx, by) {\n    var dx = ax - bx;\n    var dy = ay - by;\n    return dx * dx + dy * dy;\n}\n","\n// calculate simplification data using optimized Douglas-Peucker algorithm\n\nexport default function simplify(coords, first, last, sqTolerance) {\n    var maxSqDist = sqTolerance;\n    var mid = (last - first) >> 1;\n    var minPosToMid = last - first;\n    var index;\n\n    var ax = coords[first];\n    var ay = coords[first + 1];\n    var bx = coords[last];\n    var by = coords[last + 1];\n\n    for (var i = first + 3; i < last; i += 3) {\n        var d = getSqSegDist(coords[i], coords[i + 1], ax, ay, bx, by);\n\n        if (d > maxSqDist) {\n            index = i;\n            maxSqDist = d;\n\n        } else if (d === maxSqDist) {\n            // a workaround to ensure we choose a pivot close to the middle of the list,\n            // reducing recursion depth, for certain degenerate inputs\n            // https://github.com/mapbox/geojson-vt/issues/104\n            var posToMid = Math.abs(i - mid);\n            if (posToMid < minPosToMid) {\n                index = i;\n                minPosToMid = posToMid;\n            }\n        }\n    }\n\n    if (maxSqDist > sqTolerance) {\n        if (index - first > 3) simplify(coords, first, index, sqTolerance);\n        coords[index + 2] = maxSqDist;\n        if (last - index > 3) simplify(coords, index, last, sqTolerance);\n    }\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(px, py, x, y, bx, by) {\n\n    var dx = bx - x;\n    var dy = by - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = bx;\n            y = by;\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = px - x;\n    dy = py - y;\n\n    return dx * dx + dy * dy;\n}\n","\nexport default function createFeature(id, type, geom, tags) {\n    var feature = {\n        id: typeof id === 'undefined' ? null : id,\n        type: type,\n        geometry: geom,\n        tags: tags,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n    calcBBox(feature);\n    return feature;\n}\n\nfunction calcBBox(feature) {\n    var geom = feature.geometry;\n    var type = feature.type;\n\n    if (type === 'Point' || type === 'MultiPoint' || type === 'LineString') {\n        calcLineBBox(feature, geom);\n\n    } else if (type === 'Polygon' || type === 'MultiLineString') {\n        for (var i = 0; i < geom.length; i++) {\n            calcLineBBox(feature, geom[i]);\n        }\n\n    } else if (type === 'MultiPolygon') {\n        for (i = 0; i < geom.length; i++) {\n            for (var j = 0; j < geom[i].length; j++) {\n                calcLineBBox(feature, geom[i][j]);\n            }\n        }\n    }\n}\n\nfunction calcLineBBox(feature, geom) {\n    for (var i = 0; i < geom.length; i += 3) {\n        feature.minX = Math.min(feature.minX, geom[i]);\n        feature.minY = Math.min(feature.minY, geom[i + 1]);\n        feature.maxX = Math.max(feature.maxX, geom[i]);\n        feature.maxY = Math.max(feature.maxY, geom[i + 1]);\n    }\n}\n","\nimport simplify from './simplify';\nimport createFeature from './feature';\n\n// converts GeoJSON feature into an intermediate projected JSON vector format with simplification data\n\nexport default function convert(data, options) {\n    var features = [];\n    if (data.type === 'FeatureCollection') {\n        for (var i = 0; i < data.features.length; i++) {\n            convertFeature(features, data.features[i], options, i);\n        }\n\n    } else if (data.type === 'Feature') {\n        convertFeature(features, data, options);\n\n    } else {\n        // single geometry or a geometry collection\n        convertFeature(features, {geometry: data}, options);\n    }\n\n    return features;\n}\n\nfunction convertFeature(features, geojson, options, index) {\n    if (!geojson.geometry) return;\n\n    var coords = geojson.geometry.coordinates;\n    var type = geojson.geometry.type;\n    var tolerance = Math.pow(options.tolerance / ((1 << options.maxZoom) * options.extent), 2);\n    var geometry = [];\n    var id = geojson.id;\n    if (options.promoteId) {\n        id = geojson.properties[options.promoteId];\n    } else if (options.generateId) {\n        id = index || 0;\n    }\n    if (type === 'Point') {\n        convertPoint(coords, geometry);\n\n    } else if (type === 'MultiPoint') {\n        for (var i = 0; i < coords.length; i++) {\n            convertPoint(coords[i], geometry);\n        }\n\n    } else if (type === 'LineString') {\n        convertLine(coords, geometry, tolerance, false);\n\n    } else if (type === 'MultiLineString') {\n        if (options.lineMetrics) {\n            // explode into linestrings to be able to track metrics\n            for (i = 0; i < coords.length; i++) {\n                geometry = [];\n                convertLine(coords[i], geometry, tolerance, false);\n                features.push(createFeature(id, 'LineString', geometry, geojson.properties));\n            }\n            return;\n        } else {\n            convertLines(coords, geometry, tolerance, false);\n        }\n\n    } else if (type === 'Polygon') {\n        convertLines(coords, geometry, tolerance, true);\n\n    } else if (type === 'MultiPolygon') {\n        for (i = 0; i < coords.length; i++) {\n            var polygon = [];\n            convertLines(coords[i], polygon, tolerance, true);\n            geometry.push(polygon);\n        }\n    } else if (type === 'GeometryCollection') {\n        for (i = 0; i < geojson.geometry.geometries.length; i++) {\n            convertFeature(features, {\n                id: id,\n                geometry: geojson.geometry.geometries[i],\n                properties: geojson.properties\n            }, options, index);\n        }\n        return;\n    } else {\n        throw new Error('Input data is not a valid GeoJSON object.');\n    }\n\n    features.push(createFeature(id, type, geometry, geojson.properties));\n}\n\nfunction convertPoint(coords, out) {\n    out.push(projectX(coords[0]));\n    out.push(projectY(coords[1]));\n    out.push(0);\n}\n\nfunction convertLine(ring, out, tolerance, isPolygon) {\n    var x0, y0;\n    var size = 0;\n\n    for (var j = 0; j < ring.length; j++) {\n        var x = projectX(ring[j][0]);\n        var y = projectY(ring[j][1]);\n\n        out.push(x);\n        out.push(y);\n        out.push(0);\n\n        if (j > 0) {\n            if (isPolygon) {\n                size += (x0 * y - x * y0) / 2; // area\n            } else {\n                size += Math.sqrt(Math.pow(x - x0, 2) + Math.pow(y - y0, 2)); // length\n            }\n        }\n        x0 = x;\n        y0 = y;\n    }\n\n    var last = out.length - 3;\n    out[2] = 1;\n    simplify(out, 0, last, tolerance);\n    out[last + 2] = 1;\n\n    out.size = Math.abs(size);\n    out.start = 0;\n    out.end = out.size;\n}\n\nfunction convertLines(rings, out, tolerance, isPolygon) {\n    for (var i = 0; i < rings.length; i++) {\n        var geom = [];\n        convertLine(rings[i], geom, tolerance, isPolygon);\n        out.push(geom);\n    }\n}\n\nfunction projectX(x) {\n    return x / 360 + 0.5;\n}\n\nfunction projectY(y) {\n    var sin = Math.sin(y * Math.PI / 180);\n    var y2 = 0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI;\n    return y2 < 0 ? 0 : y2 > 1 ? 1 : y2;\n}\n","\nimport createFeature from './feature';\n\n/* clip features between two axis-parallel lines:\n *     |        |\n *  ___|___     |     /\n * /   |   \\____|____/\n *     |        |\n */\n\nexport default function clip(features, scale, k1, k2, axis, minAll, maxAll, options) {\n\n    k1 /= scale;\n    k2 /= scale;\n\n    if (minAll >= k1 && maxAll < k2) return features; // trivial accept\n    else if (maxAll < k1 || minAll >= k2) return null; // trivial reject\n\n    var clipped = [];\n\n    for (var i = 0; i < features.length; i++) {\n\n        var feature = features[i];\n        var geometry = feature.geometry;\n        var type = feature.type;\n\n        var min = axis === 0 ? feature.minX : feature.minY;\n        var max = axis === 0 ? feature.maxX : feature.maxY;\n\n        if (min >= k1 && max < k2) { // trivial accept\n            clipped.push(feature);\n            continue;\n        } else if (max < k1 || min >= k2) { // trivial reject\n            continue;\n        }\n\n        var newGeometry = [];\n\n        if (type === 'Point' || type === 'MultiPoint') {\n            clipPoints(geometry, newGeometry, k1, k2, axis);\n\n        } else if (type === 'LineString') {\n            clipLine(geometry, newGeometry, k1, k2, axis, false, options.lineMetrics);\n\n        } else if (type === 'MultiLineString') {\n            clipLines(geometry, newGeometry, k1, k2, axis, false);\n\n        } else if (type === 'Polygon') {\n            clipLines(geometry, newGeometry, k1, k2, axis, true);\n\n        } else if (type === 'MultiPolygon') {\n            for (var j = 0; j < geometry.length; j++) {\n                var polygon = [];\n                clipLines(geometry[j], polygon, k1, k2, axis, true);\n                if (polygon.length) {\n                    newGeometry.push(polygon);\n                }\n            }\n        }\n\n        if (newGeometry.length) {\n            if (options.lineMetrics && type === 'LineString') {\n                for (j = 0; j < newGeometry.length; j++) {\n                    clipped.push(createFeature(feature.id, type, newGeometry[j], feature.tags));\n                }\n                continue;\n            }\n\n            if (type === 'LineString' || type === 'MultiLineString') {\n                if (newGeometry.length === 1) {\n                    type = 'LineString';\n                    newGeometry = newGeometry[0];\n                } else {\n                    type = 'MultiLineString';\n                }\n            }\n            if (type === 'Point' || type === 'MultiPoint') {\n                type = newGeometry.length === 3 ? 'Point' : 'MultiPoint';\n            }\n\n            clipped.push(createFeature(feature.id, type, newGeometry, feature.tags));\n        }\n    }\n\n    return clipped.length ? clipped : null;\n}\n\nfunction clipPoints(geom, newGeom, k1, k2, axis) {\n    for (var i = 0; i < geom.length; i += 3) {\n        var a = geom[i + axis];\n\n        if (a >= k1 && a <= k2) {\n            newGeom.push(geom[i]);\n            newGeom.push(geom[i + 1]);\n            newGeom.push(geom[i + 2]);\n        }\n    }\n}\n\nfunction clipLine(geom, newGeom, k1, k2, axis, isPolygon, trackMetrics) {\n\n    var slice = newSlice(geom);\n    var intersect = axis === 0 ? intersectX : intersectY;\n    var len = geom.start;\n    var segLen, t;\n\n    for (var i = 0; i < geom.length - 3; i += 3) {\n        var ax = geom[i];\n        var ay = geom[i + 1];\n        var az = geom[i + 2];\n        var bx = geom[i + 3];\n        var by = geom[i + 4];\n        var a = axis === 0 ? ax : ay;\n        var b = axis === 0 ? bx : by;\n        var exited = false;\n\n        if (trackMetrics) segLen = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n\n        if (a < k1) {\n            // ---|-->  | (line enters the clip region from the left)\n            if (b > k1) {\n                t = intersect(slice, ax, ay, bx, by, k1);\n                if (trackMetrics) slice.start = len + segLen * t;\n            }\n        } else if (a > k2) {\n            // |  <--|--- (line enters the clip region from the right)\n            if (b < k2) {\n                t = intersect(slice, ax, ay, bx, by, k2);\n                if (trackMetrics) slice.start = len + segLen * t;\n            }\n        } else {\n            addPoint(slice, ax, ay, az);\n        }\n        if (b < k1 && a >= k1) {\n            // <--|---  | or <--|-----|--- (line exits the clip region on the left)\n            t = intersect(slice, ax, ay, bx, by, k1);\n            exited = true;\n        }\n        if (b > k2 && a <= k2) {\n            // |  ---|--> or ---|-----|--> (line exits the clip region on the right)\n            t = intersect(slice, ax, ay, bx, by, k2);\n            exited = true;\n        }\n\n        if (!isPolygon && exited) {\n            if (trackMetrics) slice.end = len + segLen * t;\n            newGeom.push(slice);\n            slice = newSlice(geom);\n        }\n\n        if (trackMetrics) len += segLen;\n    }\n\n    // add the last point\n    var last = geom.length - 3;\n    ax = geom[last];\n    ay = geom[last + 1];\n    az = geom[last + 2];\n    a = axis === 0 ? ax : ay;\n    if (a >= k1 && a <= k2) addPoint(slice, ax, ay, az);\n\n    // close the polygon if its endpoints are not the same after clipping\n    last = slice.length - 3;\n    if (isPolygon && last >= 3 && (slice[last] !== slice[0] || slice[last + 1] !== slice[1])) {\n        addPoint(slice, slice[0], slice[1], slice[2]);\n    }\n\n    // add the final slice\n    if (slice.length) {\n        newGeom.push(slice);\n    }\n}\n\nfunction newSlice(line) {\n    var slice = [];\n    slice.size = line.size;\n    slice.start = line.start;\n    slice.end = line.end;\n    return slice;\n}\n\nfunction clipLines(geom, newGeom, k1, k2, axis, isPolygon) {\n    for (var i = 0; i < geom.length; i++) {\n        clipLine(geom[i], newGeom, k1, k2, axis, isPolygon, false);\n    }\n}\n\nfunction addPoint(out, x, y, z) {\n    out.push(x);\n    out.push(y);\n    out.push(z);\n}\n\nfunction intersectX(out, ax, ay, bx, by, x) {\n    var t = (x - ax) / (bx - ax);\n    out.push(x);\n    out.push(ay + (by - ay) * t);\n    out.push(1);\n    return t;\n}\n\nfunction intersectY(out, ax, ay, bx, by, y) {\n    var t = (y - ay) / (by - ay);\n    out.push(ax + (bx - ax) * t);\n    out.push(y);\n    out.push(1);\n    return t;\n}\n","\nimport clip from './clip';\nimport createFeature from './feature';\n\nexport default function wrap(features, options) {\n    var buffer = options.buffer / options.extent;\n    var merged = features;\n    var left  = clip(features, 1, -1 - buffer, buffer,     0, -1, 2, options); // left world copy\n    var right = clip(features, 1,  1 - buffer, 2 + buffer, 0, -1, 2, options); // right world copy\n\n    if (left || right) {\n        merged = clip(features, 1, -buffer, 1 + buffer, 0, -1, 2, options) || []; // center world copy\n\n        if (left) merged = shiftFeatureCoords(left, 1).concat(merged); // merge left into center\n        if (right) merged = merged.concat(shiftFeatureCoords(right, -1)); // merge right into center\n    }\n\n    return merged;\n}\n\nfunction shiftFeatureCoords(features, offset) {\n    var newFeatures = [];\n\n    for (var i = 0; i < features.length; i++) {\n        var feature = features[i],\n            type = feature.type;\n\n        var newGeometry;\n\n        if (type === 'Point' || type === 'MultiPoint' || type === 'LineString') {\n            newGeometry = shiftCoords(feature.geometry, offset);\n\n        } else if (type === 'MultiLineString' || type === 'Polygon') {\n            newGeometry = [];\n            for (var j = 0; j < feature.geometry.length; j++) {\n                newGeometry.push(shiftCoords(feature.geometry[j], offset));\n            }\n        } else if (type === 'MultiPolygon') {\n            newGeometry = [];\n            for (j = 0; j < feature.geometry.length; j++) {\n                var newPolygon = [];\n                for (var k = 0; k < feature.geometry[j].length; k++) {\n                    newPolygon.push(shiftCoords(feature.geometry[j][k], offset));\n                }\n                newGeometry.push(newPolygon);\n            }\n        }\n\n        newFeatures.push(createFeature(feature.id, type, newGeometry, feature.tags));\n    }\n\n    return newFeatures;\n}\n\nfunction shiftCoords(points, offset) {\n    var newPoints = [];\n    newPoints.size = points.size;\n\n    if (points.start !== undefined) {\n        newPoints.start = points.start;\n        newPoints.end = points.end;\n    }\n\n    for (var i = 0; i < points.length; i += 3) {\n        newPoints.push(points[i] + offset, points[i + 1], points[i + 2]);\n    }\n    return newPoints;\n}\n","\n// Transforms the coordinates of each feature in the given tile from\n// mercator-projected space into (extent x extent) tile space.\nexport default function transformTile(tile, extent) {\n    if (tile.transformed) return tile;\n\n    var z2 = 1 << tile.z,\n        tx = tile.x,\n        ty = tile.y,\n        i, j, k;\n\n    for (i = 0; i < tile.features.length; i++) {\n        var feature = tile.features[i],\n            geom = feature.geometry,\n            type = feature.type;\n\n        feature.geometry = [];\n\n        if (type === 1) {\n            for (j = 0; j < geom.length; j += 2) {\n                feature.geometry.push(transformPoint(geom[j], geom[j + 1], extent, z2, tx, ty));\n            }\n        } else {\n            for (j = 0; j < geom.length; j++) {\n                var ring = [];\n                for (k = 0; k < geom[j].length; k += 2) {\n                    ring.push(transformPoint(geom[j][k], geom[j][k + 1], extent, z2, tx, ty));\n                }\n                feature.geometry.push(ring);\n            }\n        }\n    }\n\n    tile.transformed = true;\n\n    return tile;\n}\n\nfunction transformPoint(x, y, extent, z2, tx, ty) {\n    return [\n        Math.round(extent * (x * z2 - tx)),\n        Math.round(extent * (y * z2 - ty))];\n}\n","\nexport default function createTile(features, z, tx, ty, options) {\n    var tolerance = z === options.maxZoom ? 0 : options.tolerance / ((1 << z) * options.extent);\n    var tile = {\n        features: [],\n        numPoints: 0,\n        numSimplified: 0,\n        numFeatures: 0,\n        source: null,\n        x: tx,\n        y: ty,\n        z: z,\n        transformed: false,\n        minX: 2,\n        minY: 1,\n        maxX: -1,\n        maxY: 0\n    };\n    for (var i = 0; i < features.length; i++) {\n        tile.numFeatures++;\n        addFeature(tile, features[i], tolerance, options);\n\n        var minX = features[i].minX;\n        var minY = features[i].minY;\n        var maxX = features[i].maxX;\n        var maxY = features[i].maxY;\n\n        if (minX < tile.minX) tile.minX = minX;\n        if (minY < tile.minY) tile.minY = minY;\n        if (maxX > tile.maxX) tile.maxX = maxX;\n        if (maxY > tile.maxY) tile.maxY = maxY;\n    }\n    return tile;\n}\n\nfunction addFeature(tile, feature, tolerance, options) {\n\n    var geom = feature.geometry,\n        type = feature.type,\n        simplified = [];\n\n    if (type === 'Point' || type === 'MultiPoint') {\n        for (var i = 0; i < geom.length; i += 3) {\n            simplified.push(geom[i]);\n            simplified.push(geom[i + 1]);\n            tile.numPoints++;\n            tile.numSimplified++;\n        }\n\n    } else if (type === 'LineString') {\n        addLine(simplified, geom, tile, tolerance, false, false);\n\n    } else if (type === 'MultiLineString' || type === 'Polygon') {\n        for (i = 0; i < geom.length; i++) {\n            addLine(simplified, geom[i], tile, tolerance, type === 'Polygon', i === 0);\n        }\n\n    } else if (type === 'MultiPolygon') {\n\n        for (var k = 0; k < geom.length; k++) {\n            var polygon = geom[k];\n            for (i = 0; i < polygon.length; i++) {\n                addLine(simplified, polygon[i], tile, tolerance, true, i === 0);\n            }\n        }\n    }\n\n    if (simplified.length) {\n        var tags = feature.tags || null;\n        if (type === 'LineString' && options.lineMetrics) {\n            tags = {};\n            for (var key in feature.tags) tags[key] = feature.tags[key];\n            tags['mapbox_clip_start'] = geom.start / geom.size;\n            tags['mapbox_clip_end'] = geom.end / geom.size;\n        }\n        var tileFeature = {\n            geometry: simplified,\n            type: type === 'Polygon' || type === 'MultiPolygon' ? 3 :\n                type === 'LineString' || type === 'MultiLineString' ? 2 : 1,\n            tags: tags\n        };\n        if (feature.id !== null) {\n            tileFeature.id = feature.id;\n        }\n        tile.features.push(tileFeature);\n    }\n}\n\nfunction addLine(result, geom, tile, tolerance, isPolygon, isOuter) {\n    var sqTolerance = tolerance * tolerance;\n\n    if (tolerance > 0 && (geom.size < (isPolygon ? sqTolerance : tolerance))) {\n        tile.numPoints += geom.length / 3;\n        return;\n    }\n\n    var ring = [];\n\n    for (var i = 0; i < geom.length; i += 3) {\n        if (tolerance === 0 || geom[i + 2] > sqTolerance) {\n            tile.numSimplified++;\n            ring.push(geom[i]);\n            ring.push(geom[i + 1]);\n        }\n        tile.numPoints++;\n    }\n\n    if (isPolygon) rewind(ring, isOuter);\n\n    result.push(ring);\n}\n\nfunction rewind(ring, clockwise) {\n    var area = 0;\n    for (var i = 0, len = ring.length, j = len - 2; i < len; j = i, i += 2) {\n        area += (ring[i] - ring[j]) * (ring[i + 1] + ring[j + 1]);\n    }\n    if (area > 0 === clockwise) {\n        for (i = 0, len = ring.length; i < len / 2; i += 2) {\n            var x = ring[i];\n            var y = ring[i + 1];\n            ring[i] = ring[len - 2 - i];\n            ring[i + 1] = ring[len - 1 - i];\n            ring[len - 2 - i] = x;\n            ring[len - 1 - i] = y;\n        }\n    }\n}\n","\nimport convert from './convert';     // GeoJSON conversion and preprocessing\nimport clip from './clip';           // stripe clipping algorithm\nimport wrap from './wrap';           // date line processing\nimport transform from './transform'; // coordinate transformation\nimport createTile from './tile';     // final simplified tile generation\n\nexport default function geojsonvt(data, options) {\n    return new GeoJSONVT(data, options);\n}\n\nfunction GeoJSONVT(data, options) {\n    options = this.options = extend(Object.create(this.options), options);\n\n    var debug = options.debug;\n\n    if (debug) console.time('preprocess data');\n\n    if (options.maxZoom < 0 || options.maxZoom > 24) throw new Error('maxZoom should be in the 0-24 range');\n    if (options.promoteId && options.generateId) throw new Error('promoteId and generateId cannot be used together.');\n\n    var features = convert(data, options);\n\n    this.tiles = {};\n    this.tileCoords = [];\n\n    if (debug) {\n        console.timeEnd('preprocess data');\n        console.log('index: maxZoom: %d, maxPoints: %d', options.indexMaxZoom, options.indexMaxPoints);\n        console.time('generate tiles');\n        this.stats = {};\n        this.total = 0;\n    }\n\n    features = wrap(features, options);\n\n    // start slicing from the top tile down\n    if (features.length) this.splitTile(features, 0, 0, 0);\n\n    if (debug) {\n        if (features.length) console.log('features: %d, points: %d', this.tiles[0].numFeatures, this.tiles[0].numPoints);\n        console.timeEnd('generate tiles');\n        console.log('tiles generated:', this.total, JSON.stringify(this.stats));\n    }\n}\n\nGeoJSONVT.prototype.options = {\n    maxZoom: 14,            // max zoom to preserve detail on\n    indexMaxZoom: 5,        // max zoom in the tile index\n    indexMaxPoints: 100000, // max number of points per tile in the tile index\n    tolerance: 3,           // simplification tolerance (higher means simpler)\n    extent: 4096,           // tile extent\n    buffer: 64,             // tile buffer on each side\n    lineMetrics: false,     // whether to calculate line metrics\n    promoteId: null,        // name of a feature property to be promoted to feature.id\n    generateId: false,      // whether to generate feature ids. Cannot be used with promoteId\n    debug: 0                // logging level (0, 1 or 2)\n};\n\nGeoJSONVT.prototype.splitTile = function (features, z, x, y, cz, cx, cy) {\n\n    var stack = [features, z, x, y],\n        options = this.options,\n        debug = options.debug;\n\n    // avoid recursion by using a processing queue\n    while (stack.length) {\n        y = stack.pop();\n        x = stack.pop();\n        z = stack.pop();\n        features = stack.pop();\n\n        var z2 = 1 << z,\n            id = toID(z, x, y),\n            tile = this.tiles[id];\n\n        if (!tile) {\n            if (debug > 1) console.time('creation');\n\n            tile = this.tiles[id] = createTile(features, z, x, y, options);\n            this.tileCoords.push({z: z, x: x, y: y});\n\n            if (debug) {\n                if (debug > 1) {\n                    console.log('tile z%d-%d-%d (features: %d, points: %d, simplified: %d)',\n                        z, x, y, tile.numFeatures, tile.numPoints, tile.numSimplified);\n                    console.timeEnd('creation');\n                }\n                var key = 'z' + z;\n                this.stats[key] = (this.stats[key] || 0) + 1;\n                this.total++;\n            }\n        }\n\n        // save reference to original geometry in tile so that we can drill down later if we stop now\n        tile.source = features;\n\n        // if it's the first-pass tiling\n        if (!cz) {\n            // stop tiling if we reached max zoom, or if the tile is too simple\n            if (z === options.indexMaxZoom || tile.numPoints <= options.indexMaxPoints) continue;\n\n        // if a drilldown to a specific tile\n        } else {\n            // stop tiling if we reached base zoom or our target tile zoom\n            if (z === options.maxZoom || z === cz) continue;\n\n            // stop tiling if it's not an ancestor of the target tile\n            var m = 1 << (cz - z);\n            if (x !== Math.floor(cx / m) || y !== Math.floor(cy / m)) continue;\n        }\n\n        // if we slice further down, no need to keep source geometry\n        tile.source = null;\n\n        if (features.length === 0) continue;\n\n        if (debug > 1) console.time('clipping');\n\n        // values we'll use for clipping\n        var k1 = 0.5 * options.buffer / options.extent,\n            k2 = 0.5 - k1,\n            k3 = 0.5 + k1,\n            k4 = 1 + k1,\n            tl, bl, tr, br, left, right;\n\n        tl = bl = tr = br = null;\n\n        left  = clip(features, z2, x - k1, x + k3, 0, tile.minX, tile.maxX, options);\n        right = clip(features, z2, x + k2, x + k4, 0, tile.minX, tile.maxX, options);\n        features = null;\n\n        if (left) {\n            tl = clip(left, z2, y - k1, y + k3, 1, tile.minY, tile.maxY, options);\n            bl = clip(left, z2, y + k2, y + k4, 1, tile.minY, tile.maxY, options);\n            left = null;\n        }\n\n        if (right) {\n            tr = clip(right, z2, y - k1, y + k3, 1, tile.minY, tile.maxY, options);\n            br = clip(right, z2, y + k2, y + k4, 1, tile.minY, tile.maxY, options);\n            right = null;\n        }\n\n        if (debug > 1) console.timeEnd('clipping');\n\n        stack.push(tl || [], z + 1, x * 2,     y * 2);\n        stack.push(bl || [], z + 1, x * 2,     y * 2 + 1);\n        stack.push(tr || [], z + 1, x * 2 + 1, y * 2);\n        stack.push(br || [], z + 1, x * 2 + 1, y * 2 + 1);\n    }\n};\n\nGeoJSONVT.prototype.getTile = function (z, x, y) {\n    var options = this.options,\n        extent = options.extent,\n        debug = options.debug;\n\n    if (z < 0 || z > 24) return null;\n\n    var z2 = 1 << z;\n    x = ((x % z2) + z2) % z2; // wrap tile x coordinate\n\n    var id = toID(z, x, y);\n    if (this.tiles[id]) return transform(this.tiles[id], extent);\n\n    if (debug > 1) console.log('drilling down to z%d-%d-%d', z, x, y);\n\n    var z0 = z,\n        x0 = x,\n        y0 = y,\n        parent;\n\n    while (!parent && z0 > 0) {\n        z0--;\n        x0 = Math.floor(x0 / 2);\n        y0 = Math.floor(y0 / 2);\n        parent = this.tiles[toID(z0, x0, y0)];\n    }\n\n    if (!parent || !parent.source) return null;\n\n    // if we found a parent tile containing the original geometry, we can drill down from it\n    if (debug > 1) console.log('found parent tile z%d-%d-%d', z0, x0, y0);\n\n    if (debug > 1) console.time('drilling down');\n    this.splitTile(parent.source, z0, x0, y0, z, x, y);\n    if (debug > 1) console.timeEnd('drilling down');\n\n    return this.tiles[id] ? transform(this.tiles[id], extent) : null;\n};\n\nfunction toID(z, x, y) {\n    return (((1 << z) * y + x) * 32) + z;\n}\n\nfunction extend(dest, src) {\n    for (var i in src) dest[i] = src[i];\n    return dest;\n}\n"],"sourceRoot":""}